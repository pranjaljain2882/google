/*!
*  filename: ej2-diagrams.min.js
*  version : 21.2.5
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("SyncfusionBase"),require("SyncfusionNavigations"),require("SyncfusionData"),require("SyncfusionPopups")):"function"==typeof define&&define.amd?define(["SyncfusionBase","SyncfusionNavigations","SyncfusionData","SyncfusionPopups"],e):"object"==typeof exports?exports.SyncfusionDiagrams=e(require("SyncfusionBase"),require("SyncfusionNavigations"),require("SyncfusionData"),require("SyncfusionPopups")):t.SyncfusionDiagrams=e(t.SyncfusionBase,t.SyncfusionNavigations,t.SyncfusionData,t.SyncfusionPopups)}(this,function(t,e,i,r){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=90)}([function(e,i){e.exports=t},function(t,e,i){"use strict";i.d(e,"i",function(){return r}),i.d(e,"c",function(){return n}),i.d(e,"w",function(){return o}),i.d(e,"g",function(){return a}),i.d(e,"x",function(){return s}),i.d(e,"y",function(){return h}),i.d(e,"h",function(){return d}),i.d(e,"b",function(){return l}),i.d(e,"f",function(){return c}),i.d(e,"e",function(){return p}),i.d(e,"l",function(){return g}),i.d(e,"j",function(){return u}),i.d(e,"k",function(){return f}),i.d(e,"n",function(){return m}),i.d(e,"z",function(){return y}),i.d(e,"v",function(){return v}),i.d(e,"u",function(){return b}),i.d(e,"p",function(){return S}),i.d(e,"q",function(){return w}),i.d(e,"a",function(){return x}),i.d(e,"t",function(){return I}),i.d(e,"o",function(){return P}),i.d(e,"r",function(){return C}),i.d(e,"d",function(){return z}),i.d(e,"A",function(){return T}),i.d(e,"B",function(){return A}),i.d(e,"C",function(){return L}),i.d(e,"m",function(){return O}),i.d(e,"s",function(){return E});var r;!function(t){t[t.Default=0]="Default",t[t.expandNode=2]="expandNode",t[t.interaction=4]="interaction",t[t.GroupingInProgress=8]="GroupingInProgress",t[t.GroupClipboardInProcess=16]="GroupClipboardInProcess",t[t.ClearObject=32]="ClearObject"}(r||(r={}));var n;!function(t){t[t.Visible=1]="Visible",t[t.Hidden=2]="Hidden",t[t.Hover=4]="Hover",t[t.Connect=8]="Connect"}(n||(n={}));var o;!function(t){t[t.None=0]="None",t[t.ShowHorizontalLines=1]="ShowHorizontalLines",t[t.ShowVerticalLines=2]="ShowVerticalLines",t[t.ShowLines=3]="ShowLines",t[t.SnapToHorizontalLines=4]="SnapToHorizontalLines",t[t.SnapToVerticalLines=8]="SnapToVerticalLines",t[t.SnapToLines=12]="SnapToLines",t[t.SnapToObject=16]="SnapToObject",t[t.All=31]="All"}(o||(o={}));var a;!function(t){t[t.None=1]="None",t[t.ConnectorSourceThumb=2]="ConnectorSourceThumb",t[t.ConnectorTargetThumb=4]="ConnectorTargetThumb",t[t.ResizeSouthEast=8]="ResizeSouthEast",t[t.ResizeSouthWest=16]="ResizeSouthWest",t[t.ResizeNorthEast=32]="ResizeNorthEast",t[t.ResizeNorthWest=64]="ResizeNorthWest",t[t.ResizeEast=128]="ResizeEast",t[t.ResizeWest=256]="ResizeWest",t[t.ResizeSouth=512]="ResizeSouth",t[t.ResizeNorth=1024]="ResizeNorth",t[t.Rotate=2048]="Rotate",t[t.UserHandle=4096]="UserHandle",t[t.ToolTip=8192]="ToolTip",t[t.ResizeAll=2046]="ResizeAll",t[t.All=16382]="All"}(a||(a={}));var s;!function(t){t.SamePoint="SamePoint",t.DifferentPoint="DifferentPoint"}(s||(s={}));var h;!function(t){t.Linear="Linear",t.Nonlinear="Nonlinear"}(h||(h={}));var d;!function(t){t[t.None=1]="None",t[t.Select=2]="Select",t[t.Delete=4]="Delete",t[t.Drag=8]="Drag",t[t.DragSourceEnd=16]="DragSourceEnd",t[t.DragTargetEnd=32]="DragTargetEnd",t[t.DragSegmentThumb=64]="DragSegmentThumb",t[t.AllowDrop=128]="AllowDrop",t[t.Bridging=256]="Bridging",t[t.BridgeObstacle=512]="BridgeObstacle",t[t.InheritBridging=1024]="InheritBridging",t[t.PointerEvents=2048]="PointerEvents",t[t.Tooltip=4096]="Tooltip",t[t.InheritTooltip=8192]="InheritTooltip",t[t.Interaction=4218]="Interaction",t[t.ReadOnly=16384]="ReadOnly",t[t.LineRouting=32768]="LineRouting",t[t.InheritLineRouting=65536]="InheritLineRouting",t[t.ConnectToNearByNode=131072]="ConnectToNearByNode",t[t.ConnectToNearByPort=262144]="ConnectToNearByPort",t[t.ConnectToNearByElement=393216]="ConnectToNearByElement",t[t.Default=470590]="Default"}(d||(d={}));var l;!function(t){t[t.ReadOnly=2]="ReadOnly",t[t.InheritReadOnly=4]="InheritReadOnly",t[t.Select=8]="Select",t[t.Drag=16]="Drag",t[t.Resize=32]="Resize",t[t.Rotate=64]="Rotate",t[t.Interaction=120]="Interaction",t[t.None=0]="None"}(l||(l={}));var c;!function(t){t[t.None=0]="None",t[t.Select=2]="Select",t[t.Drag=4]="Drag",t[t.Rotate=8]="Rotate",t[t.Shadow=16]="Shadow",t[t.PointerEvents=32]="PointerEvents",t[t.Delete=64]="Delete",t[t.InConnect=128]="InConnect",t[t.OutConnect=256]="OutConnect",t[t.Individual=512]="Individual",t[t.Expandable=1024]="Expandable",t[t.AllowDrop=2048]="AllowDrop",t[t.Inherit=78]="Inherit",t[t.ResizeNorthEast=4096]="ResizeNorthEast",t[t.ResizeEast=8192]="ResizeEast",t[t.ResizeSouthEast=16384]="ResizeSouthEast",t[t.ResizeSouth=32768]="ResizeSouth",t[t.ResizeSouthWest=65536]="ResizeSouthWest",t[t.ResizeWest=131072]="ResizeWest",t[t.ResizeNorthWest=262144]="ResizeNorthWest",t[t.ResizeNorth=524288]="ResizeNorth",t[t.Resize=1044480]="Resize",t[t.AspectRatio=1048576]="AspectRatio",t[t.Tooltip=2097152]="Tooltip",t[t.InheritTooltip=4194304]="InheritTooltip",t[t.ReadOnly=8388608]="ReadOnly",t[t.HideThumbs=16777216]="HideThumbs",t[t.AllowMovingOutsideLane=33554432]="AllowMovingOutsideLane",t[t.Default=5240814]="Default"}(c||(c={}));var p;!function(t){t[t.None=0]="None",t[t.ElementIsPort=2]="ElementIsPort",t[t.ElementIsGroup=4]="ElementIsGroup",t[t.HorizontalLaneHeader=8]="HorizontalLaneHeader"}(p||(p={}));var g;!function(t){t[t.Rotate=2]="Rotate",t[t.ConnectorSource=4]="ConnectorSource",t[t.ConnectorTarget=8]="ConnectorTarget",t[t.ResizeNorthEast=16]="ResizeNorthEast",t[t.ResizeEast=32]="ResizeEast",t[t.ResizeSouthEast=64]="ResizeSouthEast",t[t.ResizeSouth=128]="ResizeSouth",t[t.ResizeSouthWest=256]="ResizeSouthWest",t[t.ResizeWest=512]="ResizeWest",t[t.ResizeNorthWest=1024]="ResizeNorthWest",t[t.ResizeNorth=2048]="ResizeNorth",t[t.Default=4094]="Default"}(g||(g={}));var u;!function(t){t[t.None=1]="None",t[t.Bridging=2]="Bridging",t[t.UndoRedo=4]="UndoRedo",t[t.Tooltip=8]="Tooltip",t[t.UserInteraction=16]="UserInteraction",t[t.ApiUpdate=32]="ApiUpdate",t[t.PageEditable=48]="PageEditable",t[t.Zoom=64]="Zoom",t[t.PanX=128]="PanX",t[t.PanY=256]="PanY",t[t.Pan=384]="Pan",t[t.ZoomTextEdit=512]="ZoomTextEdit",t[t.Virtualization=1024]="Virtualization",t[t.LineRouting=2048]="LineRouting",t[t.Default=500]="Default"}(u||(u={}));var f;!function(t){t[t.None=0]="None",t[t.SingleSelect=1]="SingleSelect",t[t.MultipleSelect=2]="MultipleSelect",t[t.ZoomPan=4]="ZoomPan",t[t.DrawOnce=8]="DrawOnce",t[t.ContinuousDraw=16]="ContinuousDraw",t[t.Default=3]="Default"}(f||(f={}));var m;!function(t){t[t.Self=1]="Self",t[t.Parent=2]="Parent"}(m||(m={}));var y;!function(t){t[t.Canvas=0]="Canvas",t[t.Svg=1]="Svg"}(y||(y={}));var v;!function(t){t[t.None=0]="None",t[t.Control=1]="Control",t[t.Meta=1]="Meta",t[t.Alt=2]="Alt",t[t.Shift=4]="Shift"}(v||(v={}));var b;!function(t){t[t.None=null]="None",t[t.Number0=0]="Number0",t[t.Number1=1]="Number1",t[t.Number2=2]="Number2",t[t.Number3=3]="Number3",t[t.Number4=4]="Number4",t[t.Number5=5]="Number5",t[t.Number6=6]="Number6",t[t.Number7=7]="Number7",t[t.Number8=8]="Number8",t[t.Number9=9]="Number9",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.Delete=46]="Delete",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.BackSpace=8]="BackSpace",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.Star=56]="Star",t[t.Plus=187]="Plus",t[t.Minus=189]="Minus"}(b||(b={}));var S;!function(t){t[t.Render=2]="Render",t[t.PublicMethod=4]="PublicMethod",t[t.ToolAction=8]="ToolAction",t[t.UndoRedo=16]="UndoRedo",t[t.TextEdit=32]="TextEdit",t[t.Group=64]="Group",t[t.Clear=128]="Clear",t[t.PreventClearSelection=256]="PreventClearSelection",t[t.Interactions=512]="Interactions",t[t.PreventHistory=1024]="PreventHistory",t[t.PreventIconsUpdate=2048]="PreventIconsUpdate",t[t.PreventCollectionChangeOnDragOver=4096]="PreventCollectionChangeOnDragOver",t[t.PreventZIndexOnDragging=8192]="PreventZIndexOnDragging",t[t.isGroupDragging=16384]="isGroupDragging",t[t.DragUsingMouse=32768]="DragUsingMouse",t[t.DecoratorPropertyChange=65536]="DecoratorPropertyChange",t[t.PreventLaneContainerUpdate=131072]="PreventLaneContainerUpdate"}(S||(S={}));var w;!function(t){t[t.None=2]="None",t[t.DrawSelectorBorder=4]="DrawSelectorBorder",t[t.PreventRenderSelector=8]="PreventRenderSelector"}(w||(w={}));var x;!function(t){t[t.None=0]="None",t[t.PreventDrag=2]="PreventDrag",t[t.PreventScale=4]="PreventScale",t[t.PreventDataInit=8]="PreventDataInit",t[t.hScrollbarMoved=16]="hScrollbarMoved",t[t.vScrollbarMoved=32]="vScrollbarMoved",t[t.AnimationClick=64]="AnimationClick",t[t.EnableGroupAction=128]="EnableGroupAction",t[t.PanInProgress=256]="PanInProgress",t[t.OverViewAction=512]="OverViewAction"}(x||(x={}));var I;!function(t){t[t.None=0]="None",t[t.PropertyChange=1024]="PropertyChange",t[t.Interaction=2048]="Interaction"}(I||(I={}));var P;!function(t){t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(P||(P={}));var C;!function(t){t[t.collectionChange=0]="collectionChange",t[t.rotateChange=1]="rotateChange",t[t.positionChange=2]="positionChange",t[t.propertyChange=3]="propertyChange",t[t.selectionChange=4]="selectionChange",t[t.sizeChange=5]="sizeChange",t[t.drop=6]="drop",t[t.sourcePointChange=7]="sourcePointChange",t[t.targetPointChange=8]="targetPointChange",t[t.connectionChange=9]="connectionChange",t[t.animationComplete=10]="animationComplete",t[t.click=11]="click",t[t.doubleClick=12]="doubleClick",t[t.scrollChange=13]="scrollChange",t[t.dragEnter=14]="dragEnter",t[t.dragLeave=15]="dragLeave",t[t.dragOver=16]="dragOver",t[t.textEdit=17]="textEdit",t[t.paletteSelectionChange=18]="paletteSelectionChange",t[t.historyChange=19]="historyChange",t[t.mouseEnter=20]="mouseEnter",t[t.mouseLeave=21]="mouseLeave",t[t.mouseOver=22]="mouseOver",t[t.expandStateChange=23]="expandStateChange",t[t.segmentCollectionChange=24]="segmentCollectionChange",t[t.commandExecute=25]="commandExecute",t[t.historyStateChange=26]="historyStateChange",t[t.onUserHandleMouseDown=27]="onUserHandleMouseDown",t[t.onUserHandleMouseUp=28]="onUserHandleMouseUp",t[t.onUserHandleMouseEnter=29]="onUserHandleMouseEnter",t[t.onUserHandleMouseLeave=30]="onUserHandleMouseLeave",t[t.onImageLoad=31]="onImageLoad",t[t.onDoBindingInit=32]="onDoBindingInit",t[t.keyUp=33]="keyUp",t[t.keyDown=34]="keyDown",t[t.fixedUserHandleClick=35]="fixedUserHandleClick",t[t.elementDraw=36]="elementDraw",t[t.mouseWheel=37]="mouseWheel",t[t.segmentChange=38]="segmentChange"}(C||(C={}));var z;!function(t){t[t.None=1]="None",t[t.Drag=2]="Drag",t[t.Draw=4]="Draw",t[t.InConnect=8]="InConnect",t[t.OutConnect=16]="OutConnect",t[t.Default=24]="Default"}(z||(z={}));var O,T="contextMenuClick",A="contextMenuOpen",L="contextMenuBeforeItemRender";!function(t){t[t.None=1]="None",t[t.Source=2]="Source",t[t.Target=4]="Target",t[t.Intermediate=8]="Intermediate",t[t.All=14]="All"}(O||(O={}));var E;!function(t){t[t.None=0]="None",t[t.SymmetricAngle=2]="SymmetricAngle",t[t.SymmetricDistance=4]="SymmetricDistance",t[t.Default=6]="Default"}(E||(E={}))},function(t,e,i){"use strict";function r(t,e){for(var i=[],r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)];t.containsRect(n.wrapper.bounds)&&i.push(n)}return i}function n(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].id===e)return!0;return!1}function o(t){var e;return t&&(t.type?e="Connector":t.shape&&!t.type&&(e="Node")),e}function a(t,e){e instanceof Wt.a&&(t.shape.header||(e.shape.hasHeader=!1))}function s(t,e,i,r){return r=e?r:void 0!==t[i-1]?t[i-1]+r:0}function h(t,e){var i=[];if(e)i=t;else{for(var r=0;r<t.length;r++)i.push(t[parseInt(r.toString(),10)]);i.push(t[i.length-2]),i.push(t[i.length-2])}return i}function d(t){for(var e=0;e<t.ports.length;e++)t.ports[parseInt(e.toString(),10)].inEdges=[],t.ports[parseInt(e.toString(),10)].outEdges=[];return t}function l(t,e){if(e instanceof Wt.a){switch(i.i(oe.isBlazor)()?t.shape.umlActivityShape:t.shape.shape){case"JoinNode":t.width||(e.width=20),t.height||(e.height=90),t.style&&t.style.fill||(e.style.fill="black");break;case"ForkNode":t.width||(e.width=90),t.height||(e.height=20),t.style&&t.style.fill||(e.style.fill="black");break;case"InitialNode":case"FinalNode":t.style&&t.style.fill||(e.style.fill="black")}}else{switch(i.i(oe.isBlazor)()?t.shape.umlActivityFlow:t.shape.flow){case"Object":t.style&&t.style.strokeDashArray||(e.style.strokeDashArray="8 4"),t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow");break;case"Control":t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow"),t.sourceDecorator&&t.sourceDecorator.shape||(e.sourceDecorator.shape="None")}}}function c(t,e){switch(t.shape.type){case"Bpmn":switch(i.i(oe.isBlazor)()?t.shape.bpmnFlow:t.shape.flow){case"Sequence":("Normal"===t.shape.sequence&&"Bezier"!==t.type||"Default"===t.shape.sequence||"Conditional"===t.shape.sequence)&&(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"Conditional"===t.shape.sequence&&e.sourceDecorator&&(e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||20,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.width||10));break;case"Association":"Default"!==t.shape.association&&"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"BiDirectional"===t.shape.association&&e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white",e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||5,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.height||10));break;case"Message":e.style&&!e.style.strokeDashArray&&(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")}break;case"UmlActivity":switch(i.i(oe.isBlazor)()?t.shape.umlActivityFlow:t.shape.flow){case"Exception":"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"2 2")}break;case"UmlClassifier":var r=!1;"Association"===t.shape.relationship?r=!0:"Inheritance"===t.shape.relationship?(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"white"),e.style&&(r=!0,e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")):"Composition"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"black"),r=!0):"Aggregation"===t.shape.relationship||void 0===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),r=!0):"Dependency"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),r=!0,e.style.strokeDashArray="4 4"):"Realization"===t.shape.relationship&&(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),r=!0),r&&(e.style.strokeWidth=t.style&&t.style.strokeWidth||2)}}function p(t,e,i){var r;r=Dt.a.findLength(e,t)>Dt.a.findLength(i,t)?i:e;var n=Dt.a.findAngle(e,i),o=Dt.a.findAngle(r,t),a=Dt.a.findLength(r,t),s=o+2*(n-o);return{x:r.x+a*Math.cos(s*Math.PI/180),y:r.y+a*Math.sin(s*Math.PI/180)}}function g(t){var e=[];if("Bezier"===t.type)for(var r=0,n=0;n<t.segments.length;n++)for(var o=t.segments[parseInt(n.toString(),10)],a=Dt.a.isEmptyPoint(o.point1)?o.bezierPoint1:o.point1,s=Dt.a.isEmptyPoint(o.point2)?o.bezierPoint2:o.point2,h=Number((t.distance(a,o.points[0])+t.distance(s,a)+t.distance(o.points[1],s))/1.5),d=0;d<h-1;d+=10)e[parseInt(r.toString(),10)]=i.i(Vt.c)(t,o.points[0],Dt.a.isEmptyPoint(o.point1)?o.bezierPoint1:o.point1,Dt.a.isEmptyPoint(o.point2)?o.bezierPoint2:o.point2,o.points[1],d,h),r++;return e}function u(t){var e=t.parentElement;do{if(i.i(Ft.c)(e,"e-diagram"))return!0;e=e.parentElement}while(e);return!1}function f(t,e,i){if(t&&t.children&&t.children.length>0)for(var r=void 0,n=0;n<t.children.length;n++)return r=i[t.children[parseInt(n.toString(),10)]],r.shape.type===e||f(r,e,i);return!1}function m(t,e,i,r,n){if(i&&(t instanceof Vt.a||t&&(t.shape&&"SwimLane"!==t.shape.type||void 0===t.shape)))for(var o=void 0,a=0,s=Object.keys(i);a<s.length;a++){var h=s[a];if(o=i[""+h],"shape"===h&&o.type&&(t.shape={type:o.type}),o)if(Array.isArray(o)&&o.length&&o.length>0&&"annotations"!==n&&"ports"!==n)if(t[""+h].length>0)for(var d=0;d<=t[""+h].length;d++)m(t[""+h],e?e[""+h]:void 0,i[""+h],"annotations"===h||"ports"===h?t:void 0,h);else m(t[""+h],e?e[""+h]:void 0,i[""+h],"annotations"===h||"ports"===h?t:void 0,h);else if(o instanceof Object&&e&&"annotations"!==n&&"ports"!==n)m(t[""+h],e[""+h],i[""+h]);else if("annotations"!==n&&"ports"!==n&&e&&!e[""+h]||!e&&t&&(t[""+h]||void 0!==t[""+h]))t[""+h]=i[""+h];else{var l=void 0;"annotations"!==n&&"ports"!==n||("annotations"===n?(t[""+h]&&m(t[""+h],e[""+h],i[""+h]),t[""+h]||(se(r)===Vt.a?(l=new Ht.c(r,"annotations",i[""+h]),r.annotations.push(l)):(l=new Ht.b(r,"annotations",i[""+h]),r.annotations.push(l)))):t[""+h]?m(t[""+h],e[""+h],i[""+h]):(l=new ie.b(r,"ports",i[""+h]),r.ports.push(l)))}}}function y(t,e,r,n){var o,a="Role";if(e)for(var s=0,h=Object.keys(e);s<h.length;s++){var d=h[s];if(o=e[""+d],"getAssistantDetails"===d){if(i.i(oe.isBlazor)())for(var l=0,c=Object.keys(n.data);l<c.length;l++){var p=c[l];if(a=p,n.data[""+a]===e[""+d].root)break}if(n.data[""+a]===e[""+d].root)for(var g=e[""+d].assistants,u=0;u<g.length;u++)for(var f=0;f<r.length;f++)r[parseInt(f.toString(),10)].data[""+a]===g[parseInt(u.toString(),10)]&&(t.assistants.push(r[parseInt(f.toString(),10)].id),t.children.splice(0,1))}else o&&(t[""+d]=e[""+d])}!t.hasSubTree&&e.canEnableSubTree&&(t.orientation=n.layoutInfo.orientation,t.type=n.layoutInfo.type,n.layoutInfo.offset!==t.offset&&void 0!==n.layoutInfo.offset&&(t.offset=n.layoutInfo.offset)),n.layoutInfo.hasSubTree=t.hasSubTree}function v(t,e){for(var i="Bezier"===t.type?g(t):t.intermediatePoints,r=0;r<i.length-1;r++){var n=i[parseInt(r.toString(),10)],o=i[r+1],a=At.a.toBounds([n,o]);if(a.Inflate(t.hitPadding),a.containsPoint(e)){var s=p(e,n,o),h={x1:n.x,x2:o.x,y1:n.y,y2:o.y},d={x1:e.x,x2:s.x,y1:e.y,y2:s.y},l=b(h,d);if(l.enabled){var c=Dt.a.findLength(e,l.intersectPt);if(Math.abs(c)<t.hitPadding)return!0}else{var u=At.a.toBounds([e,e]);if(u.Inflate(3),u.containsPoint(n)||u.containsPoint(o))return!0}if(Dt.a.equals(e,s))return!0}}if(t.annotations.length>0)for(var f=t.wrapper.children,r=3;r<f.length;r++){var m=f[parseInt(r.toString(),10)];if(m.bounds.containsPoint(e))return!0}return!1}function b(t,e){var i={x:0,y:0},r=t,n=e,o=(n.y2-n.y1)*(r.x2-r.x1)-(n.x2-n.x1)*(r.y2-r.y1),a=(n.x2-n.x1)*(r.y1-n.y1)-(n.y2-n.y1)*(r.x1-n.x1),s=(r.x2-r.x1)*(r.y1-n.y1)-(r.y2-r.y1)*(r.x1-n.x1);if(0===o||(t.x1===e.x1||t.y1===e.y1)&&(t.x2===e.x2||t.y2===e.y2)&&(0===a||0===s)&&o>0)return{enabled:!1,intersectPt:i};var h=a/o,d=s/o;return h>=0&&h<=1&&d>=0&&d<=1?(i.x=r.x1+h*(r.x2-r.x1),i.y=r.y1+h*(r.y2-r.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function S(t,e,i,r){var n={x:0,y:0},o=w(t.x,t.y,e.x,e.y),a=w(i.x,i.y,r.x,r.y),s=b(o,a);return s.enabled?s.intersectPt:n}function w(t,e,i,r){return{x1:Number(t)||0,y1:Number(e)||0,x2:Number(i)||0,y2:Number(r)||0}}function x(t,e,i){var r=[];i=i||0;var n={x:e.topLeft.x-i,y:e.topLeft.y},o={x:e.topRight.x+i,y:e.topRight.y},a={x:e.bottomRight.x,y:e.bottomRight.y-i},s={x:e.bottomLeft.x,y:e.bottomLeft.y+i};return r.push(n),r.push(o),r.push(a),r.push(s),r}function I(t,e,r,n){var o=r instanceof Wt.a?r.constraints&kt.f.InheritTooltip:r.constraints&kt.h.InheritTooltip,a=r instanceof Wt.a?r.constraints&kt.f.Tooltip:r.constraints&kt.h.Tooltip,s="Mouse"===(!o&&a?r.tooltip.relativeMode:t.tooltip.relativeMode);"Mouse"===n?s=!0:"Object"===n&&(s=!1);var h=P(r,e,t,s),d=i.i(Kt.a)(t);return{x:h.x+d.width,y:h.y+d.height}}function P(t,e,i,r){var n={},o=document.getElementById(i.element.id),a=t.wrapper.bounds,s=o.getBoundingClientRect();switch(i.tooltipObject.position){case"BottomCenter":n=C(e,a.bottomCenter,i,r,s.width/2,s.height);break;case"BottomLeft":case"LeftBottom":n=C(e,a.bottomLeft,i,r,0,s.height);break;case"BottomRight":case"RightBottom":n=C(e,a.bottomRight,i,r,s.width,s.height);break;case"LeftCenter":n=C(e,a.middleLeft,i,r,0,s.height/2);break;case"LeftTop":case"TopLeft":n=C(e,a.topLeft,i,r,0,0);break;case"RightCenter":n=C(e,a.middleRight,i,r,s.width,s.height/2);break;case"RightTop":case"TopRight":n=C(e,a.topRight,i,r,s.width,0);break;case"TopCenter":n=C(e,a.topCenter,i,r,s.width/2,0)}return n}function C(t,e,i,r,n,o){var a={},s=i.scroller.transform.scale,h=i.scroller.horizontalOffset,d=i.scroller.verticalOffset;return a.x=(r?t.x:e.x)*s+h-n,a.y=(r?t.y:e.y)*s+d-o,a}function z(t,e){var i=new Rt.a;return i.data=t.pathData,i.height=t.height>10?t.height-(t.padding.bottom+t.padding.top):t.height,i.width=t.width>10?t.width-(t.padding.left+t.padding.right):t.width,i.visible=e.visible,i.id=e.id+"_shape",i.inversedAlignment=!1,i.horizontalAlignment="Center",i.verticalAlignment="Center",i.style={fill:t.iconStrokeColor,strokeColor:t.iconStrokeColor,strokeWidth:t.iconStrokeWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.relativeMode="Object",i.description=e.description||"",i}function O(t,e){var r,n=0,o=0;for(n=0;n<t.length;n++){var a=i.i(Zt.i)(t[parseInt(n.toString(),10)].wrapper);for(o=n+1;o<t.length;o++){var s=i.i(Zt.i)(t[parseInt(o.toString(),10)].wrapper);"Top"===e||"Bottom"===e||"BottomToTop"===e||"Middle"===e?a.center.y>s.center.y&&(r=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)]=r):a.center.x>s.center.x&&(r=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)]=r)}}return t}function T(t,e,i){var r=A(t,e),n=Dt.a.findAngle(t[r.index],t[r.index+1]),o=L(e),a=Dt.a.transform(r.point,n+45,o);return r.point=a,r.angle=n,r}function A(t,e){for(var i,r,n,o,a=0,s=e.offset,h=[],d=0;d<t.length-1;d++)a+=Dt.a.distancePoints(t[parseInt(d.toString(),10)],t[d+1]),h.push(a);for(var l=s*a,c=0;c<h.length;c++){if(h[parseInt(c.toString(),10)]>=l)return r=Dt.a.findAngle(t[parseInt(c.toString(),10)],t[c+1]),i=Dt.a.transform(t[parseInt(c.toString(),10)],r,l-(n||0)),o=c,{point:i,index:o};n=h[parseInt(c.toString(),10)]}return{point:i,index:o}}function L(t){var e;e=t instanceof ae.b?0:void 0===t.content?10:0;var i=0;switch(t.alignment){case"Center":i=0;break;case"Before":i=-(0+e);break;case"After":i=0+e}return i}function E(t,e,r){e%=360;var n,o;switch(t.alignment){case"Before":e>=45&&e<=135?(o="right",n=.5===t.offset?"center":"top"):e>=225&&e<=315?(o="left",n=.5===t.offset?"center":"bottom"):e>45&&e<225?(n="top",o=.5===t.offset?"center":"right"):(n="bottom",o=.5===t.offset?"center":"left");break;case"After":e>=45&&e<=135?(o="left",n=.5===t.offset?"center":"top"):e>=225&&e<=315?(o="right",n=.5===t.offset?"center":"bottom"):e>45&&e<225?(n="bottom",o=.5===t.offset?"center":"right"):(n="top",o=.5===t.offset?"center":"left");break;case"Center":o=i.i(oe.isNullOrUndefined)(t.horizontalAlignment)?"center":t.horizontalAlignment.toLowerCase(),n=i.i(oe.isNullOrUndefined)(t.verticalAlignment)?"center":t.verticalAlignment.toLowerCase()}if(0===t.offset||1===t.offset){switch(B(r[0],r[1])){case"left":o=0===t.offset?"right":"left";break;case"right":o=0===t.offset?"left":"right";break;case"bottom":n=0===t.offset?"top":"bottom";break;case"top":n=0===t.offset?"bottom":"top"}}return{hAlign:o,vAlign:n}}function B(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"right":"left":t.y<e.y?"bottom":"top"}function M(t,e){if(t instanceof Wt.a&&t.children)for(var i=0;i<t.children.length;i++)e.nameTable[t.children[parseInt(i.toString(),10)]].children&&M(t,e),e.removeFromAQuad(e.nameTable[t.children[parseInt(i.toString(),10)]]),e.removeObjectsFromLayer(e.nameTable[t.children[parseInt(i.toString(),10)]]),delete e.nameTable[t.children[parseInt(i.toString(),10)]]}function D(t,e){if(t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var r=t.children[parseInt(i.toString(),10)];r instanceof ee.a&&D(r,e)}return-1===e.indexOf(t.id)&&e.push(t.id),e}function k(t){for(var e,i,r,n,o=[],a=0;a<t.length;a++)if(e=t[parseInt(a.toString(),10)],"SwimLane"===e.shape.type){i=e.wrapper.children[0],r=i.childTable;for(var s=0,h=Object.keys(r);s<h.length;s++){var d=h[s];n=r[""+d],o=D(n,o)}}return o}function R(t,e){var i=e.nodes;if(i)for(var r=0;r<i.length;r++)-1!==t.indexOf(i[parseInt(r.toString(),10)].id)&&(i.splice(r,1),r--)}function _(t){var e=k(t.nodes),r=i.i(Zt.e)(t,t.getCustomProperty);return r.selectedItems.nodes=[],r.selectedItems.connectors=[],r.selectedItems.wrapper=null,t.serializationSettings.preventDefaults&&(r=j(r,t)),R(e,r),JSON.stringify(r)}function j(t,e,i,r){i=H(e,i);var n=[];n=n.concat(Object.keys(t));for(var o=0,a=n;o<a.length;o++){var s=a[o];e instanceof Wt.a&&(r="shape"===s),t[""+s]instanceof Array?N(t,i,e,s):t[""+s]instanceof Object&&i&&i[""+s]?"wrapper"!==s&&(t[""+s]=j(t[""+s],e[""+s],i[""+s],r)):(i&&t[""+s]===i[""+s]||void 0===t[""+s])&&(r&&"type"===s||e instanceof Wt.i&&"orientation"===s||delete t[""+s]),"[]"!==JSON.stringify(t[""+s])&&"{}"!==JSON.stringify(t[""+s])&&void 0!==t[""+s]||delete t[""+s]}return i=void 0,n=void 0,t}function N(t,e,i,r){if(0===t[""+r].length)delete t[""+r];else if(t[r].every(function(t){return"number"==typeof t})){var n=void 0,o=!0;for(n=0;n<t[""+r].length;n++)o=!(!o||t[""+r][parseInt(n.toString(),10)]!==e[""+r][parseInt(n.toString(),10)]);o&&delete t[""+r]}else{var n=void 0;if(t[""+r]&&"layers"!==r)for(n=t[""+r].length-1;n>=0;n--)"nodes"!==r&&"connectors"!==r||(t[""+r][parseInt(n.toString(),10)].wrapper=null),"dataManager"!==r&&(t[""+r][parseInt(n.toString(),10)]=j(t[""+r][parseInt(n.toString(),10)],i[""+r][parseInt(n.toString(),10)],void 0!==e[""+r]?e[""+r][parseInt(n.toString(),10)]:[]),"[]"!==JSON.stringify(t[""+r][parseInt(n.toString(),10)])&&"{}"!==JSON.stringify(t[""+r][parseInt(n.toString(),10)])&&void 0!==t[""+r][parseInt(n.toString(),10)]||t[""+r].splice(n,1))}t=void 0}function H(t,e){var i,r=[];if(t.getClassName){var n=new Ut.a;switch(t.getClassName()){case"Diagram":i=n;break;case"Node":i=new Wt.a(n,"",r);break;case"Path":i=new Wt.j(n,"",r);break;case"Native":i=new Wt.d(n,"",r);break;case"Html":i=new Wt.k(n,"",r);break;case"Image":i=new Wt.l(n,"",r);break;case"Text":i=new Wt.m(n,"",r);break;case"BasicShape":i=new Wt.c(n,"",r);break;case"FlowShape":i=new Wt.n(n,"",r);break;case"BpmnShape":i=new Wt.e(n,"",r);break;case"UmlActivityShape":i=new Wt.o(n,"",r);break;case"UmlClassifierShape":i=new Wt.p(n,"",r);break;case"SwimLane":i=new Wt.i(n,"",r),t.header&&(i.header=new Wt.q(n,"",r),i.header.style.fill="");break;case"ShapeAnnotation":i=new Ht.b(n,"",r);break;case"PointPort":i=new ie.b(n,"",r);break;case"BpmnGateway":i=new Wt.r(n,"",r);break;case"BpmnDataObject":i=new Wt.s(n,"",r);break;case"BpmnEvent":i=new Wt.t(n,"",r);break;case"BpmnSubEvent":i=new Wt.u(n,"",r);break;case"BpmnActivity":i=new Wt.f(n,"",r);break;case"BpmnAnnotation":i=new Wt.v(n,"",r);break;case"MethodArguments":i=new Wt.w(n,"",r);break;case"UmlClassAttribute":i=new Wt.x(n,"",r);break;case"UmlClassMethod":i=new Wt.y(n,"",r);break;case"UmlClass":i=new Wt.z(n,"",r);break;case"UmlInterface":i=new Wt.A(n,"",r);break;case"UmlEnumerationMember":i=new Wt.B(n,"",r);break;case"UmlEnumeration":i=new Wt.C(n,"",r);break;case"Lane":i=new Wt.D(n,"",r);break;case"Phase":i=new Wt.E(n,"",r);break;case"ChildContainer":i=new Wt.F;break;case"Connector":i=new Vt.a(n,"",r);break;case"StraightSegment":i=new Vt.d(n,"",r);break;case"BezierSegment":i=new Vt.e(n,"",r);break;case"OrthogonalSegment":i=new Vt.f(n,"",r);break;case"PathAnnotation":i=new Ht.c(n,"",r);break;case"Stop":i=new Mt.e(n,"",r);break;case"Point":i=e||new Dt.a(n,"",r);break;case"UserHandle":i=new $t.a(n,"",r);break;case"Command":i=new re.a(n,"",r)}}else i=e;return parent=void 0,e=void 0,i}function W(t,e){e.enableServerDataBinding(!1);var r=e.blazorActions;e.blazorActions=e.addConstraints(r,kt.i.ClearObject),e.clear(),e.blazorActions=e.removeConstraints(r,kt.i.ClearObject),e.protectPropertyChange(!0);for(var n=e.dataSourceSettings.doBinding,o=e.setNodeTemplate,a=e.getDescription,s=e.getCustomProperty,h={},d=0,l=e.commandManager.commands;d<l.length;d++){var c=l[d];h[c.name]={execute:c.execute,canExecute:c.canExecute}}var p=e.rulerSettings.horizontalRuler.arrangeTick,g=e.rulerSettings.verticalRuler.arrangeTick,u=e.layout.getLayoutInfo,f=e.layout.getBranch,m=e.getNodeDefaults,y=e.getConnectorDefaults,v=JSON.parse(t);v=X(v),e.contextMenuSettings=v.contextMenuSettings||{},e.constraints=v.constraints||kt.j.Default,e.tool=v.tool||kt.k.Default,e.bridgeDirection=v.bridgeDirection||"Top",e.pageSettings=v.pageSettings||{},e.drawingObject=v.drawingObject||void 0,e.tooltip=v.tooltip||{},e.addInfo=v.addInfo||void 0,e.getDescription=a,e.scrollSettings=v.scrollSettings||{},e.commandManager=v.commandManager||{},v.layers&&v.layers.length>0&&V(v),e.layers=v.layers||[],e.rulerSettings.horizontalRuler.arrangeTick=p,e.rulerSettings.verticalRuler.arrangeTick=g;for(var b=0,S=e.commandManager.commands;b<S.length;b++){var w=S[b];h[w.name]&&(w.execute=h[w.name].execute,w.canExecute=h[w.name].canExecute)}if(e.backgroundColor=v.backgroundColor||"transparent",e.basicElements=v.basicElements||[],v.connectors)for(var x=0;x<v.connectors.length;x++)"Bezier"===v.connectors[x].type&&v.connectors[x].segments.length>0&&v.connectors[x].bezierSettings.allowSegmentsReset&&(v.connectors[x].segments=[]);if(e.connectors=v.connectors||[],e.dataSourceSettings=v.dataSourceSettings||{},e.dataSourceSettings.doBinding=n,e.height=v.height||"100%",e.setNodeTemplate=o,e.getConnectorDefaults=y,e.getNodeDefaults=m,e.getCustomProperty=s,e.mode=v.mode||"SVG",v.nodes)for(var x=0;x<v.nodes.length;x++)v.nodes[x].shape&&"SwimLane"===v.nodes[x].shape.type&&(null==v.nodes[x].wrapper&&(v.nodes[x].wrapper={actualSize:{width:v.nodes[x].width,height:v.nodes[x].height},offsetX:v.nodes[x].offsetX,offsetY:v.nodes[x].offsetY}),i.i(ne.b)(v.nodes[x],void 0,void 0,void 0,void 0,!0));e.nodes=v.nodes||[],e.rulerSettings=v.rulerSettings||{},e.snapSettings=v.snapSettings||{},e.width=v.width||"100%",e.layout=v.layout||{},v.layout&&"None"!==v.layout.type&&(e.canLayout=!1),e.layout.getLayoutInfo=i.i(Zt.h)(u),e.layout.getBranch=i.i(Zt.h)(f),e.diagramActions=0,e.isLoading=!0,e.protectPropertyChange(!1);for(var I,x=0;x<e.views.length;x++)I=e.views[e.views[x]],e.blazorActions=e.addConstraints(r,kt.i.ClearObject),I instanceof Ut.a&&I.refresh(),e.blazorActions=e.removeConstraints(r,kt.i.ClearObject),I instanceof Ut.a&&e.element.classList.add("e-diagram");return v.selectedItems&&(v.selectedItems.nodes=[],v.selectedItems.connectors=[],v.selectedItems.selectedObjects=[]),e.selectedItems=v.selectedItems,e.enableServerDataBinding(!0),e.canLayout=!0,e.swimlaneChildTable={},e.swimlaneZIndexTable={},v}function V(t){var e,i,r,n=[];for(e=0;e<t.layers.length;e++){for(i=0;i<t.layers[e].objects.length;i++)if(t.nodes)for(r=0;r<t.nodes.length;r++)t.layers[e].objects[i]===t.nodes[r].id&&n.push(t.layers[e].objects[i]);for(i=0;i<t.layers[e].objects.length;i++)if(t.connectors)for(r=0;r<t.connectors.length;r++)t.layers[e].objects[i]===t.connectors[r].id&&n.push(t.layers[e].objects[i]);t.layers[e].objects=n,n=[]}}function X(t){if(t&&(void 0===t.version||t.version<17.1)&&t.nodes)for(var e=t.nodes,i=0,r=e;i<r.length;i++){var n=r[i];if(n&&n.ports&&n.ports.length>0)for(var o=0,a=n.ports;o<a.length;o++){var s=a[o];s&&s.constraints&&s.constraints===kt.d.None&&(s.constraints=kt.d.Default)}}return t}function Y(t,e){var i=e.style,r=e;e.canApplyStyle=!0;for(var n=0,o=Object.keys(t);n<o.length;n++){switch(o[n]){case"fill":i.fill=t.fill,i instanceof Mt.f&&(i.fill="transparent");break;case"textOverflow":i.textOverflow=t.textOverflow;break;case"opacity":i.opacity=t.opacity;break;case"strokeColor":i.strokeColor=t.strokeColor;break;case"strokeDashArray":i.strokeDashArray=t.strokeDashArray;break;case"strokeWidth":i.strokeWidth=t.strokeWidth;break;case"bold":i.bold=t.bold;break;case"color":i.color=t.color;break;case"textWrapping":i.textWrapping=t.textWrapping;break;case"fontFamily":i.fontFamily=t.fontFamily;break;case"fontSize":i.fontSize=t.fontSize;break;case"italic":i.italic=t.italic;break;case"textAlign":i.textAlign=t.textAlign;break;case"whiteSpace":i.whiteSpace=t.whiteSpace;break;case"textDecoration":i.textDecoration=t.textDecoration;break;case"gradient":if(i.gradient){U(t.gradient,i.gradient);break}}}e instanceof jt.a&&r.refreshTextElement()}function U(t,e){for(var i=0,r=Object.keys(t);i<r.length;i++){switch(r[i]){case"type":e.type=t.type;break;case"x1":e.x1=t.x1;break;case"x2":e.x2=t.x2;break;case"y1":e.y1=t.y1;break;case"y2":e.y2=t.y2;break;case"cx":e.cx=t.cx;break;case"cy":e.cy=t.cy;break;case"fx":e.fx=t.fx;break;case"fy":e.fy=t.fy;break;case"r":e.r=t.r;break;case"stops":e.stops=t.stops}}}function G(t,e,i){for(var r=e,n=r.hyperlink,o=0,a=Object.keys(t);o<a.length;o++){switch(a[o]){case"color":r.style.color=n.color=t.color;break;case"content":r.content=n.content=t.content||n.link;break;case"link":var s=i.style;r.style.color=t.link?n.color:s.color,r.style.textDecoration=t.link?n.textDecoration:i.style.textDecoration,r.content=t.link?n.content||t.link:i.content,n.link=t.link;break;case"textDecoration":r.style.textDecoration=n.textDecoration=t.textDecoration;break;case"hyperlinkOpenState":n.hyperlinkOpenState=t.hyperlinkOpenState}}}function F(t,e,r){t.width=e.width,t.height=e.height,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t.minWidth=e.minWidth,t.maxWidth=e.maxWidth,t.horizontalAlignment=e.wrapper.children[0].horizontalAlignment,t.verticalAlignment=e.wrapper.children[0].verticalAlignment,t.relativeMode=e.wrapper.children[0].relativeMode,t.visible=e.wrapper.children[0].visible,e.shape instanceof Wt.m&&(t.margin=e.shape.margin),t.id=e.wrapper.children[0].id,t.style=e.style;for(var n=0,o=r.views;n<o.length;n++){var a=o[n];i.i(Ft.m)(e.id+"_groupElement",a),i.i(Ft.m)(e.id+"_content_groupElement",a),i.i(Ft.m)(e.id+"_html_element",a)}e.wrapper.children.splice(0,1),e.wrapper.children.splice(0,0,t)}function Z(t,e,r,n){var o=new Et.a;switch(t.shape.type){case"Path":var a=new Rt.a;a.data=e.shape.data,o=a,F(o,e,n);break;case"Image":var s=new Nt.a;s.source=e.shape.source,s.imageAlign=e.shape.align,s.imageScale=e.shape.scale,o=s,F(o,e,n);break;case"Text":o=new jt.a,F(o,e,n);break;case"Basic":var h=(i.i(oe.isBlazor)()?"Rectangle"===e.shape.basicShape:"Rectangle"===e.shape.shape)?new Et.a:new Rt.a;!i.i(oe.isBlazor)()&&"Polygon"===e.shape.shape||i.i(oe.isBlazor)()&&"Polygon"===e.shape.basicShape?h.data=i.i(qt.e)(e.shape.points):h.data=i.i(Xt.a)(i.i(oe.isBlazor)()?e.shape.basicShape:e.shape.shape),(!i.i(oe.isBlazor)()&&"Rectangle"===e.shape.shape||i.i(oe.isBlazor)()&&"Rectangle"===e.shape.basicShape)&&(h.cornerRadius=e.shape.cornerRadius),o=h,F(o,e,n);break;case"Flow":var d=new Rt.a,l=i.i(oe.isBlazor)()?e.shape.flowShape:e.shape.shape;d.data=i.i(Yt.a)(l),o=d,F(o,e,n);break;case"Native":var c=new _t.a(t.id,n.element.id);c.content=e.shape.content,c.scale=e.shape.scale,o=c,F(o,e,n);break;case"HTML":var p=new Qt.a(e.id,n.element.id);p.content=e.shape.content,o=p,F(o,e,n)}void 0===t.shape.type||t.shape.type===r.shape.type||i.i(oe.isBlazor)()&&"UmlActivity"===t.shape.type?q(t,e,n,r):(o.width=e.wrapper.children[0].width,o.height=e.wrapper.children[0].height,e.shape instanceof Wt.m&&(o.margin=e.shape.margin),o.style=e.style,e.wrapper.children[0]=o)}function q(t,e,r,n){if(Object.keys(t.shape).length>0)if("Path"===e.shape.type&&void 0!==t.shape.data)e.wrapper.children[0].data=t.shape.data;else if("Text"===e.shape.type&&void 0!==t.shape.content)e.wrapper.children[0].content=t.shape.content;else if("Image"===e.shape.type&&void 0!==t.shape.source)e.wrapper.children[0].source=t.shape.source;else if("Native"===e.shape.type){for(var o=void 0,a=0;a<r.views.length;a++)o=i.i(Ft.n)(e.wrapper.children[0].id+"_native_element",r.views[parseInt(a.toString(),10)]),void 0!==t.shape.content&&o&&(o.removeChild(o.children[0]),e.wrapper.children[0].content=t.shape.content,o.appendChild(i.i(Ft.j)(e.wrapper.children[0],!1)));e.wrapper.children[0].scale=t.shape.scale?t.shape.scale:e.wrapper.children[0].scale}else if("HTML"===e.shape.type)for(var s=void 0,a=0;a<r.views.length;a++)(s=i.i(Ft.n)(e.wrapper.children[0].id+"_html_element",r.views[parseInt(a.toString(),10)]))&&(s.removeChild(s.children[0]),e.wrapper.children[0].content=t.shape.content,s.appendChild(i.i(Ft.j)(e.wrapper.children[0],!0)));else if("Flow"===e.shape.type&&(i.i(oe.isBlazor)()&&void 0!==t.shape.flowShape||void 0!==t.shape.shape)){e.shape.shape=i.i(oe.isBlazor)()?t.shape.flowShape:t.shape.shape;var h=e.shape.shape,d=i.i(Yt.a)(h.toString());e.wrapper.children[0].data=d}else if("UmlActivity"===e.shape.type&&(i.i(oe.isBlazor)()&&void 0!==t.shape.umlActivityShape||!i.i(oe.isBlazor)()&&void 0!==t.shape.shape))Q(e,t);else if(void 0!==t.shape.cornerRadius)e.wrapper.children[0].cornerRadius=t.shape.cornerRadius;else if("Basic"===e.shape.type&&n&&"Rectangle"===n.shape.shape){var l=new Rt.a,c=i.i(Xt.a)(i.i(oe.isBlazor)()?e.shape.basicShape:e.shape.shape);l.data=c;var p=l;F(p,e,r)}else if(i.i(oe.isBlazor)()&&void 0!==t.shape.basicShape||void 0!==t.shape.shape){e.shape.shape=i.i(oe.isBlazor)()?t.shape.basicShape:t.shape.shape;var h=e.shape.shape,g=i.i(Xt.a)(h.toString());e.wrapper.children[0].data=g}e.wrapper.children[0].canMeasurePath=!0}function Q(t,e){i.i(oe.isBlazor)()?t.shape.umlActivityShape=e.shape.umlActivityShape:t.shape.shape=e.shape.shape;var r=i.i(oe.isBlazor)()?t.shape.umlActivityShape:t.shape.shape,n=i.i(te.a)(r.toString());i.i(oe.isBlazor)()&&"InitialNode"===t.shape.umlActivityShape||!i.i(oe.isBlazor)()&&"InitialNode"===t.shape.shape?t.wrapper.children[0].style.fill="black":!i.i(oe.isBlazor)()&&("ForkNode"===t.shape.shape||"JoinNode"===t.shape.shape)||i.i(oe.isBlazor)()&&("ForkNode"===t.shape.umlActivityShape||"JoinNode"===t.shape.umlActivityShape)?t.wrapper.children[0].style.fill="black":(!i.i(oe.isBlazor)()&&"FinalNode"===t.shape.shape||i.i(oe.isBlazor)()&&"FinalNode"===t.shape.umlActivityShape)&&t instanceof Wt.a&&(t.wrapper=K(t)),n&&(t.wrapper.children[0].data=n)}function K(t){var e=new ee.a;e.style.fill="transparent";var i="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",r=new Rt.a;r.data=i,r.id=t.id+"_0_finalNode",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.relativeMode="Object",r.style.strokeColor=t.style.strokeColor,r.style.strokeWidth=t.style.strokeWidth;var n=new Rt.a;return n.data=i,n.id=t.id+"_1_finalNode",n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.style.fill=t.style.fill,n.style.strokeColor=t.style.strokeColor,n.style.strokeWidth=t.style.strokeWidth,e.children=[r,n],e.children[0].width=t.width,e.children[0].height=t.height,e.children[1].height=t.height/1.5,e.children[1].width=t.width/1.5,e.style.strokeWidth=0,e.style.strokeColor="transparent",e}function J(t,e,r){var n=i.i(oe.isBlazor)()?r.shape.umlActivityShape:r.shape.shape,o=i.i(te.a)(n);switch(t.data=o,e=t,n){case"StructuredNode":if(r.annotations)for(var a=0;a<r.annotations.length;a++)r.annotations[parseInt(a.toString(),10)].content="<<"+r.annotations[parseInt(a.toString(),10)].content+">>";e=t;break;case"FinalNode":e=K(r)}return e}function $(t){i.i(Ft.m)(t+"_linear"),i.i(Ft.m)(t+"_radial")}function tt(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)}function et(t,e,i){var r;t.intermediatePoints=e,t.updateSegmentElement(t,e,t.wrapper.children[0],i);var n=t.sourceDecorator;if("Bezier"===t.type){var o=t.segments[0],a=t.segments[t.segments.length-1];r=[Dt.a.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,Dt.a.isEmptyPoint(o.point1)?o.bezierPoint1:o.point1]}else r=t.intermediatePoints;e=t.clipDecorators(t,e,i);var s=t.wrapper.children[0];s.canMeasurePath=!0,s=t.wrapper.children[1],t.updateDecoratorElement(s,e[0],r[1],n);var h=t.targetDecorator;s=t.wrapper.children[2],t.updateDecoratorElement(s,e[e.length-1],r[r.length-2],h),t.updateShapeElement(t)}function it(t,e,r){var n,o=t.wrapper,a=o.bounds,s=e.offset,h=e.size/r.scale,d=e.margin,l=o.offsetX-o.actualSize.width*o.pivot.x,c=o.offsetY-o.actualSize.height*o.pivot.y;if(n={x:0,y:0},t.nodes.length>0){switch(e.side){case"Top":n.x+=l+a.width*s,n.y+=c-(h/2+12.5);break;case"Bottom":n.x+=l+s*a.width,n.y+=c+o.actualSize.height+(h/2+12.5);break;case"Left":n.x+=l-(h/2+12.5),n.y+=c+s*a.height;break;case"Right":n.x+=l+o.actualSize.width+(h/2+12.5),n.y+=c+s*a.height}n.x+=(d.left-d.right)/r.scale+h/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=(d.top-d.bottom)/r.scale+h/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1)}else if(t.connectors.length>0){var p=t.connectors[0],g={offset:s},u=A(p.intermediatePoints,g),f=u.index;n=u.point;var m=T(p.intermediatePoints,g,a),y=m.angle,v=i.i(Lt.a)();i.i(Lt.b)(v,-y,p.intermediatePoints[parseInt(f.toString(),10)].x,p.intermediatePoints[parseInt(f.toString(),10)].y),n=i.i(Lt.c)(v,n),n.x+=d.left-d.right+h/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=d.top-d.bottom+h/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1),v=i.i(Lt.a)(),i.i(Lt.b)(v,y,p.intermediatePoints[parseInt(f.toString(),10)].x,p.intermediatePoints[parseInt(f.toString(),10)].y),n=i.i(Lt.c)(v,n)}if(0!==o.rotateAngle||0!==o.parentTransform){var v=i.i(Lt.a)();i.i(Lt.b)(v,o.rotateAngle+o.parentTransform,o.offsetX,o.offsetY),n=i.i(Lt.c)(v,n)}return n}function rt(t,e,r,n){if(n.annotation){if(i.i(Jt.b)(n.annotation))return!0}else if(kt.g[""+e]&t&&kt.l[""+e]&r)return!0;return!1}function nt(t,e){return!!(kt.g[""+e]&t)}function ot(t,e){return!!(kt.m[""+e]&t)}function at(t,e){return t.visibility&e}function st(t,e){var i;if("Text"===t.shape.type)i=t.shape;else{var r=e.split("_");e=r[r.length-1];for(var n=0;n<t.annotations.length;n++)e===t.annotations[parseInt(n.toString(),10)].id&&(i=t.annotations[parseInt(n.toString(),10)])}return i}function ht(t,e){var i=e.split("_");if(e=i[i.length-1],t){t=t;for(var r=0;r<t.ports.length;r++)if(e===t.ports[parseInt(r.toString(),10)].id)return t.ports[parseInt(r.toString(),10)]}}function dt(t,e){var i={},r=0;if(t.ports){var n=t.ports;for(r=0;r<n.length;r++)e?n[parseInt(r.toString(),10)].constraints&kt.d.InConnect&&(i=n[parseInt(r.toString(),10)]):n[parseInt(r.toString(),10)].constraints&kt.d.OutConnect&&(i=n[parseInt(r.toString(),10)])}return i}function lt(t,e,i){for(var r=i?t.annotations:t.ports,n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].id===e)return n.toString();return"-1"}function ct(t,e){var i;for(i=0;i<t.length;i++)if(e===t[parseInt(i.toString(),10)].id)return!0;return!1}function pt(t,e,r,n){if(void 0!==t.width&&void 0!==t.height&&(t.width*=e,t.height*=r),t instanceof Bt.a){var o=i.i(Lt.a)(),a=n.width||n.actualSize.width,s=n.height||n.actualSize.height;if(void 0!==a&&void 0!==s){var h=n.offsetX-a*n.pivot.x,d=n.offsetY-s*n.pivot.y,l={x:h+a*n.pivot.x,y:d+s*n.pivot.y};l=i.i(Zt.j)(n.rotateAngle,n.offsetX,n.offsetY,l),i.i(Lt.b)(o,-n.rotateAngle,l.x,l.y),i.i(Lt.d)(o,e,r,l.x,l.y),i.i(Lt.b)(o,n.rotateAngle,l.x,l.y);for(var c=0,p=t.children;c<p.length;c++){var g=p[c];if(void 0!==g.width&&void 0!==g.height){var u=i.i(Lt.c)(o,{x:g.offsetX,y:g.offsetY});g.offsetX=u.x,g.offsetY=u.y,pt(g,e,r,n)}}}}}function gt(t,e,i,r,n,o){for(var a,s=t.children,h=0;h<s.length;h++)if(a=r[s[parseInt(h.toString(),10)]])if(a.children)gt(a,e,i,r,n,o);else if(a.offsetX-=e,a.offsetY-=i,!n){r[a.id]=a;var d=a.initContainer();d.children||(d.children=[]);var l=a.init(o);d.children.push(l),d.measure(new Tt.a(a.width,a.height)),d.arrange(d.desiredSize)}}function ut(t,e,i){if(0===i.length)i.push(t);else if(1===i.length)i[0][""+e]>t[""+e]?i.splice(0,0,t):i.push(t);else if(i.length>1){for(var r=0,n=i.length-1,o=Math.floor((r+n)/2);o!==r;)if(i[parseInt(o.toString(),10)][""+e]<t[""+e])r=o,o=Math.floor((r+n)/2);else{if(!(i[parseInt(o.toString(),10)][""+e]>t[""+e]))break;n=o,o=Math.floor((r+n)/2)}i[parseInt(n.toString(),10)][""+e]<t[""+e]?i.push(t):i[parseInt(r.toString(),10)][""+e]>t[""+e]?i.splice(r,0,t):i[parseInt(r.toString(),10)][""+e]<t[""+e]&&i[parseInt(n.toString(),10)][""+e]>t[""+e]&&i.splice(n,0,t)}}function ft(t){var e=document.getElementById(t.diagramId),i="ej2_instances",r=e[""+i][0].nodes;void 0===r&&(r=yt(e[""+i][0]));for(var n=0;r&&n<r.length;n++)if(r[parseInt(n.toString(),10)].id===t.nodeId)return mt(r[parseInt(n.toString(),10)],t);for(var o=e[""+i][0].connectors,n=0;o&&n<o.length;n++)if(o[parseInt(n.toString(),10)].id===t.nodeId)return mt(o[parseInt(n.toString(),10)],t);var a=e[i][0].enterObject;return a&&(a.id===t.nodeId||a.children)?a.children&&f(a,"HTML",e[""+i][0].enterTable)?e[""+i][0].enterTable[t.nodeId]:a:null}function mt(t,e){var i,r=t.annotations;for(i=0;r&&i<r.length;i++)if(e.annotationId&&r[parseInt(i.toString(),10)].id===e.annotationId)return r[parseInt(i.toString(),10)];return t}function yt(t){for(var e=[],i=0;i<t.palettes.length;i++)for(var r=t.palettes[parseInt(i.toString(),10)].symbols,n=0;n<r.length;n++)r[parseInt(n.toString(),10)]instanceof Wt.a&&e.push(r[parseInt(n.toString(),10)]);return e}function vt(t,e,r,n){return i.i(oe.isBlazor)()&&(t={cause:t.cause,state:r,type:n,cancel:!1,element:se(e)===Vt.a?{connector:wt(e)}:{node:wt(e)}}),t}function bt(t,e){if(i.i(oe.isBlazor)()){var r=se(t.source)===Vt.a,n=wt(t.source),o=wt(t.target),a=void 0,s=void 0;a=n.connectors&&n.connectors.length>0?n.connectors[0]:n,s=n.nodes&&n.nodes.length>0?n.nodes[0]:n,e={element:r?{connector:a,connectorId:a.id}:{node:s,nodeId:s.id},target:r?{connector:o}:{node:o},position:e.position,cancel:e.cancel}}return e}function St(t,e,r,n,o,a,s,h){var d={x:0,y:0},l=i.i(Lt.a)();switch(i.i(Lt.b)(l,o,a,s),h.x){case 0:switch(h.y){case 0:d=i.i(Lt.c)(l,{x:t,y:e});break;case.5:d=i.i(Lt.c)(l,{x:t,y:e+n/2});break;case 1:d=i.i(Lt.c)(l,{x:t,y:e+n})}break;case.5:switch(h.y){case 0:d=i.i(Lt.c)(l,{x:t+r/2,y:e});break;case.5:d=i.i(Lt.c)(l,{x:t+r/2,y:e+n/2});break;case 1:d=i.i(Lt.c)(l,{x:t+r/2,y:e+n})}break;case 1:switch(h.y){case 0:d=i.i(Lt.c)(l,{x:t+r,y:e});break;case.5:d=i.i(Lt.c)(l,{x:t+r,y:e+n/2});break;case 1:d=i.i(Lt.c)(l,{x:t+r,y:e+n})}}return{x:d.x,y:d.y}}function wt(t){return i.i(oe.isBlazor)()&&(t=i.i(Zt.e)(t)),t}function xt(){return(navigator.platform.indexOf("Mac")>=0||navigator.platform.indexOf("iPad")>=0||navigator.platform.indexOf("iPhone")>=0||navigator.platform.indexOf("MacIntel")>=0)&&("safari"===oe.Browser.info.name||"webkit"===oe.Browser.info.name)}function It(t){return-1!==t.indexOf("shape")||-1!==t.indexOf("pathData")||-1!==t.indexOf("width")||-1!==t.indexOf("height")}function Pt(t,e,i){var r=Ct(t,e,i,"width"),n=Ct(t,e,i,"height");return new Tt.a(r,n)}function Ct(t,e,i,r){return void 0!==e.previewSize[""+r]?e.previewSize[""+r]:void 0!==t.symbolPreview[""+r]?t.symbolPreview[""+r]:e[""+r]||i.actualSize[""+r]}function zt(t,e,i){return t&&t.parentId&&(t=e.nameTable[t.parentId],i=t.parentId?zt(t,e,i):t.id),i}function Ot(t,e){return t.selectedItems.connectors.length>1&&0===t.selectedItems.nodes.length&&0!==e.rotateAngle}e._2=r,e.L=n,e.Y=o,e.d=a,e._8=s,e._7=h,e.e=d,e.c=l,e.m=c,e._12=p,e._9=u,e._10=f,e.B=m,e._13=y,e.Z=v,e.j=b,e._5=S,e._14=w,e.k=x,e.W=I,e.g=z,e._6=O,e.q=T,e._4=A,e._15=L,e.r=E,e._16=B,e.V=M,e.G=D,e.H=_,e.I=W,e._17=X,e.O=Y,e.S=G,e._18=F,e.P=Z,e._19=q,e._20=Q,e._21=K,e.f=J,e.E=$,e.Q=tt,e.t=et,e.y=it,e.A=rt,e.x=nt,e.z=ot,e.i=at,e.F=st,e._22=ht,e.u=dt,e.J=lt,e.X=ct,e._11=pt,e.U=gt,e._0=ut,e.a=ft,e.D=vt,e.v=bt,e._3=St,i.d(e,"l",function(){return se}),i.d(e,"s",function(){return he}),i.d(e,"h",function(){return de}),i.d(e,"M",function(){return le}),i.d(e,"N",function(){return ce}),i.d(e,"n",function(){return pe}),i.d(e,"w",function(){return ge}),i.d(e,"p",function(){return ue}),i.d(e,"_23",function(){return fe}),i.d(e,"o",function(){return me}),e.b=wt,e.K=xt,e.R=It,e.T=Pt,e._24=Ct,e._1=zt,e.C=Ot;var Tt=i(7),At=i(5),Lt=i(16),Et=i(14),Bt=i(15),Mt=i(12),Dt=i(8),kt=i(1),Rt=i(17),_t=i(29),jt=i(11),Nt=i(36),Ht=i(20),Wt=i(6),Vt=i(10),Xt=i(43),Yt=i(44),Ut=i(32),Gt=i(18),Ft=i(4),Zt=i(3),qt=i(22),Qt=i(24),Kt=i(35),Jt=i(9),$t=i(42),te=i(83),ee=i(23),ie=i(21),re=i(41),ne=i(13),oe=i(0),ae=(i.n(oe),i(34)),se=function(t){return t&&(t=void 0!==t.sourceID||void 0!==t.sourcePoint||void 0!==t.targetID||void 0!==t.targetPoint||void 0!==t.type?Vt.a:Wt.a),t},he=function(t){if(!t.sourceID&&!t.targetID){var e={x:t.sourcePoint.x,y:t.sourcePoint.y},i={x:t.targetPoint.x,y:t.targetPoint.y};"Horizontal"===t.flip?(t.sourcePoint.x=i.x,t.targetPoint.x=e.x):"Vertical"===t.flip?(t.sourcePoint.y=i.y,t.targetPoint.y=e.y):"Both"===t.flip&&(t.sourcePoint=i,t.targetPoint=e)}},de=function(t,e,i){var r=i.offset.x,n=i.offset.y;return"Horizontal"===e?(r=1-i.offset.x,n=i.offset.y):"Vertical"===e?(r=i.offset.x,n=1-i.offset.y):"Both"===e&&(r=1-i.offset.x,n=1-i.offset.y),t.setOffsetWithRespectToBounds(r,n,"Fraction"),t},le=function(t,e,i,r,n){if(t.hasChildren())for(var o=0,a=t.children;o<a.length;o++){var s=a[o],h=e-s.offsetX+e,d=i-s.offsetY+i;"Horizontal"!==n&&"Both"!==n||(s.offsetX=h,s.flipOffset.x=h-s.desiredSize.width/2),"Vertical"!==n&&"Both"!==n||(s.offsetY=d,s.flipOffset.y=d-s.desiredSize.height/2),(s instanceof ee.a||s instanceof Bt.a)&&le(s,e,i,r,n),s.measure(new Tt.a(s.bounds.width,s.bounds.height)),s.arrange(s.desiredSize);var l=r.nameTable[s.id];l&&r.updateConnectorEdges(l)}},ce=function(t){var e=t.selectedItems.nodes,r=t.selectedItems.connectors,n=t.allowServerDataBinding,o=t.isProtectedOnChange;t.protectPropertyChange(!0),t.allowServerDataBinding=!1,t.selectedItems.nodes=[],t.selectedItems.connectors=[],t.allowServerDataBinding=n,t.protectPropertyChange(o);for(var a=i.i(Zt.e)(t.selectedItems),s=0;s<e.length;s++)t.selectedItems.nodes.push(t.nameTable[e[s].id]);for(var s=0;s<r.length;s++)t.selectedItems.connectors.push(t.nameTable[r[s].id]);return a},pe=function(t,e){for(var i,r=new Rt.a,n=0;n<t.length-1;n++)i=ue(t[n],t[n+1]),r.data=i[0],r.id=e.id+"_"+e.shape.sequence,r.offsetX=i[1].x,r.offsetY=i[1].y,r.rotateAngle=45,r.transform=kt.n.Self;return r},ge=function(t,e){if(t instanceof Wt.a)for(var i=0;i<t.ports.length;i++)if(t.ports[i].id===e.id.split("_")[1])return!0;return!1},ue=function(t,e){var r={x:t.x,y:t.y},n=me(t,e);n=Math.min(30,n/2);var o=i.i(Gt.a)(t,e),a=Dt.a.transform({x:r.x,y:r.y},o,n),s=Dt.a.transform({x:a.x,y:a.y},o,-12),h=Dt.a.transform({x:s.x,y:s.y},o,24);return["M"+s.x+" "+s.y+" L"+h.x+" "+h.y,a]},fe=function(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"Right":"Left":t.y<e.y?"Bottom":"Top"},me=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},function(t,e,i){"use strict";function r(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",r=0;r<5;r++){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint16Array(1);t=(window.msCrypto||window.crypto).getRandomValues(n)[0]%(e.length-1)}else t=Math.floor(Math.random()*e.length);0===r&&t<10?r--:i+=e.substring(t,t+1)}return i}function n(t,e){if(t.nodes&&t.nodes.length>0)for(var i=0;i<t.nodes.length;i++)if(t.nodes[parseInt(i.toString(),10)].id===e)return i;if(t.connectors&&t.connectors.length>0)for(var i=0;i<t.connectors.length;i++)if(t.connectors[parseInt(i.toString(),10)].id===e)return i;return null}function o(t){if(t){try{if(document.querySelectorAll(t).length)return i.i(P.compile)(document.querySelector(t).innerHTML.trim())}catch(e){return i.i(P.compile)(t)}}}function a(t){var e=(new C.a,t.offsetY-t.actualSize.height*t.pivot.y),i=t.offsetY+t.actualSize.height*(1-t.pivot.y),r=t.offsetX-t.actualSize.width*t.pivot.x,n=t.offsetX+t.actualSize.width*(1-t.pivot.x),o={x:r,y:e},a={x:n,y:e},s={x:r,y:i},h={x:n,y:i};return C.a.toBounds([o,a,s,h])}function s(t){var e=new C.a,r=a(t),n=r.middleLeft,o=r.topCenter,s=r.bottomCenter,h=r.middleRight,d=r.topLeft,l=r.topRight,c=r.bottomLeft,p=r.bottomRight;if(t.corners={topLeft:d,topCenter:o,topRight:l,middleLeft:n,middleRight:h,bottomLeft:c,bottomCenter:s,bottomRight:p},0!==t.rotateAngle||0!==t.parentTransform){var g=i.i(O.a)();i.i(O.b)(g,t.rotateAngle+t.parentTransform,t.offsetX,t.offsetY),t.corners.topLeft=d=i.i(O.c)(g,d),t.corners.topCenter=o=i.i(O.c)(g,o),t.corners.topRight=l=i.i(O.c)(g,l),t.corners.middleLeft=n=i.i(O.c)(g,n),t.corners.middleRight=h=i.i(O.c)(g,h),t.corners.bottomLeft=c=i.i(O.c)(g,c),t.corners.bottomCenter=s=i.i(O.c)(g,s),t.corners.bottomRight=p=i.i(O.c)(g,p)}return e=C.a.toBounds([d,l,c,p]),t.corners.left=e.left,t.corners.right=e.right,t.corners.top=e.top,t.corners.bottom=e.bottom,t.corners.center=e.center,t.corners.width=e.width,t.corners.height=e.height,e}function h(t,e){var i=[];return e instanceof A.a?i=["width","height","offsetX","offsetY","container","visible","horizontalAlignment","verticalAlignment","backgroundColor","borderColor","borderWidth","rotateAngle","minHeight","minWidth","maxHeight","maxWidth","pivot","margin","flip","wrapper","constraints","style","annotations","ports","isExpanded","expandIcon"]:e instanceof D.a?i=["constraints","sourcePadding","targetPadding","cornerRadius","flip","type","targetDecorator","sourceDecorator","sourceID","shape","bridgeSpace","annotations","segments","hitPadding","tooltip","previewSize","dragSize","style","sourcePortID","targetID","targetPortID","visible"]:e instanceof D.b?i=["height","width","shape","style","pivot","pathData"]:e instanceof A.b||e instanceof L.a?(i.push("shape"),e instanceof A.c?i.push("cornerRadius"):e instanceof Text?i.push("margin"):e instanceof Image?(i.push("align"),i.push("scale")):e instanceof A.d?i.push("scale"):e instanceof A.e?(i.push("activity"),i.push("annotations")):e instanceof L.a&&(i.push("borderColor"),i.push("borderWidth"),i.push("cornerRadius"),i.push("fill"))):e instanceof A.f?i.push("subProcess"):e instanceof A.g?(i.push("call"),i.push("compensation"),i.push("loop")):e instanceof A.h?(i.push("adhoc"),i.push("boundary"),i.push("compensation"),i.push("loop"),i.push("processes")):e instanceof B.a?(i.push("height"),i.push("width"),i.push("visibility"),i.push("horizontalAlignment"),i.push("verticalAlignment"),i.push("shape")):e instanceof M.a?(i.push("constraints"),i.push("height"),i.push("horizontalAlignment"),i.push("rotateAngle"),i.push("template"),i.push("verticalAlignment"),i.push("visibility"),i.push("width"),i.push("margin")):e instanceof E.a?(i.push("left"),i.push("right"),i.push("top"),i.push("bottom")):e instanceof E.b&&(i=["strokeWidth","strokeDashArray","opacity","gradient","fontSize","fontFamily","textOverflow","textDecoration","whiteSpace","textWrapping","textAlign","italic","bold"]),e instanceof E.c&&(i.push("strokeColor"),i.push("color")),t=t.concat(i)}function d(t,e,i,r){var n={},o="properties";if(t){i=t.propName;var a=t[""+o]||t,s=[];s=s.concat(Object.keys(a));var p=[];if(s.push("version"),i){var g=I(e);p=g?g(i):[],s=s.concat(p)}var u=l(i);s=s.concat(u),r&&(s=h(s,t));for(var f=0,m=s;f<m.length;f++){var y=m[f];if("historyManager"!==y)if("wrapper"!==y){var v=!(!t[""+y]||!t.hasOwnProperty("observers"));v||(t[""+y]instanceof Array?n[""+y]=c(-1===u.indexOf(y)&&t[""+o]?t[""+o][""+y]:t[""+y],e,y,r):t[""+y]instanceof Array==!1&&t[""+y]instanceof HTMLElement?n[""+y]=t[""+y].cloneNode(!0).innerHtml:t[""+y]instanceof Array==!1&&t[""+y]instanceof Object?n[""+y]=d(-1===u.indexOf(y)&&t[""+o]?t[""+o][""+y]:t[""+y],void 0,void 0,r):n[""+y]=t[""+y])}else t[""+y]&&(n[""+y]={actualSize:{width:t[""+y].actualSize.width,height:t[""+y].actualSize.height},offsetX:t[""+y].offsetX,offsetY:t[""+y].offsetY})}}return n}function l(t){switch(t){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"];case"layers":return["objectZIndex"]}return[]}function c(t,e,i,r){var n;if(t){n=[];for(var o=0;o<t.length;o++)t[parseInt(o.toString(),10)]instanceof Array?n.push(t[parseInt(o.toString(),10)]):t[parseInt(o.toString(),10)]instanceof Object?n.push(d(t[parseInt(o.toString(),10)],e,i,r)):n.push(t[parseInt(o.toString(),10)])}return n}function p(t,e){if(t){e||(e={properties:{}});for(var i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];if(t[""+n]instanceof Array){var o=g(t[""+n],e.properties[""+n]);e.properties[""+n]&&e.properties[""+n].length||(e[""+n]=o)}else if(t[""+n]instanceof Array==!1&&t[""+n]instanceof HTMLElement)e[""+n]=t[""+n].cloneNode(!0).innerHtml;else if(t[""+n]instanceof Array==!1&&t[""+n]instanceof Object){var a=p(t[""+n],e.properties[""+n]);a.properties&&!Object.keys(a.properties).length&&delete a.properties,e[""+n]=a}else e[""+n]=void 0!==e.properties[""+n]?e[""+n]:t[""+n]}}return e}function g(t,e){var i=[],r=!1;e||(e=[]),e.length||(r=!0);for(var n=0;n<t.length;n++)if(t[parseInt(n.toString(),10)]instanceof Array){g(t[parseInt(n.toString(),10)],e[parseInt(n.toString(),10)]);r&&i.push(g)}else if(t[parseInt(n.toString(),10)]instanceof Object){var o=p(t[parseInt(n.toString(),10)],e[parseInt(n.toString(),10)]);r&&i.push(o)}else i.push(t[parseInt(n.toString(),10)]);return i}function u(t){var e="";switch(t){case"Center":e="center";break;case"Left":e="left";break;case"Right":e="right"}return e}function f(t){var e="";switch(t){case"Wrap":e="breakall";break;case"NoWrap":e="keepall";break;case"WrapWithOverflow":e="normal";break;case"LineThrough":e="line-through"}return e}function m(t,e){window.measureElement.style.visibility="visible";var r=window.measureElement.children[2],n=i.i(T.h)(r)[1];n.textContent=t,i.i(T.i)(n,"font-size:"+e.fontSize+"px; font-family:"+e.fontFamily+";font-weight:"+(e.bold?"bold":"normal"));var o=n.getBBox().width;return window.measureElement.style.visibility="hidden",o}function y(t,e){return(t+e)/2}function v(t,e){var i=0,r=0,n=0,o=0,a="";r=t.length;var s=0;do{o>0&&(i=n),n=Math.floor(y(i,r)),a+=t.substr(i,n),o=m(a,e)}while(o<=e.width);for(a=a.substr(0,i),s=i;s<r;s++)if(a+=t[parseInt(s.toString(),10)],(o=m(a,e))>=e.width){t=t.substr(0,a.length-1);break}return"Ellipsis"===e.textOverflow?(t=t.substr(0,t.length-3),t+="..."):t=t.substr(0,t.length),t}function b(t,e){if("NoWrap"===e&&"PreserveAll"===t)return"pre";var i="";switch(t){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function S(t,e){var r=i.i(O.a)();i.i(O.b)(r,e,0,0);var n=i.i(O.c)(r,{x:0,y:0}),o=i.i(O.c)(r,{x:t.width,y:0}),a=i.i(O.c)(r,{x:0,y:t.height}),s=i.i(O.c)(r,{x:t.width,y:t.height}),h=Math.min(n.x,o.x,a.x,s.x),d=Math.min(n.y,o.y,a.y,s.y),l=Math.max(n.x,o.x,a.x,s.x),c=Math.max(n.y,o.y,a.y,s.y);return new z.a(l-h,c-d)}function w(t,e,r,n){if(0!==t){var o=i.i(O.a)();return i.i(O.b)(o,t,e,r),i.i(O.c)(o,n)}return n}function x(t,e){return{x:t.x+e.desiredSize.width*e.pivot.x,y:t.y+e.desiredSize.height*e.pivot.y}}function I(t){return void 0!==t&&"string"==typeof t&&(t=i.i(P.getValue)(t,window)),t}e.g=r,e.l=n,e.f=o,e.k=a,e.i=s,e.e=d,e.q=l,e.r=c,e.m=p,e.s=g,e.c=u,e.b=f,e.d=m,e.t=y,e.p=v,e.a=b,e.n=S,e.j=w,e.o=x,e.h=I;var P=i(0),C=(i.n(P),i(5)),z=i(7),O=i(16),T=i(4),A=i(6),L=i(58),E=i(12),B=i(21),M=i(20),D=i(10)},function(t,e,i){"use strict";function r(t,e){var i;for(i=e&&document.getElementById(e).classList.contains(t)?document.getElementById(e).getElementsByClassName(t):document.getElementsByClassName(t);i.length>0;)i[0].parentNode.removeChild(i[0])}function n(t){var e,i,r=[];window.measureElement.style.visibility="visible";var n=window.measureElement.children[2],a=o(n)[0];a.setAttributeNS(null,"d",t.data);var s=t.absoluteBounds,h=y(t,s,t);a.setAttributeNS(null,"d",h);var d=a.getTotalLength();for(i=0;i<=d;i+=10)e=a.getPointAtLength(i),r.push({x:e.x,y:e.y});return window.measureElement.style.visibility="hidden",r}function o(t){var e,i=[];if("msie"===et.Browser.info.name||"edge"===et.Browser.info.name)for(var r=0;r<t.childNodes.length;r++)e=t.childNodes[parseInt(r.toString(),10)],1===e.nodeType&&i.push(e);else i=t.children;return i}function a(t,e){for(var r=[],n=0,o=e;n<o.length;n++){var a=o[n],s={x:t.offsetX-t.actualSize.width*t.pivot.x+a.x,y:t.offsetY-t.actualSize.height*t.pivot.y+a.y},h=void 0,d=t.rotateAngle+t.parentTransform;d&&(h=i.i(tt.a)(),i.i(tt.b)(h,d,t.offsetX,t.offsetY)),h&&(s=i.i(tt.c)(h,s)),r.push(s)}return r}function s(t){if(t){window.measureElement.style.visibility="visible";var e=window.measureElement.children[2],i=o(e)[0];i.setAttribute("d",t);var r=i.getBBox(),n=new Q.a(r.x,r.y,r.width,r.height);return window.measureElement.style.visibility="hidden",n}return new Q.a(0,0,0,0)}function h(t,e){var r={fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray,opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,width:e||t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5};return r.fontSize=t.style.fontSize,r.fontFamily=t.style.fontFamily,r.textOverflow=t.style.textOverflow,r.textDecoration=t.style.textDecoration,r.doWrap=t.doWrap,r.whiteSpace=i.i($.a)(t.style.whiteSpace,t.style.textWrapping),r.content=t.content,r.textWrapping=t.style.textWrapping,r.breakWord=i.i($.b)(t.style.textWrapping),r.textAlign=i.i($.c)(t.style.textAlign),r.color=t.style.color,r.italic=t.style.italic,r.bold=t.style.bold,r.dashArray="",r.strokeWidth=0,r.fill="",r}function d(t,e,r){var n,o,a=[],s=0,h=e||t.content;if("nowrap"!==t.whiteSpace&&"pre"!==t.whiteSpace)if("breakall"===t.breakWord)for(n="",n+=h[0],s=0;s<h.length;s++)if((o=i.i($.d)(n,t))>=t.width&&n.length>0)a[a.length]={text:n,x:0,dy:0,width:o},n="";else{n+=h[s+1]||"",n.indexOf("\n")>-1&&(a[a.length]={text:n,x:0,dy:0,width:i.i($.d)(n,t)},n="");var d=i.i($.d)(n,t);Math.ceil(d)+2>=t.width&&n.length>0&&(a[a.length]={text:n,x:0,dy:0,width:d},n=""),s===h.length-1&&n.length>0&&(a[a.length]={text:n,x:0,dy:0,width:d},n="")}else a=l(t,e,r);else a[a.length]={text:h,x:0,dy:0,width:i.i($.d)(h,t)};return a}function l(t,e,r){var n,o,a,s,h=[],d="",l=0,c=0,p="nowrap"!==t.whiteSpace,g=e||t.content,u=g.split("\n");for(l=0;l<u.length;l++)for("",n="NoWrap"!==t.textWrapping?u[parseInt(l.toString(),10)].split(" "):"NoWrap"===t.textWrapping?[u[parseInt(l.toString(),10)]]:u,c=0;c<n.length;c++){d+=((0!==c||1===n.length)&&p&&d.length>0?" ":"")+n[parseInt(c.toString(),10)],o=d+" "+(n[c+1]||"");var f=i.i($.d)(o,t);Math.floor(f)>(r||t.width)-2&&d.length>0?(h[h.length]={text:d,x:0,dy:0,width:o===d?f:d===s?a:i.i($.d)(d,t)},d=""):c===n.length-1&&(h[h.length]={text:d,x:0,dy:0,width:f},d=""),s=o,a=f}return h}function c(t,e){var i,r,n={x:0,width:0},o=0;for(o=0;o<e.length;o++)i=e[parseInt(o.toString(),10)].width,r=i,i="left"===t.textAlign?0:"center"===t.textAlign?i>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)?0:-i/2:"right"===t.textAlign?-i:e.length>1?0:-i/2,e[parseInt(o.toString(),10)].dy=1.2*t.fontSize,e[parseInt(o.toString(),10)].x=i,n?(n.x=Math.min(n.x,i),n.width=Math.max(n.width,r)):n={x:i,width:r};return n}function p(t,e,r,n,o){var a=new K.a,s=k("span",{style:"display:inline-block; line-height: normal"});return t.bold&&(s.style.fontWeight="bold"),t.italic&&(s.style.fontStyle="italic"),void 0!==r&&(s.style.width=r.toString()+"px"),void 0!==n&&(s.style.height=n.toString()+"px"),void 0!==o&&(s.style.maxWidth=o.toString()+"px"),s.style.fontFamily=t.fontFamily,s.style.fontSize=t.fontSize+"px",s.style.color=t.color,s.textContent=e,s.style.whiteSpace=i.i($.a)(t.whiteSpace,t.textWrapping),s.style.wordBreak=void 0!==o?"break-word":i.i($.b)(t.textWrapping),document.body.appendChild(s),a.width=s.offsetWidth,a.height=s.offsetHeight,document.body.removeChild(s),a}function g(t,e,i,r,n){var o,a,s=new K.a(0,0),l=h(t,r);return t.childNodes=o=d(l,n,t.isLaneOrientation?r:void 0),t.wrapBounds=a=c(l,o),s.width=a.width,t.wrapBounds.width>=r&&"Wrap"!==l.textOverflow&&(s.width=r),s.height=o.length*t.style.fontSize*1.2,s}function u(t,e,i,r){window.measureElement.style.visibility="visible";var n=window.measureElement.children[1];n.setAttribute("src",t);var o=n.getBoundingClientRect(),a=o.width,s=o.height;e=new K.a(a,s),window.measureElement.style.visibility="hidden";var h=document.createElement("img");return h.setAttribute("src",t),U(h,{id:i+"sf-imageNode",style:"display: none;"}),document.body.appendChild(h),h.onload=function(t){var e=t.currentTarget;r&&r(i,{width:e.width,height:e.height})},e}function f(t){window.measureElement.style.visibility="visible";var e=window.measureElement.children[2];e.appendChild(t);var i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),n=i;return n.x=i.left-r.left,n.y=i.top-r.top,e.removeChild(t),window.measureElement.style.visibility="hidden",n}function m(t){window.measureElement.style.visibility="visible";var e=window.measureElement.children[2];e.appendChild(t);var i=e.getBoundingClientRect();return e.removeChild(t),window.measureElement.style.visibility="hidden",i}function y(t,e,r,n){var o=0,a=0,s=!1,h="",d=[],l=e;return 0===l.x&&0===l.y||(o=0-Number(l.x),a=0-Number(l.y)),(t.actualSize.width!==l.width||t.actualSize.height!==l.height||n)&&(o=(n&&n.width||t.actualSize.width)/Number(l.width?l.width:1),a=(n&&n.height||t.actualSize.height)/Number(l.height?l.height:1),s=!0),d=i.i(J.a)(t.data),d=i.i(J.b)(d),h=i.i(J.c)(d,o,a,s,l.x,l.y,0,0),s=!1,h}function v(t){return b(t).getElementsByClassName("e-diagram-layer")[0]}function b(t,e){var i;return e&&(i=document.getElementById(e)),"msie"===et.Browser.info.name||"edge"===et.Browser.info.name?i?i.querySelector("#"+t):document.getElementById(t):i?i.querySelector("#"+CSS.escape(t)):document.getElementById(t)}function S(t,e,i){var r,n=void 0,o="";"native"===i?(r=M(t),o="_content_groupElement"):"html"===i?(r=D(t).childNodes[0],o="_html_element"):(r=C(t),o="_groupElement");for(var a,s=0;r.childNodes&&s<r.childNodes.length;s++)if((a=r.childNodes[s])&&a.id===e+o){n=s;break}return n}function w(t){return b(t).getElementsByClassName("e-adorner-layer")[0]}function x(t){return w(t).getElementById(t+"_SelectorElement")}function I(t){return w(t).getElementById(t+"_diagramAdorner")}function P(t){return b(t).getElementsByClassName("e-userHandle-layer")[0]}function C(t){return v(t).getElementById(t+"_diagramLayer")}function z(t){return b(t).getElementsByClassName("e-ports-expand-layer")[0]}function O(t){return b(t).getElementsByClassName("e-native-layer")[0]}function T(t){return b(t).getElementsByClassName("e-grid-layer")[0]}function A(t){return b(t).getElementsByClassName("e-background-layer")[0].parentNode}function L(t){return b(t).getElementsByClassName("e-background-image-layer")[0]}function E(t){return b(t).getElementsByClassName("e-background-layer")[0]}function B(t){var e=null;if(window.domTable[t+"_gridline"])e=window.domTable[t+"_gridline"];else{e=T(t).getElementById(t+"_gridline"),window.domTable[t+"_gridline"]=e}return e}function M(t){return O(t).getElementById(t+"_nativeLayer")}function D(t){var e=null;if(window.domTable[t+"html_layer"])e=window.domTable[t+"html_layer"];else{e=b(t).getElementsByClassName("e-html-layer")[0],window.domTable[t+"html_layer"]=e}return e}function k(t,e){var r=i.i(et.createElement)(t);return U(r,e),r}function R(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return X(i,e),i}function _(t,e,i){for(var r=t;r&&(i?r.id!==e:!j(r,e));)r=r.parentNode;return r}function j(t,e){return(" "+("object"==typeof t.className?t.className.animVal:t.className)+" ").indexOf(" "+e+" ")>-1}function N(){var t=k("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(t);var e=t.getBoundingClientRect().width;t.style.overflow="scroll";var i=k("div",{style:"width:100%"});t.appendChild(i);var r=i.getBoundingClientRect().width;return t.parentNode.removeChild(t),e-r}function H(t,e,i){t=[];for(var r=0,n=i.length;r<n;r++)t.push({pageX:i[parseInt(r.toString(),10)].clientX,pageY:i[parseInt(r.toString(),10)].clientY,pointerId:null});return t}function W(t,e){var i=b(t,e);i&&i.parentNode.removeChild(i)}function V(t,e,r){var n;if(e){n=k("div",{style:"height: 100%; width: 100%"})}else n=document.createElementNS("http://www.w3.org/2000/svg","g");var o,a=i.i(rt.a)(t),s="",h={};if(a instanceof it.a){if(h=a,"Native"===a.shape.type){!0;var d=void 0,l=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(l),l.innerHTML=a.shape.content,d=l.getElementsByTagName("svg").length>0?l.getElementsByTagName("svg")[0].outerHTML:l.getElementsByTagName("g").length>0?l.getElementsByTagName("g")[0].outerHTML:"",a.shape.content=d,t.content=d,l.parentElement.removeChild(l)}i.i(et.isBlazor)()&&(s="diagramsf_node_template",h=i.i(rt.b)(a)),o="nodeTemplate"}else h=a,i.i(et.isBlazor)()&&(h=i.i(rt.b)(a),s="diagramsf_annotation_template"),o="annotationTemplate";var c,p=document.getElementById(t.diagramId),g=p.ej2_instances[0];if("string"!=typeof t.content||t.isTemplate&&!i.i(et.isBlazor)())if(t.isTemplate){var u=void 0;if(g.isReact)u=t.getNodeTemplate()(i.i($.e)(r),g,o+"_"+("nodeTemplate"===o?r.id:t.nodeId+r.id),void 0,void 0,!1,n);else if(g.isVue||g.isVue3){var f=t.getNodeTemplate();f?u=t.getNodeTemplate()(i.i($.e)(r),g,o+"_"+("nodeTemplate"===o?r.id:t.nodeId+r.id),void 0,void 0,!1,n):(u="nodeTemplate"===o?i.i(et.compile)(g.nodeTemplate):i.i(et.compile)(g.annotationTemplate),u=u(i.i($.e)(r),g,o+"_"+("nodeTemplate"===o?r.id:t.nodeId+r.id),void 0,void 0,!1,n))}else u=t.getNodeTemplate()(i.i($.e)(r),g,o+"_"+("nodeTemplate"===o?r.id:t.nodeId+r.id),void 0,void 0,!1);if(u)for(var m=0;m<u.length;m++)n.appendChild(u[parseInt(m.toString(),10)])}else n.appendChild(t.content);else{var y=document.getElementById(t.content);if(y)n.appendChild(y);else{var u=void 0;u=i.i(et.compile)(t.content);for(var v=0,b=u(h,g,o,s);v<b.length;v++)c=b[v],n.appendChild(c)}}return t.isTemplate?n:n.cloneNode(!0)}function X(t,e){for(var i=Object.keys(e),r=0;r<i.length;r++)t&&"style"!==i[parseInt(r.toString(),10)]?t.setAttribute(i[parseInt(r.toString(),10)],e[i[parseInt(r.toString(),10)]]):Y(t,e[i[parseInt(r.toString(),10)]])}function Y(t,e){for(var i=e.split(";"),r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)].split(":");2===n.length&&(t.style[n[0].trim()]=n[1].trim())}}function U(t,e){for(var i=Object.keys(e),r=0;r<i.length;r++)"style"!==i[parseInt(r.toString(),10)]?t.setAttribute(i[parseInt(r.toString(),10)],e[i[parseInt(r.toString(),10)]]):Y(t,e[i[parseInt(r.toString(),10)]])}function G(){if(window.measureElement)window.measureElement.usageCount+=1;else{var t=k("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),e=k("span",{style:"display:inline-block ; line-height: normal"});t.appendChild(e);var i=k("img",{alt:"measureElementImage",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"});t.appendChild(i);var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.appendChild(r);var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",""),r.appendChild(n);var o=(document.createTextNode(""),document.createElementNS("http://www.w3.org/2000/svg","text"));o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.appendChild(o),window.measureElement=t,window.measureElement.usageCount=1,document.body.appendChild(t);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}}function F(t,e,i,r){return!(e.length>=1&&0===t.x)||"Clip"!==r.textOverflow&&"Ellipsis"!==r.textOverflow||"Wrap"!==r.textWrapping&&"WrapWithOverflow"!==r.textWrapping?t.x:(t.x=e[i-1]?e[i-1].x:-t.width/2,t.x)}function Z(t,e,i){return i&&!e.template?(t.isTemplate=!0,t.template=t.content=V(t,!0,e)):t.content=e.template,t}function q(t,e,r,n){var o,a,s,h,d,l=document.getElementById(n),c=l.ej2_instances[0];if(t&&e){o=i.i(nt.f)(t);for(var p=0,g=r.userHandles;p<g.length;p++)if(a=g[p],o){for(s=o(i.i($.e)(a),c,"userHandleTemplate_"+a.name,void 0,void 0,!1),h=0;h<s.length;h++){var u={style:"height: 100%; width: 100%; pointer-events: all",id:a.name+"_template_hiddenUserHandle"};d=k("div",u),d.appendChild(s[h])}e[0].appendChild(d)}}else if(i.i(et.isBlazor)())for(var f=void 0,m=0,y=r.userHandles;m<y.length;m++)if(a=y[m],!a.pathData&&!a.content&&!a.source){for(s=i.i(et.compile)(a.content),h=0,f=s(i.i(rt.b)(a),c,"userHandleTemplate","diagramsf_userHandle_template");h<f.length;h++){var u={style:"height: 100%; width: 100%; pointer-events: all",id:a.name+"_template_hiddenUserHandle"};d=k("div",u),d.appendChild(f[h])}e[0].appendChild(d)}}e.P=r,e.I=n,e.h=o,e.J=a,e.l=s,e.r=p,e.G=g,e.H=u,e.E=f,e.F=m,e.L=y,e.v=v,e.n=b,e.u=S,e.o=w,e.A=x,e.D=I,e.B=P,e.x=z,e.w=O,e.p=T,e.y=A,e.M=L,e.z=E,e.N=B,e.g=M,e.f=D,e.a=k,e.d=R,e.O=_,e.c=j,e.s=N,e.C=H,e.m=W,e.j=V,e.e=X,e.i=Y,e.b=U,e.t=G,e.K=F,e.k=Z,e.q=q;var Q=i(5),K=i(7),J=i(22),$=i(3),tt=i(16),et=i(0),it=(i.n(et),i(6)),rt=i(2),nt=i(3)},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r=function(){function t(t,e,i,r){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===t||void 0===e?(t=e=Number.MAX_VALUE,i=r=0):(void 0===i&&(i=0),void 0===r&&(r=0)),this.x=t,this.y=e,this.width=i,this.height=r}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),t.prototype.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},t.prototype.uniteRect=function(t){var e=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?t.right:this.right,t.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?t.bottom:this.bottom,t.bottom);return this.x=Math.min(this.left,t.left),this.y=Math.min(this.top,t.top),this.width=e-this.x,this.height=i-this.y,this},t.prototype.unitePoint=function(t){if(this.x===Number.MAX_VALUE)return this.x=t.x,void(this.y=t.y);var e=Math.min(this.left,t.x),i=Math.min(this.top,t.y),r=Math.max(this.right,t.x),n=Math.max(this.bottom,t.y);this.x=e,this.y=i,this.width=r-this.x,this.height=n-this.y},t.prototype.Inflate=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},t.prototype.intersects=function(t){return!(this.right<t.left||this.left>t.right||this.top>t.bottom||this.bottom<t.top)},t.prototype.containsRect=function(t){return this.left<=t.left&&this.right>=t.right&&this.top<=t.top&&this.bottom>=t.bottom},t.prototype.containsPoint=function(t,e){return void 0===e&&(e=0),this.left-e<=t.x&&this.right+e>=t.x&&this.top-e<=t.y&&this.bottom+e>=t.y},t.toBounds=function(e){for(var i=new t,r=0,n=e;r<n.length;r++){var o=n[r];i.unitePoint(o)}return i},t.empty=new t(Number.MAX_VALUE,Number.MIN_VALUE,0,0),t}()},function(t,e,i){"use strict";i.d(e,"b",function(){return H}),i.d(e,"j",function(){return W}),i.d(e,"d",function(){return V}),i.d(e,"k",function(){return X}),i.d(e,"l",function(){return Y}),i.d(e,"m",function(){return U}),i.d(e,"c",function(){return G}),i.d(e,"n",function(){return F}),i.d(e,"r",function(){return Z}),i.d(e,"s",function(){return q}),i.d(e,"g",function(){return Q}),i.d(e,"t",function(){return K}),i.d(e,"u",function(){return J}),i.d(e,"H",function(){return $}),i.d(e,"h",function(){return tt}),i.d(e,"f",function(){return et}),i.d(e,"v",function(){return it}),i.d(e,"e",function(){return rt}),i.d(e,"o",function(){return nt}),i.d(e,"w",function(){return ot}),i.d(e,"x",function(){return at}),i.d(e,"y",function(){return st}),i.d(e,"z",function(){return ht}),i.d(e,"A",function(){return dt}),i.d(e,"B",function(){return lt}),i.d(e,"C",function(){return ct}),i.d(e,"p",function(){return pt}),i.d(e,"I",function(){return gt}),i.d(e,"a",function(){return ut}),i.d(e,"q",function(){return ft}),i.d(e,"D",function(){return mt}),i.d(e,"E",function(){return yt}),i.d(e,"i",function(){return vt}),i.d(e,"F",function(){return bt}),i.d(e,"G",function(){return St});var r=i(0),n=(i.n(r),i(12)),o=i(8),a=i(7),s=i(1),h=i(15),d=i(23),l=i(43),c=i(14),p=i(17),g=i(11),u=i(36),f=i(29),m=i(21),y=i(20),v=i(33),b=i(44),S=i(2),w=i(3),x=i(59),I=i(9),P=i(58),C=i(4),z=i(22),O=i(24),T=i(40),A=i(31),L=i(89),E=i(13),B=i(10),M=i(42),D=i(67),k=i(37),R=i(34),_=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),j=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},N=function(t){if(t){if(i.i(r.isBlazor)())return gt;switch(t.type){case"Basic":return G;case"Flow":return F;case"Path":return W;case"Image":return Y;case"Text":return U;case"Bpmn":return rt;case"Native":return V;case"HTML":return X;case"UmlActivity":return nt;case"UmlClassifier":return pt;case"SwimLane":return vt;default:return G}}return i.i(r.isBlazor)()?gt:G},H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),j([i.i(r.Property)("Basic")],e.prototype,"type",void 0),e}(r.ChildProperty),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"Path"},j([i.i(r.Property)("Path")],e.prototype,"type",void 0),j([i.i(r.Property)("")],e.prototype,"data",void 0),e}(H),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"Native"},j([i.i(r.Property)("Native")],e.prototype,"type",void 0),j([i.i(r.Property)("")],e.prototype,"content",void 0),j([i.i(r.Property)("Stretch")],e.prototype,"scale",void 0),e}(H),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"Html"},j([i.i(r.Property)("HTML")],e.prototype,"type",void 0),j([i.i(r.Property)("")],e.prototype,"content",void 0),e}(H),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"Image"},j([i.i(r.Property)("Image")],e.prototype,"type",void 0),j([i.i(r.Property)("")],e.prototype,"source",void 0),j([i.i(r.Property)("None")],e.prototype,"scale",void 0),j([i.i(r.Property)("None")],e.prototype,"align",void 0),e}(H),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"Text"},j([i.i(r.Property)("Text")],e.prototype,"type",void 0),j([i.i(r.Property)("")],e.prototype,"content",void 0),j([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),e}(H),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"BasicShape"},j([i.i(r.Property)("Basic")],e.prototype,"type",void 0),j([i.i(r.Property)("Rectangle")],e.prototype,"shape",void 0),j([i.i(r.Property)(0)],e.prototype,"cornerRadius",void 0),j([i.i(r.Collection)([],o.a)],e.prototype,"points",void 0),e}(H),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"FlowShape"},j([i.i(r.Property)("Flow")],e.prototype,"type",void 0),j([i.i(r.Property)("Terminator")],e.prototype,"shape",void 0),e}(H),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"BpmnGateway"},j([i.i(r.Property)("None")],e.prototype,"type",void 0),e}(r.ChildProperty),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"BpmnDataObject"},j([i.i(r.Property)("None")],e.prototype,"type",void 0),j([i.i(r.Property)(!1)],e.prototype,"collection",void 0),e}(r.ChildProperty),Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),j([i.i(r.Property)("None")],e.prototype,"type",void 0),j([i.i(r.Property)("None")],e.prototype,"loop",void 0),j([i.i(r.Property)(!1)],e.prototype,"call",void 0),j([i.i(r.Property)(!1)],e.prototype,"compensation",void 0),e}(r.ChildProperty),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"BpmnEvent"},j([i.i(r.Property)("Start")],e.prototype,"event",void 0),j([i.i(r.Property)("None")],e.prototype,"trigger",void 0),e}(r.ChildProperty),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"BpmnSubEvent"},j([i.i(r.Property)("None")],e.prototype,"trigger",void 0),j([i.i(r.Property)("Start")],e.prototype,"event",void 0),j([i.i(r.Property)("")],e.prototype,"id",void 0),j([i.i(r.Complex)({},o.a)],e.prototype,"offset",void 0),j([i.i(r.Collection)([],y.b)],e.prototype,"annotations",void 0),j([i.i(r.Collection)([],m.b)],e.prototype,"ports",void 0),j([i.i(r.Property)()],e.prototype,"width",void 0),j([i.i(r.Property)()],e.prototype,"height",void 0),j([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),j([i.i(r.Property)("Center")],e.prototype,"horizontalAlignment",void 0),j([i.i(r.Property)("Center")],e.prototype,"verticalAlignment",void 0),j([i.i(r.Property)(!0)],e.prototype,"visible",void 0),e}(r.ChildProperty),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),j([i.i(r.Complex)({id:"success",event:"End",offset:{x:1,y:.5}},J)],e.prototype,"success",void 0),j([i.i(r.Complex)({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},J)],e.prototype,"failure",void 0),j([i.i(r.Complex)({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},J)],e.prototype,"cancel",void 0),e}(r.ChildProperty),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),j([i.i(r.Property)("None")],e.prototype,"type",void 0),j([i.i(r.Property)(!1)],e.prototype,"adhoc",void 0),j([i.i(r.Property)("Default")],e.prototype,"boundary",void 0),j([i.i(r.Property)(!1)],e.prototype,"compensation",void 0),j([i.i(r.Property)("None")],e.prototype,"loop",void 0),j([i.i(r.Property)(!0)],e.prototype,"collapsed",void 0),j([i.i(r.Collection)([],J)],e.prototype,"events",void 0),j([i.i(r.Complex)({},$)],e.prototype,"transaction",void 0),j([i.i(r.Property)(void 0)],e.prototype,"processes",void 0),e}(r.ChildProperty),et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"BpmnActivity"},j([i.i(r.Property)("Task")],e.prototype,"activity",void 0),j([i.i(r.Complex)({},Q)],e.prototype,"task",void 0),j([i.i(r.Complex)({},tt)],e.prototype,"subProcess",void 0),e}(r.ChildProperty),it=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return _(e,t),e.prototype.getClassName=function(){return"BpmnAnnotation"},j([i.i(r.Property)("")],e.prototype,"text",void 0),j([i.i(r.Property)("")],e.prototype,"id",void 0),j([i.i(r.Property)(0)],e.prototype,"angle",void 0),j([i.i(r.Property)()],e.prototype,"height",void 0),j([i.i(r.Property)()],e.prototype,"width",void 0),j([i.i(r.Property)(0)],e.prototype,"length",void 0),e}(r.ChildProperty),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"BpmnShape"},j([i.i(r.Property)("Bpmn")],e.prototype,"type",void 0),j([i.i(r.Property)("Event")],e.prototype,"shape",void 0),j([i.i(r.Complex)({},K)],e.prototype,"event",void 0),j([i.i(r.Complex)({},Z)],e.prototype,"gateway",void 0),j([i.i(r.Complex)({},q)],e.prototype,"dataObject",void 0),j([i.i(r.Complex)({},et)],e.prototype,"activity",void 0),j([i.i(r.Complex)({},it)],e.prototype,"annotation",void 0),j([i.i(r.Collection)([],it)],e.prototype,"annotations",void 0),e}(H),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"UmlActivityShape"},j([i.i(r.Property)("UmlActivity")],e.prototype,"type",void 0),j([i.i(r.Property)("Action")],e.prototype,"shape",void 0),e}(H),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"MethodArguments"},j([i.i(r.Property)("")],e.prototype,"name",void 0),j([i.i(r.Property)("")],e.prototype,"type",void 0),j([i.i(r.Complex)({},n.b)],e.prototype,"style",void 0),e}(r.ChildProperty),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"UmlClassAttribute"},j([i.i(r.Property)("Public")],e.prototype,"scope",void 0),j([i.i(r.Property)(!1)],e.prototype,"isSeparator",void 0),e}(ot),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"UmlClassMethod"},j([i.i(r.Collection)([],ot)],e.prototype,"parameters",void 0),e}(at),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"UmlClass"},j([i.i(r.Property)("")],e.prototype,"name",void 0),j([i.i(r.Collection)([],at)],e.prototype,"attributes",void 0),j([i.i(r.Collection)([],st)],e.prototype,"methods",void 0),j([i.i(r.Complex)({},n.b)],e.prototype,"style",void 0),e}(r.ChildProperty),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"UmlInterface"},j([i.i(r.Property)(!1)],e.prototype,"isSeparator",void 0),e}(ht),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"UmlEnumerationMember"},j([i.i(r.Property)("")],e.prototype,"name",void 0),j([i.i(r.Property)("")],e.prototype,"value",void 0),j([i.i(r.Property)(!1)],e.prototype,"isSeparator",void 0),j([i.i(r.Complex)({},n.b)],e.prototype,"style",void 0),e}(r.ChildProperty),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"UmlEnumeration"},j([i.i(r.Property)("")],e.prototype,"name",void 0),j([i.i(r.Collection)([],lt)],e.prototype,"members",void 0),j([i.i(r.Complex)({},n.b)],e.prototype,"style",void 0),e}(r.ChildProperty),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"UmlClassifierShape"},j([i.i(r.Property)("UmlClassifier")],e.prototype,"type",void 0),j([i.i(r.Complex)({},ht)],e.prototype,"classShape",void 0),j([i.i(r.Complex)({},dt)],e.prototype,"interfaceShape",void 0),j([i.i(r.Complex)({},ct)],e.prototype,"enumerationShape",void 0),j([i.i(r.Property)("Class")],e.prototype,"classifier",void 0),e}(H),gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"DiagramShape"},j([i.i(r.Property)("Basic")],e.prototype,"type",void 0),j([i.i(r.Property)("Rectangle")],e.prototype,"basicShape",void 0),j([i.i(r.Property)("Terminator")],e.prototype,"flowShape",void 0),j([i.i(r.Property)("Event")],e.prototype,"bpmnShape",void 0),j([i.i(r.Property)("Action")],e.prototype,"umlActivityShape",void 0),j([i.i(r.Property)("")],e.prototype,"data",void 0),j([i.i(r.Property)("")],e.prototype,"content",void 0),j([i.i(r.Property)("")],e.prototype,"textContent",void 0),j([i.i(r.Property)("Stretch")],e.prototype,"scale",void 0),j([i.i(r.Property)("")],e.prototype,"source",void 0),j([i.i(r.Property)("None")],e.prototype,"align",void 0),j([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),j([i.i(r.Property)(0)],e.prototype,"cornerRadius",void 0),j([i.i(r.Collection)([],o.a)],e.prototype,"points",void 0),j([i.i(r.Complex)({},q)],e.prototype,"dataObject",void 0),j([i.i(r.Complex)({},K)],e.prototype,"event",void 0),j([i.i(r.Complex)({},Z)],e.prototype,"gateway",void 0),j([i.i(r.Collection)([],it)],e.prototype,"annotations",void 0),j([i.i(r.Complex)({},et)],e.prototype,"activity",void 0),j([i.i(r.Complex)({},it)],e.prototype,"annotation",void 0),j([i.i(r.Complex)({},ct)],e.prototype,"enumerationShape",void 0),j([i.i(r.Property)("Class")],e.prototype,"classifier",void 0),j([i.i(r.Complex)({},ht)],e.prototype,"classShape",void 0),j([i.i(r.Complex)({},dt)],e.prototype,"interfaceShape",void 0),e}(r.ChildProperty),ut=function(t){function e(e,r,n,o){var a=t.call(this,e,r,n,o)||this;a.isCanvasUpdate=!1,a.status="None",a.parentId="",a.processId="",a.umlIndex=-1,a.outEdges=[],a.inEdges=[],a.isHeader=!1,a.isLane=!1,a.isPhase=!1,a.isTextNode=!1;var s;return a.children&&a.children.length>0&&(s=n,s.style&&s.style.fill||(a.style.fill="transparent"),s.style&&s.style.strokeColor||(a.style.strokeColor="transparent")),a.shape&&"UmlActivity"===a.shape.type&&i.i(S.c)(n,a),a.shape&&"SwimLane"===a.shape.type&&i.i(S.d)(n,a),a.ports&&a.ports.length&&i.i(S.e)(a),a}return _(e,t),Object.defineProperty(e.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new a.a(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),e.prototype.init=function(t){var e;e="SwimLane"!==this.shape.type?new c.a:new A.a;var n;switch(this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":if(i.i(r.isBlazor)()||"Freehand"!==this.type){var o=new p.a;o.data=this.shape.data,e=o}else{var a=new p.a;a.data=i.i(z.d)(this.shape.points),e=a}break;case"Image":var h=new u.a;h.source=this.shape.source,h.imageAlign=this.shape.align,h.imageScale=this.shape.scale,e=h;break;case"Text":var d=new g.a;d.content=i.i(r.isBlazor)()?this.shape.textContent:this.shape.content,e=d,n=this.style,e.style=n;break;case"Basic":if(!i.i(r.isBlazor)()&&"Rectangle"===this.shape.shape||i.i(r.isBlazor)()&&"Rectangle"===this.shape.basicShape){var m=new c.a;e=m,e.cornerRadius=this.shape.cornerRadius}else if(!i.i(r.isBlazor)()&&"Polygon"===this.shape.shape||i.i(r.isBlazor)()&&"Polygon"===this.shape.basicShape){var a=new p.a;a.data=i.i(z.e)(this.shape.points),e=a}else{var m=new p.a,y=i.i(l.a)(i.i(r.isBlazor)()?this.shape.basicShape:this.shape.shape);m.data=y,e=m}break;case"Flow":var v=new p.a,x=i.i(b.a)(i.i(r.isBlazor)()?this.shape.flowShape:this.shape.shape);v.data=x,e=v;break;case"UmlActivity":var P=new p.a;e=i.i(S.f)(P,e,this);break;case"Bpmn":if(t.bpmnModule){e=t.bpmnModule.initBPMNContent(e,this,t),this.wrapper.elementActions=this.wrapper.elementActions|s.e.ElementIsGroup;var T=this.shape.activity.subProcess;if(T.processes&&T.processes.length)for(var B=this.shape.activity.subProcess.processes,M=0,D=B;M<D.length;M++){var k=D[M];!t.nameTable[""+k]||t.nameTable[""+k].processId&&t.nameTable[""+k].processId!==this.id||(t.nameTable[""+k].processId=this.id,T.collapsed&&t.updateElementVisibility(t.nameTable[""+k].wrapper,t.nameTable[""+k],!T.collapsed),e.children.push(t.nameTable[""+k].wrapper))}}break;case"Native":var R=new f.a(this.id,t.element.id);R.content=this.shape.content,R.scale=this.shape.scale,e=R;break;case"HTML":var _=new O.a(this.id,t.element.id,void 0,t.nodeTemplate);this.shape.content?_.content=this.shape.content:t.nodeTemplate&&(_.isTemplate=!0,_.template=_.content=i.i(C.j)(_,!0,this)),e=_;break;case"UmlClassifier":e=i.i(L.a)(e,this,t);break;case"SwimLane":this.annotations=[],this.ports=[],e.cellStyle.fill="none",e.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},e.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=s.f.HideThumbs,i.i(E.a)(e,t,this)}return e.id=this.id+"_content",e.relativeMode="Object","Basic"===this.shape.type&&"Rectangle"===this.shape.shape?e.shapeType="Rectangle":e.shapeType="Others",void 0!==this.width&&(e.width=this.width),e.horizontalAlignment="Stretch",void 0!==this.height&&(e.height=this.height),void 0!==this.minHeight&&(e.minHeight=this.minHeight),void 0!==this.maxHeight&&(e.maxHeight=this.maxHeight),void 0!==this.minWidth&&(e.minWidth=this.minWidth),void 0!==this.maxWidth&&(e.maxWidth=this.maxWidth),(!i.i(r.isBlazor)()&&"Rectangle"===this.shape.shape&&!this.shape.cornerRadius||i.i(r.isBlazor)()&&"Rectangle"===this.shape.basicShape&&"Basic"===this.shape.type&&!this.shape.cornerRadius)&&(e.isRectElement=!0),e.verticalAlignment="Stretch",(this.shape instanceof U||i.i(r.isBlazor)()&&"Text"===this.shape.type)&&(e.margin=this.shape.margin),i.i(I.a)(this)&&0!=(this.constraints&s.f.Shadow)&&(e.shadow=this.shadow),("Bpmn"!==this.shape.type||!i.i(r.isBlazor)()&&"Message"===this.shape.shape||i.i(r.isBlazor)()&&"Message"===this.shape.bpmnShape||!i.i(r.isBlazor)()&&"DataSource"===this.shape.shape||i.i(r.isBlazor)()&&"DataSource"===this.shape.bpmnShape)&&("UmlActivity"!==this.shape.type||!i.i(r.isBlazor)()&&"FinalNode"!==this.shape.shape||i.i(r.isBlazor)()&&"FinalNode"!==this.shape.umlActivityShape)&&"Text"!==this.shape.type&&(e.style=this.style,this.oldGradientValue=this.style.gradient?i.i(w.e)(this.style.gradient):null),(this.wrapper.elementActions&s.e.ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(e.flip=this.flip),e},e.prototype.initContainer=function(){this.id||(this.id=i.i(w.g)());var t;if(!this.container||this.shape instanceof vt)t=this.children?new h.a:new d.a;else switch(this.container.type){case"Canvas":t=new d.a;break;case"Stack":t=new T.a;break;case"Grid":t=new A.a,t.setDefinitions(this.rows,this.columns)}return t.id=this.id,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t.visible=this.visible,t.horizontalAlignment=this.horizontalAlignment,t.verticalAlignment=this.verticalAlignment,this.container&&(t.width=this.width,t.height=this.height,"Stack"===this.container.type&&(t.orientation=this.container.orientation)),t.style.fill=this.backgroundColor,t.style.strokeColor=this.borderColor,t.style.strokeWidth=this.borderWidth,t.rotateAngle=this.rotateAngle,t.minHeight=this.minHeight,t.minWidth=this.minWidth,t.maxHeight=this.maxHeight,t.maxWidth=this.maxWidth,t.pivot=this.pivot,t.margin=this.margin,t.flip=this.flip,this.wrapper=t,t},e.prototype.initPorts=function(t,e){for(var i=0;this.ports,i<this.ports.length;i++)this.initPort(t,e,this.ports[parseInt(i.toString(),10)])},e.prototype.initPort=function(t,e,r){var n,o=this.wrapper;n=this.initPortWrapper(r,this);var a,h=i.i(w.h)(t);h&&(a=h(n,this)),n.description=a||n.id,n.inversedAlignment=o.inversedAlignment,n.elementActions=n.elementActions|s.e.ElementIsPort,e.children.push(n)},e.prototype.getIconOffet=function(t,e){var i,r;return"BottomToTop"===t.orientation?(i=e.offset.x,r=1-e.offset.y):"LeftToRight"===t.orientation?(i=e.offset.y,r=e.offset.x):"RightToLeft"===t.orientation?(i=1-e.offset.y,r=e.offset.x):(i=e.offset.x,r=e.offset.y),{x:i,y:r}},e.prototype.initIcons=function(t,e,r,n){var o,a=this.wrapper,s=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==s.shape){var h=new d.a;h.float=!0;var l=[];h.id=this.id+"_icon_content",h.children=l,h.height=s.height,h.width=s.width,h.style.strokeColor="transparent",h.margin=s.margin,h.horizontalAlignment="Center",h.verticalAlignment="Center",h.visible=this.visible,o=this.getIconOffet(e,s),h.setOffsetWithRespectToBounds(o.x,o.y,"Fraction"),h.relativeMode="Point",this.initIconSymbol(s,h,t,n);var c=void 0,p=i.i(w.h)(t);p&&(c=p(s,this)),h.description=c||h.id,h.inversedAlignment=a.inversedAlignment,r.children.push(h)}},e.prototype.initfixedUserHandles=function(t){var e=this.wrapper,r=new d.a;r.float=!0;var n=[];t.id=t.id||i.i(w.g)(),r.id=this.id+"_"+t.id,r.children=n,r.height=t.height,r.width=t.width,r.style.strokeColor=t.handleStrokeColor,r.style.fill=t.fill,r.style.strokeWidth=t.handleStrokeWidth,r.margin=t.margin,r.visible=t.visibility,r.cornerRadius=t.cornerRadius,r.horizontalAlignment="Center",r.verticalAlignment="Center";var o=this.getfixedUserHandleOffet(t);r.setOffsetWithRespectToBounds(o.x,o.y,"Fraction"),r.relativeMode="Point";var a=i.i(S.g)(t,r);return r.children.push(a),r.description=r.id,r.inversedAlignment=e.inversedAlignment,r},e.prototype.getfixedUserHandleOffet=function(t){return{x:t.offset.x,y:t.offset.y}},e.prototype.initAnnotations=function(t,e,r,n,o){for(var a,s=0;this.annotations,s<this.annotations.length;s++){a=this.initAnnotationWrapper(this.annotations[parseInt(s.toString(),10)],r,n,s,o);var h=void 0,d=i.i(w.h)(t);d&&(h=d(a,this)),a.description=h||a.id,a.inversedAlignment=e.inversedAlignment,e.children.push(a)}},e.prototype.initPortWrapper=function(t,e){t.id=t.id||i.i(w.g)();var r=new p.a;r.height=t.height,r.width=t.width;var n="Custom"===t.shape?t.pathData:i.i(v.a)(t.shape);r.id=this.id+"_"+t.id,r.margin=t.margin,r.data=n,"Bpmn"===e.shape.type&&(r.flip=this.flip);var o=t.style;return r.style={fill:o.fill,strokeColor:o.strokeColor,gradient:null,opacity:o.opacity,strokeDashArray:o.strokeDashArray,strokeWidth:o.strokeWidth},r.horizontalAlignment=t.horizontalAlignment,r.verticalAlignment=t.verticalAlignment,r=e&&"Label"!==e.flipMode&&"None"!==e.flipMode?i.i(S.h)(r,this.flip,t):i.i(S.h)(r,"None",t),void 0===this.width&&void 0===this.height||(r.float=!0),r.relativeMode="Point",r.visible=!(!i.i(S.i)(t,s.c.Visible)||i.i(S.i)(t,s.c.Hover)||i.i(S.i)(t,s.c.Connect)),r.elementActions=r.elementActions|s.e.ElementIsPort,r},e.prototype.initAnnotationWrapper=function(t,e,n,o,a){t.id=t.id||o+"annotation"||i.i(w.g)();var s,h=t;if(i.i(r.isBlazor)()&&"Template"===t.annotationType&&(t.template=t.template?t.template:""),e&&(t.template||"Template"===t.annotationType||a&&""===t.content))s=new O.a(this.id,e,t.id,a),s=i.i(C.k)(s,t,a);else{s=new g.a,s.canMeasure=!n;var d=t.style,l=t.hyperlink.link?t.hyperlink:void 0;s.style={fill:d.fill,strokeColor:d.strokeColor,strokeWidth:d.strokeWidth,bold:d.bold,textWrapping:d.textWrapping,color:l?l.color||s.hyperlink.color:d.color,whiteSpace:d.whiteSpace,fontFamily:d.fontFamily,fontSize:d.fontSize,italic:d.italic,gradient:null,opacity:d.opacity,strokeDashArray:d.strokeDashArray,textAlign:d.textAlign,textOverflow:t.style.textOverflow,textDecoration:l?l.textDecoration||s.hyperlink.textDecoration:d.textDecoration},s.hyperlink.link=t.hyperlink.link||void 0,s.hyperlink.hyperlinkOpenState=t.hyperlink.hyperlinkOpenState||void 0,s.hyperlink.content=t.hyperlink.content||void 0,s.hyperlink.textDecoration=t.hyperlink.textDecoration||void 0,s.content=l?l.content||s.hyperlink.link:t.content}return s.constraints=t.constraints,s.height=t.height,s.width=t.width,s.visible=t.visibility,s.rotateAngle=t.rotateAngle,s.id=this.id+"_"+t.id,void 0===this.width||t.template||(void 0===t.width||t.width>this.width&&("Wrap"===t.style.textWrapping||"WrapWithOverflow"===t.style.textWrapping))&&(s.width=this.width),s.margin=t.margin,s.horizontalAlignment=t.horizontalAlignment,s.verticalAlignment=t.verticalAlignment,s.setOffsetWithRespectToBounds(h.offset.x,h.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(s.float=!0),s.relativeMode="Point",s},e.prototype.initIconContainer=function(t,e){var i=new c.a;return i.id=e.id+"_rect",i.height=t.height,i.width=t.width,i.visible=e.visible,i.margin=t.margin,i.cornerRadius=t.cornerRadius,i.style={fill:t.fill,strokeColor:t.borderColor,strokeWidth:t.borderWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.description=i.description||"Click here to expand or collapse",i},e.prototype.initIconSymbol=function(t,e,r,n){var o;if(e.children.push(this.initIconContainer(t,e)),"Template"===t.shape)o=new f.a(this.id,n),o.content=t.content,o.height=10,o.width=10;else{o=new p.a,o.data=i.i(v.b)(t);var a=i.i(C.l)(o.data);o.height=a.height<10?a.height:10-(t.padding.bottom+t.padding.top),o.width=a.width<10?a.width:10-(t.padding.left+t.padding.right)}o.id=e.id+"_shape",o.horizontalAlignment="Center",o.verticalAlignment="Center",o.visible=e.visible,o.visible=e.visible,o.style={fill:"black",strokeColor:t.borderColor,strokeWidth:t.borderWidth},o.setOffsetWithRespectToBounds(.5,.5,"Fraction"),o.relativeMode="Object",o.description=e.description||"Click here to expand or collapse",e.children.push(o)},e.prototype.getClassName=function(){return"Node"},j([i.i(r.Collection)([],y.b)],e.prototype,"annotations",void 0),j([i.i(r.Property)(0)],e.prototype,"offsetX",void 0),j([i.i(r.Complex)({},D.a)],e.prototype,"layoutInfo",void 0),j([i.i(r.Property)(0)],e.prototype,"offsetY",void 0),j([i.i(r.Collection)([],m.b)],e.prototype,"ports",void 0),j([i.i(r.Property)(!0)],e.prototype,"isExpanded",void 0),j([i.i(r.Collection)([],R.a)],e.prototype,"fixedUserHandles",void 0),j([i.i(r.Complex)({},P.a)],e.prototype,"expandIcon",void 0),j([i.i(r.Complex)({},P.a)],e.prototype,"collapseIcon",void 0),j([i.i(r.Complex)({x:.5,y:.5},o.a)],e.prototype,"pivot",void 0),j([i.i(r.Property)()],e.prototype,"width",void 0),j([i.i(r.Property)()],e.prototype,"height",void 0),j([i.i(r.Property)()],e.prototype,"minWidth",void 0),j([i.i(r.Property)()],e.prototype,"minHeight",void 0),j([i.i(r.Property)()],e.prototype,"maxWidth",void 0),j([i.i(r.Property)()],e.prototype,"maxHeight",void 0),j([i.i(r.Property)(0)],e.prototype,"rotateAngle",void 0),j([i.i(r.Complex)({fill:"white"},n.b)],e.prototype,"style",void 0),j([i.i(r.Property)("transparent")],e.prototype,"backgroundColor",void 0),j([i.i(r.Property)("none")],e.prototype,"borderColor",void 0),j([i.i(r.Property)(0)],e.prototype,"borderWidth",void 0),j([i.i(r.Property)()],e.prototype,"data",void 0),j([i.i(r.ComplexFactory)(N)],e.prototype,"shape",void 0),j([i.i(r.Complex)({},k.a)],e.prototype,"previewSize",void 0),j([i.i(r.Complex)({},k.a)],e.prototype,"dragSize",void 0),j([i.i(r.Property)(null)],e.prototype,"wrapper",void 0),j([i.i(r.Property)(s.f.Default)],e.prototype,"constraints",void 0),j([i.i(r.Complex)({},n.d)],e.prototype,"shadow",void 0),j([i.i(r.Property)()],e.prototype,"children",void 0),j([i.i(r.Complex)({left:0,right:0,top:0,bottom:0},n.a)],e.prototype,"padding",void 0),j([i.i(r.Property)(null)],e.prototype,"container",void 0),j([i.i(r.Property)("Left")],e.prototype,"horizontalAlignment",void 0),j([i.i(r.Property)("Top")],e.prototype,"verticalAlignment",void 0),j([i.i(r.Property)()],e.prototype,"rows",void 0),j([i.i(r.Property)()],e.prototype,"columns",void 0),j([i.i(r.Property)()],e.prototype,"rowIndex",void 0),j([i.i(r.Property)()],e.prototype,"columnIndex",void 0),j([i.i(r.Property)()],e.prototype,"rowSpan",void 0),j([i.i(r.Property)()],e.prototype,"columnSpan",void 0),j([i.i(r.Property)("")],e.prototype,"branch",void 0),e}(x.a),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),j([i.i(r.Property)("")],e.prototype,"id",void 0),j([i.i(r.Complex)({},y.a)],e.prototype,"annotation",void 0),j([i.i(r.Complex)({fill:"#E7F4FF",strokeColor:"#CCCCCC"},n.c)],e.prototype,"style",void 0),j([i.i(r.Property)(50)],e.prototype,"height",void 0),j([i.i(r.Property)(50)],e.prototype,"width",void 0),e}(r.ChildProperty),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"Lane"},j([i.i(r.Property)("")],e.prototype,"id",void 0),j([i.i(r.Complex)({fill:"#F9F9F9",strokeColor:"#CCCCCC"},n.c)],e.prototype,"style",void 0),j([i.i(r.Collection)([],ut)],e.prototype,"children",void 0),j([i.i(r.Property)(100)],e.prototype,"height",void 0),j([i.i(r.Property)(100)],e.prototype,"width",void 0),j([i.i(r.Complex)({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},ft)],e.prototype,"header",void 0),j([i.i(r.Property)(!0)],e.prototype,"canMove",void 0),j([i.i(r.Property)()],e.prototype,"addInfo",void 0),e}(r.ChildProperty),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.getClassName=function(){return"Phase"},j([i.i(r.Property)("")],e.prototype,"id",void 0),j([i.i(r.Complex)({strokeColor:"#CCCCCC"},n.c)],e.prototype,"style",void 0),j([i.i(r.Complex)({annotation:{content:"Phase"}},ft)],e.prototype,"header",void 0),j([i.i(r.Property)(100)],e.prototype,"offset",void 0),j([i.i(r.Property)()],e.prototype,"addInfo",void 0),e}(r.ChildProperty),vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=20,e.hasHeader=!0,e}return _(e,t),e.prototype.getClassName=function(){return"SwimLane"},j([i.i(r.Property)("SwimLane")],e.prototype,"type",void 0),j([i.i(r.Property)(20)],e.prototype,"phaseSize",void 0),j([i.i(r.Collection)([],yt)],e.prototype,"phases",void 0),j([i.i(r.Property)("Horizontal")],e.prototype,"orientation",void 0),j([i.i(r.Collection)([],mt)],e.prototype,"lanes",void 0),j([i.i(r.Complex)({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},ft)],e.prototype,"header",void 0),j([i.i(r.Property)(!1)],e.prototype,"isLane",void 0),j([i.i(r.Property)(!1)],e.prototype,"isPhase",void 0),e}(H),bt=function(){function t(){}return t.prototype.getClassName=function(){return"ChildContainer"},j([i.i(r.Property)("Canvas")],t.prototype,"type",void 0),j([i.i(r.Property)("Vertical")],t.prototype,"orientation",void 0),t}(),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.init=function(t){var e=new h.a;if(e.measureChildren=!1,e.children=[],this.annotation){var i=this.nodes.length>0?t.nameTable[this.nodes[0].id].wrapper:t.nameTable[this.connectors[0].id].wrapper,r=t.getWrapper(i,this.annotation.id);e.children.push(r)}else if(this.nodes||this.connectors){for(var n=0;n<this.nodes.length;n++){var o=t.nameTable[this.nodes[parseInt(n.toString(),10)].id],r=o.wrapper;e.children.push(r)}for(var a=0;a<this.connectors.length;a++){var s=t.nameTable[this.connectors[parseInt(a.toString(),10)].id],r=s.wrapper;e.children.push(r)}}var d=t.isProtectedOnChange;return t.protectPropertyChange(!1),this.wrapper=e,t.protectPropertyChange(d),e},j([i.i(r.Property)(null)],e.prototype,"wrapper",void 0),j([i.i(r.Property)(14)],e.prototype,"handleSize",void 0),j([i.i(r.Collection)([],ut)],e.prototype,"nodes",void 0),j([i.i(r.Collection)([],B.a)],e.prototype,"connectors",void 0),j([i.i(r.Property)()],e.prototype,"width",void 0),j([i.i(r.Property)()],e.prototype,"height",void 0),j([i.i(r.Property)(0)],e.prototype,"rotateAngle",void 0),j([i.i(r.Property)(0)],e.prototype,"offsetX",void 0),j([i.i(r.Property)(0)],e.prototype,"offsetY",void 0),j([i.i(r.Complex)({x:.5,y:.5},o.a)],e.prototype,"pivot",void 0),j([i.i(r.Property)("CompleteIntersect")],e.prototype,"rubberBandSelectionMode",void 0),j([i.i(r.Collection)([],M.a)],e.prototype,"userHandles",void 0),j([i.i(r.Property)(s.g.All)],e.prototype,"constraints",void 0),j([i.i(r.Property)()],e.prototype,"setTooltipTemplate",void 0),j([i.i(r.Collection)([],ut)],e.prototype,"selectedObjects",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.isEmpty=function(){return 0===this.height&&0===this.width},t.prototype.clone=function(){return new t(this.width,this.height)},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.equals=function(t,e){return t===e||!(!t||!e)&&(!t||!e||t.x===e.x&&t.y===e.y)},e.isEmptyPoint=function(t){return!t.x||!t.y},e.transform=function(t,e,i){var r={x:0,y:0};return r.x=Math.round(100*(t.x+i*Math.cos(e*Math.PI/180)))/100,r.y=Math.round(100*(t.y+i*Math.sin(e*Math.PI/180)))/100,r},e.findLength=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.findAngle=function(t,e){var i=Math.atan2(e.y-t.y,e.x-t.x);return i=180*i/Math.PI,i%=360,i<0&&(i+=360),i},e.distancePoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getLengthFromListOfPoints=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=this.distancePoints(t[parseInt(i.toString(),10)],t[i+1]);return e},e.adjustPoint=function(t,e,i,r){var n,o=i?{x:t.x,y:t.y}:{x:e.x,y:e.y};return t.x===e.x?t.y<e.y&&i||t.y>e.y&&!i?o.y+=r:o.y-=r:t.y===e.y?t.x<e.x&&i||t.x>e.x&&!i?o.x+=r:o.x-=r:i?(n=this.findAngle(t,e),o=this.transform(t,n,r)):(n=this.findAngle(e,t),o=this.transform(e,n,r)),o},e.direction=function(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"Right":"Left":t.y<e.y?"Bottom":"Top"},e.prototype.getClassName=function(){return"Point"},o([i.i(r.Property)(0)],e.prototype,"x",void 0),o([i.i(r.Property)(0)],e.prototype,"y",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";function r(t){if(t){return t instanceof U.b||t instanceof U.c?t.constraints&X.b.Select:t instanceof Y.a?t.constraints&X.h.Select:t.constraints&X.f.Select}return 1}function n(t){if(t){return t instanceof U.b||t instanceof U.c?t.constraints&X.b.Drag:t instanceof Y.a?t.constraints&X.h.Drag:t instanceof V.G?1:t.constraints&X.f.Drag}return 1}function o(t,e){return t instanceof Y.a?t.constraints&X.h.PointerEvents:t.constraints&X.f.PointerEvents}function a(t){return t instanceof Y.a?t.constraints&X.h.Delete:t.constraints&X.f.Delete}function s(t,e){return t.constraints&X.h.Bridging?t.constraints&X.h.Bridging:t.constraints&X.h.InheritBridging?e.constraints&X.j.Bridging:0}function h(t,e){var i=0;return t.constraints&X.h.LineRouting?i=t.constraints&X.h.LineRouting:t.constraints&X.h.InheritLineRouting&&(i=e.constraints&X.j.LineRouting),i}function d(t){return t.constraints&X.h.DragSourceEnd}function l(t){return t.constraints&X.h.DragTargetEnd}function c(t){return t.constraints&X.h.DragSegmentThumb}function p(t){return t instanceof U.b||t instanceof U.c?t.constraints&X.b.Rotate:t.constraints&X.f.Rotate}function g(t){return t.constraints&X.f.Shadow}function u(t){return t instanceof V.a&&t.constraints&X.f.InConnect?t.constraints&X.f.InConnect:0}function f(t){return t&&t.constraints&&!(t.constraints&X.d.None)&&t.constraints&X.d.InConnect?t.constraints&X.d.InConnect:0}function m(t){return t instanceof V.a&&t.constraints&X.f.OutConnect?t.constraints&X.f.OutConnect:0}function y(t){return t&&t.constraints&&!(t.constraints&X.d.None)&&t.constraints&X.d.OutConnect?t.constraints&X.d.OutConnect:0}function v(t,e){var i=0;return t instanceof U.b||t instanceof U.c?i=t.constraints&X.b.Resize:t&&("SouthEast"===e?i=t.constraints&X.f.ResizeSouthEast:"East"===e?i=t.constraints&X.f.ResizeEast:"NorthEast"===e?i=t.constraints&X.f.ResizeNorthEast:"South"===e?i=t.constraints&X.f.ResizeSouth:"North"===e?i=t.constraints&X.f.ResizeNorth:"SouthWest"===e?i=t.constraints&X.f.ResizeSouthWest:"West"===e?i=t.constraints&X.f.ResizeWest:"NorthWest"===e&&(i=t.constraints&X.f.ResizeNorthWest)),i}function b(t){return t instanceof Y.a?t.constraints&X.h.AllowDrop:t.constraints&X.f.AllowDrop}function S(t){return t.constraints&X.j.Virtualization}function w(t,e){var i=0;return t instanceof Y.a?t.constraints&X.h.Tooltip?i=t.constraints&X.h.Tooltip:t.constraints&X.h.InheritTooltip&&(i=e.constraints&X.j.Tooltip):t.constraints&X.f.Tooltip?i=t.constraints&X.f.Tooltip:t.constraints&X.f.InheritTooltip&&(i=e.constraints&X.j.Tooltip),i}function x(t){return t.tool&X.k.SingleSelect}function I(t){return t.tool&X.k.MultipleSelect}function P(t){return t.tool&X.k.ZoomPan}function C(t){return t.tool&X.k.ContinuousDraw}function z(t){return t.tool&X.k.DrawOnce}function O(t){return t.tool&X.k.SingleSelect||t.tool&X.k.MultipleSelect}function T(t){return t.constraints&X.j.Zoom}function A(t){return t.constraints&X.j.Pan}function L(t){return t.constraints&X.j.UserInteraction}function E(t){return t.constraints&X.j.ApiUpdate}function B(t){return t.constraints&X.j.PanX}function M(t){return t.constraints&X.j.PanY}function D(t){return t.constraints&X.j.ZoomTextEdit}function k(t){return E(t)||t.diagramActions&X.p.ToolAction}function R(t,e){var i=0;return i=e instanceof Y.a?X.h.ReadOnly:X.f.ReadOnly,"Text"===e.shape.type?e.constraints&X.f.ReadOnly:e.constraints&i?t.constraints&X.b.InheritReadOnly?1:0:t.constraints&X.b.ReadOnly?1:0}function _(t,e){return t.constraints&X.d.Draw}function j(t,e){return t.constraints&X.d.Drag}function N(t){return!!(t&X.p.PreventClearSelection)}function H(t){return!(t&X.q.DrawSelectorBorder)}function W(t){return!!(t&X.q.PreventRenderSelector)}e.c=r,e.d=n,e.F=o,e.v=a,e.L=s,e.K=h,e.l=d,e.m=l,e.s=c,e.n=p,e.a=g,e.g=u,e.h=f,e.e=m,e.f=y,e.b=v,e.i=b,e.y=S,e.E=w,e.p=x,e.q=I,e.o=P,e.k=C,e.j=z,e.r=O,e.A=T,e.B=A,e.C=L,e.H=B,e.I=M,e.w=D,e.G=k,e.x=R,e.u=_,e.t=j,e.D=N,e.z=H,e.J=W;var V=i(6),X=i(1),Y=i(10),U=i(20)},function(t,e,i){"use strict";function r(t,e,r){var n=t.center,o=r?45:180/(2+2/(t.height/t.width)),a=o,s=180-o,h=s+2*o,d=360-o,l=i.i(f.a)(e,n);return l>a&&l<s?"top":l>s&&l<h?"right":l>h&&l<d?"bottom":"left"}function n(t){return!t.distance&&!t.angle}function o(t,e,i){var r=60,n={x:0,y:0};switch(i||(i=Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"right":"left":t.y<e.y?"bottom":"top"),i){case"bottom":case"top":r=Math.min(.45*Math.abs(t.y-e.y),r),n={x:t.x,y:t.y+("bottom"===i?r:-r)};break;case"right":case"left":r=Math.min(.45*Math.abs(t.x-e.x),r),n={x:t.x+("right"===i?r:-r),y:t.y}}return n}function a(t,e,i,r,n){var o=0,a=0,s=0,h=0,d=Number((n.distance(e,t)+n.distance(i,e)+n.distance(r,i))/3);if(0!==d)for(var l=0;l<=d;l++){var c=l/d,p=(1-c)*(1-c)*(1-c)*t.x+3*c*(1-c)*(1-c)*e.x+3*c*c*(1-c)*i.x+c*c*c*r.x,g=(1-c)*(1-c)*(1-c)*t.y+3*c*(1-c)*(1-c)*e.y+3*c*c*(1-c)*i.y+c*c*c*r.y;0===l?(o=s=p,a=h=g):(o=Math.min(p,o),a=Math.min(g,a),s=Math.max(p,s),h=Math.max(g,h))}return{x:o,y:a,width:s-o,height:h-a,left:o,top:a,right:o+(s-o),bottom:a+(h-a),center:{x:(o+(s-o))/2,y:(a+(h-a))/2}}}function s(t,e,i,r,n,o,a){var s={x:0,y:0},h=o/a,d=(1-h)*(1-h)*(1-h)*e.x+3*h*(1-h)*(1-h)*i.x+3*h*h*(1-h)*r.x+h*h*h*n.x;s.x=d;var l=(1-h)*(1-h)*(1-h)*e.y+3*h*(1-h)*(1-h)*i.y+3*h*h*(1-h)*r.y+h*h*h*n.y;return s.y=l,s}i.d(e,"b",function(){return R}),i.d(e,"i",function(){return _}),i.d(e,"j",function(){return j}),i.d(e,"k",function(){return N}),i.d(e,"l",function(){return H}),i.d(e,"m",function(){return W}),i.d(e,"n",function(){return V}),i.d(e,"d",function(){return X}),i.d(e,"e",function(){return Y}),i.d(e,"f",function(){return U}),i.d(e,"o",function(){return G}),e.p=r,e.g=n,e.h=o,e.q=a,e.c=s,i.d(e,"r",function(){return F}),i.d(e,"s",function(){return Z}),i.d(e,"t",function(){return q}),i.d(e,"u",function(){return Q}),i.d(e,"a",function(){return K});var h=i(0),d=(i.n(h),i(12)),l=i(8),c=i(11),p=i(1),g=i(5),u=i(7),f=i(18),m=i(2),y=i(3),v=i(2),b=i(17),S=i(20),w=i(23),x=i(33),I=i(14),P=i(59),C=i(30),z=i(16),O=i(24),T=i(4),A=i(37),L=i(34),E=i(27),B=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),M=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},D=function(t){if(i.i(h.isBlazor)())return Q;if(t)switch(t.type){case"Bpmn":return W;case"UmlActivity":return H;case"UmlClassifier":return q;default:return N}return N},k=function(t){if(t){if(i.i(h.isBlazor)())return G;switch(t.type){case"Straight":return X;case"Bezier":return Y;case"Orthogonal":return U;default:return X}}},R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)(10)],e.prototype,"width",void 0),M([i.i(h.Property)(10)],e.prototype,"height",void 0),M([i.i(h.Property)("Arrow")],e.prototype,"shape",void 0),M([i.i(h.Complex)({fill:"black",strokeColor:"black",strokeWidth:1},d.c)],e.prototype,"style",void 0),M([i.i(h.Complex)({x:0,y:.5},l.a)],e.prototype,"pivot",void 0),M([i.i(h.Property)("")],e.prototype,"pathData",void 0),e}(h.ChildProperty),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)(0)],e.prototype,"angle",void 0),M([i.i(h.Property)(0)],e.prototype,"distance",void 0),e}(h.ChildProperty),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)(p.m.All)],e.prototype,"controlPointsVisibility",void 0),M([i.i(h.Property)("FreeForm")],e.prototype,"segmentEditOrientation",void 0),M([i.i(h.Property)(p.s.Default)],e.prototype,"smoothness",void 0),M([i.i(h.Property)(!0)],e.prototype,"allowSegmentsReset",void 0),e}(h.ChildProperty),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)("None")],e.prototype,"type",void 0),e}(h.ChildProperty),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)("Object")],e.prototype,"flow",void 0),M([i.i(h.Property)(30)],e.prototype,"exceptionFlowHeight",void 0),e}(N),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)("Sequence")],e.prototype,"flow",void 0),M([i.i(h.Property)("Normal")],e.prototype,"sequence",void 0),M([i.i(h.Property)("Default")],e.prototype,"message",void 0),M([i.i(h.Property)("Default")],e.prototype,"association",void 0),e}(N),V=function(t){function e(e,i,r,n){var o=t.call(this,e,i,r,n)||this;return o.points=[],o}return B(e,t),M([i.i(h.Property)("Straight")],e.prototype,"type",void 0),M([i.i(h.Property)(!0)],e.prototype,"allowDrag",void 0),e}(h.ChildProperty),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.getClassName=function(){return"StraightSegment"},M([i.i(h.Complex)({x:0,y:0},l.a)],e.prototype,"point",void 0),e}(V),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.getClassName=function(){return"BezierSegment"},e.prototype.getPoints=function(t,e){var i=[];if(i.length>0||null!=e){var r=i.length>0?i[i.length-1]:e,n=this.bezireToPoly(r,t);i.push.apply(i,n)}return i},e.prototype.bezireToPoly=function(t,e){var i=[];if(e){var r=e,n=t,o=r.bezierPoint1,a=r.bezierPoint2,s={x:r.points[1].x,y:r.points[1].y};this.flattenCubicBezier(i,n,o,a,s,10)}return i},e.prototype.flattenCubicBezier=function(t,e,i,r,n,o){var a,s=(l.a.findLength(e,i)+l.a.findLength(i,r)+l.a.findLength(r,n))/o;for(a=0;a<=s;a++){var h=a/s,d=(1-h)*(1-h)*(1-h)*e.x+3*h*(1-h)*(1-h)*i.x+3*h*h*(1-h)*r.x+h*h*h*n.x,c=(1-h)*(1-h)*(1-h)*e.y+3*h*(1-h)*(1-h)*i.y+3*h*h*(1-h)*r.y+h*h*h*n.y;t.push({x:d,y:c})}},M([i.i(h.Property)("Horizontal")],e.prototype,"orientation",void 0),M([i.i(h.Complex)({x:0,y:0},l.a)],e.prototype,"point1",void 0),M([i.i(h.Complex)({x:0,y:0},l.a)],e.prototype,"point2",void 0),M([i.i(h.Complex)({angle:0,distance:0},_)],e.prototype,"vector1",void 0),M([i.i(h.Complex)({angle:0,distance:0},_)],e.prototype,"vector2",void 0),e}(X),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.getClassName=function(){return"OrthogonalSegment"},M([i.i(h.Property)(null)],e.prototype,"length",void 0),M([i.i(h.Property)(null)],e.prototype,"direction",void 0),e}(V),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.getClassName=function(){return"DiagramConnectorSegment"},M([i.i(h.Property)("Straight")],e.prototype,"type",void 0),M([i.i(h.Property)(!0)],e.prototype,"allowDrag",void 0),M([i.i(h.Complex)({x:0,y:0},l.a)],e.prototype,"point",void 0),M([i.i(h.Complex)({x:0,y:0},l.a)],e.prototype,"point1",void 0),M([i.i(h.Complex)({x:0,y:0},l.a)],e.prototype,"point2",void 0),M([i.i(h.Complex)({angle:0,distance:0},_)],e.prototype,"vector1",void 0),M([i.i(h.Complex)({angle:0,distance:0},_)],e.prototype,"vector2",void 0),M([i.i(h.Property)(null)],e.prototype,"length",void 0),M([i.i(h.Property)(null)],e.prototype,"direction",void 0),e}(h.ChildProperty),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)(!0)],e.prototype,"optional",void 0),M([i.i(h.Property)(void 0)],e.prototype,"lowerBounds",void 0),M([i.i(h.Property)(void 0)],e.prototype,"upperBounds",void 0),e}(h.ChildProperty),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)("OneToOne")],e.prototype,"type",void 0),M([i.i(h.Complex)({},F)],e.prototype,"target",void 0),M([i.i(h.Complex)({},F)],e.prototype,"source",void 0),e}(h.ChildProperty),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)("UmlClassifier")],e.prototype,"type",void 0),M([i.i(h.Property)("Aggregation")],e.prototype,"relationship",void 0),M([i.i(h.Property)("Directional")],e.prototype,"associationType",void 0),M([i.i(h.Complex)({},Z)],e.prototype,"multiplicity",void 0),e}(N),Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),M([i.i(h.Property)("None")],e.prototype,"type",void 0),M([i.i(h.Property)("Directional")],e.prototype,"associationType",void 0),M([i.i(h.Property)("Aggregation")],e.prototype,"relationship",void 0),M([i.i(h.Complex)({},Z)],e.prototype,"multiplicity",void 0),M([i.i(h.Property)("Sequence")],e.prototype,"bpmnFlow",void 0),M([i.i(h.Property)("Default")],e.prototype,"message",void 0),M([i.i(h.Property)("Normal")],e.prototype,"sequence",void 0),M([i.i(h.Property)("Default")],e.prototype,"association",void 0),M([i.i(h.Property)("Object")],e.prototype,"umlActivityFlow",void 0),M([i.i(h.Property)(30)],e.prototype,"exceptionFlowHeight",void 0),e}(h.ChildProperty),K=function(t){function e(e,r,n,o){var a=t.call(this,e,r,n,o)||this;return a.parentId="",a.bridges=[],a.status="None",a.shape&&"UmlActivity"===a.shape.type&&i.i(m.c)(n,a),n&&n.shape&&"None"!==n.shape.type&&i.i(m.m)(n,a),a}return B(e,t),e.prototype.setPortID=function(t,e){if(this.targetID&&this.sourceID)for(var i=t.nameTable[this.targetID],r=t.nameTable[this.sourceID],n=e?i&&i.ports:r&&r.ports,o=void 0,a=0;n&&a<n.length;a++)o=n[parseInt(a.toString(),10)],this.targetPortID===o.id&&e?!(o.constraints&p.d.None)&&o.constraints&p.d.InConnect||(this.targetPortID=""):this.sourcePortID!==o.id||e||!(o.constraints&p.d.None)&&o.constraints&p.d.OutConnect||(this.sourcePortID="")},e.prototype.init=function(t){this.id||(this.id=i.i(y.g)()),this.sourcePortID&&this.setPortID(t),this.targetPortID&&this.setPortID(t,!0);var e,r=new w.a,n=new b.a;n.id=this.id+"_path";var o=new b.a,a=new b.a;n=this.getSegmentElement(this,n);var s=[];s="Bezier"===this.type?this.intermediatePoints:this.getConnectorPoints(this.type),s=this.clipDecorators(this,s);var d=g.a.toBounds(s);switch(r.width=d.width,r.height=d.height,r.offsetX=d.x+r.pivot.x*d.width,r.offsetY=d.y+r.pivot.y*d.height,this.shape.type){case"Bpmn":switch(i.i(h.isBlazor)()?this.shape.bpmnFlow:this.shape.flow){case"Sequence":e=this.getBpmnSequenceFlow();break;case"Association":e=new b.a,e.visible=!1,this.getBpmnAssociationFlow();break;case"Message":e=this.getBpmnMessageFlow(),n=this.getSegmentElement(this,n),this.updateShapePosition(this,e)}break;case"UmlActivity":switch(i.i(h.isBlazor)()?this.shape.umlActivityFlow:this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(n)}break;case"UmlClassifier":this.getConnectorRelation()}var c=this.intermediatePoints;if("Bezier"===this.type){var p=this.segments[0],u=this.segments[this.segments.length-1];c=[l.a.isEmptyPoint(u.point2)?u.bezierPoint2:u.point2,l.a.isEmptyPoint(p.point1)?p.bezierPoint1:p.point1]}var f=t.getDescription;if(o=this.getDecoratorElement(s[0],c[1],this.sourceDecorator,!0,f),a=this.getDecoratorElement(s[s.length-1],c[c.length-2],this.targetDecorator,!1,f),o.id=this.id+"_srcDec",a.id=this.id+"_tarDec",n.style=this.style,n.style.fill="transparent",void 0!==f){var m=f(this,t);n.description=m||this.id}r.style.strokeColor="transparent",r.style.fill="transparent",r.style.strokeWidth=0,r.children=[n,o,a],r.id=this.id,void 0!==e&&r.children.push(e),r.offsetX=n.offsetX,r.offsetY=n.offsetY,r.width=n.width,r.height=n.height;for(var v=0;this.annotations,v<this.annotations.length;v++)r.children.push(this.getAnnotationElement(this.annotations[parseInt(v.toString(),10)],this.intermediatePoints,d,f,t.element.id,t.annotationTemplate));for(var v=0;this.fixedUserHandles,v<this.fixedUserHandles.length;v++)r.children.push(this.getfixedUserHandle(this.fixedUserHandles[parseInt(v.toString(),10)],this.intermediatePoints,d));return this.wrapper=r,r},e.prototype.getConnectorRelation=function(){var t=this.shape;"Association"===t.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Aggregation"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===t.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===t.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var e="",i="",r="",n="";t.multiplicity.source&&(t.multiplicity.source.lowerBounds=t.multiplicity.source.lowerBounds,t.multiplicity.source.upperBounds=t.multiplicity.source.upperBounds),t.multiplicity.target&&(t.multiplicity.target.lowerBounds=t.multiplicity.target.lowerBounds,t.multiplicity.target.upperBounds=t.multiplicity.target.upperBounds);var o=t.multiplicity.source,a=t.multiplicity.target;n=o.upperBounds?o.lowerBounds+"..."+o.upperBounds:o.lowerBounds,e=a.upperBounds?a.lowerBounds+"..."+a.upperBounds:a.lowerBounds,"ManyToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,i=n||"*",r="1"),"OneToMany"===t.multiplicity.type&&(t.multiplicity.source.optional=!1,r=e||"*",i="1"),"ManyToOne"===t.multiplicity.type&&(i=n||"*",r=e||"*"),"OneToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,t.multiplicity.source.optional=!1,i="1",r="1"),this.annotations=[{id:this.id+"sourcelabel",content:i,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:r,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},e.prototype.getBpmnSequenceFlow=function(){var t=new b.a,e=new b.a;if("Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence){t=this.getSegmentElement(this,t);var r=this.intermediatePoints;e=i.i(m.n)(r,this),this.targetDecorator.shape="Arrow"}return"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",e.id=this.id+this.shape.type),e},e.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var t=0;t<this.annotations.length;t++)this.annotations[parseInt(t.toString(),10)].content="["+this.annotations[parseInt(t.toString(),10)].content+"]"},e.prototype.getUMLExceptionFlow=function(t){this.type="Straight";var e=this.shape.exceptionFlowHeight/2,r={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=r.x-this.sourcePoint.x,o=r.y-this.sourcePoint.y,a=Math.sqrt(n*n+o*o),s=e/a,h={x:r.x-n*s,y:r.y-o*s},d={x:r.x+n*s,y:r.y+o*s},l=i.i(z.a)();i.i(z.b)(l,315,r.x,r.y),this.segments=[];var c=new X(this,"segments",{type:"Straight",point:i.i(z.c)(l,d)},!0);this.segments.push(c),c=new X(this,"segments",{type:"Straight",point:i.i(z.c)(l,h)},!0),this.segments.push(c),t=this.getSegmentElement(this,t)},e.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="None",this.style.strokeDashArray="2 2"),"Directional"===this.shape.association&&(this.targetDecorator.shape="OpenArrow",this.style.strokeDashArray="2 2"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="OpenArrow",this.sourceDecorator.shape="OpenArrow",this.style.strokeDashArray="2 2")},e.prototype.getfixedUserHandle=function(t,e,r){var n=new w.a;n.float=!0;var o=[];t.id=t.id||i.i(y.g)(),n.id=this.id+"_"+t.id,n.children=o,n.visible=t.visibility,n.width=t.width,n.height=t.height,n.style.strokeWidth=t.handleStrokeWidth,n.style.fill=t.fill,n.style.strokeColor=t.handleStrokeColor,n.cornerRadius=t.cornerRadius,this.updateAnnotation(t,e,r,n);var a=i.i(m.g)(t,n);return n.children.push(a),n.description=n.id,n},e.prototype.getBpmnMessageFlow=function(){var t=new b.a;return this.targetDecorator.shape="Arrow",this.targetDecorator.width=10,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle",this.sourceDecorator.style.fill="white",this.targetDecorator.style.fill="white","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(t.id=this.id+"_"+this.shape.message,t.width=25,t.height=15,t.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",t.horizontalAlignment="Center",t.verticalAlignment="Center",t.transform=p.n.Self,t.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),t},e.prototype.distance=function(t,e){return i.i(m.o)(t,e)},e.prototype.findPath=function(t,e){return i.i(m.p)(t,e)},e.prototype.getAnnotationElement=function(t,e,r,n,o,a){t.id=t.id||i.i(y.g)();var s;i.i(h.isBlazor)()&&"Template"===t.annotationType&&(t.template=t.template?t.template:""),o&&(t.template||"Template"===t.annotationType||a&&""===t.content)?(s=new O.a(this.id,o,t.id,a),s=i.i(T.k)(s,t,a)):(s=new c.a,s.content=t.content,s.style.textOverflow="Wrap"),s.constraints=t.constraints,s.visible=t.visibility,s.rotateAngle=t.rotateAngle,s.horizontalAlignment=t.horizontalAlignment,s.verticalAlignment=t.verticalAlignment,s.width=t.width,s.height=t.height,void 0===r.width||t.template||(s.width=(t.width||r.width)-t.margin.left-t.margin.right),s.margin=t.margin,s.id=this.id+"_"+t.id,0===r.width&&(r.width=this.style.strokeWidth),0===r.height&&(r.height=this.style.strokeWidth),s.style=t.style;var d,l=i.i(y.h)(n);return l&&(d=l(t,this)),s.description=d||s.id,this.updateAnnotation(t,e,r,s),s},e.prototype.updateAnnotation=function(t,e,r,n,o){var a={x:0,y:0};n instanceof O.a||I.a||o||n.refreshTextElement(),n.width=t.width||r.width;var s=i.i(m.q)(e,t,r),h=s.point;t instanceof S.c&&t.segmentAngle&&(n.rotateAngle=t.rotateAngle+s.angle,n.rotateAngle=(n.rotateAngle+360)%360),0===r.width&&(r.width=this.style.strokeWidth),0===r.height&&(r.height=this.style.strokeWidth);var d={x:(h.x-r.x)/r.width,y:(h.y-r.y)/r.height};a.x=r.width*d.x,a.y=r.height*d.y;var l,c,p=i.i(m.r)(t,s.angle,e),g=p.hAlign,u=p.vAlign;"left"===g?(l="Left",a.x+=t.displacement.x):"right"===g?(l="Right",a.x-=t.displacement.x):"center"===g&&(l="Center"),"top"===u?(c="Top",a.y+=t.displacement.y):"bottom"===u?(c="Bottom",a.y-=t.displacement.y):"center"===u&&(c="Center"),n.horizontalAlignment=l,n.verticalAlignment=c,n.setOffsetWithRespectToBounds(a.x,a.y,"Absolute"),n.relativeMode="Point"},e.prototype.getConnectorPoints=function(t,e,r,n){e=i.i(f.b)(this,r,n);var o=e.slice(0);return o&&o.length>0&&(this.sourcePoint=o[0],this.targetPoint=o[o.length-1]),o},e.prototype.clipDecorator=function(t,e,i,r){var n={x:0,y:0},o={x:0,y:0},a={x:0,y:0},s=e.length;o=i?e[0]:e[s-1],a=i?e[1]:e[s-2];var h=l.a.distancePoints(o,a);h=0===h?1:h;var d=1,c=i?t.sourceWrapper:t.targetWrapper;c&&(d=c.style.strokeWidth,r&&r&p.p.DecoratorPropertyChange&&(d=1));var g=d-1;return n.x=Math.round(o.x+g*(a.x-o.x)/h),n.y=Math.round(o.y+g*(a.y-o.y)/h),(i&&"None"!==t.sourceDecorator.shape||!i&&"None"!==t.targetDecorator.shape)&&(n=l.a.adjustPoint(n,a,!0,r&p.p.DecoratorPropertyChange?0:d/2)),n},e.prototype.clipDecorators=function(t,e,i){return"None"!==t.sourceDecorator.shape&&(e[0]=this.clipDecorator(t,e,!0,i)),"None"!==t.targetDecorator.shape&&(e[e.length-1]=this.clipDecorator(t,e,!1,i)),e},e.prototype.updateSegmentElement=function(t,e,i,r){var n=new g.a,o=this.getSegmentPath(t,e,r);if("Bezier"===t.type){if(this.segments.length>0)for(var s=0;s<this.segments.length;s++){var h=this.segments[parseInt(s.toString(),10)],d=t.segments[parseInt(s.toString(),10)],c=l.a.isEmptyPoint(h.point1)?d.bezierPoint1:d.point1,p=l.a.isEmptyPoint(h.point2)?d.bezierPoint2:d.point2;n.uniteRect(a(h.points[0],c,p,h.points[1],t))}}else n=g.a.toBounds(e);return i.width=n.width,i.height=n.height,i.offsetX=n.x+i.width/2,i.offsetY=n.y+i.height/2,i.data=o,t.wrapper&&(t.wrapper.offsetX=i.offsetX,t.wrapper.offsetY=i.offsetY,t.wrapper.width=n.width,t.wrapper.height=n.height),i},e.prototype.getSegmentElement=function(t,e,r,n,o){void 0===o&&(o=!0);var a=[];return o&&i.i(v.s)(t),a=this.getConnectorPoints(t.type,void 0,r),this.intermediatePoints=a,e.staticSize=!0,e=this.updateSegmentElement(t,a,e,n)},e.prototype.getDecoratorElement=function(t,e,i,r,n){var o=new b.a;if(o.transform=p.n.Self,this.updateDecoratorElement(o,t,e,i),void 0!==n){var a=n(i,this);o.description=a||"source"}return o},e.prototype.bridgePath=function(t,e,i){var r=e;if(t.bridges.length>0)if("Straight"===t.type&&t.segments.length<2)for(var n=0;n<t.bridges.length;n++){var o=t.bridges[parseInt(n.toString(),10)];o.rendered||(r+=" L"+o.startPoint.x+" "+o.startPoint.y,r+=o.path,o.rendered=!0)}else if("Orthogonal"===t.type||"Straight"===t.type&&t.segments.length>1)for(var n=0;n<t.bridges.length;n++){var o=t.bridges[parseInt(n.toString(),10)];o.segmentPointIndex===i&&(o.rendered||o.segmentPointIndex===i&&(r+=" L"+o.startPoint.x+" "+o.startPoint.y,r+=o.path,o.rendered=!0))}return r},e.prototype.updateDecoratorElement=function(t,e,r,n){t.offsetX=e.x,t.offsetY=e.y;var o=l.a.findAngle(e,r),a=i.i(x.c)(n.shape,n),s=new u.a(n.width,n.height);t.pivot.x=n.pivot.x,t.pivot.y=n.pivot.y,t.style=n.style,t.rotateAngle=o,t.data=a,t.canMeasurePath=!0,t.width=s.width,t.height=s.height},e.prototype.getSegmentPath=function(t,e,i){for(var n,a,s,h="",d=[],c=0;c<e.length;)d.push({x:e[parseInt(c.toString(),10)].x,y:e[parseInt(c.toString(),10)].y}),c++;for(var p=0;p<t.bridges.length;p++){t.bridges[parseInt(p.toString(),10)].rendered=!1}if(d=this.clipDecorators(t,d,i),this.cornerRadius>0&&"Bezier"!==this.type)for(var g=0;g<d.length-1;g++){n=d[parseInt(g.toString(),10)],0===g&&(h="M"+n.x+" "+n.y);var u=l.a.distancePoints(d[parseInt(g.toString(),10)],d[g+1]);u>0&&(a=g<d.length-2?u<2*this.cornerRadius?l.a.adjustPoint(d[parseInt(g.toString(),10)],d[g+1],!1,u/2):l.a.adjustPoint(d[parseInt(g.toString(),10)],d[g+1],!1,this.cornerRadius):d[g+1],g>0&&(u<2*this.cornerRadius?(s=l.a.adjustPoint(d[parseInt(g.toString(),10)],d[g+1],!0,u/2),g<d.length-2&&(a=null)):s=l.a.adjustPoint(d[parseInt(g.toString(),10)],d[g+1],!0,this.cornerRadius)),s&&(h+="Q"+n.x+" "+n.y+" "+s.x+" "+s.y),a&&(t.bridges.length>0&&(h=this.bridgePath(t,h,g),"Orthogonal"===t.type&&(h=this.bridgePath(t,h,g+1))),h+=" L"+a.x+" "+a.y))}else if("Bezier"===this.type){var f=void 0,m=void 0;if(this.parentObj.element){var y=this.parentObj.element.ej2_instances[0].eventHandler.action;f=this.parentObj.element.ej2_instances[0].eventHandler.tool instanceof E.a,m=y.includes("PortDraw")||y.includes("Drag")}for(var v=void 0,b=this.segments,S=0;S<b.length;S++)d.length>2&&(b[parseInt(S.toString(),10)].bezierPoint1={x:0,y:0},b[parseInt(S.toString(),10)].bezierPoint2={x:0,y:0}),!l.a.isEmptyPoint(b[parseInt(S.toString(),10)].point1)||b[parseInt(S.toString(),10)].vector1.angle||b[parseInt(S.toString(),10)].vector1.distance?b[parseInt(S.toString(),10)].vector1.angle||b[parseInt(S.toString(),10)].vector1.distance?b[parseInt(S.toString(),10)].bezierPoint1=l.a.transform(d[parseInt(S.toString(),10)],b[parseInt(S.toString(),10)].vector1.angle,b[parseInt(S.toString(),10)].vector1.distance):b[parseInt(S.toString(),10)].bezierPoint1={x:b[parseInt(S.toString(),10)].point1.x||b[parseInt(S.toString(),10)].bezierPoint1.x,y:b[parseInt(S.toString(),10)].point1.y||b[parseInt(S.toString(),10)].bezierPoint1.y}:(!t.sourceID&&!this.sourcePortID||!this.sourceWrapper||m||f||(v=r(this.sourceWrapper.bounds,d[parseInt(S.toString(),10)],!0)),b[parseInt(S.toString(),10)].bezierPoint1=o(d[parseInt(S.toString(),10)],d[S+1],v)),!l.a.isEmptyPoint(b[parseInt(S.toString(),10)].point2)||b[parseInt(S.toString(),10)].vector2.angle||b[parseInt(S.toString(),10)].vector2.distance?b[parseInt(S.toString(),10)].vector2.angle||b[parseInt(S.toString(),10)].vector2.distance?b[parseInt(S.toString(),10)].bezierPoint2=l.a.transform(d[S+1],b[parseInt(S.toString(),10)].vector2.angle,b[parseInt(S.toString(),10)].vector2.distance):b[parseInt(S.toString(),10)].bezierPoint2={x:b[parseInt(S.toString(),10)].point2.x||b[parseInt(S.toString(),10)].bezierPoint2.x,y:b[parseInt(S.toString(),10)].point2.y||b[parseInt(S.toString(),10)].bezierPoint2.y}:(!t.targetID&&!this.targetPortID||!this.targetWrapper||m||f||(v=r(this.targetWrapper.bounds,d[S+1],!0)),b[parseInt(S.toString(),10)].bezierPoint2=o(d[S+1],d[parseInt(S.toString(),10)],v));d.splice(1,0,{x:b[0].bezierPoint1.x,y:b[0].bezierPoint1.y}),d.splice(d.length-1,0,{x:b[b.length-1].bezierPoint2.x,y:b[b.length-1].bezierPoint2.y}),d=this.clipDecorators(t,d,i);for(var w=0;w<b.length;w++){0===w&&(h="M"+d[0].x+" "+d[0].y);var x=w===b.length-1?d[d.length-1].x+" "+d[d.length-1].y:b[parseInt(w.toString(),10)].points[b[parseInt(w.toString(),10)].points.length-1].x+" "+b[parseInt(w.toString(),10)].points[b[parseInt(w.toString(),10)].points.length-1].y;h+="C"+b[parseInt(w.toString(),10)].bezierPoint1.x+" "+b[parseInt(w.toString(),10)].bezierPoint1.y+" "+b[parseInt(w.toString(),10)].bezierPoint2.x+" "+b[parseInt(w.toString(),10)].bezierPoint2.y+" "+x}}else for(var I=0;I<d.length;I++)n=d[parseInt(I.toString(),10)],0===I&&(h="M"+n.x+" "+n.y),I>0&&(h=this.bridgePath(t,h,I),h+=" L"+n.x+" "+n.y);return h},e.prototype.updateShapeElement=function(t){var e;switch(t.shape.type){case"Bpmn":t.wrapper.children[3]instanceof b.a&&(e=t.wrapper.children[3]),("Message"===t.shape.flow||i.i(h.isBlazor)()&&"Message"===t.shape.bpmnFlow)&&this.updateShapePosition(t,e);break;case"UmlActivity":("Exception"===t.shape.flow||i.i(h.isBlazor)()&&"Exception"===t.shape.umlActivityFlow)&&this.getUMLExceptionFlow(t.wrapper.children[0])}},e.prototype.updateShapePosition=function(t,e){for(var r,n,o=0,a=this.intermediatePoints,s=0;s<a.length-1;s++){o+=this.distance(a[parseInt(s.toString(),10)],a[s+1]);var h=.5*o;o>=h&&(r=i.i(f.a)(a[parseInt(s.toString(),10)],a[s+1]),n=l.a.transform(a[parseInt(s.toString(),10)],r,h))}e.offsetX=n.x,e.offsetY=n.y},e.prototype.scale=function(t,e,r,n,o){var a=0,s=0;if(this.wrapper&&this.wrapper.outerBounds){var h=i.i(f.c)(this),d=Math.abs((this.wrapper.bounds.width||this.style.strokeWidth||1)-2),l=Math.abs((this.wrapper.bounds.height||this.style.strokeWidth||1)-2);a=h.width-d,s=h.height-l,t=Math.abs((r-Math.max(a,s))/d),e=Math.abs((n-Math.max(a,s))/l),a=s=Math.min(a,s)}t=e=Math.min(t,e);var c=i.i(z.a)();o=o||this.wrapper,i.i(z.b)(c,-o.rotateAngle,o.offsetX,o.offsetY),i.i(z.d)(c,t,e,o.offsetX,o.offsetY),i.i(z.b)(c,o.rotateAngle,o.offsetX,o.offsetY);var p=i.i(z.e)(c,this.intermediatePoints);return this.sourcePoint=p[0],this.targetPoint=p[p.length-1],p=this.intermediatePoints=i.i(f.b)(this),i.i(m.t)(this,p),{x:a,y:s}},e.prototype.getClassName=function(){return"Connector"},M([i.i(h.ComplexFactory)(D)],e.prototype,"shape",void 0),M([i.i(h.Property)(p.h.Default)],e.prototype,"constraints",void 0),M([i.i(h.Property)(10)],e.prototype,"bridgeSpace",void 0),M([i.i(h.Collection)([],S.c)],e.prototype,"annotations",void 0),M([i.i(h.Complex)({},l.a)],e.prototype,"sourcePoint",void 0),M([i.i(h.Complex)({},l.a)],e.prototype,"targetPoint",void 0),M([i.i(h.Collection)([],L.b)],e.prototype,"fixedUserHandles",void 0),M([i.i(h.CollectionFactory)(k)],e.prototype,"segments",void 0),M([i.i(h.Property)("")],e.prototype,"sourceID",void 0),M([i.i(h.Property)("")],e.prototype,"targetID",void 0),M([i.i(h.Property)(10)],e.prototype,"hitPadding",void 0),M([i.i(h.Property)(0)],e.prototype,"connectionPadding",void 0),M([i.i(h.Property)("Straight")],e.prototype,"type",void 0),M([i.i(h.Property)(0)],e.prototype,"cornerRadius",void 0),M([i.i(h.Complex)({shape:"None"},R)],e.prototype,"sourceDecorator",void 0),M([i.i(h.Complex)({shape:"Arrow"},R)],e.prototype,"targetDecorator",void 0),M([i.i(h.Complex)({},C.a)],e.prototype,"tooltip",void 0),M([i.i(h.Property)("")],e.prototype,"sourcePortID",void 0),M([i.i(h.Property)("")],e.prototype,"targetPortID",void 0),M([i.i(h.Property)(0)],e.prototype,"sourcePadding",void 0),M([i.i(h.Complex)({},A.a)],e.prototype,"previewSize",void 0),M([i.i(h.Complex)({},A.a)],e.prototype,"dragSize",void 0),M([i.i(h.Property)(0)],e.prototype,"targetPadding",void 0),M([i.i(h.Property)(13)],e.prototype,"connectorSpacing",void 0),M([i.i(h.Complex)({strokeWidth:1,strokeColor:"black"},d.f)],e.prototype,"style",void 0),M([i.i(h.Property)(null)],e.prototype,"maxSegmentThumb",void 0),M([i.i(h.Property)(!1)],e.prototype,"allowNodeOverlap",void 0),M([i.i(h.Complex)({},j)],e.prototype,"bezierSettings",void 0),M([i.i(h.Property)(null)],e.prototype,"wrapper",void 0),e}(P.a)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(7),n=i(14),o=i(4),a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(t){function e(){var e=t.call(this)||this;return e.textContent="",e.canMeasure=!0,e.isLaneOrientation=!1,e.canConsiderBounds=!0,e.hyperlink={color:"blue"},e.doWrap=!0,e.textNodes=[],e.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},e.style.fill="transparent",e.style.strokeColor="transparent",e}return a(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.textContent},set:function(t){this.textContent!==t&&(this.textContent=t,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.textNodes},set:function(t){this.textNodes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(t){this.textWrapBounds=t},enumerable:!0,configurable:!0}),e.prototype.refreshTextElement=function(){this.isDirt=!0},e.prototype.measure=function(t){var e;return e=this.isDirt&&this.canMeasure?i.i(o.G)(this,this.style,this.content,this.isLaneOrientation?t.height:this.width||t.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new r.a(e.width,e.height):this.desiredSize=new r.a(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return(t.width!==this.actualSize.width||t.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=t,this.updateBounds(),this.isDirt=!1,this.actualSize},e}(n.a)},function(t,e,i){"use strict";i.d(e,"g",function(){return s}),i.d(e,"a",function(){return h}),i.d(e,"d",function(){return d}),i.d(e,"e",function(){return l}),i.d(e,"h",function(){return c}),i.d(e,"i",function(){return p}),i.d(e,"j",function(){return g}),i.d(e,"k",function(){return u}),i.d(e,"c",function(){return f}),i.d(e,"f",function(){return m}),i.d(e,"b",function(){return y}),i.d(e,"l",function(){return v});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){if(t){if(i.i(r.isBlazor)())return p;switch(t.type){case"Linear":return g;case"Radial":return u;default:return g}}return g},s=function(){function t(t,e,i,r){this.left=t,this.right=e,this.top=i,this.bottom=r}return t}(),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(0)],e.prototype,"left",void 0),o([i.i(r.Property)(0)],e.prototype,"right",void 0),o([i.i(r.Property)(0)],e.prototype,"top",void 0),o([i.i(r.Property)(0)],e.prototype,"bottom",void 0),e}(r.ChildProperty),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(45)],e.prototype,"angle",void 0),o([i.i(r.Property)(5)],e.prototype,"distance",void 0),o([i.i(r.Property)(.7)],e.prototype,"opacity",void 0),o([i.i(r.Property)("lightgrey")],e.prototype,"color",void 0),e}(r.ChildProperty),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getClassName=function(){return"Stop"},o([i.i(r.Property)("")],e.prototype,"color",void 0),o([i.i(r.Property)(0)],e.prototype,"offset",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),e}(r.ChildProperty),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Collection)([],l)],e.prototype,"stops",void 0),o([i.i(r.Property)("None")],e.prototype,"type",void 0),o([i.i(r.Property)("")],e.prototype,"id",void 0),e}(r.ChildProperty),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(0)],e.prototype,"x1",void 0),o([i.i(r.Property)(0)],e.prototype,"x2",void 0),o([i.i(r.Property)(0)],e.prototype,"y1",void 0),o([i.i(r.Property)(0)],e.prototype,"y2",void 0),o([i.i(r.Property)(0)],e.prototype,"cx",void 0),o([i.i(r.Property)(0)],e.prototype,"cy",void 0),o([i.i(r.Property)(0)],e.prototype,"fx",void 0),o([i.i(r.Property)(0)],e.prototype,"fy",void 0),o([i.i(r.Property)(50)],e.prototype,"r",void 0),e}(c),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(0)],e.prototype,"x1",void 0),o([i.i(r.Property)(0)],e.prototype,"x2",void 0),o([i.i(r.Property)(0)],e.prototype,"y1",void 0),o([i.i(r.Property)(0)],e.prototype,"y2",void 0),e}(c),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(0)],e.prototype,"cx",void 0),o([i.i(r.Property)(0)],e.prototype,"cy",void 0),o([i.i(r.Property)(0)],e.prototype,"fx",void 0),o([i.i(r.Property)(0)],e.prototype,"fy",void 0),o([i.i(r.Property)(50)],e.prototype,"r",void 0),e}(c),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)("white")],e.prototype,"fill",void 0),o([i.i(r.Property)("black")],e.prototype,"strokeColor",void 0),o([i.i(r.Property)("")],e.prototype,"strokeDashArray",void 0),o([i.i(r.Property)(1)],e.prototype,"strokeWidth",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),o([i.i(r.ComplexFactory)(a)],e.prototype,"gradient",void 0),e}(r.ChildProperty),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)("transparent")],e.prototype,"fill",void 0),e}(f),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)("black")],e.prototype,"color",void 0),o([i.i(r.Property)("Arial")],e.prototype,"fontFamily",void 0),o([i.i(r.Property)(12)],e.prototype,"fontSize",void 0),o([i.i(r.Property)(!1)],e.prototype,"italic",void 0),o([i.i(r.Property)(!1)],e.prototype,"bold",void 0),o([i.i(r.Property)("CollapseSpace")],e.prototype,"whiteSpace",void 0),o([i.i(r.Property)("WrapWithOverflow")],e.prototype,"textWrapping",void 0),o([i.i(r.Property)("Center")],e.prototype,"textAlign",void 0),o([i.i(r.Property)("None")],e.prototype,"textDecoration",void 0),o([i.i(r.Property)("Wrap")],e.prototype,"textOverflow",void 0),o([i.i(r.Property)("transparent")],e.prototype,"fill",void 0),e}(f),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)("white")],e.prototype,"fill",void 0),o([i.i(r.Property)("Wrap")],e.prototype,"textOverflow",void 0),o([i.i(r.Property)(1)],e.prototype,"strokeWidth",void 0),o([i.i(r.ComplexFactory)(a)],e.prototype,"gradient",void 0),o([i.i(r.Property)(1)],e.prototype,"opacity",void 0),o([i.i(r.Property)(!1)],e.prototype,"italic",void 0),o([i.i(r.Property)("")],e.prototype,"strokeDashArray",void 0),o([i.i(r.Property)("black")],e.prototype,"color",void 0),o([i.i(r.Property)(12)],e.prototype,"fontSize",void 0),o([i.i(r.Property)("Arial")],e.prototype,"fontFamily",void 0),o([i.i(r.Property)("CollapseSpace")],e.prototype,"whiteSpace",void 0),o([i.i(r.Property)("Center")],e.prototype,"textAlign",void 0),o([i.i(r.Property)("None")],e.prototype,"textDecoration",void 0),o([i.i(r.Property)(!1)],e.prototype,"bold",void 0),o([i.i(r.Property)("black")],e.prototype,"strokeColor",void 0),o([i.i(r.Property)("WrapWithOverflow")],e.prototype,"textWrapping",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";function r(t,e,r){r.width||0!==r.shape.phases.length||(r.width=100);var n=[],d=[],p=0,g=r.shape,u="Horizontal"===g.orientation;if(g.header&&g.hasHeader&&h(n,g.header.height),l(n,u,r),c(d,u,r),t.setDefinitions(n,d),g.header&&g.hasHeader&&(o(t,e,r),p++),g.phases.length>0&&g.phaseSize){for(var f=0;f<g.phases.length;f++)""===g.phases[parseInt(f.toString(),10)].id&&(g.phases[parseInt(f.toString(),10)].id=i.i(it.g)()),a(t,e,r,p,u,f);p++}if(g.lanes.length>0)for(var f=0;f<g.lanes.length;f++)""===g.lanes[parseInt(f.toString(),10)].id&&(g.lanes[parseInt(f.toString(),10)].id=i.i(it.g)()),s(t,e,r,p,f,u),p++}function n(t,e,i,r,n,o,a,s){var h=new $.a(t,"nodes",r,!0);h.parentId=i.id,h.isHeader=!!n,h.isPhase=!!o,h.isLane=!!a;var d=o?"PhaseHeaderParent":"LaneHeaderParent";if(s&&(h[""+d]=s),h.constraints&=~(et.f.InConnect|et.f.OutConnect),h.constraints|=et.f.HideThumbs,t.initObject(h),t.nodes.push(h),h.wrapper.children.length>0){for(var l=0;l<h.wrapper.children.length;l++){var c=h.wrapper.children[parseInt(l.toString(),10)];c instanceof rt.a&&(c.isCalculateDesiredSize=!1),c instanceof nt.a&&(c.canConsiderBounds=!1,(!n&&"Vertical"===i.shape.orientation&&o||"Vertical"!==i.shape.orientation&&a)&&(c.isLaneOrientation=!0,c.refreshTextElement()))}h.wrapper.measure(new ot.a(void 0,void 0)),h.wrapper.arrange(h.wrapper.desiredSize)}return h.wrapper}function o(t,e,r){for(var o=0,a=t.columnDefinitions(),s=r.shape,h=0;h<a.length;h++)o+=a[parseInt(h.toString(),10)].width;s.header.id=s.header.id||i.i(it.g)();var d={id:r.id+s.header.id,annotations:[i.i(it.e)(s.header.annotation)],style:s.header.style?s.header.style:void 0,offsetX:r.offsetX,offsetY:r.offsetY,rowIndex:0,columnIndex:0,maxWidth:o,container:{type:"Canvas",orientation:"Horizontal"}};i.i(dt.c)(r)||(d.constraints&=~et.f.Select);var l=n(e,t,r,d,!0);t.addObject(l,0,0,1,t.columnDefinitions().length)}function a(t,e,r,o,a,s){var h,d=0,l=0,c=r.shape;a?(l=s,d=o,h=t.columnDefinitions()[parseInt(s.toString(),10)].width):d=c.header&&c.hasHeader?s+1:s;var p={annotations:[i.i(it.e)(c.phases[parseInt(s.toString(),10)].header.annotation)],maxWidth:h,id:r.id+c.phases[parseInt(s.toString(),10)].id+"_header",addInfo:c.phases[parseInt(s.toString(),10)].addInfo,offsetX:r.offsetX,offsetY:r.offsetY,style:c.phases[parseInt(s.toString(),10)].style,rowIndex:d,columnIndex:l,container:{type:"Canvas",orientation:a?"Horizontal":"Vertical"}};p.annotations[0].rotateAngle=a?0:270,i.i(dt.c)(r)||(p.constraints&=~et.f.Select),c.phases[parseInt(s.toString(),10)].header.id=p.id;var g=n(e,t,r,p,!1,!0,!1,c.phases[parseInt(s.toString(),10)].id);t.addObject(g,d,l)}function s(t,e,r,o,a,s){for(var h,d,l,c,p,g=r.shape,u=g.phases.length||1,f=g.header&&g.hasHeader?1:0,m=s?o:f,y=g.phaseSize&&g.phases.length>0?1:0,v=0;v<u;v++){var b=s?v:a+y;l=t.rows[parseInt(m.toString(),10)].cells[parseInt(b.toString(),10)],c={id:r.id+g.lanes[parseInt(a.toString(),10)].id+v,rowIndex:m,columnIndex:b,width:l.minWidth,height:l.minHeight,offsetX:r.offsetX,offsetY:r.offsetY,style:g.lanes[parseInt(a.toString(),10)].style,addInfo:g.lanes[parseInt(a.toString(),10)].addInfo,constraints:et.f.Default|et.f.ReadOnly|et.f.AllowDrop,container:{type:"Canvas",orientation:s?"Horizontal":"Vertical"}},i.i(dt.c)(r)||(c.constraints&=~et.f.Select),d=n(e,t,r,c,!1,!1,!0),d.children[0].isCalculateDesiredSize=!1,0===v&&(h={id:r.id+g.lanes[parseInt(a.toString(),10)].id+"_"+v+"_header",style:g.lanes[parseInt(a.toString(),10)].header.style,annotations:[i.i(it.e)(g.lanes[parseInt(a.toString(),10)].header.annotation)],offsetX:r.offsetX,offsetY:r.offsetY,rowIndex:m,columnIndex:b,container:{type:"Canvas",orientation:s?"Horizontal":"Vertical"}},h.annotations[0].rotateAngle=s?270:0,g.lanes[parseInt(a.toString(),10)].header.id=h.id,s?h.width=g.lanes[a].header.width:h.height=g.lanes[parseInt(a.toString(),10)].header.height,i.i(dt.c)(r)||(h.constraints&=~et.f.Select),p=n(e,t,r,h,!1,!1,!0,g.lanes[parseInt(a.toString(),10)].id),s&&(p.children[0].elementActions=p.children[0].elementActions|et.e.HorizontalLaneHeader),d.children.push(p)),t.addObject(d,m,b),s||m++,b=s?v:a+1}}function h(t,e){var i=new tt.b;i.height=e,t.push(i)}function d(t){var e=new tt.c;return e.width=t,e}function l(t,e,i){var r,n=0,o=i.shape;if(t.length>0)for(var a=0;a<t.length;a++)n+=t[parseInt(a.toString(),10)].height;if(e){if(o.phases.length>0&&o.phaseSize&&(n+=o.phaseSize,h(t,o.phaseSize)),o.lanes.length>0)for(var a=0;a<o.lanes.length;a++)r=o.lanes[parseInt(a.toString(),10)].height,n+=r,a===o.lanes.length-1&&n<i.height&&(r+=i.height-n),h(t,r)}else if(o.phases.length>0)for(var s=0,a=0;a<o.phases.length;a++){var d=o.phases[parseInt(a.toString(),10)].offset;0===a?s+=d:(d-=s,s+=d),r=d,n+=r,a===o.phases.length-1&&n<i.height&&(r+=i.height-n),h(t,r)}else h(t,i.height)}function c(t,e,i){var r,n,o,a,s=0,h=i.shape;if(h.phases.length>0&&"Horizontal"===h.orientation)for(a=0;a<h.phases.length;a++)r=h.phases[parseInt(a.toString(),10)].offset,0===a?s+=r:(r-=s,s+=r),n=d(r),a===h.phases.length-1&&s<i.width&&(n.width+=i.width-s),t.push(n);else if(e)n=d(i.width),t.push(n);else{for(h.phaseSize&&h.phases.length>0?h.lanes.length+1:h.lanes.length,h.phaseSize&&h.phases.length>0&&(s+=h.phaseSize,n=d(h.phaseSize),t.push(n)),o=0;o<h.lanes.length;o++)s+=h.lanes[parseInt(o.toString(),10)].width,n=d(h.lanes[parseInt(o.toString(),10)].width),o===h.lanes.length-1&&s<i.width&&(n.width+=i.width-s),t.push(n);0===h.phases.length&&0===h.lanes.length&&(n=d(i.width),t.push(n))}}function p(t,e,i,r){for(var n,o,a,s,h,d,l,c=[],p=0,g=e.rowDefinitions().length,u=0;u<g;u++)for(d=e.rows[parseInt(u.toString(),10)],s=0;s<d.cells.length;s++)if((h=d.cells[parseInt(s.toString(),10)].children[0])&&h.children&&h.children.length)for(a=1;a<h.children.length;a++)if(n=h.children[parseInt(a.toString(),10)],(o=t.getObject(n.id))&&(o.inEdges.length>0||o.outEdges.length>0))for(l=o.inEdges.concat(o.outEdges),p=0;p<l.length;p++)-1===c.indexOf(l[parseInt(p.toString(),10)])&&c.push(l[parseInt(p.toString(),10)]);return c}function g(t){var e=t.wrapper;if(e.measure(new ot.a(t.width,t.height)),e.children[0]instanceof tt.a){var i=e.children[0],r=!1;i.width&&i.width<i.desiredSize.width&&(r=!0,i.width=i.desiredSize.width),i.height&&i.height<i.desiredSize.height&&(r=!0,i.height=i.desiredSize.height),r&&i.measure(new ot.a(i.width,i.height))}e.arrange(e.desiredSize)}function u(t,e,i){var r,n,o,a,s,h,d,l,c=e.wrapper.children[0];for(r=i;r<c.rows.length;r++)for(h=c.rows[parseInt(r.toString(),10)],n=0;n<h.cells.length;n++)if(d=h.cells[parseInt(n.toString(),10)],d.children&&d.children.length>0)for(o=0;o<d.children.length;o++)l=d.children[parseInt(o.toString(),10)],a=t.nameTable[l.id],a.isLane&&l.children.length>1&&(s=t.nameTable[l.children[1].id])&&s.isLane&&(s.rowIndex=r,s.columnIndex=n),a.rowIndex=r,a.columnIndex=n}function f(t,e){var i,r,n,o,a,s,h,d,l=e.wrapper.children[0],c=e.shape,p=c.padding,g=c.lanes,u=l.bounds.y,f=c.phaseSize>0?c.phases.length:0,S="Horizontal"===c.orientation,w=S?c.phases.length||1:g.length+1,x=S?(c.header&&c.hasHeader?1:0)+(c.phases.length>0?1:0)+c.lanes.length:(c.header&&c.hasHeader?1:0)+c.phases.length;if(0===f&&!S&&c.lanes.length&&(x+=1),S?(i=(c.header&&c.hasHeader?1:0)+(f>0?1:0),r=0):(i=c.header&&c.hasHeader?1:0,r=f>0?1:0),g.length>0)for(u+=c.header&&c.hasHeader?c.header.height:0,s=0;s<g.length;s++){for(h=0;h<g[parseInt(s.toString(),10)].children.length;h++)if(n=g[parseInt(s.toString(),10)].children[parseInt(h.toString(),10)],n.offsetX=g[parseInt(s.toString(),10)].width,n.offsetY=g[parseInt(s.toString(),10)].height,t.initObject(n),t.nodes.push(n),"Bpmn"===n.shape.type&&n.shape.annotations&&n.shape.annotations.length>0&&(e.isTextNode=!0),o=n.wrapper,S){for(d=r;d<w;d++)if(a=l.rows[parseInt(i.toString(),10)].cells[parseInt(d.toString(),10)],o.margin.left<a.bounds.right-l.bounds.x){n.parentId=a.children[0].id,d>r?o.margin.left=o.margin.left-(a.bounds.left-l.bounds.left):a.children[0].children[1].actualSize.width+p>=o.margin.left&&(o.margin.left=a.children[0].children[1].actualSize.width+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),m(o,n,t);break}}else for(var I=i;I<x;I++)if(a=l.rows[parseInt(I.toString(),10)].cells[parseInt(r.toString(),10)],o.margin.top<a.bounds.bottom-u){n.parentId=a.children[0].id,I>i?o.margin.top=o.margin.top-(a.bounds.top-u):a.children[0].children[1].actualSize.height+p>=o.margin.top&&(o.margin.top=a.children[0].children[1].actualSize.height+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),m(o,n,t);break}S?i++:r++}l.measure(new ot.a(e.width,e.height)),l.arrange(l.desiredSize),y(l,e),e.width=e.wrapper.width=l.width,e.height=e.wrapper.height=l.height,O(t,e),e.wrapper.measure(new ot.a(e.width,e.height)),e.wrapper.arrange(l.desiredSize),q(e),b(e,t),v(e)}function m(t,e,i){t.measure(new ot.a(e.width,e.height)),t.arrange(t.desiredSize);var r=i.getObject(e.parentId);i.addChild(r,e.id)}function y(t,e){var i,r,n,o,a,s,h=t.columnDefinitions(),d=t.rowDefinitions(),l=C(e);"Vertical"===e.shape.orientation&&0===l&&(l=e.shape.header&&e.shape.hasHeader?1:0);var c=e.shape.padding;for(i=0;i<h.length;i++)t.updateColumnWidth(i,h[parseInt(i.toString(),10)].width,!0,c);for(i=l;i<d.length;i++)t.updateRowHeight(i,d[parseInt(i.toString(),10)].height,!0,c);for(r=0;r<d.length;r++)for(s=t.rows[parseInt(r.toString(),10)],i=0;i<h.length;i++)if(o=s.cells[parseInt(i.toString(),10)],o.children&&o.children.length>0)for(n=0;n<o.children.length;n++)a=o.children[parseInt(n.toString(),10)],a.maxWidth&&(a.maxWidth=o.actualSize.width),a.maxHeight&&(a.maxHeight=o.actualSize.height)}function v(t){if("SwimLane"===t.shape.type&&!t.shape.isLane&&!t.shape.isPhase){var e=void 0,i=void 0,r=void 0,n=void 0,o=t.shape.lanes,a=C(t),s=t.wrapper.children[0].rowDefinitions();for(i=0;i<o.length;i++,a++)e=o[parseInt(i.toString(),10)],"Horizontal"===t.shape.orientation?(n=s[parseInt(a.toString(),10)].height,e.height!==n&&(e.height=n)):(r=t.wrapper.children[0].columnDefinitions(),n=r[parseInt(a.toString(),10)].width,e.width!==n&&(e.width=n))}}function b(t,e){var i,r,n,o,a=t.shape,s=a.phases,h=a.header&&a.hasHeader?1:0,d=t.wrapper.children[0],l=d.bounds.y+(a.header&&a.hasHeader?a.header.height:0);if("SwimLane"===t.shape.type&&(t=e.getObject(t.id)||t,s.length>0))if(d=t.wrapper.children[0],"Horizontal"===a.orientation)for(n=a.header&&a.hasHeader?d.rows[1]:d.rows[0],i=0;i<s.length;i++)o=n.cells[parseInt(i.toString(),10)].children[0],r=o.bounds.right-d.bounds.x,s[parseInt(i.toString(),10)].offset!==r&&(s[parseInt(i.toString(),10)].offset=r),e.nameTable[o.id].maxWidth=o.maxWidth;else for(i=0;i<s.length;i++)o=d.rows[h+i].cells[0].children[0],r=o.bounds.bottom-l,s[parseInt(i.toString(),10)].offset!==r&&(s[parseInt(i.toString(),10)].offset=r),e.nameTable[o.id].maxWidth=o.maxWidth}function S(t,e){if(t&&t.length>0){var i=void 0;e.lineRoutingModule&&e.constraints&et.j.LineRouting&&e.lineRoutingModule.renderVirtualRegion(e,!0);for(var r=0;r<t.length;r++)i=e.getObject(t[parseInt(r.toString(),10)]),e.lineRoutingModule&&e.constraints&et.j.LineRouting&&"Orthogonal"===i.type?e.lineRoutingModule.refreshConnectorSegments(e,i,!0):e.connectorPropertyChange(i,{},{sourceID:i.sourceID,targetID:i.targetID})}}function w(t,e,r,n){var o,a,s,h,d,l,c,g,f,m=t.getObject(e.parentId),y=m.shape,v=m.wrapper.children[0],b=y.lanes,w=p(t,v,e.rowIndex,!0);if("Horizontal"===y.orientation&&e.rowIndex!==r.rowIndex||"Vertical"===y.orientation&&e.columnIndex!==r.columnIndex){if("Horizontal"===y.orientation)d=e.rowIndex,l=r.rowIndex,o=(y.header&&y.hasHeader?1:0)+(y.phases.length&&y.phaseSize?1:0),g=e.rowIndex-o,f=r.rowIndex-o,b[parseInt(g.toString(),10)].canMove&&(g<f?n&&r.wrapper.offsetY>n.y&&(l+=f>0?-1:1,f+=f>0?-1:1):n&&r.wrapper.offsetY<n.y&&(l+=1,f+=1),d!==l&&v.updateRowIndex(d,l));else if(d=e.columnIndex,l=r.columnIndex,o=y.phases.length&&y.phaseSize?1:0,g=e.columnIndex-o,f=r.columnIndex-o,y.header&&y.hasHeader?1:0,b[parseInt(g.toString(),10)].canMove&&(g<f?n&&r.wrapper.offsetX>n.x&&(l+=f>0?-1:1,f+=f>0?-1:1):n&&r.wrapper.offsetX<n.x&&(l+=1,f+=1),d!==l)){if(!(0!==y.phaseSize&&0!==y.phases.length||0!==l&&0!==d)&&y.header&&y.hasHeader){var x=0===l?d:l;v.rows[0].cells[parseInt(x.toString(),10)].children=v.rows[0].cells[0].children,v.rows[0].cells[parseInt(x.toString(),10)].columnSpan=v.rows[0].cells[0].columnSpan,v.rows[0].cells[0].children=[]}v.updateColumnIndex(0,d,l)}d!==l&&(c=b[parseInt(g.toString(),10)],c.canMove&&(a={target:i.i(it.e)(r),source:i.i(it.e)(e)},c=b[parseInt(g.toString(),10)],b.splice(g,1),b.splice(f,0,c),h={target:i.i(it.e)(a.source),source:i.i(it.e)(a.target)},s={type:"LanePositionChanged",redoObject:h,undoObject:a,category:"Internal"},t.diagramActions&et.p.UndoRedo||t.commandHandler.addHistoryEntry(s),u(t,m,0),S(w,t),J(b,t),m.wrapper.measure(new ot.a(m.width,m.height)),m.wrapper.arrange(m.wrapper.desiredSize),t.updateDiagramObject(m)))}t.updateDiagramElementQuad()}function x(t,e,i,r){var n=t.getObject(i.id),o=n.shape,a=o.header&&o.hasHeader?1:0,s=o.lanes,h=o.phases,d=r.wrapper.actualSize.width,l=r.wrapper.actualSize.height,c=e.wrapper.actualSize.width,p=e.wrapper.actualSize.height;"SwimLane"===n.shape.type&&("Horizontal"===o.orientation?e.isPhase?h[e.columnIndex].offset+=d-c:(a=o.phaseSize&&o.phases.length>0?a+1:a,s[e.rowIndex-a].height+=l-p):e.isPhase?h[e.rowIndex-a].offset+=l-p:(a=o.phaseSize&&o.phases.length>0?1:0,s[e.columnIndex-a].width+=d-c))}function I(t,e){var i,r=t.shape,n=r.header&&r.hasHeader?1:0;return"Horizontal"===r.orientation?(n+=r.phases.length>0?1:0,i=e.rowIndex-n):i=e.columnIndex-(r.phaseSize&&r.phases.length>0?1:0),i}function P(t,e){var i=e.shape,r=i.header&&i.hasHeader?1:0;return"Horizontal"===i.orientation?t.columnIndex:t.rowIndex-r}function C(t){var e=0,i=t.shape;return"Horizontal"===i.orientation&&(e=i.header&&i.hasHeader?1:0),i.phases.length>0&&i.phaseSize&&(e+=1),e}function z(t,e,i,r){var n=t.shape;if(n.phases.length>0){var o=e.nameTable[n.phases[parseInt(r.toString(),10)].header.id];o&&o.maxWidth<i.outerBounds.width&&(o.maxWidth=i.outerBounds.width,o.wrapper.maxWidth=i.outerBounds.width)}}function O(t,e){if(e.shape.header&&e.shape.hasHeader){var i=e.wrapper.children[0],r=i.rows[0].cells[0].children[0].id,n=t.nameTable[""+r];n&&n.isHeader&&n.maxWidth<e.width&&(n.maxWidth=e.width,n.wrapper.maxWidth=e.width)}}function T(t,e,r,n){var o,a=t.nameTable[e.id];if("SwimLane"===a.shape.type){t.protectPropertyChange(!0);var h=a.wrapper.children[0],d=h.bounds,l=a.shape,c=void 0,f=!1,m=void 0,y=void 0,v=void 0,b=void 0,w=void 0,x=void 0,I=void 0,P=void 0,C=void 0,z=new $.D(l,"lanes",r,!0);y=l.header&&l.hasHeader?1:0,"Horizontal"===l.orientation&&(f=!0,y=l.phases.length>0?y+1:y);var T=p(t,h,0,!0),L=void 0!==n?n:l.lanes.length;if(y+=L,o={element:z,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changing",type:"Addition",cancel:!1,laneIndex:L},t.triggerEvent(et.r.collectionChange,o),!o.cancel){if(f){var E=new tt.b;E.height=r.height,h.addRow(y,E,!1),a.height=void 0!==a.height?a.height+r.height:a.height,a.wrapper.height=h.height=a.height}else{var B=new tt.c;B.width=r.width,h.addColumn(L+1,B,!1),a.width&&(a.width+=r.width,a.wrapper.width=h.width=a.width),t.diagramActions&et.p.UndoRedo||(h.rows[0].cells[0].columnSpan+=1)}t.diagramActions&et.p.UndoRedo||(z.id=""===z.id?i.i(it.g)():z.id),void 0!==n?l.lanes.splice(n,0,z):l.lanes.push(z),o={element:z,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changed",type:"Addition",cancel:!1,laneIndex:L},t.triggerEvent(et.r.collectionChange,o),s(h,t,a,y,L,f),c="Horizontal"===l.orientation?t.nameTable[h.rows[parseInt(y.toString(),10)].cells[0].children[0].id]:l.header&&l.hasHeader?t.nameTable[h.rows[1].cells[parseInt(y.toString(),10)].children[0].id]:t.nameTable[h.rows[0].cells[parseInt(y.toString(),10)].children[0].id],t.diagramActions&et.p.UndoRedo||(m={type:"LaneCollectionChanged",changeType:"Insert",undoObject:i.i(it.e)(z),redoObject:i.i(it.e)(c),category:"Internal"},t.addHistoryEntry(m));if(u(t,a,"Horizontal"===l.orientation?y:l.header&&l.hasHeader?1:0),g(a),O(t,a),(v=r.children)&&v.length>0)for(b=0;b<v.length;b++)if(P=v[parseInt(b.toString(),10)],C={x:P.wrapper.offsetX,y:P.wrapper.offsetY},"Horizontal"===l.orientation)for(I=h.rows[parseInt(y.toString(),10)].cells[parseInt(w.toString(),10)],w=0;w<h.rows[parseInt(y.toString(),10)].cells.length;w++)A(t,h.rows[parseInt(y.toString(),10)].cells[parseInt(w.toString(),10)],C,P);else for(x=0;x<h.rows.length;x++)I=h.rows[parseInt(x.toString(),10)].cells[parseInt(y.toString(),10)],A(t,I,C,P);S(T,t),t.drag(a,d.x-h.bounds.x,d.y-h.bounds.y)}t.protectPropertyChange(!1)}}function A(t,e,i,r){if(e.children&&e.children.length>0){var n=e.children[0],o=t.nameTable[n.id];n.bounds.containsPoint(i)&&t.addChild(o,r)}}function L(t,e,r){if("SwimLane"===e.shape.type){var n=void 0,o=void 0,s=void 0,h=void 0,d=void 0,l=void 0,c=void 0,p=e.wrapper.bounds.x,u=e.wrapper.bounds.y,f=e.shape,m=f.padding,y=f.phases,v=void 0,S=e.wrapper.children[0],w="Horizontal"===f.orientation;n=f.header&&f.hasHeader?0:-1,f.phases.length>0&&(n+=1,0);var x=w?f.lanes[0].header.width:f.lanes[0].header.height;if(r.offset>x){for(c=0;c<y.length;c++)if(s=y[parseInt(c.toString(),10)],h=c>0?y[c-1]:s,s.offset>r.offset){if(v=c>0?r.offset-h.offset:r.offset,w){var I=S.columnDefinitions()[parseInt(c.toString(),10)];I.width-=v,d=t.nameTable[f.phases[parseInt(c.toString(),10)].header.id],d.maxWidth=d.wrapper.maxWidth=I.width,S.updateColumnWidth(c,I.width,!1);var P=new tt.c;P.width=v,l=c,S.addColumn(c,P,!1);break}var C=S.rowDefinitions()[c+n];C.height-=v,d=t.nameTable[f.phases[parseInt(c.toString(),10)].header.id],S.updateRowHeight(c+n,C.height,!1);var z=new tt.b;z.height=v,l=c,S.addRow(c+n,z,!1);break}if(t.diagramActions&et.p.UndoRedo&&void 0===l){var T=t.historyManager.currentEntry.next;T.isLastPhase&&(l=y.length,E(l,e,T,S,w,r))}var A=new $.E(e.shape,"phases",r,!0);if(t.diagramActions&et.p.UndoRedo||(A.id+=i.i(it.g)()),f.phases.splice(l,0,A),a(S,t,e,n,w,l),w){if(o=t.nameTable[S.rows[parseInt(n.toString(),10)].cells[parseInt(l.toString(),10)].children[0].id],0===l&&f.header&&f.hasHeader){S.rows[0].cells[0].children=S.rows[0].cells[1].children,S.rows[0].cells[1].children=[];for(var L=S.rows[0],D=0;D<L.cells.length;D++)L.cells[parseInt(D.toString(),10)].minWidth=void 0,L.cells[parseInt(D.toString(),10)].columnSpan=0===D?S.rows[0].cells.length:1}B(t,e,S,l,w);var k=S.columnDefinitions();if(S.updateColumnWidth(l,k[parseInt(l.toString(),10)].width,!0,m),o.maxWidth=o.wrapper.maxWidth=k[parseInt(l.toString(),10)].width,k.length>l+1){var R=t.nameTable[S.rows[parseInt(n.toString(),10)].cells[l+1].children[0].id];S.updateColumnWidth(l+1,k[l+1].width,!0,m),R.maxWidth=R.wrapper.maxWidth=k[l+1].width}e.width=e.wrapper.width=e.wrapper.children[0].width=S.width}else{o=t.nameTable[S.rows[n+l].cells[0].children[0].id];var _=S.rowDefinitions(),j=_[n+l].height;M(t,e,S,n+l,w),S.updateRowHeight(n+l,j,!0,m),_.length>n+l+1&&(j=_[n+l+1].height,S.updateRowHeight(n+l+1,j,!0,m)),e.height=e.wrapper.height=e.wrapper.children[0].height=S.actualSize.height}if(g(e),e.width=e.wrapper.actualSize.width,O(t,e),t.drag(e,p-e.wrapper.bounds.x,u-e.wrapper.bounds.y),b(e,t),!(t.diagramActions&et.p.UndoRedo)){var T={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:i.i(it.e)(A),redoObject:i.i(it.e)(o),category:"Internal"};t.addHistoryEntry(T)}t.updateDiagramObject(e)}}}function E(t,e,i,r,n,o){var a=e.shape,s=a.phases[t-2],h=i.previousPhase.offset;if(n){var d=r.columnDefinitions()[t-1],l=new tt.c;t>1?(l.width=d.width-(h-s.offset),d.width=h-s.offset):(l.width=d.width-h,d.width=h),r.updateColumnWidth(t-1,d.width,!1),r.addColumn(t,l,!1)}else{var d=r.rowDefinitions()[parseInt(t.toString(),10)],c=new tt.b;t>1?(c.height=i.undoObject.offset-h,d.height=h-s.offset):(c.height=d.height-h,d.height=h),r.updateRowHeight(t,d.height,!1),r.addRow(1+t,c,!1)}}function B(t,e,i,r,n){var o,a,s,h,d,l=e.shape,c=C(e);for(l.header&&l.hasHeader&&(i.rows[0].cells[0].columnSpan=i.rows[0].cells.length),a=c;a<i.rows.length;a++)d=i.rows[parseInt(a.toString(),10)],s=d.cells[r-1],h=d.cells[parseInt(r.toString(),10)],o=d.cells[r+1],D(t,e,s,h,o,a,r);u(t,e,1)}function M(t,e,i,r,n){for(var o,a,s,h=i.rows[parseInt(r.toString(),10)],d=i.rows[r+1],l=i.rows[r-1],c=1;c<h.cells.length;c++)a=h.cells[parseInt(c.toString(),10)],s=d?d.cells[parseInt(c.toString(),10)]:void 0,o=l.cells[parseInt(c.toString(),10)],D(t,e,o,a,s,r,c);u(t,e,1)}function D(t,e,r,o,a,s,h){var d,l,c,p=e.shape,g="Horizontal"===p.orientation,u=e.wrapper.children[0],f=o.desiredCellWidth,m=o.desiredCellHeight,y=g?s:h;r?(d=g?r.bounds.x+r.bounds.width:r.bounds.x,l=g?r.bounds.y:r.bounds.y+r.bounds.height):(d=u.bounds.x,l=a.bounds.y);var v=new st.a(d,l,f,m),b={id:e.id+(g?p.lanes[y-2]:p.lanes[y-1]).id+i.i(it.g)()[0],rowIndex:s,columnIndex:h,width:o.minWidth,height:o.minHeight,style:(g?p.lanes[y-2]:p.lanes[y-1]).style,constraints:et.f.Default|et.f.AllowDrop,container:{type:"Canvas",orientation:g?"Horizontal":"Vertical"}},S=n(t,u,e,b,!1,!1,!0);if(S.children[0].isCalculateDesiredSize=!1,u.addObject(S,s,h),a&&a.children&&a.children.length)for(c=0;c<a.children.length;c++)g?t.nameTable[a.children[parseInt(c.toString(),10)].id].columnIndex+=1:t.nameTable[a.children[parseInt(c.toString(),10)].id].rowIndex+=1;k(t,a,o,v,S,g,r)}function k(t,e,i,r,n,o,a){var s,h,d,l=t.nameTable[n.id],c=e||a,p=t.nameTable[l.parentId],g=p.shape.padding;if(c.children&&c.children[0].children.length>1)for(var u=1;u<c.children[0].children.length;u++)s=c.children[0].children[parseInt(u.toString(),10)],d=t.nameTable[s.id],h=o?{x:s.bounds.x,y:s.bounds.center.y}:{x:s.bounds.center.x,y:s.bounds.top},r.containsPoint(h)?(i.children[0].children.push(s),c.children[0].children.splice(u,1),u--,t.deleteChild(d),d.isLane||(d.parentId=n.id),l.children||(l.children=[]),e||(o?d.margin.left=d.wrapper.bounds.x-c.children[0].bounds.right:d.margin.top=d.wrapper.bounds.y-c.children[0].bounds.bottom),l.children.push(s.id),d.zIndex=l.zIndex+1,t.removeElements(d)):e&&(o?(d.margin.left-=i.desiredCellWidth,g>d.margin.left&&(d.margin.left=g)):(d.margin.top-=i.desiredCellHeight,g>d.margin.top&&(d.margin.top=g)))}function R(t,e,i){if("SwimLane"===e.shape.type&&("ResizeSouth"===i||"ResizeEast"===i)){var r=e.shape,n=e.wrapper.children[0],o=void 0,a=void 0;"ResizeSouth"===i?"Vertical"===r.orientation?o=n.rows[n.rows.length-1].cells[0]:(a=n.rows.length-1,o=n.rows[parseInt(a.toString(),10)].cells[n.rows[parseInt(a.toString(),10)].cells.length-1]):(a=r.header&&r.hasHeader?1:0,o=n.rows[parseInt(a.toString(),10)].cells[n.rows[parseInt(a.toString(),10)].cells.length-1]),t.commandHandler.select(t.nameTable[o.children[0].id])}}function _(t,e,r,n,o,a){var s,h,d,l,c,p,g,u,f=i.i(it.g)(),m=t.shape,y=m.phases,v=t.offsetX-t.wrapper.actualSize.width/2,b=t.offsetY-t.wrapper.actualSize.height/2;if("Vertical"===m.orientation&&(b+=m.header&&m.hasHeader?m.header.height:0),!a)for(o||(t.id+=f,m&&m.header&&m.hasHeader?m.header.id+=f:m.header=void 0),s=0;y&&s<y.length;s++)l=y[parseInt(s.toString(),10)],l.id+=f;var S=o?[r.childTable[n.id]]:m.lanes;for(s=0;S&&s<S.length;s++)for(d=S[parseInt(s.toString(),10)],a||(d.id+=f),h=0;d.children&&h<d.children.length;h++)c=d.children[parseInt(h.toString(),10)],g=c.wrapper.offsetX-c.width/2,u=c.wrapper.offsetY-c.height/2,c.zIndex=-1,c.inEdges=c.outEdges=[],(a||r&&(1===r.pasteIndex||0===r.pasteIndex))&&("Vertical"===m.orientation?c.margin.top=u-b:c.margin.left=g-v),a||(c.id+=f);if(!a){if(o){p={shape:{lanes:S,phases:y,phaseSize:m.phaseSize,type:"SwimLane",orientation:m.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===m.orientation?(p.width=t.wrapper.actualSize.width,p.height=n.wrapper.actualSize.height+m.header.height+m.phaseSize,p.offsetX=t.wrapper.offsetX+10*r.pasteIndex,p.offsetY=n.wrapper.offsetY+10*r.pasteIndex):(p.width=n.wrapper.actualSize.width,p.height=t.wrapper.actualSize.height,p.offsetX=n.wrapper.offsetX+10*r.pasteIndex,p.offsetY=t.wrapper.offsetY+10*r.pasteIndex),t=p}if(0!==r.pasteIndex&&(t.offsetX+=10,t.offsetY+=10),t.zIndex=-1,t=e.add(t),!o)for(var w=0,x=Object.keys(r.childTable);w<x.length;w++){var I=x[w],P=r.childTable[""+I];P.id+=f,P.sourceID+=f,P.targetID+=f,P.zIndex=-1,e.add(P)}"SVG"!==e.mode&&e.refreshDiagramLayer(),e.select([t])}return t}function j(t,e,r,n){var o,a=e.nodes[0];if(n||i.i(ht.a)(t,a,!0)){var s=void 0,h=void 0,d=void 0,l=new rt.a;r&&(d=t.nameTable[""+r].parentId,s=a=t.nameTable[""+r]);var c=r?s.wrapper:a.wrapper,p=t.nameTable[d||a.parentId];p&&"Grid"===p.container.type&&(o=new at.a,o.children=[],!n&&a.isHeader||("Horizontal"===p.container.orientation&&a.isPhase||"Vertical"===p.container.orientation&&(a.rowIndex>0&&a.columnIndex>0||a.isLane)?(h=i.i(ht.b)(p,s?s.columnIndex:a.columnIndex,!(!p.shape.header||!p.shape.hasHeader)),o.offsetX=h.center.x,o.offsetY=h.center.y,l.width=h.width,l.height=h.height):(o.offsetX=p.offsetX,o.offsetY=c.offsetY,l.width=p.wrapper.actualSize.width,l.height=c.actualSize.height)),o.children.push(l),o.measure(new ot.a),o.arrange(o.desiredSize))}return o}function N(t,e,i,r,n){n=void 0!==n?n:I(e,i);for(var o=!1,a=e.shape.lanes[parseInt(n.toString(),10)],s=a.children.length-1;s>=0;s--)r?r.id===a.children[parseInt(s.toString(),10)].id&&a.children.splice(s,1):(t.removeDependentConnector(a.children[parseInt(s.toString(),10)]),t.diagramActions&et.p.UndoRedo||(t.diagramActions=t.diagramActions|et.p.UndoRedo,o=!0),t.remove(a.children[parseInt(s.toString(),10)]),a.children.splice(s,1),o&&(t.diagramActions=t.diagramActions&~et.p.UndoRedo))}function H(t){return t.children[0]}function W(t,e){var r,n,o,a,s,h,d=e.wrapper.children[0].rows;for(n=0;n<d.length;n++)for(o=0;o<d[parseInt(n.toString(),10)].cells.length;o++){if((s=H(d[parseInt(n.toString(),10)].cells[parseInt(o.toString(),10)]))&&s.children)for(a=s.children.length-1;a>=0;a--)s.children[parseInt(a.toString(),10)].children&&(h=t.nameTable[s.children[parseInt(a.toString(),10)].id])&&(h.isLane?V(t,h):(t.removeDependentConnector(h),t.diagramActions|=et.p.PreventHistory,h.constraints&et.f.Delete?t.remove(h):i.i(ht.c)(t,h,{},!1),t.diagramActions&=~et.p.PreventHistory));s&&(r=t.nameTable[s.id])&&V(t,r)}}function V(t,e){t.nodes.splice(t.nodes.indexOf(e),1),t.removeFromAQuad(e),t.removeObjectsFromLayer(e),delete t.nameTable[e.id],t.removeElements(e)}function X(t,e,r,n){var o;if("SwimLane"===r.shape.type){var a=r.shape,s=void 0;if(1===a.lanes.length)t.remove(r);else{var h=r.wrapper.bounds.x,d=r.wrapper.bounds.y,l=void 0,c=void 0,p=void 0,f=void 0,m=void 0,y=r.wrapper.children[0];if(s=n?a.lanes.indexOf(n):I(r,e),o={element:e,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changing",type:"Removal",cancel:!1,laneIndex:s},t.triggerEvent(et.r.collectionChange,o),!o.cancel){var v=i.i(it.e)(a.lanes[parseInt(s.toString(),10)]);if(N(t,r,e,void 0,s),!(t.diagramActions&et.p.UndoRedo)){var b={type:"LaneCollectionChanged",changeType:"Remove",undoObject:v,redoObject:i.i(it.e)(e),category:"Internal"};t.addHistoryEntry(b)}a.lanes.splice(s,1);var S=e?"Horizontal"===a.orientation?e.rowIndex:e.columnIndex:C(r)+s;if("Horizontal"===a.orientation){for(l=y.rows[parseInt(S.toString(),10)],c=0;c<l.cells.length;c++)if((p=l.cells[parseInt(c.toString(),10)])&&p.children.length>0)for(f=0;f<p.children.length;f++)m=p.children[parseInt(f.toString(),10)],Y(t,m);y.removeRow(S)}else{for(r.width=void 0!==r.width?r.width-y.rows[0].cells[parseInt(S.toString(),10)].actualSize.width:r.width,c=0;c<y.rows.length;c++)if((p=y.rows[parseInt(c.toString(),10)].cells[parseInt(S.toString(),10)])&&p.children.length>0)for(f=0;f<p.children.length;f++)m=p.children[parseInt(f.toString(),10)],Y(t,m);y.removeColumn(S)}o={element:e,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changed",type:"Removal",cancel:!1,laneIndex:s},t.triggerEvent(et.r.collectionChange,o),r.width=r.wrapper.width=y.width,r.height=r.wrapper.height=y.height,g(r),"Vertical"===r.shape.orientation&&(S=0),u(t,r,S),t.drag(r,h-r.wrapper.bounds.x,d-r.wrapper.bounds.y),t.updateDiagramObject(r)}}}}function Y(t,e){var i,r;if(e instanceof at.a){if(e.children.length>0)for(i=0;i<e.children.length;i++)e.children[parseInt(i.toString(),10)]instanceof at.a&&Y(t,e.children[parseInt(i.toString(),10)]);r=t.getObject(e.id),V(t,r)}}function U(t,e,r,n){t.protectPropertyChange(!0);var o,a=(r.wrapper.bounds.x,r.wrapper.bounds.y,!1),s=r.shape,h=r.wrapper.children[0],d=n?s.phases.indexOf(n):P(e,r),l=s.phases.length;if(s.phases.length>1){d===l-1&&(a=!0,o=i.i(it.e)(s.phases[d-1]));var c=i.i(it.e)(s.phases[parseInt(d.toString(),10)]);if(s.phases.splice(d,1),!(t.diagramActions&et.p.UndoRedo)){var p={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:c,previousPhase:o,redoObject:i.i(it.e)(e),category:"Internal",isLastPhase:a};t.addHistoryEntry(p)}"Horizontal"===s.orientation?G(t,h,e,d):F(t,h,e,d,r),O(t,r),u(t,r,1),b(r,t),t.protectPropertyChange(!1),t.updateDiagramObject(r)}}function G(t,e,i,r){var n,o,a,s,h,d;r=void 0!==r?r:i.columnIndex;var l,c,p,g,u,f;for(l=0;l<e.rows.length;l++)if(n=e.rows[parseInt(l.toString(),10)],n.cells.length>1&&(o=n.cells[parseInt(r.toString(),10)],a=n.cells.length-1===r?n.cells[r-1]:n.cells[r+1],h=a.children[0],o.children.length>0))if(s=o.children[0],u=t.nameTable[s.id],0===a.children.length&&o.children.length>0)a.children=o.children,a.columnSpan=o.columnSpan-1;else{for(c=0;c<s.children.length;c++){if((g=s.children[parseInt(c.toString(),10)])instanceof at.a){if(f=t.nameTable[g.id],f.isLane||(f.parentId=h.id),n.cells.length-1===r&&(f.margin.left=f.wrapper.bounds.x-h.bounds.x,g.margin.left=f.wrapper.bounds.x-h.bounds.x),h.children.push(g),t.nameTable[h.id]){var m=t.nameTable[h.id];m.children||(m.children=[]),m.children.push(g.id)}s.children.splice(c,1),c--,u&&u.children&&-1!==u.children.indexOf(f.id)&&u.children.splice(u.children.indexOf(f.id),1)}if(n.cells.length-1!==r)for(p=0;p<h.children.length;p++){var y=h.children[parseInt(p.toString(),10)];if(y instanceof at.a){var v=t.nameTable[y.id];v.margin.left=v.wrapper.bounds.x-s.bounds.x,y.margin.left=v.wrapper.bounds.x-s.bounds.x}}}if(u&&u.isPhase){var b=t.nameTable[h.id];b&&(h.maxWidth=b.wrapper.maxWidth=b.wrapper.maxWidth+=u.wrapper.maxWidth)}V(t,u)}var S=e.columnDefinitions()[parseInt(r.toString(),10)].width;e.removeColumn(r),r<e.columnDefinitions().length?(d=e.columnDefinitions()[parseInt(r.toString(),10)].width,d+=S,e.updateColumnWidth(r,d,!0)):(d=e.columnDefinitions()[r-1].width,d+=S,e.updateColumnWidth(r-1,d,!0))}function F(t,e,i,r,n){var o,a,s,h,d,l,c,p,g,u=n.shape,f=void 0!==r?u.header?r+1:r:i.rowIndex,m=e.rows[parseInt(f.toString(),10)],y=n.wrapper.bounds.y,v=u.phases.length;void 0!==u.header&&u.hasHeader&&(y+=e.rowDefinitions()[0].height);var b=r===v?e.rows[f-1]:e.rows[f+1];for(s=0;s<m.cells.length;s++)if(o=m.cells[parseInt(s.toString(),10)],l=b.cells[parseInt(s.toString(),10)],c=l.children[0],o.children.length>0){var S=o.children[0],w=t.nameTable[S.id];if(r<v)for(d=0;d<c.children.length;d++)(p=c.children[parseInt(d.toString(),10)])instanceof at.a&&(g=t.nameTable[p.id],g.margin.top=g.wrapper.bounds.y-(0===r?y:S.bounds.y),p.margin.top=g.wrapper.bounds.y-(0===r?y:S.bounds.y));for(h=0;h<S.children.length;h++)(p=S.children[parseInt(h.toString(),10)])instanceof at.a&&(g=t.nameTable[p.id],g.parentId=c.id,r===v&&(g.margin.top=g.wrapper.bounds.y-(0===r?y:c.bounds.y),p.margin.top=g.wrapper.bounds.y-(0===r?y:c.bounds.y)),c.children.push(p),S.children.splice(h,1),h--,w.children&&-1!==w.children.indexOf(g.id)&&w.children.splice(w.children.indexOf(g.id),1));V(t,w)}var x=e.rowDefinitions()[parseInt(f.toString(),10)].height;e.removeRow(f),f<e.rowDefinitions().length?(a=e.rowDefinitions()[parseInt(f.toString(),10)].height,a+=x,e.updateRowHeight(f,a,!0)):(a=e.rowDefinitions()[f-1].height,a+=x,e.updateRowHeight(f-1,a,!0))}function Z(t,e,i){var r=t.nameTable[e.parentId];if(r&&r.isLane){var n=t.nameTable[r.parentId],o=n.wrapper.children[0];o.updateColumnWidth(r.columnIndex,o.columnDefinitions()[r.columnIndex].width,!0,i),o.updateRowHeight(r.rowIndex,o.rowDefinitions()[r.rowIndex].height,!0,i);var a=r.wrapper,s=void 0;e.margin.left<i&&(e.margin.left=i),e.margin.top<i&&(e.margin.top=i);for(var h=0;h<a.children.length;h++){var d=a.children[parseInt(h.toString(),10)];if(d instanceof at.a){var l=t.nameTable[d.id];if(l.isLane){s=l.wrapper,!0;break}}}s&&("Horizontal"===n.shape.orientation?e.margin.left<i+s.actualSize.width&&(e.margin.left=i+s.actualSize.width):e.margin.top<i+s.actualSize.height&&(e.margin.top=i+s.actualSize.height)),n.wrapper.measure(new ot.a(n.width,n.height)),n.wrapper.arrange(n.wrapper.desiredSize),e.offsetX=e.wrapper.offsetX,e.offsetY=e.wrapper.offsetY,t.nodePropertyChange(e,{},{margin:{left:e.margin.left,top:e.margin.top}}),t.bpmnModule&&"Bpmn"===e.shape.type&&e.shape.annotations&&e.shape.annotations.length>0&&t.nodePropertyChange(e,{},{margin:{left:e.margin.left,top:e.margin.top}}),o.measure(new ot.a(o.width,o.height)),o.arrange(o.desiredSize),n.width=n.wrapper.width=n.wrapper.children[0].actualSize.width,n.height=n.wrapper.height=n.wrapper.children[0].actualSize.height}}function q(t){if("SwimLane"===t.shape.type)for(var e=t.shape.lanes,i=void 0,r=void 0,n=0;n<e.length;n++){i=e[parseInt(n.toString(),10)];for(var o=0;o<i.children.length;o++)r=i.children[parseInt(o.toString(),10)],r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY}}function Q(t,e){var i;if(t.isLane){var r=e.getObject(t.parentId);if(r&&"SwimLane"===r.shape.type&&t.isLane){var n=I(r,t);i=r.shape.lanes[parseInt(n.toString(),10)]}}return i}function K(t,e){if(t.isLane){var i=Q(t,e);if(e.eventHandler.action.includes("Resize")||i.canMove)return!0}return!1}function J(t,e){for(var i,r,n=0;n<t.length;n++){i=t[parseInt(n.toString(),10)];for(var o=0;o<i.children.length;o++)r=e.nameTable[i.children[parseInt(o.toString(),10)].id],r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY}}e.a=r,e.r=a,e.s=p,e.g=g,e.q=f,e.i=v,e.h=b,e.e=S,e.t=w,e.u=x,e.y=I,e.c=z,e.d=O,e.o=T,e.p=L,e.x=R,e.b=_,e.w=j,e.n=N,e.k=W,e.l=X,e.m=U,e.j=Z,e.v=Q,e.f=K;var $=i(6),tt=i(31),et=i(1),it=i(3),rt=i(14),nt=i(11),ot=i(7),at=i(23),st=i(5),ht=i(19),dt=i(9)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(1),n=i(7),o=i(5),a=i(3),s=function(){function t(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=r.n.Self|r.n.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new n.a,this.actualSize=new n.a,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new o.a(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.shapeType="",this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=r.e.None,this.inversedAlignment=!0,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return t.prototype.setOffsetWithRespectToBounds=function(t,e,i){this.unitMode=i,this.position={x:t,y:e}},t.prototype.getAbsolutePosition=function(t){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*t.width,y:this.position.y*t.height}},Object.defineProperty(t.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(t){this.floatingBounds=t},enumerable:!0,configurable:!0}),t.prototype.measure=function(t,e,i){var o=void 0!==this.width?this.width:(t.width||0)-this.margin.left-this.margin.right,a=void 0!==this.height?this.height:(t.height||0)-this.margin.top-this.margin.bottom;return this.id&&0===a&&this.elementActions&r.e.HorizontalLaneHeader&&(a=this.actualSize.height),this.desiredSize=new n.a(o,a),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,t)),this.desiredSize},t.prototype.arrange=function(t){return this.actualSize=t,this.updateBounds(),this.actualSize},t.prototype.updateBounds=function(){this.bounds=i.i(a.i)(this)},t.prototype.validateDesiredSize=function(t,e){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(t.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(t.height=50),(void 0===t||void 0!==this.width&&void 0!==this.height)&&(t=t||new n.a,t.width=void 0===this.width?(e.width||0)-this.margin.left-this.margin.right:this.width,t.height=void 0===this.height?(e.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(t.width=Math.max(t.width,this.minWidth)),void 0!==this.minHeight&&(t.height=Math.max(t.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(t.width=Math.min(t.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(t.height=Math.min(t.height,this.maxHeight)),t},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(14),n=i(1),o=i(12),a=i(7),s=i(5),h=i(3),d=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=new o.g(0,0,0,0),e.desiredBounds=void 0,e.measureChildren=!0,e.prevRotateAngle=0,e}return d(e,t),e.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},e.prototype.measure=function(t,r,n){this.desiredBounds=void 0;var o,s,d=void 0;if(this.hasChildren()){for(var l=0;l<this.children.length;l++){o=this.children[parseInt(l.toString(),10)],"Stretch"!==o.horizontalAlignment||t.width||(t.width=o.bounds.width),"Stretch"!==o.verticalAlignment||t.height||(t.height=o.bounds.height);var c="Stretch"===o.horizontalAlignment||"Stretch"===o.verticalAlignment;(this.measureChildren||c||o instanceof e&&void 0!==o.measureChildren)&&o.measure(t,r,n),s=this.GetChildrenBounds(o),"Stretch"!==o.horizontalAlignment&&"Stretch"!==o.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=s:this.desiredBounds.uniteRect(s):!this.actualSize||this.actualSize.width||this.actualSize.height||o.preventContainer||"Stretch"!==o.horizontalAlignment||"Stretch"!==o.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=o.bounds:this.desiredBounds.uniteRect(o.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var p={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},g=i.i(h.j)(this.rotateAngle,void 0,void 0,p);this.desiredBounds.x=g.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=g.y-this.desiredBounds.height*this.pivot.y}void 0!==this.desiredBounds&&(this.desiredBounds.width+=this.padding.left+this.padding.right,this.desiredBounds.height+=this.padding.top+this.padding.bottom,this.desiredBounds.x-=this.padding.left,this.desiredBounds.y-=this.padding.top),this.desiredBounds&&(d=new a.a(this.desiredBounds.width,this.desiredBounds.height))}return d=this.validateDesiredSize(d,t),this.stretchChildren(d),this.desiredSize=d,d},e.prototype.arrange=function(t){var i,r=this.desiredBounds;if(r){this.offsetX,this.offsetY;if(this.offsetX=r.x+r.width*this.pivot.x,this.offsetY=r.y+r.height*this.pivot.y,this.hasChildren())for(var o=0;o<this.children.length;o++){i=this.children[parseInt(o.toString(),10)];var a=!1;"Stretch"===i.horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&n.e.ElementIsGroup&&(i.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-i.parentTransform:i.parentTransform),a=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,a=!0),(a||this.measureChildren||i instanceof e&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=t,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,t},e.prototype.stretchChildren=function(t){if(this.hasChildren())for(var i=0,r=this.children;i<r.length;i++){var n=r[i];"Stretch"!==n.horizontalAlignment&&void 0!==n.desiredSize.width||(n.desiredSize.width=t.width-n.margin.left-n.margin.right),"Stretch"!==n.verticalAlignment&&void 0!==n.desiredSize.height||(n.desiredSize.height=t.height-n.margin.top-n.margin.bottom),n instanceof e&&n.stretchChildren(n.desiredSize)}},e.prototype.applyPadding=function(t){t.width+=this.padding.left+this.padding.right,t.height+=this.padding.top+this.padding.bottom},e.prototype.findChildOffsetFromCenter=function(t,e){var r={x:e.x-t.desiredSize.width/2,y:e.y-t.desiredSize.height/2},n=i.i(h.o)(r,t);n=i.i(h.j)(t.rotateAngle,e.x,e.y,n),n=i.i(h.j)(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,n),t.offsetX=n.x,t.offsetY=n.y},e.prototype.GetChildrenBounds=function(t){var e=t.desiredSize.clone(),r=(t.rotateAngle,this.rotateAngle,{x:t.offsetX,y:t.offsetY}),n=r.x-e.width*t.pivot.x,o=r.y-e.height*t.pivot.y,a=n+e.width,d=o+e.height,l={x:n,y:o},c={x:a,y:o},p={x:n,y:d},g={x:a,y:d};return l=i.i(h.j)(t.rotateAngle,t.offsetX,t.offsetY,l),c=i.i(h.j)(t.rotateAngle,t.offsetX,t.offsetY,c),p=i.i(h.j)(t.rotateAngle,t.offsetX,t.offsetY,p),g=i.i(h.j)(t.rotateAngle,t.offsetX,t.offsetY,g),0!==this.rotateAngle&&(l=i.i(h.j)(-this.rotateAngle,void 0,void 0,l),c=i.i(h.j)(-this.rotateAngle,void 0,void 0,c),p=i.i(h.j)(-this.rotateAngle,void 0,void 0,p),g=i.i(h.j)(-this.rotateAngle,void 0,void 0,g)),s.a.toBounds([l,c,p,g])},e}(r.a)},function(t,e,i){"use strict";function r(){return new m(1,0,0,1,0,0,f.Identity)}function n(t,e){var i=c(t,e.x,e.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function o(t,e){for(var i=[],r=0,o=e;r<o.length;r++){var a=o[r];i.push(n(t,a))}return i}function a(t,e,i,r){e%=360,p(t,l(.017453292519943295*e,i||0,r||0))}function s(t,e,i,r,n){void 0===r&&(r=0),void 0===n&&(n=0),p(t,d(e,i,r,n))}function h(t,e,i){return t.type&f.Identity?(t.type=f.Translation,void g(t,1,0,0,1,e,i)):t.type&f.Unknown?(t.offsetX+=e,void(t.offsetY+=i)):(t.offsetX+=e,t.offsetY+=i,void(t.type|=f.Translation))}function d(t,e,i,n){var o=r();return o.type=i||n?f.Scaling|f.Translation:f.Scaling,g(o,t,0,0,e,i-t*i,n-e*n),o}function l(t,e,i){var n=r(),o=Math.sin(t),a=Math.cos(t),s=e*(1-a)+i*o,h=i*(1-a)-e*o;return n.type=f.Unknown,g(n,a,o,-o,a,s,h),n}function c(t,e,i){switch(t.type){case f.Identity:break;case f.Translation:e+=t.offsetX,i+=t.offsetY;break;case f.Scaling:e*=t.m11,i*=t.m22;break;case f.Translation|f.Scaling:e*=t.m11,e+=t.offsetX,i*=t.m22,i+=t.offsetY;break;default:var r=i*t.m21+t.offsetX,n=e*t.m12+t.offsetY;e*=t.m11,e+=r,i*=t.m22,i+=n}return{x:e,y:i}}function p(t,e){var i=t.type,n=e.type;if(n!==f.Identity){if(i===f.Identity)return u(t,e),void(t.type=e.type);if(n===f.Translation)return t.offsetX+=e.offsetX,t.offsetY+=e.offsetY,void(i!==f.Unknown&&(t.type|=f.Translation));if(i!==f.Translation){var o=i<<4|n;switch(o){case 34:return t.m11*=e.m11,void(t.m22*=e.m22);case 35:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,void(t.type=f.Translation|f.Scaling);case 36:break;default:switch(o){case 50:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX*=e.m11,void(t.offsetY*=e.m22);case 51:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.m11*t.offsetX+e.offsetX,void(t.offsetY=e.m22*t.offsetY+e.offsetY);case 52:break;default:switch(o){case 66:case 67:case 68:break;default:return}}}var a=r();return g(a,t.m11*e.m11+t.m12*e.m21,t.m11*e.m12+t.m12*e.m22,t.m21*e.m11+t.m22*e.m21,t.m21*e.m12+t.m22*e.m22,t.offsetX*e.m11+t.offsetY*e.m21+e.offsetX,t.offsetX*e.m12+t.offsetY*e.m22+e.offsetY),a.m21||a.m12?a.type=f.Unknown:((a.m11&&1!==a.m11||a.m22&&1!==a.m22)&&(a.type=f.Scaling),(a.offsetX||a.offsetY)&&(a.type|=f.Translation),(a.type&(f.Translation|f.Scaling))===f.Identity&&(a.type=f.Identity),a.type=f.Scaling|f.Translation),u(t,a),void(t.type=a.type)}var s=t.offsetX,h=t.offsetY;if(t.offsetX=s*e.m11+h*e.m21+e.offsetX,t.offsetY=s*e.m12+h*e.m22+e.offsetY,n===f.Unknown)return void(t.type=f.Unknown);t.type=f.Translation|f.Scaling}}function g(t,e,i,r,n,o,a){t.m11=e,t.m12=i,t.m21=r,t.m22=n,t.offsetX=o,t.offsetY=a}function u(t,e){t.m11=e.m11,t.m12=e.m12,t.m21=e.m21,t.m22=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,t.type=e.type}i.d(e,"h",function(){return f}),i.d(e,"i",function(){return m}),e.a=r,e.c=n,e.e=o,e.b=a,e.d=s,e.f=h,e.g=p;var f;!function(t){t[t.Identity=0]="Identity",t[t.Translation=1]="Translation",t[t.Scaling=2]="Scaling",t[t.Unknown=4]="Unknown"}(f||(f={}));var m=function(){function t(t,e,i,r,n,o,a){this.m11=t,this.m12=e,this.m21=i,this.m22=r,this.offsetX=n,this.offsetY=o,this.type=a}return t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return d});var r=i(7),n=i(14),o=i(5),a=i(4),s=i(22),h=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),d=function(t){function e(){var e=t.call(this)||this;return e.pathData="",e.transformPath=!0,e.absolutePath="",e.canMeasurePath=!1,e.absoluteBounds=new o.a,e}return h(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.pathData},set:function(t){this.pathData!==t&&(this.pathData=t,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.getPoints=function(){var t=this;return this.pointTimer||(this.pointTimer=setTimeout(function(){t.points=null,t.pointTimer=null},200)),this.points=this.points||i.i(a.I)(this),i.i(a.J)(this,this.points)},e.prototype.measure=function(t){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new o.a(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=i.i(a.l)(this.data?this.data:"")),void 0===this.width?this.desiredSize=new r.a(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new r.a(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new r.a(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.canMeasurePath=!1,this.desiredSize},e.prototype.arrange=function(t){return(this.isDirt||this.actualSize.width!==t.width||this.actualSize.height!==t.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,t),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},e.prototype.updatePath=function(t,e,r){var n=!1,o="",a=-e.x,h=-e.y,d=[];return r.width===e.width&&r.height===e.height||(a=r.width/Number(e.width?e.width:1),h=r.height/Number(e.height?e.height:1),n=!0),d=i.i(s.a)(t),d=i.i(s.b)(d),o=(n||this.isDirt)&&this.transformPath?i.i(s.c)(d,a,h,n,e.x,e.y,0,0):i.i(s.f)(d),n=!1,o},e}(n.a)},function(t,e,i){"use strict";function r(t,e,i){var r;r="Straight"!==t.type&&t.sourceWrapper?t.sourceWrapper.corners.center:n(t);var o=a(t,r,t.targetPoint,e,i);return N(t,o[0],!1),N(t,o[o.length-1],!0),o}function n(t){var e;if(t.sourcePortWrapper){var i=t.sourcePortWrapper;e={x:i.offsetX,y:i.offsetY}}else if(t.sourceID&&t.sourceWrapper)if(t.targetWrapper){var r=t.sourceWrapper.corners.center,n=t.targetWrapper.corners.center;e=j(t,t.sourceWrapper,r,n,!1)}else e=t.sourcePoint;else e=t.sourcePoint;return e}function o(t,e,i){"LeftToRight"===i?(t.direction=t.direction?t.direction:"Right",e.direction=e.direction?e.direction:"Left"):"RightToLeft"===i?(t.direction=t.direction?t.direction:"Left",e.direction=e.direction?e.direction:"Right"):"TopToBottom"===i?(t.direction=t.direction?t.direction:"Bottom",e.direction=e.direction?e.direction:"Top"):"BottomToTop"===i&&(t.direction=t.direction?t.direction:"Top",e.direction=e.direction?e.direction:"Bottom")}function a(t,e,r,n,a){var s,h,d=t.sourceWrapper,l=t.targetWrapper,c=t.sourcePortWrapper,p=t.targetPortWrapper,u=[],f=M(t),y={left:5,right:5,bottom:5,top:5},v={left:5,right:5,bottom:5,top:5},b={corners:void 0,point:e,direction:void 0,margin:y},S={corners:void 0,point:r,direction:void 0,margin:v};if(void 0!==d&&void 0!==l&&(s=i.i(xt.k)(d),h=i.i(xt.k)(l),b.corners=d.corners,S.corners=l.corners),void 0!==c){var w={x:c.offsetX,y:c.offsetY};b.direction=gt(w,s,d.bounds,!1)}if(void 0!==p){var P={x:p.offsetX,y:p.offsetY};S.direction=gt(P,h,l.bounds,!1)}if("Bezier"===t.type&&!t.isBezierEditing&&t.segments.length>0)for(var z=t.segments.length-1;z>=0;){var O=t.segments[parseInt(z.toString(),10)];O.isInternalSegment&&t.segments.pop(),z--}if(void 0!==d&&void 0!==l)return void 0!==b.direction&&void 0!==S.direction||(n?o(b,S,n):b.corners.top>S.corners.bottom&&Math.abs(b.corners.top-S.corners.bottom)>f?(b.direction=b.direction?b.direction:"Top",S.direction=S.direction?S.direction:"Bottom"):b.corners.bottom<S.corners.top&&Math.abs(b.corners.bottom-S.corners.top)>f?(b.direction=b.direction?b.direction:"Bottom",S.direction=S.direction?S.direction:"Top"):b.corners.right<S.corners.left&&Math.abs(b.corners.right-S.corners.left)>f||b.corners.right+f<S.corners.left||S.corners.right>=b.corners.left-f&&b.corners.left>S.corners.left?(b.direction=b.direction?b.direction:"Right",S.direction=S.direction?S.direction:"Left"):b.corners.left>S.corners.right&&Math.abs(b.corners.left-S.corners.right)>b.margin.left+b.margin.right||S.corners.right+f<b.corners.left||b.corners.right>=S.corners.left-f&&b.corners.left<S.corners.left?(b.direction=b.direction?b.direction:"Left",S.direction=S.direction?S.direction:"Right"):d.id!==l.id&&!s.equals(s,h)&&h.containsPoint(s.topCenter,b.margin.top)?(b.direction=b.direction?b.direction:"Bottom",S.direction=S.direction?S.direction:"Top"):(b.direction=b.direction?b.direction:"Top",S.direction=S.direction?S.direction:"Bottom")),x(t,b.direction,S.direction,b.point,S.point,a);if(C(t),(t.sourceWrapper||t.targetWrapper)&&m(t,b,S),"Straight"===t.type||"Bezier"===t.type)u=I(t,b,S);else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].length&&null!==t.segments[0].direction)u=g(t,b,S,d,l,c,p);else{var T=void 0;b.direction?T=tt(d.bounds,b,20):b.direction=S.direction?void 0!==t.targetPortWrapper?S.direction:ft(S.direction):mt.a.direction(b.point,S.point),t.segments[0].points=u=it(t,b,S,T)}return u}function s(t,e){t.direction=e.direction,e.points=[],e.points.push(t.point);var i="Left"===e.direction||"Top"===e.direction?-e.length:e.length,r="Left"===e.direction||"Right"===e.direction?0:90,n=_(t.point,i,r);return e.points.push(n),n}function h(t,e,r){var n,o,a;if(e.corners=t.sourceWrapper?t.sourceWrapper.corners:void 0,t.sourcePortWrapper){a=gt({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},i.i(xt.k)(t.sourceWrapper),t.sourceWrapper.bounds,!1),!e.corners||"Bottom"!==e.direction&&"Top"!==e.direction?!e.corners||"Left"!==e.direction&&"Right"!==e.direction||r.point.y>e.corners.top&&r.point.y<e.corners.bottom&&(o=e.point.x>r.point.x?"Left":"Right"):r.point.x>e.corners.left&&r.point.x<e.corners.right&&(o=e.point.y>r.point.y?"Top":"Bottom")}if(t.sourcePortWrapper&&a===ft(o)){var s;("Left"===a||"Right"===a)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.center.y&&r.point.y>=e.corners.top&&r.point.y<=e.corners.center.y?(e.direction="Top",s=e.point.y-e.corners.top+20):("Left"===a||"Right"===a)&&e.point.y>e.corners.center.y&&e.point.y<=e.corners.bottom&&r.point.y>e.corners.center.y&&r.point.y<=e.corners.bottom?(e.direction="Bottom",s=e.corners.bottom-e.point.y+20):("Top"===a||"Bottom"===a)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.center.x&&r.point.x>=e.corners.left&&r.point.x<=e.corners.center.x?(e.direction="Left",s=e.point.x-e.corners.left+20):("Top"===a||"Bottom"===a)&&e.point.x<=e.corners.right&&e.point.x>e.corners.center.x&&r.point.x<=e.corners.right&&r.point.x<e.corners.center.x&&(e.direction="Right",s=e.corners.right-e.point.x+20),e.direction&&s&&(n=it(t,e,r,s,!0))}else e.direction=o||P(e.direction,e.point,r.point),n=et(e,r);return n}function d(t,e,i){var r;i.corners=t.targetWrapper.corners,E(t.targetWrapper,e,i,t);var n=P(i.direction,e.point,i.point);if(e.direction!==i.direction||"Left"!==e.direction&&"Right"!==e.direction)e.direction=n,r=et(e,i);else{e.direction=n,r=it(t,e,i,t.targetWrapper.width/2+20);e.point=r[1],E(t.targetWrapper,e,i,t),r=it(t,e,i)}return r}function l(t,e,i){i.corners=t.targetWrapper.corners;var r,n;"Left"!==e.direction&&"Right"!==e.direction?i.corners.center.y!==e.point.y||i.corners.left<=e.point.x&&e.point.x<=i.corners.right?i.corners.center.y===e.point.y&&"Bottom"===t.segments[t.segments.length-2].direction||i.corners.center.y>e.point.y&&e.point.y>=i.corners.top?(r="Top",n=e.point.y-i.corners.top+20):i.corners.center.y===e.point.y&&"Top"===t.segments[t.segments.length-2].direction||i.corners.center.y<e.point.y&&e.point.y<=i.corners.bottom?(r="Bottom",n=i.corners.bottom-e.point.y+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.top<=e.point.y&&e.point.y<=e.corners.bottom&&(r=e.direction,n=e.point.y>i.point.y?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20):(r="Top",n=i.corners.height/2+20):i.corners.center.x!==e.point.x||i.corners.top<e.point.y&&e.point.y<=i.corners.bottom?i.corners.center.x===e.point.x&&"Right"===t.segments[t.segments.length-2].direction||i.corners.center.x>e.point.x&&e.point.x>=i.corners.left?(r="Left",n=e.point.x-i.corners.left+20):i.corners.center.x===e.point.x&&"Left"===t.segments[t.segments.length-2].direction||i.corners.center.x<=e.point.x&&e.point.x<=i.corners.right?(r="Right",n=i.corners.right-e.point.x+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.left<=e.point.x&&e.point.x<=e.corners.right&&(r=e.direction,n=e.point.x>i.point.x?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20):(r="Left",n=i.corners.width/2+20);var o="Left"===r||"Top"===r?-n:n,a="Left"===r||"Right"===r?0:90,s=e.point;e.point=_(e.point,o,a),e.direction=mt.a.direction(e.point,i.point),void 0===t.sourcePortWrapper||void 0===t.targetPortWrapper||e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y||(e.direction=i.direction);var h=it(t,e,i);return h.splice(0,0,s),h}function c(t,e,i,r){var n=!1;switch(i.direction){case"Left":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Right"===r&&e.point.x>i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||("Bottom"===r&&e.point.y>i.point.y||"Top"===r&&e.point.y<i.point.y)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction="Right"===r?e.point.y>i.point.y?"Top":"Bottom":e.point.x<i.point.x?"Right":"Left",n=!0):e.point.x>i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)&&!(i.corners.top>e.point.y&&i.corners.bottom<e.point.y)?e.direction="Left":e.point.x<i.point.x&&e.point.y>i.point.y||e.point.x>i.point.x&&e.point.y<=i.point.y&&i.corners.top<e.point.y&&i.corners.center.y>=e.point.y?e.direction="Top":e.point.x<i.point.x&&e.point.y<i.point.y||e.point.x>i.point.x&&e.point.y>i.point.y&&i.corners.bottom<e.point.y&&i.corners.center.y>e.point.y?e.direction="Bottom":e.point.y===i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Right":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&("Bottom"===r&&e.point.y>i.point.y||"Top"===r&&e.point.y<i.point.y)&&e.point.x>i.point.x&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction=e.point.x>i.point.x?"Left":"Right",n=!0):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Left"===r&&e.point.x<i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=e.point.y>i.point.y?"Top":"Bottom",n=!0):e.point.x<i.point.x&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y&&e.point.y===i.point.y?e.direction="Top":e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Bottom":e.point.x<i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)?e.direction="Right":e.point.y===i.point.y&&e.point.x>i.point.x&&(e.direction="Left");break;case"Top":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Bottom"===r&&e.point.y>i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right||("Right"===r&&e.point.x>i.point.x||"Left"===r&&i.point.y>e.point.y&&i.point.x>e.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction="Bottom"===r?e.point.x>i.point.x?"Left":"Right":e.point.y<i.point.y?"Bottom":"Top",n=!0):e.point.x===i.point.x&&e.point.y<i.point.y?e.direction="Bottom":e.point.y>i.point.y&&e.point.x>i.corners.left&&e.point.x<i.corners.right?e.direction="Left":e.point.y>=i.point.y?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Bottom":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&(("Right"===r||"Left"===r&&i.point.x>e.point.x)&&e.point.y>i.point.y&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Top"===r&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?(e.direction="Right"===r||"Left"===r?e.point.y>i.point.y?"Top":"Bottom":e.point.x>i.point.x?"Left":"Right",n=!0):e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.right>e.point.x?e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.center.x>=e.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.corners.right&&i.corners.center.x<e.point.x&&(e.direction="Right"):e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y>i.point.y&&e.point.x<i.point.x?e.direction="Right":e.point.y<=i.point.y&&(e.point.x>i.point.x||i.point.x>e.point.x)&&(e.direction="Bottom")}return n}function p(t,e,r){var n;r.corners=t.targetWrapper.corners;var o,a;if(void 0!==t.sourcePortWrapper){o=gt({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},i.i(xt.k)(t.sourceWrapper),t.sourceWrapper.bounds,!1)}var s=c(t,e,r,o);return!t.selectedSegmentIndex&&void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&r.direction===ft(o)&&(("Left"===r.direction&&e.point.x>r.point.x||"Right"===r.direction&&e.point.x<r.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Bottom"===r.direction&&e.point.y<r.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?n=l(t,e,r):t.selectedSegmentIndex||e.direction!==r.direction?!t.selectedSegmentIndex&&("Left"===r.direction&&e.point.x>r.point.x||"Right"===r.direction&&e.point.x<r.point.x)&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.y<=r.point.y&&r.corners.top<=e.point.y&&r.corners.bottom>=e.point.y||"Top"===r.direction&&e.point.y>r.point.y||"Bottom"===r.direction&&e.point.y<r.point.y&&r.corners.left<=e.point.x&&r.corners.right>=e.point.x?n=t.selectedSegmentIndex?et(e,r):l(t,e,r):!t.selectedSegmentIndex&&void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Left"===e.direction||"Right"===e.direction)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom&&("Top"===r.direction||"Bottom"===r.direction)&&r.corners.center.x===e.corners.center.x?(e.direction="Top"===r.direction?"Bottom":"Top",a="Top"===r.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20,n=it(t,e,r,a)):!t.selectedSegmentIndex&&void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&("Left"===r.direction||"Right"===r.direction)&&r.corners.center.y===e.corners.center.y?(e.direction="Left"===r.direction?"Right":"Left",a="Left"===r.direction?e.corners.right-e.point.x+20:e.point.x-e.corners.left+20,n=it(t,e,r,a)):s?(a="Left"===e.direction||"Right"===e.direction?"Left"===e.direction?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20:"Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20,n=it(t,e,r,a)):n=et(e,r):n=it(t,e,r),n}function g(t,e,r,n,o,a,l){var c,g,m,y,v=[];C(t);var b;if(t.segments.length>0){for(var S=0;S<t.segments.length;S++){var w=t.segments[parseInt(S.toString(),10)];if(0===S&&void 0!==t.sourcePortWrapper&&(y={x:a.offsetX,y:a.offsetY},m=gt(y,i.i(xt.k)(n),n.bounds,!1),w.direction===ft(m)&&(w.direction=m)),S>0&&t.segments[S-1].direction===w.direction)S=z(t,S,e);else{var x=t.segments[S-1];e.point=w.direction?s(e,w):x.points[x.points.length-1]}if(S===t.segments.length-1&&(l||o?t.targetWrapper&&void 0===t.targetPortWrapper?(T(t,e),g=d(t,e,r)):g=p(t,e,r):g=h(t,e,r),g))if(f(g,t,e),w.points=[],g.length>=2)for(c=0;c<g.length;c++)w.points.push(g[parseInt(c.toString(),10)]);else b=S;if(a&&0===S){var I=u(t,a,n);I&&(e.point=I)}}void 0!==b&&(b===t.segments.length-1&&(t.segments[b-1].direction=null,t.segments[b-1].length=null),t.segments.splice(b,1)),v=L(t,v)}return v}function u(t,e,r){var n,o={x:e.offsetX,y:e.offsetY},a=i.i(xt.k)(r),s=gt(o,a,r.bounds,!1),h=t.segments[0];return h.direction!==s&&(R(h,s,a,h.points[0],h.points[h.points.length-1],!1),n=h.points[h.points.length-1],h.direction=mt.a.direction(h.points[h.points.length-2],h.points[h.points.length-1])),n}function f(t,e,i){var r,n=e.segments[e.segments.length-2],o=n.points[n.points.length-1];("Top"!==n.direction&&"Bottom"!==n.direction||o.x!==t[1].x)&&("Left"!==n.direction&&"Right"!==n.direction||o.y!==t[1].y)||(n.points[n.points.length-1]=t[1],r=mt.a.direction(n.points[0],n.points[n.points.length-1]),void 0!==e.sourceWrapper&&void 0===e.sourcePortWrapper&&r===ft(n.direction)&&("Left"===n.direction||"Right"===n.direction?n.points[0].x="Right"===n.direction?n.points[0].x-e.sourceWrapper.corners.width:n.points[0].x+e.sourceWrapper.corners.width:n.points[0].y="Bottom"===n.direction?n.points[0].y-e.sourceWrapper.corners.height:n.points[0].y+e.sourceWrapper.corners.height),n.direction=r,n.length=mt.a.distancePoints(n.points[0],n.points[n.points.length-1]),t.splice(0,1))}function m(t,e,i){var r,n=t.sourcePortWrapper,o=t.targetPortWrapper,a=t.sourceWrapper,s=e.point,h={left:0,right:0,top:0,bottom:0},d={x:0,y:0},l="Top";if(a?(s=i.point,h=e.margin):(a=t.targetWrapper,h=i.margin),"Orthogonal"===t.type)if(t.segments&&t.segments.length>0&&t.sourceWrapper&&t.segments[0].direction)e.direction=t.segments[0].direction,d=k(a.corners,e.direction),r=k(a.corners,ft(e.direction)),d=j(t,a,d,r,!1);else{var c={corners:null,direction:null,point:s,margin:h},p={corners:null,direction:null,point:null,margin:null};E(a,c,p,t),d=p.point,l=p.direction}else{var g=void 0;t.segments&&t.segments.length>1&&(g=a===t.sourceWrapper?t.segments[0].point:t.segments[t.segments.length-2].point),d=j(t,a,a.bounds.center,t.segments&&t.segments.length>1?g:s,a===t.targetWrapper)}a===t.sourceWrapper?(e.direction=e.direction||l,e.point=d,t.sourcePortWrapper&&(e.point={x:n.offsetX,y:n.offsetY},t.sourcePadding&&(e.point=y(t,e,i,!1)))):(i.direction=i.direction||l,i.point=d,t.targetPortWrapper&&(i.point={x:o.offsetX,y:o.offsetY},t.targetPadding&&(i.point=y(t,e,i,!0))))}function y(t,e,i,r){var n=t.sourcePortWrapper,o=t.targetPortWrapper,a=r?t.targetPadding:t.sourcePadding,s=r?o:n,h=new yt.a(s.bounds.x-a,s.bounds.y-a,s.actualSize.width+2*a,s.actualSize.height+2*a),d=[h.topLeft,h.topRight,h.bottomRight,h.bottomLeft];d[d.length]=d[0];var l={x1:e.point.x,y1:e.point.y,x2:i.point.x,y2:i.point.y},c=r?i.point:e.point;return H(l,d,!0,c)||c}function v(t,e,r){for(var n=b(t,r.sourcePadding),o=b(e,r.targetPadding),a=0;a<n.length-1;a++)for(var s=n[parseInt(a.toString(),10)],h=0;h<o.length-1;h++){var d=o[parseInt(h.toString(),10)];if(i.i(vt.j)(s,d).enabled)return!0}return!1}function b(t,e){var r=[],n=i.i(vt.k)(t,t.corners,e);n.push(n[0]);for(var o=0;o<n.length-1;o++)r.push(S(n[parseInt(o.toString(),10)],n[o+1]));return r}function S(t,e){return{x1:t.x,y1:t.y,x2:e.x,y2:e.y}}function w(t,e,i){var r,n=t.rotateAngle+t.parentTransform;if(n){if(n<45)return e;if(n<=135)r={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.middleLeft,topRight:e.topLeft,middleLeft:e.bottomCenter,center:i.center,middleRight:e.topCenter,bottomLeft:e.bottomRight,bottomCenter:e.middleRight,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else if(n<=225)r={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.bottomCenter,topRight:e.bottomRight,middleLeft:e.middleRight,center:i.center,middleRight:e.middleLeft,bottomLeft:e.topLeft,bottomCenter:e.topCenter,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else{if(!(n<=315))return e;r={width:e.width,height:e.height,topLeft:e.topRight,topCenter:e.middleRight,topRight:e.bottomRight,middleLeft:e.topCenter,center:i.center,middleRight:e.bottomCenter,bottomLeft:e.topLeft,bottomCenter:e.middleLeft,bottomRight:e.bottomLeft,left:i.left,right:i.right,top:i.top,bottom:i.bottom}}return r}return e}function x(t,e,i,r,n,o){var a,s=t.sourceWrapper,h=t.targetWrapper,d=t.sourcePortWrapper,l=t.targetPortWrapper,c=[],p=s.corners,g=h.corners,u=(g.center,{left:5,right:5,bottom:5,top:5}),f={left:5,right:5,bottom:5,top:5},m={corners:p,point:r,direction:e,margin:u},b={corners:g,point:n,direction:i,margin:f},S=w(s,p,t.sourceWrapper.bounds),x=w(h,g,t.targetWrapper.bounds),P=!1;if(t.sourceWrapper&&t.targetWrapper&&(P=v(t.sourceWrapper,t.targetWrapper,t)),void 0!==d){switch(m.point={x:d.offsetX,y:d.offsetY},m.direction){case"Bottom":case"Top":m.point.y=m.point.y;break;case"Left":case"Right":m.point.x=m.point.x}t.sourcePadding&&!P&&(l&&(b.point={x:l.offsetX,y:l.offsetY}),m.point=y(t,m,b,!1))}else"Orthogonal"===t.type||"Bezier"===t.type?(t.segments&&t.segments.length>0&&t.segments[0].direction&&(m.direction=t.segments[0].direction),m.point=k(S,m.direction),a=k(S,ft(m.direction)),m.point=j(t,s,m.point,a,!1)):m.point=s.corners.center;if(void 0!==l){switch(b.point={x:l.offsetX,y:l.offsetY},b.direction){case"Bottom":case"Top":b.point.y=b.point.y;break;case"Left":case"Right":b.point.x=b.point.x}t.targetPadding&&!P&&(b.point=y(t,m,b,!0))}else"Orthogonal"===t.type||"Bezier"===t.type?(b.point=k(x,b.direction),a=k(x,ft(b.direction)),b.point=j(t,h,b.point,a,!0)):b.point=h.corners.center;if("Orthogonal"!==t.type){var z=void 0,O=void 0;if("Bezier"===t.type){if(t.bezierSettings.allowSegmentsReset||0===t.segments.length||!mt.a.isEmptyPoint(t.segments[t.segments.length-1].point))return c=B(t,m,b,void 0,o),c=I(t,m,b);C(t)}else C(t);if(void 0===t.sourcePortWrapper){m.point=m.corners.center,t.segments&&t.segments.length>0&&(O=t.segments[0],z=mt.a.isEmptyPoint(O.point)?void 0:O);var T=void 0!==z?z.point:b.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[0].vector1.angle&&t.segments[0].vector1.distance){var L=Math.max(m.corners.width,m.corners.height);T=mt.a.transform(m.point,t.segments[0].vector1.angle,L/2)}m.point=P?t.sourceWrapper.bounds.center:j(t,s,m.point,T,!1)}if(void 0===t.targetPortWrapper){b.point=b.corners.center,t.segments&&t.segments.length>1&&(O=t.segments[t.segments.length-2],z=mt.a.isEmptyPoint(O.point)?void 0:O);var E=z?z.point:m.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[t.segments.length-1].vector2.angle&&t.segments[t.segments.length-1].vector2.distance){var L=Math.max(m.corners.width,m.corners.height);E=mt.a.transform(b.point,t.segments[0].vector2.angle,L/2)}b.point=P?t.targetWrapper.bounds.center:j(t,h,E,b.point,!0)}c=I(t,m,b)}else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].direction)c=A(t,m,b,d,l,s,h);else{if(!t.segments[0]){var z=new St.f(t,"segments",{type:"Orthogonal"},!0);t.segments.push(z)}t.segments[0].points=c=B(t,m,b,void 0,o)}return c}function I(t,e,i){var r=[];if(t.segments&&t.segments.length>0){var n=void 0,o=[],a=e.point;for(n=0;n<t.segments.length;n++){var s=t.segments[parseInt(n.toString(),10)];if(o=[],o.push(a),n!==t.segments.length-1?(o.push(s.point),a=s.point):o.push(i.point),t.segments[parseInt(n.toString(),10)].points=o,t.segments.length>1&&mt.a.equals(s.points[0],s.points[1])&&t.segments.splice(n,1),s)for(var h=0;h<s.points.length;h++)(h>0||0===n)&&r.push(s.points[parseInt(h.toString(),10)])}}return r}function P(t,e,i){return"Top"===t||"Bottom"===t?i.x>e.x?"Right":"Left":i.y>e.y?"Bottom":"Top"}function C(t){if("Straight"===t.type||"Bezier"===t.type){if(0===t.segments.length||t.segments.length>0&&!mt.a.isEmptyPoint(t.segments[t.segments.length-1].point))if("Bezier"===t.type){var e=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0},!0);t.segments.push(e)}else{var e=new St.d(t,"segments",{type:"Straight"},!0);t.segments.push(e)}}else if(0===t.segments.length||t.segments[t.segments.length-1].direction){var e=new St.f(t,"segments",{type:"Orthogonal"},!0);t.segments.push(e)}}function z(t,e,i){var r=t.segments[parseInt(e.toString(),10)],n="Left"===r.direction||"Top"===r.direction?-r.length:r.length,o="Left"===r.direction||"Right"===r.direction?0:90,a=_(i.point,n,o);return t.segments[e-1].length+=r.length,t.segments[e-1].points[1]=i.point=a,t.segments.splice(e,1),--e}function O(t,e,r){var n,o;if(t.sourcePortWrapper){o=gt({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},i.i(xt.k)(t.sourceWrapper),t.sourceWrapper.bounds,!1)}E(t.targetWrapper,e,r,t);var a=P(r.direction,e.point,r.point);if(void 0===t.sourcePortWrapper||e.direction!==r.direction||("Top"!==e.direction&&"Bottom"!==e.direction||e.corners.center.x!==r.corners.center.x)&&("Left"!==e.direction&&"Right"!==e.direction||e.corners.center.y!==r.corners.center.y))if(r.point.x>=e.corners.left&&r.point.x<=e.corners.right&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom){e.direction=r.point.y>e.point.y?"Bottom":"Top";var s="Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20;n=it(t,e,r,s)}else if(t.sourcePortWrapper&&o===ft(a)){var h;("Left"===o||"Right"===o)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=r.point.y>e.point.y?"Bottom":"Top",h=e.corners.height/2+20):("Top"===o||"Bottom"===o)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&(e.direction=r.point.x>e.point.x?"Right":"Left",h=e.corners.width/2+20),e.direction&&h?n=it(t,e,r,h,!0):(e.direction=a,n=et(e,r))}else if(!t.sourcePortWrapper||o!==r.direction||"Top"!==o&&"Bottom"!==o||e.corners.center.x!==r.corners.center.x)e.direction=a,n=et(e,r);else{e.direction=r.point.y>e.point.y?"Bottom":"Top";var d="Bottom"===e.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20;n=it(t,e,r,d)}else{e.direction=a,n="Top"===a||"Bottom"===a?it(t,e,r,t.sourceWrapper.height/2+20):it(t,e,r,t.sourceWrapper.width/2+20);e.point=n[1],"Left"===a||"Right"===a?(r.direction=a,r.point="Left"===a?r.corners.middleLeft:r.corners.middleRight):E(t.targetWrapper,e,r,t),n=it(t,e,r)}return n}function T(t,e){if(void 0!==t.targetWrapper&&void 0===t.targetPortWrapper){if(i.i(xt.k)(t.targetWrapper).containsPoint(e.point,1)){var r=t.targetWrapper,n=t.segments[t.segments.length-2],o=n.points[n.points.length-1],a=ft(n.direction);"Bottom"===a?o.y<r.corners.bottom+1&&(n.points[n.points.length-1].y=r.corners.bottom+20,n.length=mt.a.distancePoints(n.points[0],n.points[n.points.length-1])):"Top"===a?o.y>r.corners.top-1&&(n.points[n.points.length-1].y=r.corners.top-20,n.length=mt.a.distancePoints(n.points[0],n.points[n.points.length-1])):"Left"===a?o.x>r.corners.left-1&&(n.points[n.points.length-1].x=r.corners.left-20,n.length=mt.a.distancePoints(n.points[0],n.points[n.points.length-1])):"Right"===a&&o.x<r.corners.right+1&&(n.points[n.points.length-1].x=r.corners.right+20,n.length=mt.a.distancePoints(n.points[0],n.points[n.points.length-1])),e.point=n.points[n.points.length-1]}}}function A(t,e,i,r,n,o,a){var h,d,l,c,g=[];C(t);for(var m=0;m<t.segments.length;m++){if(d=t.segments[parseInt(m.toString(),10)],r&&e.direction===ft(d.direction)&&(d.direction=e.direction),m>0&&t.segments[m-1].direction===d.direction)m=z(t,m,e);else if(d.direction)e.point=s(e,t.segments[parseInt(m.toString(),10)]);else{var y=t.segments[m-1];e.point=y.points[y.points.length-1]}if(m===t.segments.length-1)if(T(t,e),h=void 0===n?O(t,e,i):p(t,e,i),f(h,t,e),d.points=[],h.length>=2)for(l=0;l<h.length;l++)if(t.selectedSegmentIndex)if(l===h.length-1&&h.length>2&&t.segments.length>2){var v=void 0;v={x:h[parseInt(l.toString(),10)].x,y:e.point.y},d.points=[],d.points.push(h[parseInt(l.toString(),10)]),d.points.push(v);var y=t.segments[m-1];y.points[1]=d.points[1]}else d.points.push(h[parseInt(l.toString(),10)]);else d.points.push(h[parseInt(l.toString(),10)]);else c=m;if(void 0===c||t.selectedSegmentIndex||(c===t.segments.length-1&&(t.segments[c-1].direction=null,t.segments[c-1].length=null),t.segments.splice(c,1)),r&&0===m){var b=u(t,r,o);b&&(e.point=b)}}return L(t,g)}function L(t,e){for(var i=0;i<t.segments.length;i++)for(var r=t.segments[parseInt(i.toString(),10)],n=0;n<r.points.length;n++)(n>0||0===i)&&e.push(r.points[parseInt(n.toString(),10)]);return e}function E(t,e,i,r){var n,o={x:0,y:0},a=w(t,t.corners,t.bounds),s=e.margin,h=e.point;if(a.bottomCenter.y+s.bottom<h.y)n="Bottom",o=a.bottomCenter;else if(a.topCenter.y-s.top>h.y)n="Top",o=a.topCenter;else if(a.middleLeft.x-s.left>h.x)n="Left",o=a.middleLeft;else if(a.middleRight.x+s.right<h.x)n="Right",o=a.middleRight;else{var d=Math.abs(h.y-a.topCenter.y),l=Math.abs(h.x-a.middleRight.x),c=Math.abs(h.y-a.bottomCenter.y),p=Math.abs(h.x-a.middleLeft.x),g=Number.MAX_VALUE;g=d,n="Top",o=a.topCenter,g>l&&(g=l,n="Right",o=a.middleRight),g>c&&(g=c,n="Bottom",o=a.bottomCenter),g>p&&(n="Left",o=a.middleLeft)}i.point=o,i.direction=n;var u=k(a,ft(i.direction));i.point=j(r,t,i.point,u,t===r.targetWrapper)}function B(t,e,i,r,n){var o,a=!1,s=[];if(a=ct(e.direction,i.direction),a&&pt(e,i),"Right"===e.direction&&"Left"===i.direction)o=X(t,e,i,a);else if("Right"===e.direction&&"Right"===i.direction)o=Y(t,e,i);else if("Right"===e.direction&&"Top"===i.direction)o=U(t,e,i,a);else if("Right"===e.direction&&"Bottom"===i.direction)o=G(t,e,i,a);else if("Bottom"===e.direction&&"Top"===i.direction)o=F(t,e,i);else if("Bottom"===e.direction&&"Bottom"===i.direction){var h=M(t);e.margin={left:h,right:h,top:h,bottom:h},i.margin={left:h,right:h,top:h,bottom:h},o=q(t,e,i)}else"Bottom"===e.direction&&"Left"===i.direction?o=Z(t,e,i,a):"Left"===e.direction&&"Left"===i.direction?o=K(t,e,i):"Left"===e.direction&&"Top"===i.direction?o=Q(t,e,i,a):"Top"===e.direction&&"Top"===i.direction&&(o=J(t,e,i));return a&&pt(e,i),s=$(t,o,e,i,r,n),"Bezier"===t.type&&lt(t,o,s),s}function M(t){return t.connectorSpacing>=13?13:t.connectorSpacing<=1?1:t.connectorSpacing}function D(t,e){var i={x:e.x,y:t.y},r=mt.a.findLength(i,e),n=mt.a.findLength(e,t),o=Math.asin(r/n);return o=180*o/Math.PI,t.x<e.x?t.y>e.y&&(o=360-o):o=t.y<e.y?180-o:180+o,o}function k(t,e){var i;switch(e){case"Left":i=t.middleLeft;break;case"Top":i=t.topCenter;break;case"Right":i=t.middleRight;break;case"Bottom":i=t.bottomCenter}return i}function R(t,e,i,r,n,o){var a,s,h=[];h.push(r),r.y===n.y&&("Left"===e&&n.x<r.x||"Right"===e&&n.x>r.x)||r.x===n.x&&("Top"===e&&n.y<r.y||"Bottom"===e&&n.y>r.y)||("Top"===e||"Bottom"===e?"Top"===e&&n.y<r.y&&n.y>r.y-13||"Bottom"===e&&n.y>r.y&&n.y<r.y+13?(s="Top"===e?i.top-13:i.bottom+13,h.push({x:r.x,y:s}),h.push({x:r.x+(n.x-r.x)/2,y:s}),h.push({x:r.x+(n.x-r.x)/2,y:n.y})):Math.abs(r.x-n.x)>13&&("Top"===e&&n.y<r.y||"Bottom"===e&&n.y>r.y)?h.push({x:r.x,y:n.y}):(s="Top"===e?i.top-13:i.bottom+13,a=n.x<r.x?i.left-13:i.right+13,h.push({x:r.x,y:s}),h.push({x:n.x,y:s})):"Left"===e&&n.x<r.x&&n.x>r.x-13||"right"===e&&n.x>r.x&&n.x<r.x+13?(a="Left"===e?i.left-13:i.right+13,h.push({x:a,y:r.y}),h.push({x:a,y:r.y+(n.y-r.y)/2}),h.push({x:n.x,y:r.y+(n.y-r.y)/2})):Math.abs(r.y-n.y)>13&&("Left"===e&&n.x<r.x||"Right"===e&&n.x>r.x)?h.push({x:n.x,y:r.y}):(a="Left"===e?i.left-13:i.right+13,h.push({x:a,y:r.y}),h.push({x:a,y:n.y})),o&&(h.push(t.points[0]),h.reverse()),t.points=h)}function _(t,e,i){return mt.a.transform(t,i,e)}function j(t,e,r,n,o){r={x:r.x,y:r.y},n={x:n.x,y:n.y};var a,s,h=o?t.targetWrapper:t.sourceWrapper,d=o?t.targetPadding:t.sourcePadding,l=o||"Orthogonal"===t.type||"Bezier"===t.type?r:n,c=h,p=i.i(xt.j)(-h.parentTransform,h.offsetX,h.offsetY,r),g=i.i(xt.j)(-h.parentTransform,h.offsetX,h.offsetY,n);if("Orthogonal"===t.type||"Bezier"===t.type){p.x===g.x&&(p.y<g.y?p.y-=5:p.y+=5),p.y===g.y&&(p.x<g.x?p.x-=5:p.x+=5),r=i.i(xt.j)(h.parentTransform,h.offsetX,h.offsetY,p)}else if(o){var u=mt.a.findAngle(r,n);n=mt.a.transform({x:n.x,y:n.y},u,Math.max(h.actualSize.width,h.actualSize.height))}else{var u=mt.a.findAngle(n,r);r=mt.a.transform({x:r.x,y:r.y},u,Math.max(h.actualSize.width,h.actualSize.height))}return(t.sourcePadding||t.targetPadding)&&(a=new yt.a(h.bounds.x-d,h.bounds.y-d,h.actualSize.width+2*d,h.actualSize.height+2*d)),h instanceof wt.a&&h.data?(s=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:c.getPoints(),c.data.split("m").length-1+(c.data.split("M").length-1)==1&&(s[s.length]=s[0])):(s=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:i.i(vt.k)(h,h.corners),s[s.length]=s[0]),H({x1:r.x,y1:r.y,x2:n.x,y2:n.y},s,!0,l)||r}function N(t,e,i){return e.x=Math.round(100*e.x)/100,e.y=Math.round(100*e.y)/100,i?t.targetPoint=e:t.sourcePoint=e,e}function H(t,e,i,r){var n,o=e.length,a={x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},s=W(t,a);if(s&&(n=mt.a.distancePoints(s,r)),isNaN(n)||n>0)for(var h=1;h<o-1;h++){a={x1:e[parseInt(h.toString(),10)].x,y1:e[parseInt(h.toString(),10)].y,x2:e[h+1].x,y2:e[h+1].y};var d=W(t,a);if(d){var l=mt.a.distancePoints(d,r);if((isNaN(n)||n>l)&&(n=l,s=d),n>=0&&n<=1)break}}return s}function W(t,e){var i,r,n,o,a,s,h,d,l,c,p,g,u,f,m=t.x1,y=t.y1,v=t.x2,b=t.y2,S=e.x1,w=e.y1,x=e.x2,I=e.y2;if(i=b-y,n=m-v,a=v*y-m*b,p=i*S+n*w+a,g=i*x+n*I+a,0!==p&&0!==g&&V(p,g))return null;if(r=I-w,o=S-x,s=x*w-S*I,l=r*m+o*y+s,c=r*v+o*b+s,0!==l&&0!==c&&V(l,c))return null;var P=i*o-r*n;return 0===P?null:(u=P<0?-P/2:P/2,u=0,f=n*s-o*a,h=f<0?(f-u)/P:(f+u)/P,f=r*a-i*s,d=f<0?(f-u)/P:(f+u)/P,{x:h,y:d})}function V(t,e){return t*e>=0}function X(t,e,r,n){var o=t.sourcePortWrapper,a=Math.round(Math.abs(e.point.y-r.point.y)),s={x:Math.max(e.point.x,e.corners.right),y:e.point.y},h={x:Math.min(r.point.x,r.corners.left),y:r.point.y},d=M(t);if(n){var l=h;h=s,s=l}return e.corners.bottom+d<r.corners.top-d||e.corners.top-d>r.corners.bottom+d||("Bezier"!==t.type?d=0:r.corners.left-e.corners.right<=2*d&&r.corners.left-e.corners.right>=5&&(d=0)),e.margin={left:d,right:d,top:d,bottom:d},r.margin={left:d,right:d,top:d,bottom:d},0===a&&(e.corners.right<r.corners.left||n&&e.corners.right<r.corners.left)?bt.o.One:e.point.x+e.margin.right<r.point.x-r.margin.left?bt.o.Three:t.sourceWrapper!==t.targetWrapper&&(i.i(xt.k)(t.sourceWrapper).containsPoint(h)||i.i(xt.k)(t.targetWrapper).containsPoint(s))?bt.o.Three:e.corners.bottom<=r.corners.top?bt.o.Five:e.corners.top>=r.corners.top?bt.o.Five:void 0!==o&&o.offsetY<=r.corners.top||void 0===o&&e.corners.right<=r.corners.top?bt.o.Five:(void 0!==o&&o.offsetY>=r.corners.bottom||void 0===o&&(e.corners.right,r.corners.bottom),bt.o.Five)}function Y(t,e,i){var r=t.sourcePortWrapper,n=t.targetPortWrapper,o=e.point.x-i.point.x,a=e.point.y-i.point.y,s=M(t);return i.margin={left:s,right:s,top:s,bottom:s},e.margin={left:s,right:s,top:s,bottom:s},e.corners.right>=i.corners.right?void 0!==r&&(r.offsetY<i.corners.top-i.margin.top||r.offsetY>i.corners.bottom+i.margin.bottom)||void 0===r&&e.corners.middleRight.y<i.corners.top?bt.o.Three:void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom&&e.corners.top>i.corners.bottom||void 0===r&&e.corners.middleRight.y>i.corners.bottom?bt.o.Three:void 0!==r&&r.offsetY<i.corners.top-i.margin.top&&e.corners.bottom>i.corners.top||void 0===r&&e.corners.middleRight.y>i.corners.bottom?bt.o.Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?bt.o.Five:0===o||0===a?bt.o.One:bt.o.Three:void 0!==n&&e.corners.bottom<n.offsetY-i.margin.top||void 0===n&&e.corners.bottom<i.corners.middleRight.y?bt.o.Three:void 0!==n&&e.corners.top>n.offsetY+i.margin.right||void 0===n&&e.corners.top>i.corners.middleRight.y?bt.o.Three:void 0!==n&&(void 0!==r&&r.offsetX<i.corners.left&&r.offsetX!==n.offsetX&&Math.abs(e.corners.right-i.corners.left)<=20||void 0===r&&e.corners.right<i.corners.left&&e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y)?bt.o.Three:e.corners.right<i.corners.left?bt.o.Five:0===o||0===a?bt.o.One:bt.o.Three}function U(t,e,r,n){var o=t.targetPortWrapper,a=t.sourcePortWrapper,s={x:Math.max(e.point.x,e.corners.right),y:e.point.y},h={x:r.point.x,y:Math.min(r.point.y,r.corners.top)},d=M(t);if(r.margin={left:d,right:d,top:d,bottom:d},e.margin={top:d,bottom:d,left:d,right:d},n){var l=a;a=o,o=l;var c=s;s=h,h=c}return void 0!==a&&a.offsetY<r.corners.top-r.margin.top||void 0===a&&e.corners.bottom<r.corners.top-r.margin.top?e.corners.bottom<r.corners.top?void 0!==o&&e.corners.right+e.margin.right<o.offsetX||void 0===o&&e.corners.right+e.margin.right<r.corners.topCenter.x?bt.o.Two:bt.o.Four:void 0!==o&&e.corners.left>o.offsetX||void 0===o&&e.corners.left>r.corners.topCenter.x?bt.o.Four:bt.o.Two:void 0!==a&&Math.abs(e.corners.right-r.corners.left)<=5&&Math.abs(a.offsetY-r.corners.top)<=5?bt.o.Two:void 0!==o&&e.corners.right<r.corners.left&&Math.abs(o.offsetX-e.corners.topCenter.x)>=25&&e.corners.middleRight.y+e.margin.right<o.offsetY?bt.o.Two:e.corners.right<r.corners.left?bt.o.Four:t.sourceWrapper!==t.targetWrapper&&(i.i(xt.k)(t.sourceWrapper).containsPoint(h)||i.i(xt.k)(t.targetWrapper).containsPoint(s))?bt.o.Two:bt.o.Four}function G(t,e,i,r){var n=M(t);e.margin={left:n,right:n,top:n,bottom:n},i.margin={left:n,right:n,top:n,bottom:n};var o=t.sourcePortWrapper,a=t.targetPortWrapper;if(r){var s=o;o=a,a=s}return void 0!==o&&o.offsetY>i.corners.bottom+i.margin.bottom||void 0===o&&e.corners.middleRight.y>i.corners.bottom+i.margin.bottom?e.corners.top>i.corners.bottom?void 0!==a&&e.corners.right+e.margin.right<a.offsetX||void 0===a&&e.corners.right+e.margin.right<i.corners.bottomCenter.x?bt.o.Two:bt.o.Four:void 0!==a&&e.corners.left>a.offsetX||void 0===a&&e.corners.left>i.corners.bottomCenter.x?bt.o.Four:bt.o.Two:void 0!==o&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-i.corners.bottom)<=25?bt.o.Two:(e.corners.right,i.corners.left,bt.o.Four)}function F(t,e,i){var r=e.point.x-i.point.x,n=M(t);return e.corners.right+n<i.corners.left-n||e.corners.left-n>i.corners.right+n||("Bezier"!==t.type?n=0:i.corners.top-e.corners.bottom<=2*n&&i.corners.top-e.corners.bottom>=5&&(n=0)),e.margin={left:n,right:n,top:n,bottom:n},i.margin={left:n,right:n,top:n,bottom:n},0===r&&e.corners.bottom<i.corners.top?bt.o.One:e.corners.bottom+e.margin.bottom<i.corners.top-i.margin.top?bt.o.Three:e.corners.right+e.margin.right<i.corners.left-i.margin.left?bt.o.Five:(e.corners.left,e.margin.left,i.corners.right,i.margin.right,bt.o.Five)}function Z(t,e,i,r){var n=t.sourcePortWrapper,o=t.targetPortWrapper,a=M(t);i.margin={left:a,right:a,top:a,bottom:a},e.margin={top:a,bottom:a,left:a,right:a};if(r){var s=n;n=o,o=s}return void 0!==n&&n.offsetX<i.corners.left-i.margin.left||void 0===n&&e.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?e.corners.right<i.corners.left?void 0!==o&&e.corners.bottom+e.margin.bottom<o.offsetY||void 0===o&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?bt.o.Two:bt.o.Four:void 0!==o&&e.corners.top>o.offsetY||void 0===o&&e.corners.top>i.corners.middleLeft.y?bt.o.Four:bt.o.Two:void 0!==o&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-e.corners.bottom)<=25?bt.o.Two:bt.o.Four}function q(t,e,i){var r=t.sourcePortWrapper,n=t.targetPortWrapper,o=Math.round(Math.abs(e.point.x-i.point.x)),a=Math.round(Math.abs(i.point.y-i.point.y));return e.corners.bottom<i.corners.bottom?void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&e.corners.bottomCenter.x<i.corners.left-i.margin.left?bt.o.Three:void 0!==r&&r.offsetX>i.corners.right+i.margin.right||void 0===r&&e.corners.bottomCenter.x>i.corners.right+i.margin.right?bt.o.Three:e.corners.bottom<i.corners.top?bt.o.Five:0===o||0===a?bt.o.One:bt.o.Three:void 0!==n&&e.corners.left-e.margin.left>n.offsetX||void 0===n&&e.corners.left>i.corners.left?bt.o.Three:void 0!==n&&e.corners.right+e.margin.right<n.offsetX||void 0===n&&e.corners.right<i.corners.right?bt.o.Three:e.corners.top>i.corners.bottom?bt.o.Five:0===o||0===a?bt.o.One:bt.o.Three}function Q(t,e,r,n){var o=t.sourcePortWrapper,a=M(t);r.margin={left:a,right:a,top:a,bottom:a},e.margin={top:a,bottom:a,left:a,right:a};var s=t.targetPortWrapper,h={x:Math.min(e.point.x,e.corners.left),y:e.point.y},d={x:r.point.x,y:Math.min(r.point.y,r.corners.top)};if(n){var l=o;o=s,s=l;var c=h;h=d,d=c}return void 0!==o&&o.offsetY<r.corners.top-r.margin.top||void 0===o&&(e.corners.bottom<r.corners.top-r.margin.top||e.corners.middleLeft.y<r.corners.top-r.margin.top)?e.corners.bottom<r.corners.top?void 0!==s&&e.corners.left-e.margin.left>s.offsetX||void 0===s&&e.corners.left-e.margin.left>r.corners.topCenter.x?bt.o.Two:bt.o.Four:void 0!==s&&e.corners.right<s.offsetX||void 0===s&&e.corners.right<r.corners.topCenter.x?bt.o.Four:bt.o.Two:void 0!==o&&Math.abs(e.corners.left-r.corners.right)<=25&&Math.abs(o.offsetY-r.corners.top)<=25?bt.o.Two:t.sourceWrapper!==t.targetWrapper&&(i.i(xt.k)(t.sourceWrapper).containsPoint(d)||i.i(xt.k)(t.targetWrapper).containsPoint(h))?bt.o.Two:(e.corners.left,r.corners.right,bt.o.Four)}function K(t,e,i){var r=t.sourcePortWrapper,n=t.targetPortWrapper,o=M(t);e.margin={left:o,right:o,top:o,bottom:o},i.margin={left:o,right:o,top:o,bottom:o};var a=Math.round(Math.abs(e.point.x-i.point.x)),s=Math.round(Math.abs(e.point.y-i.point.y));return e.corners.left<i.corners.left?void 0!==n&&e.corners.bottom+e.margin.bottom<n.offsetY||void 0===n&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?bt.o.Three:void 0!==n&&e.corners.top-e.margin.top>n.offsetY||void 0===n&&e.corners.top-e.margin.top>i.corners.middleLeft.y?bt.o.Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?bt.o.Five:0===a||0===s?bt.o.One:bt.o.Three:void 0!==r&&r.offsetY<i.corners.top-i.margin.top||void 0===r&&e.corners.middleLeft.y<i.corners.top?bt.o.Three:void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom||void 0===r&&e.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?bt.o.Three:e.corners.left>i.corners.right?bt.o.Five:0===a||0===s?bt.o.One:bt.o.Three}function J(t,e,i){var r=t.sourcePortWrapper,n=t.targetPortWrapper,o=Math.round(Math.abs(e.point.x-i.point.x)),a=Math.round(Math.abs(e.point.y-i.point.y)),s=M(t);i.margin={left:s,right:s,top:s,bottom:s},e.margin={top:s,bottom:s,left:s,right:s};return e.corners.top<i.corners.top?void 0!==n&&e.corners.left-e.margin.left>n.offsetX||void 0===n&&e.corners.left>i.corners.left?bt.o.Three:void 0!==n&&e.corners.right+e.margin.right<n.offsetX||void 0===n&&e.corners.right<i.corners.right?bt.o.Three:e.corners.bottom<i.corners.top?bt.o.Five:0===o||0===a?bt.o.One:bt.o.Three:void 0!==r&&r.offsetX>i.corners.right+i.margin.right||void 0===r&&e.corners.left>i.corners.right?bt.o.Three:void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&e.corners.bottomRight.x<i.corners.left?bt.o.Three:e.corners.top>i.corners.bottom?bt.o.Five:0===o||0===a?bt.o.One:bt.o.Three}function $(t,e,i,r,n,o){var a,s,h=t.sourceWrapper,d=t.targetWrapper,l=h.corners,c=d.corners,p=20,g={corners:i.corners,point:i.point,direction:i.direction,margin:i.margin},u={corners:r.corners,point:r.point,direction:r.direction,margin:r.margin};if(!(g.direction===u.direction&&e!==bt.o.Five||g.direction!==ft(u.direction)&&e!==bt.o.Three))switch(g.direction){case"Left":l.middleLeft.x>c.middleRight.x&&(s=(l.middleLeft.x-c.middleRight.x)/2,p=o?s:Math.min(p,s));break;case"Right":l.middleRight.x<c.middleLeft.x&&(s=(c.middleLeft.x-l.middleRight.x)/2,p=o?s:Math.min(p,s));break;case"Top":l.topCenter.y>c.bottomCenter.y&&(s=(l.topCenter.y-c.bottomCenter.y)/2,p=o?s:Math.min(p,s));break;case"Bottom":l.bottomCenter.y<c.topCenter.y&&(s=(c.topCenter.y-l.bottomCenter.y)/2,p=o?s:Math.min(p,s))}p=tt(l,g,p);var f="Bezier"===t.type;if(n&&(p=Math.max(p,n)),e===bt.o.One&&(a=[g.point,u.point]),e===bt.o.Two&&(a=et(g,u)),e===bt.o.Three&&(a=it(t,g,u,p,void 0,f)),e===bt.o.Four){a=nt(g,u,void 0,a,p,f)}return e===bt.o.Five&&(a=rt(g,u,p,f)),a}function tt(t,e,i){switch(e.direction){case"Left":e.point.x>t.left&&(i=e.point.x-t.left>i?e.point.x-t.left+i:i);break;case"Right":e.point.x<t.right&&(i=t.right-e.point.x>i?t.right-e.point.x+i:i);break;case"Top":e.point.y>t.top&&(i=e.point.y-t.top>i?e.point.y-t.top+i:i);break;case"Bottom":e.point.y<t.bottom&&(i=t.bottom-e.point.y>i?t.bottom-e.point.y+i:i)}return i}function et(t,e){var i;switch(t.direction){case"Left":case"Right":var r={x:e.point.x,y:t.point.y};i=mt.a.equals(t.point,r)||mt.a.equals(e.point,r)?[t.point,e.point]:[t.point,r,e.point];break;case"Top":case"Bottom":var n={x:t.point.x,y:e.point.y};i=mt.a.equals(t.point,n)||mt.a.equals(e.point,n)?[t.point,e.point]:[t.point,n,e.point]}return i}function it(t,e,i,r,n,o){void 0===o&&(o=!1),r||(r=20),o&&e.direction!==i.direction&&(r="Left"===e.direction||"Right"===e.direction?Math.floor(.5*Math.abs(e.point.x-i.point.x)):Math.floor(.5*Math.abs(e.point.y-i.point.y)));var a,s,h,d=t.sourcePortWrapper,l=i.point.x-e.point.x,c=i.point.y-e.point.y;if(!n&&(Math.abs(l)<.001||Math.abs(c)<.001)&&void 0===i.direction)return[e.point,i.point];if(void 0===t.targetWrapper&&Math.abs(l)<=31&&Math.abs(c)<=31){if("Left"===e.direction||"Right"===e.direction?Math.abs(c)<12&&(e.direction=e.point.y>i.point.y?"Top":"Bottom"):Math.abs(l)<12&&(e.direction=e.point.x>i.point.x?"Left":"Right"),Math.abs(l)>12||Math.abs(c)>12)return et(e,i);r+=5}return"Left"===e.direction||"Right"===e.direction?("Right"===e.direction?(void 0!==i.direction&&"Right"===i.direction&&(r=Math.max(e.point.x,i.point.x)-e.point.x+r),e.point.x>i.point.x&&void 0===d&&(r=-r)):(void 0!==i.direction&&"Left"===i.direction&&(r=e.point.x-Math.min(e.point.x,i.point.x)+r),(e.point.x>i.point.x||void 0!==d||"Left"===e.direction)&&(r=-r)),h=i.point.y-e.point.y,a=_(e.point,r,0),0!==(h=i.point.y-a.y)&&(s=_(a,i.point.y-a.y,90))):"Top"!==e.direction&&"Bottom"!==e.direction||("Bottom"===e.direction?void 0!==i.direction&&"Bottom"===i.direction&&(r=Math.max(e.point.y,i.point.y)-e.point.y+r):(void 0!==i.direction&&"Top"===i.direction&&(r=e.point.y-Math.min(e.point.y,i.point.y)+r),(e.point.y>i.point.y||void 0!==d||"Top"===e.direction)&&(r=-r)),h=i.point.x-e.point.x,a=(e.direction,_(e.point,r,90)),0!==(h=i.point.x-a.x)&&(s=_(a,i.point.x-a.x,0))),0===h?[e.point,i.point]:[e.point,a,s,i.point]}function rt(t,e,i,r){void 0===i&&(i=20),void 0===r&&(r=!1),r&&(i=20);var n,o,a=i,s=t.corners.left-t.margin.left,h=t.corners.right+t.margin.right,d=t.corners.bottom+t.margin.bottom,l=t.corners.top-t.margin.top,c=e.corners.left-e.margin.left,p=e.corners.right+e.margin.right,g=e.corners.bottom+e.margin.bottom,u=e.corners.top-e.margin.top;switch(t.direction){case"Left":(l>u&&l<g||d<g&&d>u)&&s>c&&s<=p&&i>=20&&(a=t.point.x-e.corners.left+a),r&&t.direction==e.direction&&t.corners.left>e.corners.left&&t.corners.left-e.corners.right>=20&&(a=(t.corners.left-e.corners.right)/2),o=_(t.point,a,180);break;case"Top":(s>c&&s<p||h<p&&h>c)&&l>u&&l<=g&&i>=20&&(a=t.point.y-e.corners.top+a),r&&t.direction==e.direction&&t.corners.top>e.corners.top&&t.corners.top-e.corners.bottom>=20&&(a=(t.corners.top-e.corners.bottom)/2),o=_(t.point,a,270);break;case"Right":(l>u&&l<g||d<g&&d>u)&&h<p&&h>=c&&i>=20&&(a=e.corners.right-t.point.x+a),r&&t.direction==e.direction&&t.corners.right<e.corners.right&&e.corners.left-t.corners.right>=20&&(a=(e.corners.left-t.corners.right)/2),o=_(t.point,a,0);break;case"Bottom":(s>c&&s<p||h<p&&h>c)&&d<g&&d>=u&&i>=20&&(a=e.corners.bottom-t.point.y+a),r&&t.direction==e.direction&&t.corners.bottom<e.corners.bottom&&e.corners.top-t.corners.bottom>=20&&(a=(e.corners.top-t.corners.bottom)/2),o=_(t.point,a,90)}n=[t.point,o];var f=void 0;if("Top"===t.direction||"Bottom"===t.direction){var m=t.direction;t.direction=o.x>e.point.x?"Left":"Right",t.point=o,f=r?.5*Math.abs(o.x-e.point.x):f,n=nt(t,e,m,n,f,r)}else{var m=t.direction;t.direction=o.y>e.point.y?"Top":"Bottom",t.point=o,f=r?.5*Math.abs(o.y-e.point.y):f,n=nt(t,e,m,n,f,r)}return n}function nt(t,e,i,r,n,o){void 0===n&&(n=20),void 0===o&&(o=!1);var a;switch(void 0===i?(t.margin={left:2,right:2,top:2,bottom:2},e.margin={left:0,right:5,top:0,bottom:5},o&&(t.margin={left:10,right:10,top:10,bottom:10},e.margin={left:10,right:10,top:10,bottom:10},"Left"===t.direction?(n=st(t,e,i,n),t.corners.left-e.corners.right>=5&&(n=Math.abs(t.point.x-t.corners.left)+.5*Math.floor(t.corners.left-e.corners.right))):"Right"===t.direction?(n=ht(t,e,n,i),e.corners.left-t.corners.right>=5&&(n=Math.abs(t.point.x-t.corners.right)+.5*Math.floor(e.corners.left-t.corners.right))):"Top"===t.direction?(n=at(t,e,i,n),t.corners.top-e.corners.bottom>=5&&(n=Math.abs(t.point.y-t.corners.top)+.5*Math.floor(t.corners.top-e.corners.bottom))):"Bottom"===t.direction&&(n=dt(t,e,n,i),e.corners.top-t.corners.bottom>=5&&(n=Math.abs(t.point.y-t.corners.bottom)+.5*Math.floor(e.corners.top-t.corners.bottom))))):("Bottom"===t.direction?o?e.corners.top-t.corners.bottom<20&&(n=e.corners.bottom-t.point.y+25):e.corners.top>t.corners.bottom&&e.corners.top-t.corners.bottom<20&&(n=(e.corners.top-t.corners.bottom)/2):"Top"===t.direction?o?t.corners.top-e.corners.bottom<20&&(n=t.point.y-e.corners.top+25):e.corners.bottom<t.corners.top&&t.corners.top-e.corners.bottom<20&&(n=(t.corners.top-e.corners.bottom)/2):"Right"===t.direction?o?e.corners.left-t.corners.right<20&&(n=e.corners.right-t.point.x+25):e.corners.left>t.corners.right&&e.corners.left-t.corners.right<20&&(n=(e.corners.left-t.corners.right)/2):"Left"===t.direction&&(o?t.corners.left-e.corners.right<20&&(n=t.point.x-e.corners.left+25):e.corners.right<t.corners.left&&t.corners.left-e.corners.right<20&&(n=(t.corners.left-e.corners.right)/2)),i==e.direction&&o&&("Bottom"==e.direction&&t.point.y>e.point.y||"Top"==e.direction&&t.point.y<e.point.y?"Left"==t.direction?n=st(t,e,i,20):"Right"==t.direction&&(n=ht(t,e,20,i)):("Right"==e.direction&&t.point.x>e.point.x||"Left"==e.direction&&t.point.x<e.point.x)&&("Top"==t.direction?n=at(t,e,i,20):"Bottom"==t.direction&&(n=dt(t,e,20,i))))),t.direction){case"Left":n=o?n:st(t,e,i,n),a=_(t.point,n,180);break;case"Right":n=o?n:ht(t,e,n,i),a=_(t.point,n,0);break;case"Top":n=o?n:at(t,e,i,n),a=_(t.point,n,270);break;case"Bottom":n=o?n:dt(t,e,n,i),a=_(t.point,n,90)}return void 0!==r?r.push(a):r=[t.point,a],"Top"===t.direction||"Bottom"===t.direction?ot(a,"horizontal",t,e,r,o):"Right"!==t.direction&&"Left"!==t.direction||ot(a,"vertical",t,e,r,o),r}function ot(t,e,i,r,n,o){var a,s,h;"horizontal"===e?(i.margin={left:0,right:10,top:0,bottom:10},r.margin={left:0,right:10,top:0,bottom:10}):"vertical"===e&&(i.margin={left:10,right:0,top:10,bottom:0},r.margin={left:10,right:0,top:10,bottom:0});var d=20;if("horizontal"===e){switch(r.direction){case"Left":if(i.corners.right+i.margin.right<r.corners.left-r.margin.left&&(r.corners.left-i.margin.right-i.corners.right>d||i.corners.top-i.margin.top<=r.point.y&&i.corners.bottom+i.margin.bottom>=r.point.y))if(!o||"Top"!==i.direction&&"Bottom"!==i.direction){var l=Math.min(Math.abs(r.corners.left-i.corners.right)/2,20);d=i.corners.right-t.x+l}else{var l=Math.abs(r.corners.left-i.corners.right)/2;d=i.corners.right-t.x+l}else d="Top"===i.direction&&t.y>r.point.y||"Bottom"===i.direction&&t.y<r.point.y?Math.min(r.corners.left,t.x)-t.x-20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.min(r.corners.left,i.corners.left)-t.x-20:r.corners.left-t.x-20;break;case"Right":if(i.corners.left-i.margin.left>r.corners.right+r.margin.right&&(i.corners.left-i.margin.right-r.corners.right>d||i.corners.top-i.margin.top<=r.point.y&&i.corners.bottom+i.margin.bottom>=r.point.y))if(!o||"Top"!==i.direction&&"Bottom"!==i.direction){var l=Math.min(Math.abs(i.corners.left-r.corners.right)/2,20);d=i.corners.left-t.x-l}else{var l=Math.abs(i.corners.left-r.corners.right)/2;d=i.corners.left-t.x-l}else d="Top"===i.direction&&t.y>r.point.y||"Bottom"===i.direction&&t.y<r.point.y?Math.max(r.corners.right,t.x)-t.x+20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.max(r.corners.right,i.corners.right)-t.x+20:r.corners.right-t.x+20}a=_(t,d,0),s=_(a,r.point.y-t.y,90),h=r.point}else if("vertical"===e){switch(r.direction){case"Top":if(i.corners.bottom+i.margin.bottom<r.corners.top-r.margin.top&&(r.corners.top-i.margin.top-i.corners.bottom>d||i.corners.left-i.margin.left<=r.point.x&&i.corners.right+i.margin.right>=r.point.x))if(!o||"Right"!==i.direction&&"Left"!==i.direction){var l=Math.min(Math.abs(r.corners.top-i.corners.bottom)/2,20);d=i.corners.bottom-t.y+l}else{var l=Math.abs(r.corners.top-i.corners.bottom)/2;d=i.corners.bottom-t.y+l}else d="Left"===i.direction&&t.x>r.point.x||"Right"===i.direction&&t.x<r.point.x?Math.min(r.corners.top,t.y)-t.y-20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.min(r.corners.top,i.corners.top)-t.y-20:r.corners.top-t.y-20;break;case"Bottom":if(i.corners.top-i.margin.top>r.corners.bottom+r.margin.bottom&&(i.corners.top-i.margin.top-r.corners.bottom>d||i.corners.left-i.margin.left<=r.point.x&&i.corners.right+i.margin.right>=r.point.x))if(!o||"Right"!==i.direction&&"Left"!==i.direction){var l=Math.min(Math.abs(i.corners.top-r.corners.bottom)/2,20);d=i.corners.top-t.y-l}else{var l=Math.abs(i.corners.top-r.corners.bottom)/2;d=i.corners.top-t.y-l}else d="Left"===i.direction&&t.x>r.point.x||"Right"===i.direction&&t.x<r.point.x?Math.max(r.corners.bottom,t.y)-t.y+20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.max(r.corners.bottom,i.corners.bottom)-t.y+20:r.corners.bottom-t.y+20}a=_(t,d,90),s=_(a,r.point.x-t.x,0),h=r.point}n.push(a),n.push(s),n.push(h)}function at(t,e,i,r){return t.corners.top-t.margin.top>e.corners.top+e.margin.top&&t.corners.top-t.margin.top<=e.corners.bottom+e.margin.bottom?("Right"===e.direction&&t.point.x<e.point.x?r+=t.corners.top-e.corners.top:"Left"===e.direction&&t.point.x>e.point.x&&(r+=t.corners.top-e.corners.top),r+=t.point.y-t.corners.top):void 0!==i&&"Left"!==i&&"Right"===e.direction&&t.point.x<e.point.x?r+=Math.abs(t.point.y-e.corners.bottom):void 0!==i&&"Right"!==i&&"Left"===e.direction&&e.point.x<t.point.x?r+=Math.abs(t.point.y-e.corners.bottom):r+=t.point.y-t.corners.top,r}function st(t,e,i,r){return t.corners.left-t.margin.left>e.corners.left-e.margin.left&&t.corners.left-t.margin.left<=e.corners.right+e.margin.right?("Bottom"===e.direction&&t.point.y<e.point.y?r+=t.corners.left-e.corners.left:"Top"===e.direction&&t.point.y>e.point.y&&(r+=t.corners.left-e.corners.left),r+=t.point.x-t.corners.left):void 0!==i&&"Top"!==i&&"Bottom"===e.direction&&t.point.y<e.point.y?r+=Math.abs(t.point.x-e.corners.right):void 0!==i&&"Bottom"!==i&&"Top"===e.direction&&e.point.y<t.point.y?r+=Math.abs(t.point.x-e.corners.right):r+=t.point.x-t.corners.left,r}function ht(t,e,i,r){return t.corners.right+t.margin.right<e.corners.right+e.margin.right&&t.corners.right+t.margin.right>=e.corners.left-e.margin.left?("Bottom"===e.direction&&t.point.y<e.point.y?i+=e.corners.right-t.corners.right:"Top"===e.direction&&t.point.y>e.point.y&&(i+=e.corners.right-t.corners.right),i+=t.corners.right-t.point.x):void 0!==r&&"Top"!==r&&"Bottom"===e.direction&&t.point.y<e.point.y?i+=Math.abs(t.point.x-e.corners.right):void 0!==r&&"Bottom"!==r&&"Top"===e.direction&&e.point.y<t.point.y?i+=Math.abs(t.point.x-e.corners.right):i+=t.corners.right-t.point.x,i}function dt(t,e,i,r){return t.corners.bottom+t.margin.bottom<e.corners.bottom+e.margin.bottom&&t.corners.bottom+t.margin.bottom>=e.corners.top-e.margin.top?("Right"===e.direction&&t.point.x<e.point.x?i+=e.corners.bottom-t.corners.bottom:"Left"===e.direction&&t.point.x>e.point.x&&(i+=e.corners.bottom-t.corners.bottom),i+=t.corners.bottom-t.point.y):void 0!==r&&"Left"!==r&&"Right"===e.direction&&t.point.x<e.point.x?i+=Math.abs(t.point.y-e.corners.bottom):void 0!==r&&"Right"!==r&&"Left"===e.direction&&e.point.x<t.point.x?i+=Math.abs(t.point.y-e.corners.bottom):i+=t.corners.bottom-t.point.y,i}function lt(t,e,i){if("Bezier"===t.type)if(0===t.segments.length){var r=i[0],n=i[i.length-1];if(e===bt.o.One){var o=Math.min(20,.5*mt.a.findLength(r,n)),a={angle:D(r,n),distance:o},s={angle:D(n,r),distance:o},h=mt.a.direction(r,n),d="Left"==h||"Right"==h?"Horizontal":"Vertical",l=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:a,vector2:s,orientation:d},!0);t.segments.push(l)}else if(e===bt.o.Two){var c=i[1],a={angle:D(r,c),distance:.5*mt.a.findLength(r,c)},s={angle:D(n,c),distance:.5*mt.a.findLength(n,c)},h=mt.a.direction(r,c),d="Left"==h||"Right"==h?"Horizontal":"Vertical",l=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:a,vector2:s,orientation:d},!0);t.segments.push(l)}else if(e===bt.o.Three){var p=i[1],g=i[i.length-2],c={x:.5*(p.x+g.x),y:.5*(p.y+g.y)},a={angle:D(r,p),distance:.5*mt.a.findLength(r,p)},s={angle:D(c,p),distance:.5*mt.a.findLength(c,p)},u=mt.a.direction(r,p),f="Left"==u||"Right"==u?"Horizontal":"Vertical",m=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:a,vector2:s,point:c,orientation:f},!0);t.segments.push(m);var y={angle:D(c,g),distance:.5*mt.a.findLength(c,g)},v={angle:D(n,g),distance:.5*mt.a.findLength(n,g)},b=mt.a.direction(c,g),S="Left"==b||"Right"==b?"Horizontal":"Vertical",w=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:y,vector2:v,orientation:S},!0);t.segments.push(w)}else if(e===bt.o.Four){var p=i[1],g=i[2],x=i[3],I={x:.5*(p.x+g.x),y:.5*(p.y+g.y)},P={x:.5*(g.x+x.x),y:.5*(g.y+x.y)},a={angle:D(r,p),distance:.5*mt.a.findLength(r,p)},s={angle:D(I,p),distance:.5*mt.a.findLength(I,p)},u=mt.a.direction(r,p),f="Left"==u||"Right"==u?"Horizontal":"Vertical",m=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:a,vector2:s,point:I,orientation:f},!0);t.segments.push(m);var y={angle:D(I,g),distance:.5*mt.a.findLength(I,g)},v={angle:D(P,g),distance:.5*mt.a.findLength(P,g)},b=mt.a.direction(I,g),S="Left"==b||"Right"==b?"Horizontal":"Vertical",w=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:y,vector2:v,point:P,orientation:S},!0);t.segments.push(w);var C={angle:D(P,x),distance:.5*mt.a.findLength(P,x)},z={angle:D(n,x),distance:.5*mt.a.findLength(n,x)},O=mt.a.direction(P,x),T="Left"==O||"Right"==O?"Horizontal":"Vertical",A=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:C,vector2:z,orientation:T},!0);t.segments.push(A)}else if(e===bt.o.Five){var p=i[1],g=i[2],x=i[3],L=i[4],I={x:.5*(p.x+g.x),y:.5*(p.y+g.y)},P={x:.5*(g.x+x.x),y:.5*(g.y+x.y)},E={x:.5*(x.x+L.x),y:.5*(x.y+L.y)},a={angle:D(r,p),distance:.5*mt.a.findLength(r,p)},s={angle:D(I,p),distance:.5*mt.a.findLength(I,p)},u=mt.a.direction(r,p),f="Left"==u||"Right"==u?"Horizontal":"Vertical",m=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:a,vector2:s,point:I,orientation:f},!0);t.segments.push(m);var y={angle:D(I,g),distance:.5*mt.a.findLength(I,g)},v={angle:D(P,g),distance:.5*mt.a.findLength(P,g)},b=mt.a.direction(I,g),S="Left"==b||"Right"==b?"Horizontal":"Vertical",w=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:y,vector2:v,point:P,orientation:S},!0);t.segments.push(w);var C={angle:D(P,x),distance:.5*mt.a.findLength(P,x)},z={angle:D(E,x),distance:.5*mt.a.findLength(E,x)},O=mt.a.direction(P,x),T="Left"==O||"Right"==O?"Horizontal":"Vertical",A=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:C,vector2:z,point:E,orientation:T},!0);t.segments.push(A);var B={angle:D(E,L),distance:.5*mt.a.findLength(E,L)},M={angle:D(n,L),distance:.5*mt.a.findLength(n,L)},k=mt.a.direction(E,L),R="Left"==k||"Right"==k?"Horizontal":"Vertical",_=new St.e(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:B,vector2:M,orientation:R},!0);t.segments.push(_)}else{var l=new St.e(t,"segments",{type:"Bezier"},!0);t.segments.push(l)}}else for(var j=0;j<t.segments.length;j++)t.bezierSettings.allowSegmentsReset&&(t.segments[parseInt(j.toString(),10)].isInternalSegment=!0)}function ct(t,e){var i=!1;switch(t){case"Left":switch(e){case"Right":case"Bottom":i=!0}break;case"Top":switch(e){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":switch(e){case"Right":i=!0}}return i}function pt(t,e){var i=t.direction;t.direction=e.direction,e.direction=i;var r=t.point;t.point=e.point,e.point=r;var n=t.corners;t.corners=e.corners,e.corners=n}function gt(t,e,i,r){var n=void 0===e?i:e,o=n.topLeft,a=n.topRight,s=n.bottomRight,h=n.bottomLeft,d=n.center,l=D(d,t),c=D(d,s),p=D(d,h),g=D(d,o),u=D(d,a);return l>g&&l<u?"Top":l>=c&&l<p?"Bottom":l>=p&&l<=g?"Left":"Right"}function ut(t){var e=t.wrapper.children[0].bounds;return"None"!==t.sourceDecorator.shape&&e.uniteRect(t.wrapper.children[1].bounds),"None"!==t.targetDecorator.shape&&e.uniteRect(t.wrapper.children[2].bounds),e}function ft(t){switch(t){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}e.b=r,e.e=w,e.j=M,e.a=D,e.f=k,e.g=j,e.k=H,e.h=et,e.i=gt,e.c=ut,e.d=ft;var mt=i(8),yt=i(5),vt=i(2),bt=i(1),St=i(10),wt=i(17),xt=i(3)},function(t,e,i){"use strict";function r(t,e,r,n){var o,a=[],s=!1;if(h(t,e,!0)){t.protectPropertyChange(!0),o=t.nameTable[e.parentId];var d=o.wrapper;if(o&&"Canvas"===o.container.type){if(n||d.bounds.x<=r.x&&d.bounds.right>=r.x&&d.bounds.y<=r.y&&d.bounds.bottom>=r.y){var l=void 0,c=d.bounds.y,p=d.bounds.x,u=t.nameTable[o.parentId]||o;if("SwimLane"===u.shape.type)s=g(o,u,e,t,!0);else{var f=t.nameTable[o.parentId]||o,m=f.shape;l=f.wrapper,d.actualSize.width<d.outerBounds.width&&!(d.bounds.x>d.outerBounds.x)&&(void 0!==o.rowIndex?(l.updateColumnWidth(o.columnIndex,d.outerBounds.width,!0),"Horizontal"===m.orientation&&m.phaseSize&&i.i(P.c)(f,t,d,o.columnIndex),i.i(P.d)(t,f),t.drag(f,p-d.bounds.x,c-d.bounds.y)):t.scale(o,1+(d.outerBounds.width-d.actualSize.width)/d.actualSize.width,1,d.outerBounds.x<d.bounds.x?{x:1,y:.5}:{x:0,y:.5})),d.actualSize.height<d.outerBounds.height&&!(d.bounds.y>d.outerBounds.y)&&(void 0!==o.rowIndex?(l.updateRowHeight(o.rowIndex,d.outerBounds.height,!0),t.drag(f,p-d.bounds.x,c-d.bounds.y)):t.scale(o,1,1+(d.outerBounds.height-d.actualSize.height)/d.actualSize.height,d.outerBounds.y<d.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}t.select([e]),i.i(P.e)(a,t)}t.protectPropertyChange(!1)}return s}function n(t,e,r,n){var o;if(h(t,e,!0)){var a=t.isProtectedOnChange;t.protectPropertyChange(!0),o=t.nameTable[e.parentId];var s=o.wrapper;if(o&&"Canvas"===o.container.type&&!(n||s.bounds.x<=r.x&&s.bounds.right>=r.x&&s.bounds.y<=r.y&&s.bounds.bottom>=r.y||e.constraints&C.f.AllowMovingOutsideLane)){var d=i.i(S.e)(e);t.clearSelection(),l(t,e),e.parentId="",e.parentObj=t,e.propName="nodes";var c={type:"ChildCollectionChanged",category:"Internal",undoObject:d,redoObject:i.i(S.e)(e)};t.addHistoryEntry(c),t.commandHandler.isContainer&&(t.commandHandler.isContainer=!1,t.endGroupAction()),p(e,t)}t.protectPropertyChange(a)}}function o(t,e,i){for(var r=new x.a,n="SwimLane"===t.shape.type?t.wrapper.children[0].rows:t.wrapper.rows,o=i?1:0;o<n.length;o++)r.uniteRect(n[parseInt(o.toString(),10)].cells[parseInt(e.toString(),10)].bounds);return r}function a(t,e){for(var r,n={},o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];n[""+s]=e[""+s]}return i.i(w.l)(e)===y.a&&(r=new y.a(t,"nodes",n,!0),r.id=e.id,t.initObject(r)),t.updateDiagramObject(r),r}function s(t,e){t.enableServerDataBinding(!1);var r,n,o;if(!i.i(m.isBlazor)()||i.i(m.isBlazor)()&&t.diagramActions&C.p.ToolAction)if(t.selectedObject.helperObject)o=t.selectedObject.helperObject;else if((t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0)&&(e instanceof y.G&&e.nodes.length+e.connectors.length===1?(r=e.nodes.length>0?e.nodes[0]:e.connectors[0],n=t.selectedItems.wrapper.children[0]):(r=e,n=i.i(m.isBlazor)()?e===t.selectedItems.nodes[0]?t.selectedItems.wrapper:e.wrapper:t.selectedItems.wrapper),t.selectedObject.actualObject=r,!t.currentSymbol&&(r.isLane&&i.i(P.f)(r,t)&&h(t,r)||!r.isLane&&h(t,r)||t.constraints&C.j.LineRouting&&t.selectedItems.nodes.length>0))){var s={id:"helper",rotateAngle:n.rotateAngle,offsetX:n.offsetX,offsetY:n.offsetY,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.actualSize.width,height:n.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}};o=a(t,s),t.selectedObject.helperObject=o}return t.enableServerDataBinding(!0),o}function h(t,e,i){var r=i?t.nameTable[e.parentId]:t.nameTable[e.parentId]||e;return!(!r||!r.container)}function d(t,e){var i=t.nameTable[e.parentId];"Canvas"===i.container.type&&(e.margin.left=e.offsetX-i.wrapper.bounds.x-e.width/2,e.margin.top=e.offsetY-i.wrapper.bounds.y-e.height/2),t.nodePropertyChange(e,{},{width:e.width,height:e.height,offsetX:e.offsetX,offsetY:e.offsetY,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},rotateAngle:e.rotateAngle}),i.isLane||(i.wrapper.measure(new b.a),i.wrapper.arrange(i.wrapper.desiredSize))}function l(t,e){if(e.parentId&&""!==e.parentId){var i=t.nameTable[e.parentId];if(i.isLane&&i.parentId)for(var r=t.nameTable[i.parentId],n=i.id.slice(r.id.length),o=n.substring(0,n.length-1),a=r.shape.lanes,s=void 0,h=0;h<a.length;h++)if(s=a[parseInt(h.toString(),10)],o===s.id)for(var d=0;d<s.children.length;d++)s.children[parseInt(d.toString(),10)].id===e.id&&(s.children.splice(d,1),d--);t.deleteChild(e)}}function c(t,e,r,n,o){if(!t.currentSymbol){t.protectPropertyChange(!0);var a=t.nameTable[e.parentId];r=t.getObject(r.id)||r;var s=-1!==t.nodes.indexOf(r)?r.id:r;if("Canvas"!==e.container.type||o){if(a){var h=a.wrapper.bounds,d=e.wrapper.bounds;if("Horizontal"===a.shape.orientation)r.margin.left-=d.x-h.x;else{var c=e.parentId+a.shape.lanes[0].id+"_0_header";r.margin.top-=d.y-h.y-t.nameTable[""+c].wrapper.bounds.height}}}else{var u=r.wrapper.offsetX-r.wrapper.actualSize.width/2-(e.wrapper.offsetX-e.wrapper.actualSize.width/2),f=r.wrapper.offsetY-r.wrapper.actualSize.height/2-(e.wrapper.offsetY-e.wrapper.actualSize.height/2);r.margin.left=u,r.margin.top=f}var m=t.nameTable[e.id];if(m.children||(m.children=[]),-1===m.children.indexOf(r.id)){l(t,r),t.getObject(r.id)&&t.removeElements(r);var y=i.i(S.e)(r);if(t.addChild(m,s),r=t.getObject(r.id),m.isLane&&m.parentId){a=t.nameTable[m.parentId],"Bpmn"===r.shape.type&&r.shape.annotations&&r.shape.annotations.length>0&&(a.isTextNode=!0);for(var b=a.shape.lanes,w=m.id.slice(a.id.length),x=w.substring(0,w.length-1),I=0;I<b.length;I++)m.isLane&&x===b[parseInt(I.toString(),10)].id&&(r.parentObj instanceof v.a||(r.parentObj=b[parseInt(I.toString(),10)]),t.nameTable.hasOwnProperty(r.id)||b[parseInt(I.toString(),10)].children.push(r))}if(t.updateDiagramObject(r),p(r,t),m.parentId?n||g(m,a,r,t):t.updateDiagramObject(m),!(t.diagramActions&C.p.UndoRedo)){var P={type:"ChildCollectionChanged",category:"Internal",undoObject:y,redoObject:i.i(S.e)(r),historyAction:o?"AddNodeToLane":void 0};t.addHistoryEntry(P)}}t.protectPropertyChange(!1)}}function p(t,e){var r=i.i(I.n)(t.id+"_groupElement",e.element.id),n=t.parentId?t.parentId+"_groupElement":e.element.id+"_diagramLayer",o=i.i(I.n)(n,e.element.id);r&&o&&o.appendChild(r)}function g(t,e,r,n,o){var a,s=i.i(S.e)(t),h=!1,d=e.shape.padding,l=t.wrapper.bounds,c=t.wrapper.outerBounds,p=r.wrapper.bounds;if(e&&"SwimLane"===e.shape.type&&(l.right<p.right+d||l.bottom<p.bottom+d)){var g=e.wrapper.children[0],u=g.bounds.x,f=g.bounds.y,m=void 0;if(l.right<p.right+d&&c.x<=l.x&&(m=p.right-l.right,a=!1,g.updateColumnWidth(t.columnIndex,l.width+m,!0,d)),l.bottom<p.bottom+d&&c.y<=l.y&&(m=p.bottom-l.bottom,a=!0,g.updateRowHeight(t.rowIndex,l.height+m,!0,d)),!(n.diagramActions&C.p.UndoRedo)&&(o&&(n.startGroupAction(),h=!0),void 0!==a)){var y={category:"Internal",type:a?"RowHeightChanged":"ColumnWidthChanged",undoObject:s,redoObject:i.i(S.e)(t)};n.addHistoryEntry(y)}e.width=e.wrapper.width=g.width,e.height=e.wrapper.height=g.height,i.i(P.g)(e),"Horizontal"===e.shape.orientation&&i.i(P.c)(e,n,t.wrapper,t.columnIndex),i.i(P.d)(n,e),n.drag(e,u-g.bounds.x,f-g.bounds.y),i.i(P.h)(e,n),i.i(P.i)(e)}return i.i(P.j)(n,r,d),n.updateDiagramElementQuad(),h}function u(t,e,r,n,o,a){var s=i.i(I.o)(n.element.id);n.diagramRenderer.renderStackHighlighter(t,s,n.scroller.transform,e,r,o,a)}function f(t,e,i,r){var n=t,o=i.nameTable[n.parentId],a=i.nameTable[n.parentId];if(e&&a&&a.container&&"Stack"===a.container.type&&e.container&&"Stack"===e.container.type&&a.id!==e.parentId){var s=a.wrapper.children.indexOf(n.wrapper);s>-1&&(i.nameTable[n.id].parentId=e.id,a.wrapper.children.splice(s,1))}if(e&&e.parentId&&n.parentId&&"Drag"===r&&a.container&&"Stack"===a.container.type){var h=o.wrapper.children.indexOf(e.wrapper),d=o.wrapper.children.indexOf(n.wrapper),l={targetIndex:h,target:e,sourceIndex:d,source:t};o.wrapper.children.splice(d,1),o.wrapper.children.splice(h,0,n.wrapper);var c={targetIndex:d,target:e,sourceIndex:h,source:t},p={type:"StackChildPositionChanged",redoObject:c,undoObject:l,category:"Internal"};i.commandHandler.addHistoryEntry(p)}}e.g=r,e.c=n,e.b=o,e.k=a,e.j=s,e.a=h,e.i=d,e.e=c,e.d=g,e.f=u,e.h=f;var m=i(0),y=(i.n(m),i(6)),v=i(32),b=i(7),S=i(3),w=i(2),x=i(5),I=i(4),P=i(13),C=i(1)},function(t,e,i){"use strict";i.d(e,"d",function(){return l}),i.d(e,"a",function(){return c}),i.d(e,"b",function(){return p}),i.d(e,"c",function(){return g});var r=i(0),n=(i.n(r),i(12)),o=i(8),a=i(1),s=i(3),h=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),d=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),d([i.i(r.Property)("blue")],e.prototype,"color",void 0),d([i.i(r.Property)("")],e.prototype,"content",void 0),d([i.i(r.Property)("")],e.prototype,"link",void 0),d([i.i(r.Property)("None")],e.prototype,"textDecoration",void 0),d([i.i(r.Property)("NewTab")],e.prototype,"hyperlinkOpenState",void 0),e}(r.ChildProperty),c=function(t){function e(e,r,n,o){var a=t.call(this,e,r,n,o)||this;return n.id||(e.parentObj&&e.parentObj.propName&&"phases"===e.parentObj.propName?a.id=e.parentObj.id:a.id=i.i(s.g)()),a}return h(e,t),d([i.i(r.Property)("")],e.prototype,"content",void 0),d([i.i(r.Property)(void 0)],e.prototype,"template",void 0),d([i.i(r.Property)("String")],e.prototype,"annotationType",void 0),d([i.i(r.Property)(!0)],e.prototype,"visibility",void 0),d([i.i(r.Property)(a.b.InheritReadOnly)],e.prototype,"constraints",void 0),d([i.i(r.Complex)(void 0,l)],e.prototype,"hyperlink",void 0),d([i.i(r.Property)("")],e.prototype,"id",void 0),d([i.i(r.Property)()],e.prototype,"width",void 0),d([i.i(r.Property)()],e.prototype,"height",void 0),d([i.i(r.Property)(0)],e.prototype,"rotateAngle",void 0),d([i.i(r.Complex)({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},n.b)],e.prototype,"style",void 0),d([i.i(r.Property)("Center")],e.prototype,"horizontalAlignment",void 0),d([i.i(r.Property)("Center")],e.prototype,"verticalAlignment",void 0),d([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),d([i.i(r.Complex)({top:void 0,bottom:void 0,left:void 0,right:void 0},n.a)],e.prototype,"dragLimit",void 0),d([i.i(r.Property)("Shape")],e.prototype,"type",void 0),d([i.i(r.Property)()],e.prototype,"addInfo",void 0),e}(r.ChildProperty),p=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return h(e,t),e.prototype.getClassName=function(){return"ShapeAnnotation"},d([i.i(r.Complex)({x:.5,y:.5},o.a)],e.prototype,"offset",void 0),e}(c),g=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return h(e,t),e.prototype.getClassName=function(){return"PathAnnotation"},d([i.i(r.Property)(.5)],e.prototype,"offset",void 0),d([i.i(r.Complex)({x:0,y:0},o.a)],e.prototype,"displacement",void 0),d([i.i(r.Property)("Center")],e.prototype,"alignment",void 0),d([i.i(r.Property)(!1)],e.prototype,"segmentAngle",void 0),e}(c)},function(t,e,i){"use strict";i.d(e,"a",function(){return d}),i.d(e,"b",function(){return l});var r=i(0),n=(i.n(r),i(12)),o=i(8),a=i(1),s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),h=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},d=function(t){function e(e,i,r,n){var o=t.call(this,e,i,r,n)||this;return o.inEdges=[],o.outEdges=[],o}return s(e,t),h([i.i(r.Property)("")],e.prototype,"id",void 0),h([i.i(r.Property)("Center")],e.prototype,"horizontalAlignment",void 0),h([i.i(r.Property)("Center")],e.prototype,"verticalAlignment",void 0),h([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),h([i.i(r.Property)(12)],e.prototype,"width",void 0),h([i.i(r.Property)(12)],e.prototype,"height",void 0),h([i.i(r.Complex)({},n.c)],e.prototype,"style",void 0),h([i.i(r.Property)("Square")],e.prototype,"shape",void 0),h([i.i(r.Property)(a.c.Connect)],e.prototype,"visibility",void 0),h([i.i(r.Property)("")],e.prototype,"pathData",void 0),h([i.i(r.Property)(a.d.Default)],e.prototype,"constraints",void 0),h([i.i(r.Property)()],e.prototype,"addInfo",void 0),h([i.i(r.Property)()],e.prototype,"outEdges",void 0),h([i.i(r.Property)()],e.prototype,"inEdges",void 0),e}(r.ChildProperty),l=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return s(e,t),e.prototype.getClassName=function(){return"PointPort"},h([i.i(r.Complex)({x:.5,y:.5},o.a)],e.prototype,"offset",void 0),e}(d)},function(t,e,i){"use strict";function r(t){var e,i=[],r=n(t);if(r.length>0)for(var o=0;o<r.length;o++){var a=r[parseInt(o.toString(),10)],s="";switch(s=a[0],s.toLowerCase()){case"m":for(e=1;e<a.length;e++)i.push({command:s,x:a[parseInt(e.toString(),10)],y:a[e+1]}),e+=1,"m"===s?s="l":"M"===s&&(s="L");break;case"l":case"t":for(e=1;e<a.length;e++)i.push({command:s,x:a[parseInt(e.toString(),10)],y:a[e+1]}),e+=1;break;case"h":for(e=1;e<a.length;e++)i.push({command:s,x:a[parseInt(e.toString(),10)]});break;case"v":for(e=1;e<a.length;e++)i.push({command:s,y:a[parseInt(e.toString(),10)]});break;case"z":i.push({command:s});break;case"c":for(e=1;e<a.length;e++)i.push({command:s,x1:a[parseInt(e.toString(),10)],y1:a[e+1],x2:a[e+2],y2:a[e+3],x:a[e+4],y:a[e+5]}),e+=5;break;case"s":for(e=1;e<a.length;e++)i.push({command:s,x2:a[parseInt(e.toString(),10)],y2:a[e+1],x:a[e+2],y:a[e+3]}),e+=3;break;case"q":for(e=1;e<a.length;e++)i.push({command:s,x1:a[parseInt(e.toString(),10)],y1:a[e+1],x:a[e+2],y:a[e+3]}),e+=3;break;case"a":for(e=1;e<a.length;e++)i.push({command:s,r1:a[parseInt(e.toString(),10)],r2:a[e+1],angle:a[e+2],largeArc:a[e+3],sweep:a[e+4],x:a[e+5],y:a[e+6]}),e+=6}}return i}function n(t){var e=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],r=[],n={};e.lastIndex=0;var o=!1;for(n=e.exec(t);n;)"e"===n[1]?o=!0:n[1]?("zm"===n[1].toLowerCase()?(i.length&&r.push(i),r.push(["Z"]),i=[n[1].substring(1,2)]):(i.length&&r.push(i),i=[n[1]]),o=!1):(i.length||(i=[]),o||i.push(Number(n[2])),o=!1),n=e.exec(t);return i.length&&r.push(i),r}function o(t,e,i){var r,n,o="",a=[{x:0+t,y:0},{x:0+i-t,y:0},{x:0+i,y:0+t},{x:0+i,y:0+e-t},{x:0+i-t,y:0+e},{x:0+t,y:0+e},{x:0,y:0+e-t},{x:0,y:0+t}],s=[{x:0+i,y:0},{x:0+i,y:0+e},{x:0,y:0+e},{x:0,y:0}],h=0;o="M"+a[0].x+" "+a[0].y;var d;for(d=0;d<a.length;d+=2)r=a[d+1],o+="L"+r.x+" "+r.y,n=a[d+2]||a[0],o+="Q"+s[parseInt(h.toString(),10)].x+" "+s[parseInt(h.toString(),10)].y+" "+n.x+" "+n.y,h++;return o}function a(t){var e,i="";i="M"+t[0].x+" "+t[0].y;var r;for(r=1;r<t.length;r++)e=t[parseInt(r.toString(),10)],i+="L"+e.x+" "+e.y;return i+="Z"}function s(t){var e;for(e=0;e<t.length;e++)t[parseInt(e.toString(),10)].x=Math.round(t[parseInt(e.toString(),10)].x),t[parseInt(e.toString(),10)].y=Math.round(t[parseInt(e.toString(),10)].y);var i,r="";r="M"+t[0].x+" "+t[0].y;var n;for(n=1;n<t.length;n++)i=t[parseInt(n.toString(),10)],r+="L"+i.x+" "+i.y;return r}function h(t){var e,i,r,n,o,a,s,h,d,l,c=[];for(s=0,h=0,l=0,d=t.length;l<d;++l){var p=t[l],g=p,u="";u=g.command,"y1"in g&&(n=g.y1),"y2"in g&&(a=g.y2),"x1"in g&&(r=g.x1),"x2"in g&&(o=g.x2),"x"in g&&(s=g.x),"y"in g&&(h=g.y);var f=c[c.length-1];switch(u){case"M":c.push({command:"M",x:s,y:h});break;case"L":c.push({command:"L",x0:e,y0:i,x:s,y:h});break;case"H":c.push({command:"L",x0:e,y0:i,x:s,y:i});break;case"V":c.push({command:"L",x0:e,y0:i,x:e,y:h});break;case"C":c.push({command:"C",x0:e,y0:i,x1:r,y1:n,x2:o,y2:a,x:s,y:h});break;case"S":if(f){var m=void 0;m="C"===f.command||"S"===f.command?{x:f.x2,y:f.y2}:{x:e,y:i};var y={x:2*e-m.x,y:2*i-m.y};c.push({command:"C",x0:e,y0:i,x1:y.x,y1:y.y,x2:o,y2:a,x:s,y:h})}break;case"Q":c.push({command:"Q",x0:e,y0:i,x1:r,y1:n,x:s,y:h});break;case"T":if(f){var m=void 0;m="Q"===f.command?{x:f.x1,y:f.y1}:{x:e,y:i};var y={x:2*e-m.x,y:2*i-m.y};c.push({command:"Q",x0:e,y0:i,x1:y.x,y1:y.y,x:s,y:h})}break;case"A":var v=g;v.command="A",c.push(v);break;case"Z":case"z":c.push({command:"Z"}),s=e,h=i}"M"!==u&&"m"!==u||(s,h),e=s,i=h}return c}function d(t,e,i,r,n,o,a,s){var h,d,p,u,f,m,y,v,b;for(f=0,m=0,v=0,y=t.length;v<y;++v){var S=t[v],w=S,x=w.command;"x"in w&&(f=w.x),"y"in w&&(m=w.y),"y1"in w&&(d=w.y1),"y2"in w&&(u=w.y2),"x1"in w&&(h=w.x1),"x2"in w&&(p=w.x2),r?(void 0!==f&&(f=c(f,e,n,a)),void 0!==m&&(m=c(m,i,o,s)),void 0!==h&&(h=c(h,e,n,a)),void 0!==d&&(d=c(d,i,o,s)),void 0!==p&&(p=c(p,e,n,a)),void 0!==u&&(u=c(u,i,o,s))):(void 0!==f&&(f=Number((f+e).toFixed(2))),void 0!==m&&(m=Number((m+i).toFixed(2))),void 0!==h&&(h=Number((h+e).toFixed(2))),void 0!==d&&(d=Number((d+i).toFixed(2))),void 0!==p&&(p=Number((p+e).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))));b=l(w,x,{x:f,y:m,x1:h,y1:d,x2:p,y2:u,r1:w.r1,r2:w.r2},r,e,i),b&&(t[v]=b),"M"!==x&&"m"!==x||(f,m)}return g(t)}function l(t,e,i,r,n,o){switch(e){case"M":case"L":t.x=i.x,t.y=i.y;break;case"H":t.x=i.x;break;case"V":t.y=i.y;break;case"C":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1,t.x2=i.x2,t.y2=i.y2;break;case"S":t.x=i.x,t.y=i.y,t.x2=i.x2,t.y2=i.y2;break;case"Q":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1;break;case"T":t.x=i.x,t.y=i.y;break;case"A":var a=i.r1,s=i.r2;r&&(i.r1=a*=n,i.r2=s*=o),t.x=i.x,t.y=i.y,t.r1=i.r1,t.r2=i.r2;break;case"z":case"Z":t={command:"Z"}}return t}function c(t,e,i,r){return t!==i?t=r!==i?t*e-(Number(i)*e-Number(i))+(r-Number(i)):Number(t)*e-(Number(i)*e-Number(i)):r!==i&&(t=r),Number(t.toFixed(2))}function p(t){var e,i,r,n,o,a,s,h,d,l;for(s=0,h=0,l=0,d=t.length;l<d;++l){var c=t[parseInt(l.toString(),10)],p=c,g=p.command;if(/[MLHVCSQTA]/.test(g))"x"in p&&(p.x=s=p.x),"y"in p&&(p.y=h=p.y);else{"x1"in p&&(p.x1=r=s+p.x1),"x2"in p&&(p.x2=o=s+p.x2),"y1"in p&&(p.y1=n=h+p.y1),"y2"in p&&(p.y2=a=h+p.y2),"x"in p&&(p.x=s+=p.x),"y"in p&&(p.y=h+=p.y);var u=void 0;switch(g){case"m":case"M":u={command:"M",x:s,y:h};break;case"l":case"L":u={command:"L",x:s,y:h};break;case"h":case"H":u={command:"H",x:s};break;case"v":case"V":u={command:"V",y:h};break;case"c":case"C":u={command:"C",x:s,y:h,x1:r,y1:n,x2:o,y2:a};break;case"s":case"S":u={command:"S",x:s,y:h,x2:o,y2:a};break;case"q":case"Q":u={command:"Q",x:s,y:h,x1:r,y1:n};break;case"t":case"T":u={command:"T",x:s,y:h};break;case"a":case"A":u={command:"A",x:s,y:h},u.r1=p.r1,u.r2=p.r2,u.angle=p.angle,u.largeArc=p.largeArc,u.sweep=p.sweep;break;case"z":case"Z":u={command:"Z"},s=e,h=i,u=t[parseInt(l.toString(),10)]}u&&(t[parseInt(l.toString(),10)]=u)}"M"!==g&&"m"!==g||(e=s,i=h)}return t}function g(t){var e,i="";for(e=0;e<t.length;e++)i+=0===e?u(t[parseInt(e.toString(),10)]):" "+u(t[parseInt(e.toString(),10)]);return i}function u(t){var e="";switch(t.command){case"Z":case"z":e=t.command;break;case"M":case"m":case"L":case"l":e=t.command+" "+t.x+" "+t.y;break;case"C":case"c":e=t.command+" "+t.x1+" "+t.y1+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"Q":case"q":e=t.command+" "+t.x1+" "+t.y1+" "+t.x+" "+t.y;break;case"A":case"a":var i=t.command,r=t.angle,n=t.largeArc?"1":"0",o=t.sweep?"1":"0";e=i+" "+t.r1+" "+t.r2+" "+r+" "+n+" "+o+" "+t.x+" "+t.y;break;case"H":case"h":e=t.command+" "+t.x;break;case"V":case"v":e=t.command+" "+t.y;break;case"S":case"s":e=t.command+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"T":case"t":e=t.command+" "+t.x+" "+t.y}return e}e.a=r,e.i=n,e.g=o,e.e=a,e.d=s,e.h=h,e.c=d,e.j=l,e.k=c,e.b=p,e.f=g,e.l=u},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(15),n=i(3),o=i(1),a=i(7),s=i(5),h=i(11),d=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.measureChildren=void 0,e}return d(e,t),e.prototype.measure=function(e,r,o){var d=void 0,l=void 0;if(this.hasChildren()){for(var c=0,p=this.children;c<p.length;c++){var g=p[c];g instanceof h.a?g.canMeasure&&(e.width=e.width||this.maxWidth||this.minWidth,g.measure(e)):g instanceof h.a||g.measure(e,r,o);var u=g.desiredSize.clone();0!==g.rotateAngle&&(u=i.i(n.n)(u,g.rotateAngle));var f=u.width+g.margin.right,m=u.height+g.margin.bottom,y=new s.a(g.margin.left,g.margin.top,f,m);if(g.float){if(void 0!==g.getAbsolutePosition(u))continue}g instanceof h.a&&!(g instanceof h.a&&g.canConsiderBounds)||(void 0===l?l=y:l.uniteRect(y))}if(l){var v=0,b=0;v=Math.max(l.left,0),b=Math.max(l.top,0),d=new a.a(l.width+v,l.height+b)}}return d=t.prototype.validateDesiredSize.call(this,d,e),t.prototype.stretchChildren.call(this,d),d.width+=this.padding.left+this.padding.right,d.height+=this.padding.top+this.padding.bottom,this.desiredSize=d,d},e.prototype.arrange=function(e,i){if(this.outerBounds=new s.a,this.hasChildren())for(var r=this.offsetY-e.height*this.pivot.y+this.padding.top,n=this.offsetX-e.width*this.pivot.x+this.padding.left,a=0,d=this.children;a<d.length;a++){var l=d[a];if(0!=(l.transform&o.n.Parent)){l.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&o.e.ElementIsGroup)&&(l.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-l.parentTransform:l.parentTransform);var c=l.desiredSize.clone(),p=void 0,g={x:0,y:0},u=n,f=r;if("Point"===l.relativeMode){var m=l.getAbsolutePosition(e);void 0!==m&&(u+=m.x,f+=m.y)}p="Object"===l.relativeMode?this.alignChildBasedOnParent(l,c,e,u,f):this.alignChildBasedOnaPoint(l,u,f),g={x:p.x+c.width/2,y:p.y+c.height/2},t.prototype.findChildOffsetFromCenter.call(this,l,g)}!i||"Stretch"!==l.horizontalAlignment&&"Stretch"!==l.verticalAlignment?l instanceof h.a&&l.canMeasure?(l.arrange(l.desiredSize),this.outerBounds.uniteRect(l.outerBounds)):l instanceof h.a||(l.arrange(l.desiredSize),this.outerBounds.uniteRect(l.outerBounds)):l.arrange(e)}return this.actualSize=e,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),e},e.prototype.alignChildBasedOnParent=function(t,e,i,r,n){switch(t.horizontalAlignment){case"Auto":case"Left":r+=t.margin.left;break;case"Right":r+=i.width-e.width-t.margin.right;break;case"Stretch":case"Center":r+=i.width/2-e.width/2}switch(t.verticalAlignment){case"Auto":case"Top":n+=t.margin.top;break;case"Bottom":n+=i.height-e.height-t.margin.bottom;break;case"Stretch":case"Center":n+=i.height/2-e.height/2}return{x:r,y:n}},e.prototype.alignChildBasedOnaPoint=function(t,e,i){switch(e+=t.margin.left-t.margin.right,i+=t.margin.top-t.margin.bottom,t.horizontalAlignment){case"Auto":case"Left":e=t.inversedAlignment?e:e-t.desiredSize.width;break;case"Stretch":case"Center":e-=t.desiredSize.width*t.pivot.x;break;case"Right":e=t.inversedAlignment?e-t.desiredSize.width:e}switch(t.verticalAlignment){case"Auto":case"Top":i=t.inversedAlignment?i:i-t.desiredSize.height;break;case"Stretch":case"Center":i-=t.desiredSize.height*t.pivot.y;break;case"Bottom":i=t.inversedAlignment?i-t.desiredSize.height:i}return{x:e,y:i}},e}(r.a)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(14),n=i(4),o=i(3),a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(t){function e(e,r,n,a){var s=t.call(this)||this;return s.data="",s.nodeId="",s.annotationId="",s.diagramId="",s.diagramId=r,s.nodeId=e,s.annotationId=n,s.templateFn=i.i(o.f)(a),s}return a(e,t),e.prototype.getNodeTemplate=function(){return this.templateFn},Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.canReset||(this.canReset=!0,this.isTemplate||(this.template=i.i(n.j)(this,!0)),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),e}(r.a)},function(t,e,i){"use strict";var r=i(32);i.d(e,"a",function(){return r.a});var n=i(88);i.d(e,"b",function(){return n.a});var o=i(7);i.d(e,"c",function(){return o.a});var a=i(5);i.d(e,"d",function(){return a.a});var s=i(16);i.d(e,"e",function(){return s.h}),i.d(e,"f",function(){return s.i}),i.d(e,"g",function(){return s.a}),i.d(e,"h",function(){return s.c}),i.d(e,"i",function(){return s.e}),i.d(e,"j",function(){return s.b}),i.d(e,"k",function(){return s.d}),i.d(e,"l",function(){return s.f}),i.d(e,"m",function(){return s.g});var h=i(8);i.d(e,"n",function(){return h.a});var d=i(1);i.d(e,"o",function(){return d.i}),i.d(e,"p",function(){return d.c}),i.d(e,"q",function(){return d.w}),i.d(e,"r",function(){return d.g}),i.d(e,"s",function(){return d.x}),i.d(e,"t",function(){return d.y}),i.d(e,"u",function(){return d.h}),i.d(e,"v",function(){return d.b}),i.d(e,"w",function(){return d.f}),i.d(e,"x",function(){return d.e}),i.d(e,"y",function(){return d.l}),i.d(e,"z",function(){return d.j}),i.d(e,"A",function(){return d.k}),i.d(e,"B",function(){return d.n}),i.d(e,"C",function(){return d.z}),i.d(e,"D",function(){return d.v}),i.d(e,"E",function(){return d.u}),i.d(e,"F",function(){return d.p}),i.d(e,"G",function(){return d.q}),i.d(e,"H",function(){return d.a}),i.d(e,"I",function(){return d.t}),i.d(e,"J",function(){return d.o}),i.d(e,"K",function(){return d.r}),i.d(e,"L",function(){return d.d}),i.d(e,"M",function(){return d.A}),i.d(e,"N",function(){return d.B}),i.d(e,"O",function(){return d.C}),i.d(e,"P",function(){return d.m}),i.d(e,"Q",function(){return d.s});var l=i(12);i.d(e,"R",function(){return l.g}),i.d(e,"S",function(){return l.a}),i.d(e,"T",function(){return l.d}),i.d(e,"U",function(){return l.e}),i.d(e,"V",function(){return l.h}),i.d(e,"W",function(){return l.i}),i.d(e,"X",function(){return l.j}),i.d(e,"Y",function(){return l.k}),i.d(e,"Z",function(){return l.c}),i.d(e,"_0",function(){return l.f}),i.d(e,"_1",function(){return l.b}),i.d(e,"_2",function(){return l.l});var c=i(14);i.d(e,"_3",function(){return c.a});var p=i(17);i.d(e,"_4",function(){return p.a});var g=i(36);i.d(e,"_5",function(){return g.a});var u=i(11);i.d(e,"_6",function(){return u.a});var f=i(15);i.d(e,"_7",function(){return f.a});var m=i(23);i.d(e,"_8",function(){return m.a});var y=i(31);i.d(e,"_9",function(){return y.a}),i.d(e,"_10",function(){return y.b}),i.d(e,"_11",function(){return y.c}),i.d(e,"_12",function(){return y.d}),i.d(e,"_13",function(){return y.e});var v=i(40);i.d(e,"_14",function(){return v.a});var b=i(18);i.d(e,"_15",function(){return b.b}),i.d(e,"_16",function(){return b.e}),i.d(e,"_17",function(){return b.j}),i.d(e,"_18",function(){return b.a}),i.d(e,"_19",function(){return b.f}),i.d(e,"_20",function(){return b.g}),i.d(e,"_21",function(){return b.k}),i.d(e,"_22",function(){return b.h}),i.d(e,"_23",function(){return b.i}),i.d(e,"_24",function(){return b.c}),i.d(e,"_25",function(){return b.d});var S=i(22);i.d(e,"_26",function(){return S.a}),i.d(e,"_27",function(){return S.i}),i.d(e,"_28",function(){return S.g}),i.d(e,"_29",function(){return S.e}),i.d(e,"_30",function(){return S.d}),i.d(e,"_31",function(){return S.h}),i.d(e,"_32",function(){return S.c}),i.d(e,"_33",function(){return S.j}),i.d(e,"_34",function(){return S.k}),i.d(e,"_35",function(){return S.b}),i.d(e,"_36",function(){return S.f}),i.d(e,"_37",function(){return S.l});var w=i(3);i.d(e,"_38",function(){return w.g}),i.d(e,"_39",function(){return w.l}),i.d(e,"_40",function(){return w.f}),i.d(e,"_41",function(){return w.k}),i.d(e,"_42",function(){return w.i}),i.d(e,"_43",function(){return w.e}),i.d(e,"_44",function(){return w.q}),i.d(e,"_45",function(){return w.r}),i.d(e,"_46",function(){return w.m}),i.d(e,"_47",function(){return w.s}),i.d(e,"_48",function(){return w.c}),i.d(e,"_49",function(){return w.b}),i.d(e,"_50",function(){return w.d}),i.d(e,"_51",function(){return w.t}),i.d(e,"_52",function(){return w.p}),i.d(e,"_53",function(){return w.a}),i.d(e,"_54",function(){return w.n}),i.d(e,"_55",function(){return w.j}),i.d(e,"_56",function(){return w.o}),i.d(e,"_57",function(){return w.h});var x=i(2);i.d(e,"_58",function(){return x._2}),i.d(e,"_59",function(){return x.L}),i.d(e,"_60",function(){return x.Y}),i.d(e,"_61",function(){return x.d}),i.d(e,"_62",function(){return x._8}),i.d(e,"_63",function(){return x._7}),i.d(e,"_64",function(){return x.e}),i.d(e,"_65",function(){return x.c}),i.d(e,"_66",function(){return x.m}),i.d(e,"_67",function(){return x._12}),i.d(e,"_68",function(){return x._9}),i.d(e,"_69",function(){return x._10}),i.d(e,"_70",function(){return x.B}),i.d(e,"_71",function(){return x._13}),i.d(e,"_72",function(){return x.Z}),i.d(e,"_73",function(){return x.j}),i.d(e,"_74",function(){return x._5}),i.d(e,"_75",function(){return x._14}),i.d(e,"_76",function(){return x.k}),i.d(e,"_77",function(){return x.W}),i.d(e,"_78",function(){return x.g}),i.d(e,"_79",function(){return x._6}),i.d(e,"_80",function(){return x.q}),i.d(e,"_81",function(){return x._4}),i.d(e,"_82",function(){return x._15}),i.d(e,"_83",function(){return x.r}),i.d(e,"_84",function(){return x._16}),i.d(e,"_85",function(){return x.V}),i.d(e,"_86",function(){return x.G}),i.d(e,"_87",function(){return x.H}),i.d(e,"_88",function(){return x.I}),i.d(e,"_89",function(){return x._17}),i.d(e,"_90",function(){return x.O}),i.d(e,"_91",function(){return x.S}),i.d(e,"_92",function(){return x._18}),i.d(e,"_93",function(){return x.P}),i.d(e,"_94",function(){return x._19}),i.d(e,"_95",function(){return x._20}),i.d(e,"_96",function(){return x._21}),i.d(e,"_97",function(){return x.f}),i.d(e,"_98",function(){return x.E}),i.d(e,"_99",function(){return x.Q}),i.d(e,"_100",function(){return x.t}),i.d(e,"_101",function(){return x.y}),i.d(e,"_102",function(){return x.A}),i.d(e,"_103",function(){return x.x}),i.d(e,"_104",function(){return x.z}),i.d(e,"_105",function(){return x.i}),i.d(e,"_106",function(){return x.F}),i.d(e,"_107",function(){return x._22}),i.d(e,"_108",function(){return x.u}),i.d(e,"_109",function(){return x.J}),i.d(e,"_110",function(){return x.X}),i.d(e,"_111",function(){return x._11}),i.d(e,"_112",function(){return x.U}),i.d(e,"_113",function(){return x._0}),i.d(e,"_114",function(){return x.a}),i.d(e,"_115",function(){return x.D}),i.d(e,"_116",function(){return x.v}),i.d(e,"_117",function(){return x._3}),i.d(e,"_118",function(){return x.l}),i.d(e,"_119",function(){return x.s}),i.d(e,"_120",function(){return x.h}),i.d(e,"_121",function(){return x.M}),i.d(e,"_122",function(){return x.N}),i.d(e,"_123",function(){return x.n}),i.d(e,"_124",function(){return x.w}),i.d(e,"_125",function(){return x.p}),i.d(e,"_126",function(){return x._23}),i.d(e,"_127",function(){return x.o}),i.d(e,"_128",function(){return x.b}),i.d(e,"_129",function(){return x.K}),i.d(e,"_130",function(){return x.R}),i.d(e,"_131",function(){return x.T}),i.d(e,"_132",function(){return x._24}),i.d(e,"_133",function(){return x._1}),i.d(e,"_134",function(){return x.C});var I=i(28);i.d(e,"_135",function(){return I.a});var P=i(38);i.d(e,"_136",function(){return P.a});var C=i(65);i.d(e,"_137",function(){return C.a});var z=i(43);i.d(e,"_138",function(){return z.a});var O=i(33);i.d(e,"_139",function(){return O.a}),i.d(e,"_140",function(){return O.c}),i.d(e,"_141",function(){return O.d}),i.d(e,"_142",function(){return O.e}),i.d(e,"_143",function(){return O.b});var T=i(44);i.d(e,"_144",function(){return T.a});var A=i(20);i.d(e,"_145",function(){return A.d}),i.d(e,"_146",function(){return A.a}),i.d(e,"_147",function(){return A.b}),i.d(e,"_148",function(){return A.c});var L=i(21);i.d(e,"_149",function(){return L.a}),i.d(e,"_150",function(){return L.b});var E=i(82);i.d(e,"_151",function(){return E.a}),i.d(e,"_152",function(){return E.b});var B=i(6);i.d(e,"_153",function(){return B.b}),i.d(e,"_154",function(){return B.j}),i.d(e,"_155",function(){return B.d}),i.d(e,"_156",function(){return B.k}),i.d(e,"_157",function(){return B.l}),i.d(e,"_158",function(){return B.m}),i.d(e,"_159",function(){return B.c}),i.d(e,"_160",function(){return B.n}),i.d(e,"_161",function(){return B.r}),i.d(e,"_162",function(){return B.s}),i.d(e,"_163",function(){return B.g}),i.d(e,"_164",function(){return B.t}),i.d(e,"_165",function(){return B.u}),i.d(e,"_166",function(){return B.H}),i.d(e,"_167",function(){return B.h}),i.d(e,"_168",function(){return B.f}),i.d(e,"_169",function(){return B.v}),i.d(e,"_170",function(){return B.e}),i.d(e,"_171",function(){return B.o}),i.d(e,"_172",function(){return B.w}),i.d(e,"_173",function(){return B.x}),i.d(e,"_174",function(){return B.y}),i.d(e,"_175",function(){return B.z}),i.d(e,"_176",function(){return B.A}),i.d(e,"_177",function(){return B.B}),i.d(e,"_178",function(){return B.C}),i.d(e,"_179",function(){return B.p}),i.d(e,"_180",function(){return B.I}),i.d(e,"_181",function(){return B.a}),i.d(e,"_182",function(){return B.q}),i.d(e,"_183",function(){return B.D}),i.d(e,"_184",function(){return B.E}),i.d(e,"_185",function(){return B.i}),i.d(e,"_186",function(){return B.F}),i.d(e,"_187",function(){return B.G});var M=i(80);i.d(e,"_188",function(){return M.a}),i.d(e,"_189",function(){return M.b}),i.d(e,"_190",function(){return M.c}),i.d(e,"_191",function(){return M.d}),i.d(e,"_192",function(){return M.e}),i.d(e,"_193",function(){return M.f});var D=i(10);i.d(e,"_194",function(){return D.b}),i.d(e,"_195",function(){return D.i}),i.d(e,"_196",function(){return D.j}),i.d(e,"_197",function(){return D.k}),i.d(e,"_198",function(){return D.l}),i.d(e,"_199",function(){return D.m}),i.d(e,"_200",function(){return D.n}),i.d(e,"_201",function(){return D.d}),i.d(e,"_202",function(){return D.e}),i.d(e,"_203",function(){return D.f}),i.d(e,"_204",function(){return D.o}),i.d(e,"_205",function(){return D.p}),i.d(e,"_206",function(){return D.g}),i.d(e,"_207",function(){return D.h}),i.d(e,"_208",function(){return D.q}),i.d(e,"_209",function(){return D.c}),i.d(e,"_210",function(){return D.r}),i.d(e,"_211",function(){return D.s}),i.d(e,"_212",function(){return D.t}),i.d(e,"_213",function(){return D.u}),i.d(e,"_214",function(){return D.a});var k=i(81);i.d(e,"_215",function(){return k.a});var R=i(86);i.d(e,"_216",function(){return R.a});var _=i(87);i.d(e,"_217",function(){return _.a});var j=i(30);i.d(e,"_218",function(){return j.a}),i.d(e,"_219",function(){return j.b}),i.d(e,"_220",function(){return j.c});var N=i(84);i.d(e,"_221",function(){return N.a});var H=i(37);i.d(e,"_222",function(){return H.a}),i.d(e,"_223",function(){return H.b});var W=i(34);i.d(e,"_224",function(){return W.c}),i.d(e,"_225",function(){return W.a}),i.d(e,"_226",function(){return W.b});var V=i(42);i.d(e,"_227",function(){return V.a});var X=i(27);i.d(e,"_228",function(){return X.s}),i.d(e,"_229",function(){return X.d}),i.d(e,"_230",function(){return X.n}),i.d(e,"_231",function(){return X.i}),i.d(e,"_232",function(){return X.b}),i.d(e,"_233",function(){return X.c}),i.d(e,"_234",function(){return X.a}),i.d(e,"_235",function(){return X.e}),i.d(e,"_236",function(){return X.f}),i.d(e,"_237",function(){return X.l}),i.d(e,"_238",function(){return X.j}),i.d(e,"_239",function(){return X.m}),i.d(e,"_240",function(){return X.k}),i.d(e,"_241",function(){return X.g}),i.d(e,"_242",function(){return X.h}),i.d(e,"_243",function(){return X.p}),i.d(e,"_244",function(){return X.q}),i.d(e,"_245",function(){return X.r}),i.d(e,"_246",function(){return X.o});var Y=i(55);i.d(e,"_247",function(){return Y.a});var U=i(53);i.d(e,"_248",function(){return U.a});var G=i(26);i.d(e,"_249",function(){return G.d}),i.d(e,"_250",function(){return G.g}),i.d(e,"_251",function(){return G.a}),i.d(e,"_252",function(){return G.f}),i.d(e,"_253",function(){return G.e}),i.d(e,"_254",function(){return G.b}),i.d(e,"_255",function(){return G.c});var F=i(54);i.d(e,"_256",function(){return F.a});var Z=i(19);i.d(e,"_257",function(){return Z.g}),i.d(e,"_258",function(){return Z.c}),i.d(e,"_259",function(){return Z.b}),i.d(e,"_260",function(){return Z.k}),i.d(e,"_261",function(){return Z.j}),i.d(e,"_262",function(){return Z.a}),i.d(e,"_263",function(){return Z.i}),i.d(e,"_264",function(){return Z.e}),i.d(e,"_265",function(){return Z.d}),i.d(e,"_266",function(){return Z.f}),i.d(e,"_267",function(){return Z.h});var q=i(72);i.d(e,"_268",function(){return q.a});var Q=i(71);i.d(e,"_269",function(){return Q.a});var K=i(50);i.d(e,"_270",function(){return K.b}),i.d(e,"_271",function(){return K.c}),i.d(e,"_272",function(){return K.a});var J=i(51);i.d(e,"_273",function(){return J.b}),i.d(e,"_274",function(){return J.a});var $=i(41);i.d(e,"_275",function(){return $.d}),i.d(e,"_276",function(){return $.a}),i.d(e,"_277",function(){return $.c}),i.d(e,"_278",function(){return $.b});var tt=i(48);i.d(e,"_279",function(){return tt.a});var et=i(49);i.d(e,"_280",function(){return et.a});var it=i(46);i.d(e,"_281",function(){return it.b}),i.d(e,"_282",function(){return it.a});var rt=i(57);i.d(e,"_283",function(){return rt.a});var nt=i(77);i.d(e,"_284",function(){return nt.a});var ot=i(56);i.d(e,"_285",function(){return ot.a});var at=i(78);i.d(e,"_286",function(){return at.a});var st=i(79);i.d(e,"_287",function(){return st.a}),i.d(e,"_288",function(){return st.b}),i.d(e,"_289",function(){return st.c});var ht=i(76);i.d(e,"_290",function(){return ht.a})},function(t,e,i){"use strict";function r(t,e,r,s,h,g,S){if(g&&g.length>1&&h&&h.length>1)return"PinchZoom";if(s.currentSymbol)return"Drag";if("PortDraw"===s.eventHandler.action&&(s.tool&=~x.k.DrawOnce),(i.i(b.j)(s)||i.i(b.k)(s))&&s.drawingObject)return"Draw";if(l(s)){var C=s.selectedItems;if(C.wrapper&&i.i(v.x)(C.constraints,"UserHandle"))for(var z=0,O=C.userHandles;z<O.length;z++){var T=O[z];if(T.visible){var A=i.i(v.y)(C,T,s.scroller.transform);if(d(r,A,T.size/(2*s.scroller.transform.scale)))return T.name}}}if(l(s)){var L=s.selectedItems.annotation?s.selectedItems.wrapper.children[0]:s.selectedItems.wrapper,E=L.bounds,C=s.selectedItems,A=new m.a(E.x,E.y,E.width,E.height);if(c(s)&&!s.selectedItems.annotation){var B=s.selectedItems.connectors[0],M=s.selectedItems.handleSize/2/s.scrollSettings.currentZoom,D=s.selectedItems.handleSize/2/s.scrollSettings.currentZoom;if(i.i(v.x)(C.constraints,"ResizeAll")){if(i.i(v.x)(C.constraints,"ConnectorSourceThumb")&&i.i(b.l)(B)&&d(r,B.sourcePoint,M))return"ConnectorSourceEnd";if(i.i(v.x)(C.constraints,"ConnectorTargetThumb")&&i.i(b.m)(B)&&d(r,B.targetPoint,D))return"ConnectorTargetEnd";var k=o(B,C,r,s);if("OrthoThumb"===k)return k;if(i.i(v.x)(C.constraints,"ConnectorSourceThumb")&&i.i(b.l)(B)&&k)return k;if(i.i(v.x)(C.constraints,"ConnectorTargetThumb")&&i.i(b.m)(B)&&k)return k}}else{var R=s.selectedItems.handleSize/2/s.scroller.currentZoom,_=10/s.scroller.currentZoom,j=i.i(y.a)();i.i(y.b)(j,L.rotateAngle+L.parentTransform,L.offsetX,L.offsetY);var N=L.offsetX-L.pivot.x*L.actualSize.width,H=L.offsetY-L.pivot.y*L.actualSize.height,W={x:N+(.5===L.pivot.x?2*L.pivot.x:L.pivot.x)*L.actualSize.width/2,y:H-30/s.scroller.currentZoom};W=i.i(y.c)(j,W);var V=!!s.selectedItems.annotation,X=!(!V||!i.i(b.n)(s.selectedItems.annotation));if(i.i(v.x)(C.constraints,"Rotate")&&d(r,W,_)&&s.selectedItems.thumbsConstraints&x.l.Rotate){if(V&&X)return"LabelRotate";if(!V)return"Rotate"}if(A.Inflate(R),A.containsPoint(r)){var k=n(s,L,r,j,N,H);if(k)return k}}}if(i.i(b.o)(s)&&!t)return"Pan";if(i.i(b.o)(s)&&!t)return"Pan";if(S instanceof I.b&&(!i.i(b.o)(s)||i.i(b.p)(s)||i.i(b.q)(s))){var k=a(s,S);if("None"!==k)return k}if((S instanceof P.b||S instanceof P.c)&&!i.i(b.o)(s)&&i.i(b.c)(S))return p(s,S,void 0,e)&&i.i(b.d)(S)?"LabelDrag":"LabelSelect";if(null!==t){if(!(t instanceof f.a||t instanceof u.a))return"Select";if(e&&e.id){var Y=e.id.split(t.id)[1];if(Y&&Y.match("^_icon"))return"LayoutAnimation"}if(e&&e.id)for(var U=void 0,G=0;G<t.fixedUserHandles.length;G++)if(U=t.fixedUserHandles[parseInt(G.toString(),10)].id,e.id&&e.id.indexOf(U)>-1)return"FixedUserHandle";if(e instanceof w.a&&e.hyperlink.link)return"Hyperlink";if(!i.i(b.d)(t)||!p(s,t,!1)||void 0!==s.selectedItems.annotation)return t&&i.i(b.o)(s)&&!i.i(b.r)(s)?"Pan":s.selectedItems.nodes.length&&s.selectedItems.nodes[0].isLane&&s.selectedItems.wrapper&&s.selectedItems.wrapper.bounds.containsPoint(r)?"Drag":"Select";if(t instanceof u.a&&!d(r,t.sourcePoint,t.hitPadding)&&!d(r,t.targetPoint,t.hitPadding)||!(t instanceof u.a))return"Drag"}return"Select"}function n(t,e,i,r,n,o){var a;return 1===t.selectedItems.nodes.length&&0===t.selectedItems.connectors.length&&t.selectedItems.nodes[0].container&&(a=s(t,e,i,n,o)),a||t.selectedItems.nodes[0]&&(t.selectedItems.nodes[0].isPhase||t.selectedItems.nodes[0].isLane||"SwimLane"===t.selectedItems.nodes[0].shape.type)||(a=h(t,e,i,r,n,o)),a||null}function o(t,e,r,n){var o=e.handleSize/2/n.scrollSettings.currentZoom,a=e.handleSize/2/n.scrollSettings.currentZoom;if("Bezier"===t.type&&n.connectorEditingToolModule)for(var s=0;s<t.segments.length;s++){var h=t.segments[parseInt(s.toString(),10)];if(d(r,S.a.isEmptyPoint(h.point1)?h.bezierPoint1:h.point1,a)&&(0===s&&i.i(v.z)(t.bezierSettings.controlPointsVisibility,"Source")||0!==s&&i.i(v.z)(t.bezierSettings.controlPointsVisibility,"Intermediate")))return"BezierSourceThumb";if(d(r,S.a.isEmptyPoint(h.point2)?h.bezierPoint2:h.point2,o)&&(s===t.segments.length-1&&i.i(v.z)(t.bezierSettings.controlPointsVisibility,"Target")||s!==t.segments.length-1&&i.i(v.z)(t.bezierSettings.controlPointsVisibility,"Intermediate")))return"BezierTargetThumb"}if(n.connectorEditingToolModule&&i.i(b.s)(t))if("Straight"===t.type||"Bezier"===t.type)for(var s=0;s<t.segments.length;s++){var h=t.segments[parseInt(s.toString(),10)];if(d(r,h.point,10))return"SegmentEnd"}else for(var s=0;s<t.segments.length;s++){var l={x:0,y:0},h=t.segments[parseInt(s.toString(),10)];if(h.allowDrag)for(var c=0;c<h.points.length-1;c++){var p=S.a.distancePoints(h.points[parseInt(c.toString(),10)],h.points[c+1]);if(p>=50&&(l.x=(h.points[parseInt(c.toString(),10)].x+h.points[c+1].x)/2,l.y=(h.points[parseInt(c.toString(),10)].y+h.points[c+1].y)/2,d(r,l,30)))return"OrthoThumb"}}return null}function a(t,e,r,n){if(i.i(b.t)(e,t)&&(i.i(v.i)(e,x.c.Hover)||i.i(v.i)(e,x.c.Visible))){if(e.constraints&x.d.Drag)return"PortDrag"}else if(i.i(b.u)(e,t)&&(i.i(v.i)(e,x.c.Hover)||i.i(v.i)(e,x.c.Visible))&&e.constraints&x.d.Draw){t.drawingObject={};var o={type:"Orthogonal",sourcePortID:e.id};return t.drawingObject=o,t.tool|=x.k.DrawOnce,t.currentDrawingObject=o,"PortDraw"}return"None"}function s(t,e,r,n,o){var a=10/t.scroller.currentZoom,s=40/t.scroller.currentZoom,h=t.selectedItems,d=e.actualSize.width,l=e.actualSize.height,c=new m.a(n,o+20,e.style.strokeWidth,l-40),p=new m.a(n+d,o+20,e.style.strokeWidth,l-40),g=new m.a(n+20,o,d-40,e.style.strokeWidth),u=new m.a(n+20,o+l,d-40,e.style.strokeWidth),f=i.i(C.a)(t,t.selectedItems.nodes[0],!0)?t.nameTable[t.selectedItems.nodes[0].parentId]:t.selectedItems.nodes[0];if(d>=s&&l>=s){if(i.i(v.A)(h.constraints,"ResizeEast",h.thumbsConstraints,h)&&p.containsPoint(r,a))return"ResizeEast";if(i.i(v.A)(h.constraints,"ResizeSouth",h.thumbsConstraints,h)&&u.containsPoint(r,a))return"ResizeSouth";if("Grid"!==f.container.type){if(i.i(v.A)(h.constraints,"ResizeWest",h.thumbsConstraints,h)&&c.containsPoint(r,a))return"ResizeWest";if(i.i(v.A)(h.constraints,"ResizeNorth",h.thumbsConstraints,h)&&g.containsPoint(r,a))return"ResizeNorth"}}return null}function h(t,e,r,n,o,a){var s=40/t.scroller.currentZoom,h=t.selectedItems.handleSize/2/t.scroller.currentZoom,l=t.selectedItems,c=!!l.annotation;if(e.actualSize.width>=s&&e.actualSize.height>=s){if(i.i(v.A)(l.constraints,"ResizeSouthEast",l.thumbsConstraints,l)&&d(r,i.i(y.c)(n,{x:o+e.actualSize.width,y:a+e.actualSize.height}),h))return c?"LabelResizeSouthEast":"ResizeSouthEast";if(i.i(v.A)(l.constraints,"ResizeSouthWest",l.thumbsConstraints,l)&&d(r,i.i(y.c)(n,{x:o,y:a+e.actualSize.height}),h))return c?"LabelResizeSouthWest":"ResizeSouthWest";if(i.i(v.A)(l.constraints,"ResizeNorthEast",l.thumbsConstraints,l)&&d(r,i.i(y.c)(n,{x:o+e.actualSize.width,y:a}),h))return c?"LabelResizeNorthEast":"ResizeNorthEast";if(i.i(v.A)(l.constraints,"ResizeNorthWest",l.thumbsConstraints,l)&&d(r,i.i(y.c)(n,{x:o,y:a}),h))return c?"LabelResizeNorthWest":"ResizeNorthWest"}return i.i(v.A)(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&d(r,i.i(y.c)(n,{x:o+e.actualSize.width,y:a+e.actualSize.height/2}),h)?c?"LabelResizeEast":"ResizeEast":i.i(v.A)(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&d(r,i.i(y.c)(n,{x:o,y:a+e.actualSize.height/2}),h)?c?"LabelResizeWest":"ResizeWest":i.i(v.A)(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&d(r,i.i(y.c)(n,{x:o+e.actualSize.width/2,y:a+e.actualSize.height}),h)?c?"LabelResizeSouth":"ResizeSouth":i.i(v.A)(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&d(r,i.i(y.c)(n,{x:o+e.actualSize.width/2,y:a}),h)?c?"LabelResizeNorth":"ResizeNorth":null}function d(t,e,i){return t.x>=e.x-i&&t.x<=e.x+i&&t.y>=e.y-i&&t.y<=e.y+i}function l(t){return t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0}function c(t){return 1===t.selectedItems.connectors.length&&!t.selectedItems.nodes.length}function p(t,e,i,r){if(void 0===i&&(i=!0),e instanceof f.G)return!0;if(e instanceof f.a)for(;e;){if(-1!==t.selectedItems.nodes.indexOf(e)&&void 0===t.selectedItems.annotation)return!0;if(i)break;e=t.nameTable[e.parentId]}else if(e instanceof u.a){if(-1!==t.selectedItems.connectors.indexOf(e)&&void 0===t.selectedItems.annotation)return!0}else if((e instanceof P.b||e instanceof P.c)&&t.selectedItems.annotation&&t.selectedItems.wrapper.children[0].id===r.id)return!0;return!1}function g(t,e){if(e+=360,e%=360,-1===t.indexOf("Resize"))return z[""+t];var i=z[""+t];return e>=0&&e<25||e>=160&&e<=205||e>=340&&e<=360?i:e>=25&&e<=70||e>=205&&e<=250?"n-resize"===i||"s-resize"===i?"ne-resize":"nw-resize"===i||"se-resize"===i?"n-resize":"e-resize"===i||"w-resize"===i?"nw-resize":"e-resize":e>=70&&e<=115||e>=250&&e<=295?"n-resize"===i||"s-resize"===i?"e-resize":"nw-resize"===i||"se-resize"===i?"ne-resize":"e-resize"===i||"w-resize"===i?"n-resize":"nw-resize":e>=115&&e<=155||e>=295&&e<=340?"n-resize"===i||"s-resize"===i?"nw-resize":"nw-resize"===i||"se-resize"===i?"e-resize":"e-resize"===i||"w-resize"===i?"ne-resize":z[""+t]:"n-resize"}e.d=r,e.g=a,e.a=d,e.f=l,e.e=c,e.b=p,e.c=g;var u=i(10),f=i(6),m=i(5),y=i(16),v=i(2),b=i(9),S=i(8),w=i(11),x=i(1),I=i(21),P=i(20),C=i(19),z={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"grab",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"}},function(t,e,i){"use strict";i.d(e,"s",function(){return x}),i.d(e,"d",function(){return I}),i.d(e,"n",function(){return P}),i.d(e,"i",function(){return C}),i.d(e,"b",function(){return z}),i.d(e,"c",function(){return O}),i.d(e,"a",function(){return T}),i.d(e,"e",function(){return A}),i.d(e,"f",function(){return L}),i.d(e,"l",function(){return E}),i.d(e,"j",function(){return B}),i.d(e,"m",function(){return M}),i.d(e,"k",function(){return D}),i.d(e,"g",function(){return k}),i.d(e,"h",function(){return R}),i.d(e,"p",function(){return _}),i.d(e,"q",function(){return j}),i.d(e,"r",function(){return N}),i.d(e,"o",function(){return H});var r=i(6),n=i(10),o=i(8),a=i(21),s=i(3),h=i(5),d=i(22),l=i(9),c=i(16),p=i(1),g=i(11),u=i(26),f=i(2),m=i(0),y=(i.n(m),i(60)),v=i(18),b=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),S=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function a(t){try{h(r.next(t))}catch(t){o(t)}}function s(t){try{h(r.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}h((r=r.apply(t,e||[])).next())})},w=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,o=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(t){i=[6,t],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,o,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},x=function(){function t(t,e){void 0===e&&(e=!1),this.commandHandler=null,this.deepDiffer=new y.a,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=t,this.isProtectChange=e}return t.prototype.startAction=function(t){this.currentElement=t,this.inAction=!0},t.prototype.mouseDown=function(t){i.i(m.isBlazor)()&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0)),this.currentElement=t.source,this.startPosition=this.currentPosition=this.prevPosition=t.position,this.isTooltipVisible=!0,this.startAction(t.source),this.checkProperty=!0,this.mouseDownElement=t.source},t.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},t.prototype.mouseMove=function(t){return this.currentPosition=t.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.currentPosition=t.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),i.i(m.isBlazor)()&&(this.commandHandler.enableCloneObject(!1),this.commandHandler.ismouseEvents(!1),this.commandHandler.getBlazorOldValues(t,this instanceof _)),this.endAction(),this.mouseDownElement=null},t.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},t.prototype.mouseWheel=function(t){this.currentPosition=t.position},t.prototype.mouseLeave=function(t){this.mouseUp(t)},t.prototype.updateSize=function(t,e,r,n,o,a){t=this.commandHandler.renderContainerHelper(t)||t;var s,h={snapped:!1,offset:0,left:!1,right:!1},d={snapped:!1,offset:0,top:!1,bottom:!1},l=this.currentPosition.x-this.startPosition.x,p=this.currentPosition.y-this.startPosition.y,u=!(t instanceof g.a)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),f=u?this.commandHandler.snappingModule.getLayer():null,m=t instanceof g.a?a:t.rotateAngle;s=i.i(c.a)(),i.i(c.b)(s,-m,0,0);var y=t.offsetX,v=t.offsetY,b=t.width,S=t.height;y-=b*t.pivot.x,v-=S*t.pivot.y;var w,x=0,I=0,P=t instanceof g.a?t.actualSize.width:t.width,C=t instanceof g.a?t.actualSize.height:t.height;switch(n){case"ResizeWest":w=i.i(c.c)(s,{x:l,y:p}),l=w.x,p=w.y,I=1,l=u?this.commandHandler.snappingModule.snapLeft(h,d,f,l,p,t,r===e,o):l,p=0,x=(o.width-l)/P;break;case"ResizeEast":w=i.i(c.c)(s,{x:l,y:p}),l=w.x,p=w.y,l=u?this.commandHandler.snappingModule.snapRight(h,d,f,l,p,t,r===e,o):l,p=0,x=(o.width+l)/P,I=1;break;case"ResizeNorth":x=1,w=i.i(c.c)(s,{x:l,y:p}),l=w.x,p=w.y,p=u?this.commandHandler.snappingModule.snapTop(h,d,f,l,p,t,r===e,o):p,I=(o.height-p)/C;break;case"ResizeSouth":x=1,w=i.i(c.c)(s,{x:l,y:p}),l=w.x,p=w.y,p=u?this.commandHandler.snappingModule.snapBottom(h,d,f,l,p,t,r===e,o):p,I=(o.height+p)/C;break;case"ResizeNorthEast":w=i.i(c.c)(s,{x:l,y:p}),l=w.x,p=w.y,l=u?this.commandHandler.snappingModule.snapRight(h,d,f,l,p,t,r===e,o):l,p=u?this.commandHandler.snappingModule.snapTop(h,d,f,l,p,t,r===e,o):p,x=(o.width+l)/P,I=(o.height-p)/C;break;case"ResizeNorthWest":w=i.i(c.c)(s,{x:l,y:p}),l=w.x,p=w.y,p=u?this.commandHandler.snappingModule.snapTop(h,d,f,l,p,t,r===e,o):p,l=u?this.commandHandler.snappingModule.snapLeft(h,d,f,l,p,t,r===e,o):l,x=(o.width-l)/P,I=(o.height-p)/C;break;case"ResizeSouthEast":w=i.i(c.c)(s,{x:l,y:p}),l=w.x,p=w.y,p=u?this.commandHandler.snappingModule.snapBottom(h,d,f,l,p,t,r===e,o):p,l=u?this.commandHandler.snappingModule.snapRight(h,d,f,l,p,t,r===e,o):l,I=(o.height+p)/C,x=(o.width+l)/P;break;case"ResizeSouthWest":w=i.i(c.c)(s,{x:l,y:p}),l=w.x,p=w.y,p=u?this.commandHandler.snappingModule.snapBottom(h,d,f,l,p,t,r===e,o):p,l=u?this.commandHandler.snappingModule.snapLeft(h,d,f,l,p,t,r===e,o):l,x=(o.width-l)/P,I=(o.height+p)/C}return{width:x,height:I}},t.prototype.getPivot=function(t){switch(t){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},t.prototype.getShapeType=function(){return this.commandHandler.diagram.drawingObject.shape.type,this.commandHandler.diagram.drawingObject.shape.type},t.prototype.triggerElementDrawEvent=function(t,e,i,r,n){var o={source:t,state:e,objectType:i,cancel:!1,elementType:r};this.commandHandler.triggerEvent(p.r.elementDraw,o),n&&o.cancel&&this.commandHandler.diagram.resetTool()},t}(),I=function(t){function e(e,i,r){var n=t.call(this,e,!0)||this;return n.action=r,n}return b(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction&&!1===o.a.equals(this.currentPosition,this.prevPosition)){var r=h.a.toBounds([this.prevPosition,this.currentPosition]);this.mouseDownElement&&!i.i(l.d)(this.mouseDownElement)?this.commandHandler.clearObjectSelection(this.mouseDownElement):(this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(r.x,r.y,r.width,r.height))}return!this.blocked},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),!this.commandHandler.isUserHandle(this.currentPosition))if(!1===o.a.equals(this.currentPosition,this.prevPosition)&&this.inAction){var i=h.a.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(i)}else{var r=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&e.info&&e.info.ctrlKey?e&&e.source&&(this.commandHandler.isSelected(e.source)?1===e.clickCount&&(this.commandHandler.unSelect(e.source),this.commandHandler.updateBlazorSelector()):this.commandHandler.selectObjects([e.source],!0)):(this.commandHandler.clearSelection(null===e.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(e.source,e.sourceWrapper):e.source&&this.commandHandler.selectObjects([e.source],!1,r))}this.inAction=!1,t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(x),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.inAction=!1;for(var r,o=e.source,a=e.sourceWrapper.id,s=0;s<o.fixedUserHandles.length;s++)a.indexOf(o.fixedUserHandles[parseInt(s.toString(),10)].id)>-1&&(r=o.fixedUserHandles[parseInt(s.toString(),10)]);if(i.i(m.isBlazor)()){var h=i.i(f.l)(e.source)===n.a?{connector:e.source}:{node:e.source},d=i.i(f.l)(e.source)===n.a?{connectorFixedUserHandle:r}:{nodeFixedUserHandle:r},l={fixedUserHandle:d,element:h},c=p.r.fixedUserHandleClick;this.commandHandler.triggerEvent(c,l),t.prototype.mouseUp.call(this,e)}else{var l={fixedUserHandle:r,element:e.source},c=p.r.fixedUserHandleClick;this.commandHandler.triggerEvent(c,l),t.prototype.mouseUp.call(this,e)}},e}(x),C=function(t){function e(e,i){var r=t.call(this,e,!0)||this;return r.isConnected=!1,r.endPoint=i,r}return b(e,t),e.prototype.mouseDown=function(e){return S(this,void 0,void 0,function(){var r,n,a,h,d,l,c,p,g;return w(this,function(y){if(i.i(m.isBlazor)()&&e&&e.source&&(this.commandHandler.insertSelectedObjects(),this.commandHandler.insertBlazorConnector(e.source),r=e.source,r.connectors&&(n=r.connectors[0],this.oldConnector=i.i(s.e)(n),a={connector:i.i(f.b)(n),oldValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},newValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},cancel:!1,state:"Changing",connectorEnd:this.endPoint},this.tempArgs=a)),this.inAction=!0,this.undoElement=void 0,this instanceof L||(this.undoElement=i.i(s.e)(e.source)),t.prototype.mouseDown.call(this,e),e.source&&e.source.connectors&&(h={x:this.prevPosition.x,y:this.prevPosition.y},d=e.source.connectors[0],this.oldConnector=i.i(s.e)(d)),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(l=0;l<d.segments.length;l++)c=d.segments[parseInt(l.toString(),10)],p=o.a.isEmptyPoint(c.point1)?c.bezierPoint1:c.point1,g=o.a.isEmptyPoint(c.point2)?c.bezierPoint2:c.point2,this.currentElement.handleSize!==d.hitPadding&&(d.hitPadding=this.currentElement.handleSize),(i.i(u.a)(this.currentPosition,p,d.hitPadding)||i.i(u.a)(this.currentPosition,g,d.hitPadding))&&(this.selectedSegment=c);return this.currentPosition=e.position,[2]})})},e.prototype.mouseUp=function(e){return S(this,void 0,void 0,function(){var r,n,h,d,l,c,g,u,y,h,d,v,b,y,S,x,I,v,r,P,C,P,C,y;return w(this,function(w){switch(w.label){case 0:return i.i(m.isBlazor)()?(r=p.r.connectionChange,n=void 0,this.tempArgs&&this.oldConnector?(this.commandHandler.updatePropertiesToBlazor(e,!1),this.tempArgs.state="Changed",h="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",d="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",this.tempArgs.oldValue="ConnectorSourceEnd"===this.endPoint?{connectorSourceValue:{nodeId:this.oldConnector[""+h],portId:this.oldConnector[""+d]}}:{connectorTargetValue:{nodeId:this.oldConnector[""+h],portId:this.oldConnector[""+d]}},n={state:this.tempArgs.state,oldValue:this.tempArgs.oldValue,newValue:this.tempArgs.newValue,cancel:this.tempArgs.cancel,connectorEnd:this.tempArgs.connectorEnd},l="diagram",c="sfBlazor",g="Blazor",window&&window[""+g]&&this.commandHandler[""+l].connectionChange?(u={EventName:"connectionChange",args:JSON.stringify(this.tempArgs)},[4,window[""+c].updateBlazorDiagramEvents(u,this.commandHandler[""+l])]):[3,2]):[3,3]):[3,3];case 1:n=w.sent(),w.label=2;case 2:n&&this.commandHandler.updateConnectorValue(n),w.label=3;case 3:return!i.i(m.isBlazor)()&&this.isConnected&&e.source.connectors&&(y=e.source.connectors[0],h="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",d="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",v={connector:i.i(f.b)(y),oldValue:{nodeId:this.oldConnector[""+h],portId:this.oldConnector[""+d]},newValue:{nodeId:y[""+h],portId:y[""+d]},cancel:!1,state:"Changed",connectorEnd:this.endPoint},y[""+h]!==this.oldConnector[""+h]&&(this.commandHandler.triggerEvent(p.r.connectionChange,v),this.isConnected=!1)),this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(e),this instanceof L||("ConnectorSourceEnd"!==this.endPoint||!e.source.connectors.length||o.a.equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&e.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||o.a.equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&e.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)?this instanceof L||"BezierTargetThumb"!==this.endPoint&&"BezierSourceThumb"!==this.endPoint||this.undoElement&&e.source&&(P=i.i(s.e)(e.source),C={type:"SegmentChanged",redoObject:P,undoObject:this.undoElement,category:"Internal"},this.commandHandler.addHistoryEntry(C)):(b=void 0,y=void 0,e.source&&e.source.connectors&&(b={x:this.prevPosition.x,y:this.prevPosition.y},y=e.source.connectors[0]),S=void 0,x=void 0,e.target&&(I=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0),I instanceof a.b?S=I.id:x=I.id),v={connector:y,state:"Completed",targetNode:x,oldValue:b,newValue:b,cancel:!1,targetPort:S},i.i(m.isBlazor)()&&(v={connector:i.i(f.b)(y),state:"Completed",targetNode:x,oldValue:i.i(f.b)(b),newValue:b,cancel:v.cancel,targetPort:S}),r="ConnectorSourceEnd"===this.endPoint?p.r.sourcePointChange:p.r.targetPointChange,this.commandHandler.triggerEvent(r,v),this.commandHandler.removeTerminalSegment(y,!0),this.undoElement&&e.source&&(P=void 0,P=i.i(s.e)(e.source),C={type:"ConnectionChanged",redoObject:i.i(s.e)(P),undoObject:i.i(s.e)(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(C))),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,e.source&&e.source.connectors&&(y=e.source.connectors[0],y.isBezierEditing&&(y.isBezierEditing=!1)),t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var n;if(!(this instanceof L)&&("ConnectorSourceEnd"===this.endPoint&&o.a.equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&o.a.equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var s=void 0,h=void 0;e.source&&e.source.connectors&&(s={x:this.prevPosition.x,y:this.prevPosition.y},h=e.source.connectors[0]);var d=void 0,c=void 0;if(e.target){c=e.target.id;var g=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0);g instanceof a.b||g instanceof r.u?d=g.id:c=g.id}var u={connector:h,state:"Start",targetNode:c,oldValue:s,newValue:s,cancel:!1,targetPort:d};i.i(m.isBlazor)()&&(u={connector:i.i(f.b)(h),state:"Start",targetNode:c,oldValue:s,newValue:s,cancel:u.cancel,targetPort:d});var y="ConnectorSourceEnd"===this.endPoint?p.r.sourcePointChange:p.r.targetPointChange;this.commandHandler.triggerEvent(y,u)}if(this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var v=this.currentPosition.x-this.prevPosition.x,b=this.currentPosition.y-this.prevPosition.y,S=void 0,s=void 0,w=void 0,x=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var I=void 0;e.source&&e.source.connectors&&(S={x:this.currentPosition.x,y:this.currentPosition.y},s={x:this.prevPosition.x,y:this.prevPosition.y},I=e.source.connectors[0]);var P=void 0,C=void 0;if(e.target){var g=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0);g instanceof a.b?P=g.id:C=g.id}var u={connector:I,state:"Progress",targetNode:C,oldValue:s,newValue:S,cancel:!1,targetPort:P};if(i.i(m.isBlazor)()&&(u={connector:i.i(f.b)(I),state:"Progress",targetNode:C,oldValue:s,newValue:S,cancel:u.cancel,targetPort:P}),!(this instanceof L)){var y="ConnectorSourceEnd"===this.endPoint?p.r.sourcePointChange:p.r.targetPointChange;this.commandHandler.triggerEvent(y,u)}if(e.target&&(w=i.i(f.u)(e.target,!0),x=i.i(f.u)(e.target,!1)),!u.cancel&&this.inAction&&void 0!==this.endPoint&&0!==v||0!==b)if(u.cancel||(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,e.source,this.currentPosition,this.selectedSegment,e.target,P),this.commandHandler.updateSelector()),e.target&&("ConnectorSourceEnd"===this.endPoint&&(i.i(l.e)(e.target)||i.i(l.f)(x))||"ConnectorTargetEnd"===this.endPoint&&(i.i(l.g)(e.target)||i.i(l.h)(w)))){this.commandHandler.canDisconnect(this.endPoint,e,P,C)&&(n=this.commandHandler.disConnect(e.source,this.endPoint,this.canCancel),this.isConnected=!0);var g=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0);if(g instanceof r.a)(i.i(l.g)(g)&&"ConnectorTargetEnd"===this.endPoint||i.i(l.e)(g)&&"ConnectorSourceEnd"===this.endPoint)&&(n=this.commandHandler.connect(this.endPoint,e,this.canCancel),this.isConnected=!0);else{var z=this.checkConnect(g);z&&(this.isConnected=!0,n=this.commandHandler.connect(this.endPoint,e,this.canCancel))}}else-1===this.endPoint.indexOf("Bezier")&&(this.isConnected=!0,n=this.commandHandler.disConnect(e.source,this.endPoint,this.canCancel),this.commandHandler.updateSelector());if(this.commandHandler.canEnableDefaultTooltip()){var O=this.getTooltipContent(e.position);this.commandHandler.showTooltip(e.source,e.position,O,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}n&&(this.tempArgs=n)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.x)+" Y:"+Math.round(t.y)},e.prototype.checkConnect=function(t){return!(!i.i(l.h)(t)||"ConnectorTargetEnd"!==this.endPoint)||(!(!i.i(l.f)(t)||"ConnectorSourceEnd"!==this.endPoint)||!(t.constraints&p.d.None||i.i(l.h)(t)||i.i(l.f)(t))&&(void 0==t.constraints||(t.constraints&p.d.Default&~(p.d.InConnect|p.d.OutConnect))>0))},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}(x),z=function(t){function e(e,i){var r=t.call(this,e,!0)||this;return r.currentTarget=null,r.canCancel=!1,r.canTrigger=!1,r.objectType=i,r}return b(e,t),e.prototype.mouseDown=function(e){if(e.source instanceof r.a||e.source instanceof n.a){var o=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([e.source],e.info&&e.info.ctrlKey,o);var a={nodes:[],connectors:[]};e.source instanceof r.a?a.nodes.push(i.i(s.e)(e.source)):a.connectors.push(i.i(s.e)(e.source)),this.undoElement=i.i(s.e)(a)}else this.undoElement=i.i(s.e)(e.source);this.undoParentElement=this.commandHandler.getSubProcess(e.source),"Port"===this.objectType&&(this.portId=e.sourceWrapper.id),this.commandHandler.insertBlazorConnector(e.source);var h;if(i.i(m.isBlazor)()){this.commandHandler.insertSelectedObjects(),this.startPosition=this.currentPosition=this.prevPosition=e.position,this.initialOffset={x:0,y:0},e.source&&(h={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY});var d={source:i.i(s.e)(e.source),state:"Start",oldValue:h,newValue:{},target:i.i(s.e)(e.target),targetPosition:e.position,allowDrop:!0,cancel:!1};this.tempArgs=d}t.prototype.mouseDown.call(this,e),this.initialOffset={x:0,y:0}},e.prototype.mouseUp=function(e,o){return S(this,void 0,void 0,function(){var a,h,d,c,g,u,y,v,b,S,x,I,P,C,z,d,O,T,A,L,d,E,B,M,D,D,T;return w(this,function(w){switch(w.label){case 0:return i.i(m.isBlazor)()&&"Port"!==this.objectType?(this.commandHandler.updatePropertiesToBlazor(e,!1),e.source&&(h={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},a={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY}),d={state:"Completed",oldValue:i.i(f.b)(this.tempArgs.oldValue),newValue:i.i(f.b)(h),target:i.i(f.b)(this.currentTarget),targetPosition:i.i(f.b)(this.currentPosition),allowDrop:!0,cancel:!1},c=void 0,g="diagram",u="sfBlazor",y="Blazor",window&&window[""+y]&&this.commandHandler[""+g].positionChange?(v={EventName:"positionChange",args:JSON.stringify(d)},[4,window[""+u].updateBlazorDiagramEvents(v,this.commandHandler[""+g])]):[3,2]):[3,3];case 1:c=w.sent(),w.label=2;case 2:c&&c.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.canCancel=!0),this.canCancel&&(this.commandHandler.insertBlazorObject(e.source),b=this.tempArgs.oldValue.offsetX-e.source.wrapper.offsetX,S=this.tempArgs.oldValue.offsetY-e.source.wrapper.offsetY,this.commandHandler.dragSelectedObjects(b,S)),w.label=3;case 3:return this.checkPropertyValue(),(I=!1,C={nodes:[],connectors:[]},"Port"===this.objectType)?[3,8]:(e.source instanceof r.a||e.source instanceof n.a?(e.source instanceof r.a?C.nodes.push(i.i(s.e)(e.source)):C.connectors.push(i.i(s.e)(e.source)),x=i.i(s.e)(C),z=e.source.wrapper,x.offsetX=z.offsetX,x.offsetY=z.offsetY):x=i.i(s.e)(e.source),P=this.commandHandler.renderContainerHelper(e.source)||e.source||this.commandHandler.renderContainerHelper(e.source),"helper"!==P.id&&"helper"===P.id||(!(P instanceof r.G&&(Math.round(P.width)===Math.round(this.undoElement.width)&&Math.round(P.height)===Math.round(this.undoElement.height)||P.selectedObjects&&1===P.selectedObjects.length))&&P instanceof r.G||P.offsetX===this.undoElement.offsetX&&P.offsetY===this.undoElement.offsetY&&P.sourcePoint===this.undoElement.sourcePoint&&P.targetPoint===this.undoElement.targetPoint)&&!this.isSelectionHasConnector(P)||(e.source&&(h={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},a={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY}),d={source:e.source,state:"Completed",oldValue:a,newValue:h,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},d={source:i.i(f.b)(e.source),state:"Completed",oldValue:i.i(f.b)(a),newValue:i.i(f.b)(h),target:i.i(f.b)(this.currentTarget),targetPosition:i.i(f.b)(this.currentPosition),allowDrop:d.allowDrop,cancel:d.cancel},i.i(m.isBlazor)()&&(d=this.getBlazorPositionChangeEventArgs(d,this.currentTarget)),O=!0,i.i(m.isBlazor)()||("helper"===P.id?this.canTrigger?(this.commandHandler.triggerEvent(p.r.positionChange,d),this.connectorEndPointChangeEvent(d),O=!0):O=!1:(this.commandHandler.triggerEvent(p.r.positionChange,d),this.connectorEndPointChangeEvent(d))),!o&&O&&(this.commandHandler.startGroupAction(),I=!0,T={type:"PositionChanged",redoObject:i.i(s.e)(x),undoObject:i.i(s.e)(this.undoElement),category:"Internal"},x.nodes[0]&&x.nodes[0].processId&&(A={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(e.source)},this.commandHandler.addHistoryEntry(A)),this.commandHandler.addHistoryEntry(T))),L=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0),this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),e.source&&this.currentTarget&&i.i(l.i)(this.currentTarget)&&this.commandHandler.isDroppable(e.source,this.currentTarget)?(this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition),this.currentTarget&&this.currentTarget instanceof n.a&&1==this.commandHandler.diagram.enableConnectorSplit&&this.currentElement&&(this.currentElement&&this.currentElement instanceof r.a?this.commandHandler.connectorSplit(this.currentElement,this.currentTarget):this.currentElement instanceof r.G&&!this.commandHandler.PreventConnectorSplit&&this.currentElement.nodes.length>0&&(this.commandHandler.connectorSplit(this.currentElement.nodes[0],this.currentTarget),this.commandHandler.PreventConnectorSplit=!1)),d={element:e.source,target:this.currentTarget,position:this.currentPosition,cancel:!1},i.i(m.isBlazor)()?(d=i.i(f.v)(e,d),[4,this.commandHandler.triggerEvent(p.r.drop,d)]):[3,5]):[3,7]);case 4:return d=w.sent()||d,[3,6];case 5:this.commandHandler.triggerEvent(p.r.drop,d),w.label=6;case 6:if(!d.cancel&&e.source&&this.commandHandler.isParentAsContainer(this.currentTarget)){for(E=e.source instanceof r.G?e.source.nodes:[e.source],B=!1,M=void 0,D=0;D<E.length;D++){if(E[0].parentId!==E[parseInt(D.toString(),10)].parentId){M=!1;break}M=!0}for(D=0;D<E.length;D++)!E[parseInt(D.toString(),10)].container&&M&&(B=!0,this.commandHandler.updateLaneChildrenZindex(E[parseInt(D.toString(),10)],this.currentTarget),this.commandHandler.dropChildToContainer(this.currentTarget,E[parseInt(D.toString(),10)]),this.commandHandler.renderContainerHelper(E[parseInt(D.toString(),10)]));I&&this.commandHandler.isContainer&&B&&this.commandHandler.endGroupAction()}w.label=7;case 7:return e.source&&this.currentTarget&&this.commandHandler.dropAnnotation(e.source,this.currentTarget),this.commandHandler.updateSelector(),I&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction(),[3,9];case 8:C.nodes.push(i.i(s.e)(e.source)),e.portId=this.portId,x=i.i(s.e)(C),T={type:"PortPositionChanged",objectId:this.portId,redoObject:i.i(s.e)(x),undoObject:i.i(s.e)(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(T),w.label=9;case 9:return this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.connectorEndPointChangeEvent=function(t,e){var i=t.source;if(i instanceof r.G&&i.nodes.length>0)for(var n=0;n<i.nodes.length;n++){var o=i.nodes[parseInt(n.toString(),10)];if(o&&o.inEdges.length>0)for(var a=0;a<o.inEdges.length;a++){var s=this.commandHandler.diagram.getObject(o.inEdges[parseInt(a.toString(),10)]);this.triggerEndPointEvent(s,t,e,"targetPointChange")}if(o&&o.outEdges.length>0)for(var a=0;a<o.outEdges.length;a++){var s=this.commandHandler.diagram.getObject(o.outEdges[parseInt(a.toString(),10)]);this.triggerEndPointEvent(s,t,e,"sourcePointChange")}}},e.prototype.triggerEndPointEvent=function(t,e,i,r){var n={connector:t,state:e.state,targetNode:t.targetID,targetPort:t.targetPortID,sourceNode:t.sourceID,sourcePort:t.sourcePortID,oldValue:{x:t.targetPoint.x,y:t.targetPoint.y},newValue:{x:t.targetPoint.x+(i?i.x:0),y:t.targetPoint.y+(i?i.y:0)},cancel:e.cancel};this.commandHandler.triggerEvent("targetPointChange"===r?p.r.targetPointChange:p.r.sourcePointChange,n)},e.prototype.isSelectionHasConnector=function(t){return!(!(t.nodes&&t.connectors&&t.nodes.length>0&&t.connectors.length>0)||t.width===this.undoElement.width&&t.height===this.undoElement.height)},e.prototype.getBlazorPositionChangeEventArgs=function(t,e){return t={source:i.i(f.b)(t.source),state:t.state,oldValue:t.oldValue,newValue:t.newValue,target:i.i(f.l)(e)===n.a?{connector:i.i(f.b)(e)}:{node:i.i(f.b)(e)},targetPosition:this.currentPosition,allowDrop:!0,cancel:!1}},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var a,s=!1;a=this.commandHandler.renderContainerHelper(e.source)||e.source,a instanceof r.a||a instanceof n.a?a instanceof r.a?a.offsetX===this.undoElement.nodes[0].offsetX&&a.offsetY===this.undoElement.nodes[0].offsetY&&(s=!0):o.a.equals(a.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&o.a.equals(a.targetPoint,this.undoElement.connectors[0].targetPoint)&&(s=!0):a.wrapper.offsetX===this.undoElement.wrapper.offsetX&&a.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(s=!0);var h;a&&(h={offsetX:a.wrapper.offsetX,offsetY:a.wrapper.offsetY});var d={source:a,state:"Start",oldValue:h,newValue:h,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(d={source:i.i(f.b)(a),state:"Start",oldValue:i.i(f.b)(h),newValue:i.i(f.b)(h),target:e.target,targetPosition:e.position,allowDrop:d.allowDrop,cancel:d.cancel},s&&!i.i(m.isBlazor)()&&(this.commandHandler.triggerEvent(p.r.positionChange,d),this.connectorEndPointChangeEvent(d)),this.currentPosition=e.position,"Port"!==this.objectType){var l=(this.currentPosition.x,this.prevPosition.x,this.currentPosition.y,this.prevPosition.y,this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x)),g=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(e,this.currentPosition),this.commandHandler.disConnect(e.source),this.commandHandler.removeSnap();var u,y=void 0,v=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,l,g);this.initialOffset.x=l-v.x,this.initialOffset.y=g-v.y,a&&(u={offsetX:a.wrapper.offsetX,offsetY:a.wrapper.offsetY},y={offsetX:a.wrapper.offsetX+v.x,offsetY:a.wrapper.offsetY+v.y}),this.currentTarget&&e.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(e.source,e.target,this.currentTarget),this.currentTarget=e.target;var b={source:a,state:"Progress",oldValue:u,newValue:y,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(i.i(m.isBlazor)()&&(b=this.getBlazorPositionChangeEventArgs(b,e.target)),i.i(m.isBlazor)()||(this.commandHandler.triggerEvent(p.r.positionChange,b),this.canTrigger=!0,this.connectorEndPointChangeEvent(b,v)),!b.cancel&&!this.canCancel){this.blocked=!this.commandHandler.dragSelectedObjects(v.x,v.y);var S=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||S}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(e),this.currentTarget&&e.source!==this.currentTarget&&this.commandHandler.isDroppable(e.source,this.currentTarget)&&"helper"!==e.source.id){var w=e.source instanceof r.G?e.source.nodes[0]:e.source;this.commandHandler.isParentAsContainer(w,!0)||"SwimLane"===w.shape.type||w.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(e,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var x=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,x,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var I=i.i(c.a)(),P=e.source;i.i(c.b)(I,-P.rotateAngle,P.offsetX,P.offsetY);var C=i.i(c.c)(I,{x:this.prevPosition.x,y:this.prevPosition.y}),z=i.i(c.c)(I,{x:e.position.x,y:e.position.y});this.commandHandler.portDrag(e.source,e.sourceWrapper,z.x-C.x,z.y-C.y)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.wrapper.bounds.x)+" Y:"+Math.round(t.wrapper.bounds.y)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},e}(x),O=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseDown=function(e){if(i.i(m.isBlazor)()){var r=void 0;r=this.commandHandler.renderContainerHelper(e.source)||e.source;var n={rotateAngle:r.wrapper.rotateAngle},o={source:i.i(f.b)(e.source),state:"Start",oldValue:n,newValue:void 0,cancel:!1},a=o;this.tempArgs=a,this.tempArgs&&this.tempArgs.cancel&&(this.canCancel=!0)}if(this.undoElement=i.i(s.e)(e.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var h=[],d=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],h),l=0;l<d.length;l++){var c=this.commandHandler.cloneChild(d[parseInt(l.toString(),10)].id);this.childTable[d[parseInt(l.toString(),10)].id]=i.i(s.e)(c)}t.prototype.mouseDown.call(this,e)},e.prototype.mouseUp=function(e){return S(this,void 0,void 0,function(){var r,n,o,a,h,d,l,c,g,u,h,l,f,y;return w(this,function(v){switch(v.label){case 0:return this.checkPropertyValue(),i.i(m.isBlazor)()?(r="diagram",n="sfBlazor",o="Blazor",this.commandHandler.updatePropertiesToBlazor(e,!1),a=this.commandHandler.renderContainerHelper(e.source)||e.source,h={rotateAngle:this.tempArgs.oldValue.rotateAngle},d={rotateAngle:a.wrapper.rotateAngle},l={state:"Completed",oldValue:h,newValue:d,cancel:!1},c=void 0,window&&window[""+o]&&this.commandHandler[""+r].rotateChange?(g={EventName:"rotateChange",args:JSON.stringify(l)},[4,window[""+n].updateBlazorDiagramEvents(g,this.commandHandler[""+r])]):[3,2]):[3,3];case 1:c=v.sent(),v.label=2;case 2:c&&c.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.canCancel=!0),this.canCancel&&(this.commandHandler.insertBlazorObject(e.source),this.commandHandler.rotatePropertyChnage(this.tempArgs.oldValue.rotateAngle)),v.label=3;case 3:return u=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle!==u.wrapper.rotateAngle&&(h={rotateAngle:u.wrapper.rotateAngle},l={source:e.source,state:"Completed",oldValue:h,newValue:h,cancel:!1},i.i(m.isBlazor)()||this.commandHandler.triggerEvent(p.r.rotateChange,l),f=void 0,f=i.i(s.e)(e.source),y={type:"RotationChanged",redoObject:i.i(s.e)(f),undoObject:i.i(s.e)(this.undoElement),category:"Internal",childTable:this.childTable},this.commandHandler.addHistoryEntry(y),this.commandHandler.updateSelector()),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,t.prototype.mouseUp.call(this,e),[2]}})})},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var r;if(r=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle===r.wrapper.rotateAngle){var n={rotateAngle:r.wrapper.rotateAngle},a={source:e.source,state:"Start",oldValue:n,newValue:n,cancel:!1};i.i(m.isBlazor)()||this.commandHandler.triggerEvent(p.r.rotateChange,a)}this.currentPosition=e.position;var s={x:r.wrapper.offsetX,y:r.wrapper.offsetY},h=o.a.findAngle(s,this.currentPosition)+90,d=this.commandHandler.snapAngle(h);h=0!==d?d:h,h=(h+360)%360;var l={rotateAngle:r.wrapper.rotateAngle},c={rotateAngle:h},g={source:e.source,state:"Progress",oldValue:l,newValue:c,cancel:!1},u={source:i.i(f.b)(e.source),state:"Progress",oldValue:i.i(f.b)(l),newValue:i.i(f.b)(c),cancel:g.cancel};if(i.i(m.isBlazor)()||this.commandHandler.triggerEvent(p.r.rotateChange,u),(!i.i(m.isBlazor)()&&!u.cancel||i.i(m.isBlazor)()&&!this.canCancel)&&(this.blocked=!this.commandHandler.rotateSelectedItems(h-r.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var y=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,y,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},e.prototype.getTooltipContent=function(t){return Math.round(t.rotateAngle%360).toString()+"°"},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(x),T=function(t){function e(e,i){var r=t.call(this,e,!0)||this;return r.initialBounds=new h.a,r.canCancel=!1,r.corner=i,r}return b(e,t),e.prototype.mouseDown=function(e){var r;if(i.i(m.isBlazor)()){this.commandHandler.insertSelectedObjects(),this.startPosition=this.currentPosition=this.prevPosition=e.position,this.currentElement=e.source,this.initialBounds.x=e.source.wrapper.offsetX,this.initialBounds.y=e.source.wrapper.offsetY,this.initialBounds.height=e.source.wrapper.actualSize.height,this.initialBounds.width=e.source.wrapper.actualSize.width,e.source&&(r={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height});var n={source:i.i(f.b)(e.source),state:"Start",oldValue:r,newValue:i.i(f.b)(this.currentElement),cancel:!1};this.tempArgs=n}if(this.undoElement=i.i(s.e)(e.source),this.undoParentElement=this.commandHandler.getSubProcess(e.source),t.prototype.mouseDown.call(this,e),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var o=[],a=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],o),h=0;h<a.length;h++){var d=this.commandHandler.cloneChild(a[parseInt(h.toString(),10)].id);this.childTable[a[parseInt(h.toString(),10)].id]=i.i(s.e)(d)}this.commandHandler.checkSelection(e.source,this.corner),t.prototype.mouseDown.call(this,e),this.initialBounds.x=e.source.wrapper.offsetX,this.initialBounds.y=e.source.wrapper.offsetY,this.initialBounds.height=e.source.wrapper.actualSize.height,this.initialBounds.width=e.source.wrapper.actualSize.width},e.prototype.mouseUp=function(e,r){return S(this,void 0,void 0,function(){var n,o,a,h,d,l,c,g,u,y,v,b,S,l,h,x,I;return w(this,function(w){switch(w.label){case 0:return i.i(m.isBlazor)()?(n="diagram",o="sfBlazor",a="Blazor",this.commandHandler.updatePropertiesToBlazor(e,!1),h=i.i(s.e)(e.source),d={width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height,offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},l={oldValue:this.tempArgs.oldValue,newValue:d,cancel:!1,state:"Completed"},this.canCancel?[3,3]:(c=void 0,window&&window[""+a]&&this.commandHandler[""+n].sizeChange?(g={EventName:"sizeChange",args:JSON.stringify(l)},[4,window[""+o].updateBlazorDiagramEvents(g,this.commandHandler[""+n])]):[3,2])):[3,4];case 1:c=w.sent(),w.label=2;case 2:c&&c.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.commandHandler.insertBlazorObject(e.source),u=this.tempArgs.oldValue.width/h.wrapper.actualSize.width,y=this.tempArgs.oldValue.height/h.wrapper.actualSize.height,this.commandHandler.scaleSelectedItems(u,y,this.getPivot(this.corner))),w.label=3;case 3:this.tempArgs=void 0,this.canCancel=void 0,w.label=4;case 4:return this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelector(),v=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===v.wrapper.offsetX&&this.undoElement.offsetY===v.wrapper.offsetY&&this.undoElement.width===v.wrapper.bounds.width&&this.undoElement.height===v.wrapper.bounds.height||(i.i(m.isBlazor)()||(b=this.updateSize(e.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds),this.blocked=this.scaleObjects(b.width,b.height,this.corner,this.currentPosition,this.prevPosition,v),S={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},l={source:i.i(f.b)(e.source),state:"Completed",oldValue:S,newValue:S,cancel:!1},this.commandHandler.triggerEvent(p.r.sizeChange,l)),h=i.i(s.e)(e.source),x={type:"SizeChanged",redoObject:i.i(s.e)(h),undoObject:i.i(s.e)(this.undoElement),category:"Internal",childTable:this.childTable},r||(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(x),h.nodes[0]&&h.nodes[0].processId&&(I={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(e.source),undoObject:this.undoParentElement,category:"Internal"},this.commandHandler.addHistoryEntry(I)),this.commandHandler.endGroupAction())),this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),[2,!this.blocked]}})})},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var r;if(r=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===r.wrapper.offsetX&&this.undoElement.offsetY===r.wrapper.offsetY){var n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY,width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},o={source:e.source,state:"Start",oldValue:n,newValue:this.currentElement,cancel:!1};i.i(m.isBlazor)()||this.commandHandler.triggerEvent(p.r.sizeChange,o)}this.currentPosition=e.position;var a=this.currentPosition.x-this.startPosition.x,h=this.currentPosition.y-this.startPosition.y,d={x:a,y:h};d=i.i(s.j)(-this.currentElement.wrapper.rotateAngle,void 0,void 0,d);this.currentElement.wrapper.actualSize.width,d.x,this.currentElement.wrapper.actualSize.width,this.currentElement.wrapper.actualSize.height,d.y,this.currentElement.wrapper.actualSize.height;d=this.getChanges(d),this.commandHandler.removeSnap();var l=this.updateSize(e.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(l.width,l.height,this.corner,this.startPosition,this.currentPosition,r),this.commandHandler.canEnableDefaultTooltip()){var c=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,c,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"W:"+Math.round(t.wrapper.bounds.width)+" H:"+Math.round(t.wrapper.bounds.height)},e.prototype.getChanges=function(t){switch(this.corner){case"ResizeEast":return{x:t.x,y:0};case"ResizeSouthEast":return t;case"ResizeSouth":return{x:0,y:t.y};case"ResizeNorth":return{x:0,y:-t.y};case"ResizeNorthEast":return{x:t.x,y:-t.y};case"ResizeNorthWest":return{x:-t.x,y:-t.y};case"ResizeWest":return{x:-t.x,y:0};case"ResizeSouthWest":return{x:-t.x,y:t.y}}return t},e.prototype.scaleObjects=function(t,e,n,o,a,s){s instanceof r.G&&1===s.nodes.length&&s.nodes[0].constraints&p.f.AspectRatio&&("ResizeWest"===n||"ResizeEast"===n||"ResizeNorth"===n||"ResizeSouth"===n?1===e&&1===t||(e=t=Math.max(1===e?0:e,1===t?0:t)):e=t=o!==a?Math.max(e,t):0);var h={offsetX:s.offsetX,offsetY:s.offsetY,width:s.width,height:s.height};this.blocked=this.commandHandler.scaleSelectedItems(t,e,this.getPivot(this.corner));var d,l={offsetX:s.offsetX,offsetY:s.offsetY,width:s.width,height:s.height};d={source:s,state:"Progress",oldValue:h,newValue:l,cancel:!1};var c;return c={source:i.i(f.b)(s),state:"Progress",oldValue:i.i(f.b)(h),newValue:i.i(f.b)(l),cancel:d.cancel},i.i(m.isBlazor)()||this.commandHandler.triggerEvent(p.r.sizeChange,c),(c.cancel||this.canCancel)&&this.commandHandler.scaleSelectedItems(1/t,1/e,this.getPivot(this.corner)),this.blocked},e}(x),A=function(t){function e(e,i){var r=t.call(this,e,!0)||this;return r.sourceObject=i,r}return b(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setFocus(),this.triggerElementDrawEvent(e.source,"Start","Node",this.getShapeType(),!0)},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i,r={offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y};if(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(r)),this.triggerElementDrawEvent(this.drawingObject,"Progress","Node",this.getShapeType(),!1),this.inAction&&!1===o.a.equals(this.currentPosition,this.prevPosition)){var n=h.a.toBounds([this.prevPosition,this.currentPosition]);i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,n),i&&this.commandHandler.updateNodeDimension(this.drawingObject,n)}return i},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=h.a.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,i),this.drawingObject&&this.drawingObject instanceof r.a&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Node",this.getShapeType(),!1),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(x),L=function(t){function e(e,i,r){var n=t.call(this,e,i)||this;return n.sourceObject=r,n}return b(e,t),e.prototype.mouseDown=function(e){return S(this,void 0,void 0,function(){return w(this,function(i){return t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setFocus(),this.triggerElementDrawEvent(e.source,"Start","Connector",this.commandHandler.diagram.drawingObject.type,!0),[2]})})},e.prototype.mouseMove=function(e){if(this.commandHandler.enableServerDataBinding(!1),this.inAction){var n={sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(n)),e.source=this.drawingObject,this.triggerElementDrawEvent(e.source,"Progress","Connector",this.drawingObject.type,!1),(e.target&&e.target instanceof r.a||e.actualObject&&e.sourceWrapper&&i.i(f.w)(e.actualObject,e.sourceWrapper))&&("ConnectorTargetEnd"!==this.endPoint||i.i(l.g)(e.target))&&this.commandHandler.connect(this.endPoint,e),this.endPoint="ConnectorTargetEnd"}return this.inAction||(this.commandHandler.updateSelector(),e.source&&e.sourceWrapper&&this.commandHandler.renderHighlighter(e,!0)),t.prototype.mouseMove.call(this,e),this.commandHandler.enableServerDataBinding(!0),!this.blocked},e.prototype.mouseUp=function(e){return S(this,void 0,void 0,function(){return w(this,function(i){return this.commandHandler.enableServerDataBinding(!1),this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof n.a&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Connector",this.drawingObject.type,!1),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),this.inAction=!1,this.commandHandler.enableServerDataBinding(!0),t.prototype.mouseUp.call(this,e),[2]})})},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(C),E=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.commandHandler.clearSelection();var i={shape:{type:"Text"},offsetX:this.currentPosition.x,offsetY:this.currentPosition.y};e.source||(this.drawingNode=this.commandHandler.drawObject(i))},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.drawingNode)this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent";else{var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,offsetY:this.currentPosition.y};this.drawingNode=this.commandHandler.drawObject(i),this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent"}if(this.inAction&&!1===o.a.equals(this.currentPosition,this.prevPosition)){var r=h.a.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,r)}return!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=e.source,this.drawingNode&&(this.drawingNode instanceof r.a||this.drawingNode instanceof n.a)&&this.commandHandler.addText(this.drawingNode,this.currentPosition),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(x),B=function(t){function e(e,i){var r=t.call(this,e)||this;return r.zooming=i,r}return b(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setBlazorDiagramProps(!0)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction)if(this.zooming||!1!==o.a.equals(this.currentPosition,this.prevPosition)){if(e.moveTouches&&e.moveTouches.length&&e.moveTouches.length>=2){var i=e.startTouches[0],r=e.startTouches[1],n=e.moveTouches[0],a=e.moveTouches[1],s=this.getDistance(n,a)/this.getDistance(i,r),h=e.position;this.commandHandler.zoom(s,0,0,h),this.updateTouch(i,n),this.updateTouch(r,a)}}else{var d=this.currentPosition.x-this.prevPosition.x,l=this.currentPosition.y-this.prevPosition.y;this.commandHandler.scroll(d,l,this.currentPosition)}return this.commandHandler.dataBinding(),!this.blocked},e.prototype.mouseUp=function(e){this.commandHandler.setBlazorDiagramProps(!1),this.checkPropertyValue(),this.commandHandler.updatePanState(!1),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.getDistance=function(t,e){var i=e.pageX-t.pageX,r=e.pageY-t.pageY;return Math.sqrt(i*i+r*r)},e.prototype.updateTouch=function(t,e){t.pageX=e.pageX,t.pageY=e.pageY},e}(x),M=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.commandHandler.initExpand(e),t.prototype.mouseUp.call(this,e)},e}(x),D=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue();var i="_blank",r="",n=window.innerHeight,o=window.innerWidth,a=window.screenTop,s=window.screenLeft;"CurrentTab"==e.sourceWrapper.hyperlink.hyperlinkOpenState?i="_self":"NewWindow"==e.sourceWrapper.hyperlink.hyperlinkOpenState&&(r="height="+n+",width="+o+",top="+a+",left="+s),window.open(e.sourceWrapper.hyperlink.link,i,r).focus(),t.prototype.mouseUp.call(this,e)},e}(x),k=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var r=void 0,n=this.drawingObject.shape;r=n.points[n.points.length-1],r={x:r.x,y:r.y},this.drawingObject.shape.points.push(r)}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var o={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};i.i(m.isBlazor)()&&"Basic"===o.shape.type&&(o.shape.basicShape="Polygon"),this.drawingObject=this.commandHandler.drawObject(o)}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var r=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(r.points[r.points.length-1].x=this.currentPosition.x,r.points[r.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=i.i(d.e)(this.drawingObject.shape.points),this.inAction&&!1===o.a.equals(this.currentPosition,this.prevPosition))){var n=h.a.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,n)}}return!0},e.prototype.mouseUp=function(e,i){this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},e}(x),R=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject;i.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(i)}return!0},e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=this.drawingObject,r=void 0;r=new n.d(i,"segments",{type:"Straight"},!0),r.point=this.currentPosition,i.segments[i.segments.length-1]=r}else{var o={id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject=this.commandHandler.drawObject(o)}},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&this.drawingObject){var i=this.drawingObject;i.segments[i.segments.length-1].point={x:0,y:0},this.commandHandler.addObjectToDiagram(this.drawingObject)}this.endAction()},e.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},e}(x),_=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.undoElement=i.i(s.e)(e.source),this.annotationId=e.sourceWrapper.id,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var n=this.currentPosition.x-this.prevPosition.x,o=this.currentPosition.y-this.prevPosition.y,a=e.source;if(a instanceof r.a){var s=i.i(c.a)();i.i(c.b)(s,-a.rotateAngle,0,0);var h=i.i(c.c)(s,{x:n,y:o});n=h.x,o=h.y}return this.inAction&&(this.commandHandler.labelDrag(e.source,e.sourceWrapper,n,o),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var r=e.source;this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:i.i(s.e)(this.undoElement),category:"Internal",redoObject:i.i(s.e)(r)};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(x),j=function(t){function e(e,i){var r=t.call(this,e,!0)||this;return r.corner=i,r}return b(e,t),e.prototype.mouseDown=function(e){this.inAction=!0;var r=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.annotationId=e.source.wrapper.children[0].id,this.undoElement=i.i(s.e)(r);var n=e.source.wrapper.children[0];this.initialBounds={x:n.offsetX,y:n.offsetY,width:n.actualSize.width,height:n.actualSize.height},t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){return t.prototype.mouseMove.call(this,e),this.inAction&&this.resizeObject(e),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var r=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:i.i(s.e)(r),undoObject:i.i(s.e)(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.resizeObject=function(t){var e;e=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];var n,o,a=t.source.wrapper.children[0],s={x:a.offsetX,y:a.offsetY},h=a.rotateAngle;h+=e instanceof r.a?e.rotateAngle:0,h=(h+360)%360;var d=i.i(c.a)();i.i(c.b)(d,h,s.x,s.y);var l=this.corner.slice(5),p=this.updateSize(a,this.startPosition,this.currentPosition,l,this.initialBounds,h),g=a.offsetX-a.actualSize.width*a.pivot.x,u=a.offsetY-a.actualSize.height*a.pivot.y,f=this.getPivot(l);f={x:g+a.actualSize.width*f.x,y:u+a.actualSize.height*f.y};var m=i.i(c.c)(d,f);p.x=m.x,p.y=m.y,n=p.width,o=p.height,n=n<0?1:n,o=o<0?1:o,this.commandHandler.labelResize(e,t.source.annotation,n,o,p,t.source),this.commandHandler.updateSelector()},e}(x),N=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.annotationId=e.source.wrapper.children[0].id;var r=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.undoElement=i.i(s.e)(r),t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),e.source&&this.inAction){var i=e.source.nodes[0]?e.source.nodes[0]:e.source.connectors[0],r=void 0;r=e.source.annotation,this.commandHandler.labelRotate(i,r,this.currentPosition,e.source),this.commandHandler.updateSelector()}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.inAction=!1;var r=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0],n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:i.i(s.e)(r),undoObject:i.i(s.e)(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(x),H=function(t){function e(e){return t.call(this,e,!0)||this}return b(e,t),e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var r=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition){var n=this.currentPosition;if(r.points.push(n),this.drawingObject.wrapper.children[0].data=i.i(d.d)(this.drawingObject.shape.points),r.data=i.i(d.d)(r.points),this.inAction&&!1===o.a.equals(this.currentPosition,this.prevPosition)){var a=h.a.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,a)}}}return!0},e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,!this.drawingObject){this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var i={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1,fill:"transparent"},shape:{type:"Path",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};this.drawingObject=this.commandHandler.drawObject(i)}},e.prototype.mouseUp=function(e){this.checkPropertyValue();if(this.inAction&&(this.inAction=!1,this.drawingObject)){var r=this.drawingObject.shape,n=r.points;this.commandHandler.addObjectToDiagram(this.drawingObject);var o=this.drawingObject.id,a=this.commandHandler.diagram.nameTable[""+o];this.commandHandler.diagram.remove(a),n=this.pointReduction(n,10);var h={id:"newConnector"+i.i(s.g)(),type:"Bezier",sourcePoint:{x:n[0].x,y:n[0].y},targetPoint:{x:n[n.length-1].x,y:n[n.length-1].y},segments:[],targetDecorator:{shape:"None"},bezierSettings:{allowSegmentsReset:!1}};this.drawingObject=this.commandHandler.drawObject(h),this.drawingObject=this.bezierCurveSmoothness(n,.5,this.drawingObject,r),this.commandHandler.updateConnectorPoints(this.drawingObject),this.commandHandler.addObjectToDiagram(this.drawingObject),t.prototype.mouseUp.call(this,e)}},e.prototype.pointReduction=function(t,e){if(null===t||t.length<3)return t;var i=0,r=t.length-1,n=[];for(n.push(i),n.push(r);t[parseInt(i.toString(),10)]===t[parseInt(r.toString(),10)];)r--;this.reduction(t,i,r,e,n);var o=[];return n.sort(function(t,e){return t-e}),n.forEach(function(e){o.push(t[parseInt(e.toString(),10)])}),o},e.prototype.reduction=function(t,e,i,r,n){for(var o=0,a=0,s=e;s<i;s++){var h=this.perpendicularDistance(t[parseInt(e.toString(),10)],t[parseInt(i.toString(),10)],t[parseInt(s.toString(),10)]);h>o&&(o=h,a=s)}o>r&&0!==a&&(n.push(a),this.reduction(t,e,a,r,n),this.reduction(t,a,i,r,n))},e.prototype.perpendicularDistance=function(t,e,i){return Math.abs(.5*(t.x*e.y-e.x*t.y+(e.x*i.y-i.x*e.y)+(i.x*t.y-t.x*i.y)))/Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))*2},e.prototype.bezierCurveSmoothness=function(t,e,r,a){if(t.length<3)return r;for(var s=0;s<t.length-1;s++){var h=t[parseInt(s.toString(),10)].x,d=t[parseInt(s.toString(),10)].y,l=t[s+1].x,c=t[s+1].y,p=void 0,g=void 0;if(0===s){var u=t[parseInt(s.toString(),10)];p=u.x,g=u.y}else p=t[s-1].x,g=t[s-1].y;var f=void 0,m=void 0;if(s===t.length-2){var y=t[s+1];f=y.x,m=y.y}else f=t[s+2].x,m=t[s+2].y;var b=(p+h)/2,S=(g+d)/2,w=(h+l)/2,x=(d+c)/2,I=(l+f)/2,P=(c+m)/2,C={},z={},O={},T={};C.x=p,C.y=g,z.x=h,z.y=d,O.x=l,O.y=c,T.x=f,T.y=m;var A=o.a.findLength(C,z),L=o.a.findLength(z,O),E=o.a.findLength(O,T),B=A/(A+L),M=L/(L+E),D=b+(w-b)*B,k=S+(x-S)*B,R=w+(I-w)*M,_=x+(P-x)*M,j=D+(w-D)*e+h-D,N=k+(x-k)*e+d-k,H=R+(w-R)*e+l-R,W=_+(x-_)*e+c-_,V=new n.e(a,"segments",{type:"Bezier"},!0),X={x:j,y:N},Y={x:H,y:W},U={x:h,y:d},G={x:l,y:c};V.type="Bezier",r.segments[parseInt(s.toString(),10)]=V,0===s&&(X={x:h,y:d}),s===t.length-2&&(Y={x:l,y:c}),r.segments[parseInt(s.toString(),10)].vector1={angle:i.i(v.a)(U,X),distance:o.a.findLength(U,X)},r.segments[parseInt(s.toString(),10)].vector2={angle:i.i(v.a)(G,Y),distance:o.a.findLength(G,Y)},r.segments[parseInt(s.toString(),10)].point=G}return r},e}(x)},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(7),n=i(8),o=i(22),a=i(3),s=i(4),h=function(){function t(){}return t.getContext=function(t){return t.getContext("2d")},t.setCanvasSize=function(t,e,i){t&&(t.setAttribute("width",e.toString()),t.setAttribute("height",i.toString()))},t.prototype.renderGradient=function(t,e,i,r){var n,o,a;if("None"!==t.gradient.type){for(var s=0;s<t.gradient.stops.length;s++)n=void 0!==n?t.gradient.stops[parseInt(s.toString(),10)].offset:Math.max(n,t.gradient.stops[parseInt(s.toString(),10)].offset),o=void 0!==o?t.gradient.stops[parseInt(s.toString(),10)].offset:Math.min(o,t.gradient.stops[parseInt(s.toString(),10)].offset);if("Linear"===t.gradient.type){var h=t.gradient;a=e.createLinearGradient(i+h.x1,r+h.y1,i+h.x2,r+h.y2)}else{var d=t.gradient;a=e.createRadialGradient(i+d.fx,r+d.fy,0,i+d.cx,r+d.cy,d.r)}for(var s=0;s<t.gradient.stops.length;s++){var l=t.gradient.stops[parseInt(s.toString(),10)],c=o<0?(n+l.offset)/(2*n):l.offset/n;a.addColorStop(c,l.color)}e.fillStyle=a}return e},t.prototype.renderShadow=function(e,i,r){void 0===r&&(r=null);var o=t.getContext(i);o.save(),o.beginPath(),o.strokeStyle=o.fillStyle=e.shadow.color,o.globalAlpha=e.shadow.opacity;var a={x:0,y:0},s=n.a.transform(a,e.shadow.angle,e.shadow.distance),h=e.x+s.x,d=e.y+s.y,l=h+e.width*e.pivotX,c=d+e.height*e.pivotY;this.rotateContext(i,e.angle,l,c),r?(o.translate(h,d),this.renderPath(i,e,r),o.translate(-h,-d)):(o.rect(h,d,e.width,e.height),o.fillRect(h,d,e.width,e.height)),o.fill(),o.stroke(),o.closePath(),o.restore()},t.createCanvas=function(t,e,r){var n=i.i(s.a)("canvas",{id:t});return this.setCanvasSize(n,e,r),n},t.prototype.setStyle=function(e,i){var r=t.getContext(e);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),r.strokeStyle=i.stroke,r.lineWidth=i.strokeWidth,0===i.strokeWidth&&(r.strokeStyle="transparent"),r.globalAlpha=i.opacity;var n=[];i.dashArray&&(n=this.parseDashArray(i.dashArray)),r.setLineDash(n),i.gradient&&"None"!==i.gradient.type?"Rectangle"===i.shapeType?this.renderGradient(i,r,i.x,i.y):this.renderGradient(i,r,0,0):r.fillStyle=i.fill},t.prototype.rotateContext=function(e,i,r,n){var o=t.getContext(e);o.translate(r,n),o.rotate(i*Math.PI/180),o.translate(-r,-n)},t.prototype.setFontStyle=function(e,i){var r=t.getContext(e),n="";i.italic&&(n+="italic "),i.bold&&(n+="bold "),n+=i.fontSize+"px ",n+=i.fontFamily,r.font=n},t.prototype.parseDashArray=function(t){for(var e=[],i=-1!==t.indexOf(" ")?" ":",",r=t.split(i),n=0,o=r;n<o.length;n++){var a=o[n];e.push(Number(a))}return e},t.prototype.drawRoundedRect=function(e,i){var r=t.getContext(e);r.beginPath();var n=i.x,o=i.y,a=i.width,s=i.height,h=n+a/2,d=o+s/2;r.beginPath(),this.setStyle(e,i),r.moveTo(n,d),r.quadraticCurveTo(n,o,h,o),r.quadraticCurveTo(n+a,o,n+a,d),r.quadraticCurveTo(n+a,o+s,h,o+s),r.quadraticCurveTo(n,o+s,n,d),r.stroke()},t.prototype.drawRectangle=function(e,r,n,a){if(!0===r.visible)if(r.cornerRadius)!a&&(r.width<30||r.height<30)?this.drawRoundedRect(e,r):(r.data=i.i(o.g)(r.cornerRadius,r.height,r.width),this.drawPath(e,r));else{var s=t.getContext(e);r.shadow&&this.renderShadow(r,e),s.save(),s.beginPath();var h=(r.cornerRadius,r.x+r.width*r.pivotX),d=r.y+r.height*r.pivotY;this.rotateContext(e,r.angle,h,d),this.setStyle(e,r),s.rect(r.x,r.y,r.width,r.height),s.fillRect(r.x,r.y,r.width,r.height),s.fill(),s.stroke(),s.closePath(),s.restore()}},t.prototype.drawPath=function(e,r){var n=[];n=i.i(o.a)(r.data),n=i.i(o.h)(n),r.shadow&&this.renderShadow(r,e,n);var a=t.getContext(e);a.save(),a.beginPath();var s=r.y+r.height*r.pivotY,h=r.x+r.width*r.pivotX;"Horizontal"===r.flip||"Vertical"===r.flip?(a.translate(r.x+r.width/2,r.y+r.height/2),a.rotate(-r.angle*Math.PI/180),a.translate(-r.x-r.width/2,-r.y-r.height/2)):this.rotateContext(e,r.angle,h,s),this.setStyle(e,r),a.translate(r.x,r.y),"Horizontal"===r.flip?(a.scale(-1,1),a.translate(-1*r.width,0)):"Vertical"===r.flip?(a.scale(1,-1),a.translate(0,-1*r.height)):"Both"===r.flip&&(a.scale(-1,-1),a.translate(-1*r.width,-1*r.height)),this.renderPath(e,r,n),a.fill(),a.translate(-r.x,-r.y),a.stroke(),a.restore()},t.prototype.renderPath=function(e,i,r){if(!0===i.visible){var n,o=t.getContext(e),a=void 0,s=void 0,h=void 0,d=void 0,l=void 0,c=void 0,p=void 0,g=void 0,u=void 0,f=r;for(p=0,g=0,u=0,n=f.length;u<n;++u){var m=f[parseInt(u.toString(),10)],y=m,v=y.command;switch("x1"in y&&(h=y.x1),"x2"in y&&(l=y.x2),"y1"in y&&(d=y.y1),"y2"in y&&(c=y.y2),"x"in y&&(p=y.x),"y"in y&&(g=y.y),v){case"M":o.moveTo(p,g),y.x=p,y.y=g;break;case"L":o.lineTo(p,g),y.x=p,y.y=g;break;case"C":o.bezierCurveTo(h,d,l,c,p,g),y.x=p,y.y=g,y.x1=h,y.y1=d,y.x2=l,y.y2=c;break;case"Q":o.quadraticCurveTo(h,d,p,g),y.x=p,y.y=g,y.x1=h,y.y1=d;break;case"A":var b={x:a,y:s},S=y.r1,w=y.r2,x=y.angle*(Math.PI/180),I=y.largeArc,P=y.sweep,C={x:p,y:g},z={x:Math.cos(x)*(b.x-C.x)/2+Math.sin(x)*(b.y-C.y)/2,y:-Math.sin(x)*(b.x-C.x)/2+Math.cos(x)*(b.y-C.y)/2},O=Math.pow(z.x,2)/Math.pow(S,2)+Math.pow(z.y,2)/Math.pow(w,2);O>1&&(S*=Math.sqrt(O),w*=Math.sqrt(O));var T=Math.pow(w,2)*Math.pow(z.x,2),A=(I===P?-1:1)*Math.sqrt((Math.pow(S,2)*Math.pow(w,2)-Math.pow(S,2)*Math.pow(z.y,2)-T)/(Math.pow(S,2)*Math.pow(z.y,2)+Math.pow(w,2)*Math.pow(z.x,2)));isNaN(A)&&(A=0);var L={x:A*S*z.y/w,y:A*-w*z.x/S},E={x:(b.x+C.x)/2+Math.cos(x)*L.x-Math.sin(x)*L.y,y:(b.y+C.y)/2+Math.sin(x)*L.x+Math.cos(x)*L.y},B=this.a([1,0],[(z.x-L.x)/S,(z.y-L.y)/w]),M=[(z.x-L.x)/S,(z.y-L.y)/w],D=[(-z.x-L.x)/S,(-z.y-L.y)/w],k=this.a(M,D);this.r(M,D)<=-1&&(k=Math.PI),this.r(M,D)>=1&&(k=0);var R=P?1:-1,_=B+R*(k/2);Math.cos(_),Math.sin(_);if(y.centp=E,y.xAxisRotation=x,y.rx=S,y.ry=w,y.a1=B,y.ad=k,y.sweep=P,null!=o){var j=S>w?S:w,N=S>w?1:S/w,H=S>w?w/S:1;o.save(),o.translate(E.x,E.y),o.rotate(x),o.scale(N,H),o.arc(0,0,j,B,B+k,!P),o.scale(1/N,1/H),o.rotate(-x),o.translate(-E.x,-E.y),o.restore()}break;case"Z":case"z":o.closePath(),p=a,g=s}a=p,s=g}}},t.prototype.drawText=function(e,r,n,o,h,d,l){if(r.content&&!0===r.visible){var c=t.getContext(e);c.save(),this.setStyle(e,r),d&&(r.fontSize*=d);var p=r.x+r.width*r.pivotX,g=r.y+r.height*r.pivotY;this.rotateContext(e,r.angle,p,g),this.setFontStyle(e,r);var u=0,f=[];f=r.childNodes;var m=r.wrapBounds;if(c.fillStyle=r.color,m){var y=this.labelAlign(r,m,f);for(u=0;u<f.length;u++){var v=f[parseInt(u.toString(),10)];v.x=i.i(s.K)(v,f,u,r);var b=y.x+(d?v.x*d:v.x)-m.x,S=y.y+(d?v.dy*d:v.dy)*u+.8*r.fontSize;if(m.width>r.width&&"Wrap"!==r.textOverflow&&"NoWrap"===r.textWrapping&&(v.text=i.i(a.p)(v.text,r)),"Clip"!==r.textOverflow&&"Ellipsis"!==r.textOverflow||"Wrap"!==r.textWrapping)c.fillText(v.text,b,S);else if(S<l.actualSize.height+l.bounds.y){if("Ellipsis"===r.textOverflow&&f[u+1]){var w=f[u+1],x=y.y+w.dy*(u+1)+.8*r.fontSize;x>l.actualSize.height+l.bounds.y&&(v.text=v.text.slice(0,v.text.length-3),v.text=v.text.concat("..."))}c.fillText(v.text,b,S)}if("Underline"===r.textDecoration||"Overline"===r.textDecoration||"LineThrough"===r.textDecoration){var I=b,P=void 0,C=c.measureText(v.text).width,z=b+C,O=void 0;switch(r.textDecoration){case"Underline":P=S+2,O=S+2;break;case"Overline":P=y.y+v.dy*u,O=y.y+v.dy*u;break;case"LineThrough":P=(S+y.y+v.dy*u)/2+2,O=(S+y.y+v.dy*u)/2+2}c.beginPath(),c.moveTo(I,P),c.lineTo(z,O),c.strokeStyle=r.color,c.lineWidth=.08*r.fontSize,c.globalAlpha=r.opacity,c.stroke()}}}c.restore()}},t.prototype.loadImage=function(t,e,i,r,n){this.rotateContext(i,e.angle,r,n);var o=new Image;o.src=e.source,this.image(t,o,e.x,e.y,e.width,e.height,e)},t.prototype.drawImage=function(e,i,r,n){var o=this;if(i.visible){var a=t.getContext(e);a.save();var s=i.x+i.width*i.pivotX,h=i.y+i.height*i.pivotY,d=new Image;d.src=i.source;var l=a.canvas.id.split("_");l[l.length-1];n?d.onload=function(){o.loadImage(a,i,e,s,h)}:this.loadImage(a,i,e,s,h),a.restore()}},t.prototype.image=function(t,e,r,n,o,a,h){t.beginPath();var d=e.width,l=e.height,c=o,p=a,g=0,u=0;if(h&&"None"!==h.alignment){var f=h.alignment.toLowerCase().substr(1,3),m=h.alignment.toLowerCase().substr(5,3);if("Slice"===h.scale){var y=function(){g=c,u=l*c/d},v=function(){g=d*p/l,u=p};c>p?(y(),p>u&&v()):c===p?d>l?v():y():(v(),c>g&&y());var b=this.getSliceOffset(f,g,c,d),S=this.getSliceOffset(m,u,p,l),w=d-b,x=l-S,I=g-b*(g/d),P=u-S*(u/l),C=i.i(s.a)("canvas",{width:o.toString(),height:a.toString()});C.getContext("2d").drawImage(e,b,S,w,x,0,0,I,P),t.drawImage(C,r,n,o,a)}else if("Meet"===h.scale){var z=l/d,O=p/c;g=O>z?c:p/z,u=O>z?c*z:p,r+=this.getMeetOffset(f,g,c),n+=this.getMeetOffset(m,u,p),t.drawImage(e,0,0,d,l,r,n,g,u)}else t.drawImage(e,r,n,o,a)}else if("None"!==h.flip){var T=1,A=1;"Horizontal"!==h.flip&&"Both"!==h.flip||(r=-r,o=-o,T=-1),"Vertical"!==h.flip&&"Both"!==h.flip||(n=-n,a=-a,A=-1),t.scale(T,A),t.drawImage(e,r,n,o,a)}else t.drawImage(e,r,n,o,a);t.closePath()},t.prototype.getSliceOffset=function(t,e,i,r){switch(t){case"min":return 0;case"mid":return(e-i)/2*r/e;case"max":return(e-i)*r/e;default:return 0}},t.prototype.getMeetOffset=function(t,e,i){var r=Math.max(e,i),n=Math.min(e,i);switch(t){case"min":return 0;case"mid":return(r-n)/2;case"max":return r-n;default:return 0}},t.prototype.m=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},t.prototype.r=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(this.m(t)*this.m(e))},t.prototype.a=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(this.r(t,e))},t.prototype.labelAlign=function(t,e,i){var n=new r.a(e.width,i.length*(1.2*t.fontSize)),o={x:0,y:0},a=t.x,s=t.y,h=.5*t.width,d=.5*t.height,l=h,c=d;return"left"===t.textAlign?l=0:"center"===t.textAlign?l=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(l=1*t.width),o.x=a+l+(e?e.x:0),o.y=s+c-n.height/2,o},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(7),n=i(14),o=i(4),a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(t){function e(e,i){var r=t.call(this)||this;return r.data="",r.nodeId="",r.diagramId="",r.scale="Stretch",r.diagramId=i,r.nodeId=e,r}return a(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.canReset||(this.canReset=!0,this.template=i.i(o.j)(this,!1),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){if(this.isDirt){var e=i.i(o.E)(this.template);this.contentSize=new r.a,this.contentSize.width=e.width,this.contentSize.height=e.height;var n=e.x,a=e.y;this.templatePosition={x:n,y:a},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var s=i.i(o.F)(this.template);this.desiredSize=new r.a(s.width,s.height)}else this.desiredSize=new r.a(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new r.a(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(n.a)},function(t,e,i){"use strict";function r(t){var e;if(i.i(h.isBlazor)())e=new l.a(t),e=s(t.tooltip,e);else{var r=new d.Tooltip;r=s(t.tooltip,r),e=new d.Tooltip(r),e.beforeCollision=o,e.beforeOpen=n,e.cssClass="e-diagram-tooltip",e.opensOn="custom",e.appendTo("#"+t.element.id),e.close()}return e}function n(t){""!==this.content&&void 0!==this.content||(t.element.style.display="none")}function o(t){t.collidedPosition&&t.collidedPosition!==this.position&&(t.element.style.display="none")}function a(t,e){var i=t.tooltipObject;return s(e?e.tooltip:t.tooltip,i),i}function s(t,e){return t.content?(e.content=t.content,e.position=t.position,e.showTipPointer=t.showTipPointer,e.width=t.width,e.height=t.height,t.animation?e.animation=t.animation:e.animation={close:{effect:"None"}}):e.close(),e}i.d(e,"a",function(){return g}),e.b=r,e.c=a;var h=i(0),d=(i.n(h),i(95)),l=(i.n(d),i(46)),c=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),p([i.i(h.Property)("")],e.prototype,"content",void 0),p([i.i(h.Property)("TopLeft")],e.prototype,"position",void 0),p([i.i(h.Property)("Mouse")],e.prototype,"relativeMode",void 0),p([i.i(h.Property)(!0)],e.prototype,"showTipPointer",void 0),p([i.i(h.Property)("auto")],e.prototype,"width",void 0),p([i.i(h.Property)("auto")],e.prototype,"height",void 0),p([i.i(h.Property)("Auto")],e.prototype,"openOn",void 0),p([i.i(h.Property)()],e.prototype,"animation",void 0),e}(h.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return l}),i.d(e,"b",function(){return c}),i.d(e,"c",function(){return p}),i.d(e,"d",function(){return g}),i.d(e,"e",function(){return u});var r=i(14),n=i(23),o=i(15),a=i(7),s=i(3),h=i(11),d=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childTable=[],e.cellStyle={},e.desiredRowHeight=[],e.desiredCellWidth=[],e}return d(e,t),e.prototype.rowDefinitions=function(){return this.rowDefns},e.prototype.columnDefinitions=function(){return this.colDefns},e.prototype.addObject=function(t,e,i,r,n){if(this.rows.length>=e){var o=this.rows[parseInt(e.toString(),10)];if(o.cells.length>i){n=n||1,r=r||1;var a=o.cells[parseInt(i.toString(),10)];a.columnSpan=Math.max(n,a.columnSpan),a.rowSpan=Math.max(r,a.rowSpan);var s=new f;s=t,s.rowId=e,s.columnId=i,s.columnSpan=n,this.childTable[s.id]=s,this.addObjectToCell(s,a)}}},e.prototype.addObjectToCell=function(t,e){e.children||(e.children=[]),t.style.strokeColor="black",t.style.strokeWidth=1,t.style.fill="white",e.children.push(t)},e.prototype.updateProperties=function(t,e,i,r){this.offsetX=t,this.offsetY=e,this.width=i,this.height=r},e.prototype.setDefinitions=function(t,e){this.rowDefns=t,this.colDefns=e,this.children=[],this.rows=this.rows||[];for(var i=0;i<t.length;i++){var r=t[parseInt(i.toString(),10)],n=new g;n.cells=[];var o=new p;o.width=this.width;var a=this.colDefns;(void 0===a||a.length<1)&&(a=[o]),this.addCellInRow(a,r,n),this.rows.push(n)}},e.prototype.addCellInRow=function(t,e,r){for(var n=0;n<t.length;n++){var o=t[parseInt(n.toString(),10)],a=new u;a.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",a.id=i.i(s.g)(),a.style=this.cellStyle,a.desiredCellWidth=a.minWidth=o.width,a.desiredCellHeight=a.minHeight=e.height,r.cells.push(a),this.children.push(a)}},e.prototype.calculateSize=function(){for(var t=this.rows||[],e=0,i=0,r=0;r<t.length;r++){var n=this.rows[parseInt(r.toString(),10)];i=0;for(var o=0;o<n.cells.length;o++)if(i+=n.cells[parseInt(o.toString(),10)].desiredCellWidth,o===n.cells.length-1&&(this.width&&this.width!==i&&(n.cells[parseInt(o.toString(),10)].desiredCellWidth+=this.width-i,n.cells[parseInt(o.toString(),10)].minWidth=n.cells[parseInt(o.toString(),10)].desiredCellWidth,n.cells[parseInt(o.toString(),10)].children&&n.cells[parseInt(o.toString(),10)].children.length&&(n.cells[parseInt(o.toString(),10)].children[0].width=n.cells[parseInt(o.toString(),10)].desiredCellWidth),this.colDefns[parseInt(o.toString(),10)].width=n.cells[parseInt(o.toString(),10)].desiredCellWidth),e+=n.cells[parseInt(o.toString(),10)].desiredCellHeight,r===t.length-1&&this.height&&this.height!==e)){var a=this.height-e;if(a>0){for(var s=0;s<n.cells.length;s++)n.cells[parseInt(s.toString(),10)].desiredCellHeight+=a,n.cells[parseInt(s.toString(),10)].minHeight=n.cells[parseInt(s.toString(),10)].desiredCellHeight=n.cells[parseInt(s.toString(),10)].desiredCellHeight,n.cells[parseInt(s.toString(),10)].children&&n.cells[parseInt(s.toString(),10)].children.length&&(n.cells[parseInt(s.toString(),10)].children[0].height=n.cells[parseInt(s.toString(),10)].desiredCellHeight);this.rowDefns[parseInt(r.toString(),10)].height+=a}}}},e.prototype.updateRowHeight=function(t,e,i,r){var n=this.rows[parseInt(t.toString(),10)];this.rowDefns[parseInt(t.toString(),10)].height=e,void 0!==this.height&&(this.height+=e-n.cells[0].desiredCellHeight);for(var o=0;o<n.cells.length;o++)n.cells[parseInt(o.toString(),10)].desiredCellHeight=n.cells[parseInt(o.toString(),10)].minHeight=e,n.cells[parseInt(o.toString(),10)].children&&n.cells[parseInt(o.toString(),10)].children.length&&(n.cells[parseInt(o.toString(),10)].children[0].height=e,this.setTextRefresh(n.cells[parseInt(o.toString(),10)].children[0]));if(this.desiredRowHeight[parseInt(t.toString(),10)]=e,this.measure(new a.a(this.width,this.height)),this.arrange(this.desiredSize),i){var s=void 0!==r?this.calculateCellHeightBasedOnChildren(t,r):this.calculateCellHeight(t);s>e&&this.updateRowHeight(t,s,!1)}},e.prototype.setTextRefresh=function(t){if(t.children&&t.children.length)for(var e=t.children,i=0;i<e.length;i++)e[parseInt(i.toString(),10)]instanceof h.a&&e[parseInt(i.toString(),10)].refreshTextElement(),e[parseInt(i.toString(),10)]instanceof n.a&&this.setTextRefresh(e[parseInt(i.toString(),10)])},e.prototype.updateColumnWidth=function(t,e,i,r){this.colDefns[parseInt(t.toString(),10)].width=e,void 0!==this.width&&(this.width+=e-this.rows[this.rows.length-1].cells[parseInt(t.toString(),10)].desiredCellWidth);for(var n=0;n<this.rows.length;n++)this.setTextRefresh(this.rows[parseInt(n.toString(),10)].cells[0]),this.rows[parseInt(n.toString(),10)].cells[parseInt(t.toString(),10)].desiredCellWidth=this.rows[parseInt(n.toString(),10)].cells[parseInt(t.toString(),10)].minWidth=e,this.rows[parseInt(n.toString(),10)].cells[parseInt(t.toString(),10)].children&&this.rows[parseInt(n.toString(),10)].cells[parseInt(t.toString(),10)].children.length&&(this.rows[parseInt(n.toString(),10)].cells[parseInt(t.toString(),10)].children[0].width=e);if(this.desiredCellWidth[parseInt(t.toString(),10)]=e,this.measure(new a.a(this.width,this.height)),this.arrange(this.desiredSize),i){var o=void 0!==r?this.calculateCellWidthBasedOnChildren(t,r):this.calculateCellWidth(t);o>e&&this.updateColumnWidth(t,o,!1)}},e.prototype.calculateCellWidth=function(t){for(var e,i,r,n=0;n<this.rows.length;n++)r=this.rows[parseInt(n.toString(),10)].cells[parseInt(t.toString(),10)],1===r.columnSpan&&(i=r.outerBounds.width>r.bounds.width&&(0===r.children.length||void 0===r.children[0].maxWidth)?r.outerBounds.width:r.bounds.width,e=e?e<i?i:e:i);return e},e.prototype.calculateCellHeight=function(t){for(var e,i,r,n=this.rows[parseInt(t.toString(),10)],o=0;o<n.cells.length;o++)r=n.cells[parseInt(o.toString(),10)],i=r.outerBounds.height>r.bounds.height?r.outerBounds.height:r.bounds.height,e=e?e<i?i:e:i;return e},e.prototype.calculateCellSizeBasedOnChildren=function(t,e,i,r){var o,a=t&&t.children.length>0?t.children[0]:void 0;if(a&&1===t.columnSpan){o="Width"===e?a.bounds.right:a.bounds.bottom,r||(r="Width"===e?a.bounds.width:a.bounds.height);for(var s=0;s<a.children.length;s++){var h=a.children[parseInt(s.toString(),10)];if(h instanceof n.a&&-1===h.id.indexOf("header")){var d=("Width"===e?h.bounds.right:h.bounds.bottom)+i;if(d>o){var l=d-o+("Width"===e?a.bounds.width:a.bounds.height);r&&(r=r<l?l:r)}}}}return r},e.prototype.calculateCellWidthBasedOnChildren=function(t,e){for(var i,r,n=0;n<this.rows.length;n++)r=this.rows[parseInt(n.toString(),10)].cells[parseInt(t.toString(),10)],i=this.calculateCellSizeBasedOnChildren(r,"Width",e,i);return i},e.prototype.calculateCellHeightBasedOnChildren=function(t,e){for(var i,r,n=this.rows[parseInt(t.toString(),10)],o=0;o<n.cells.length;o++)r=n.cells[parseInt(o.toString(),10)],i=this.calculateCellSizeBasedOnChildren(r,"Height",e,i);return i},e.prototype.addRow=function(t,e,i){this.rowDefns.length>0?this.rowDefns.splice(t,0,e):this.rowDefns.push(e);var r=new g;r.cells=[],(new p).width=this.width;var n=this.colDefns;this.addCellInRow(n,e,r),t>this.rows.length-1?this.rows.push(r):this.rows.splice(t,0,r),i&&(this.measure(new a.a(this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.addColumn=function(t,e,i){var r,n,o,s,h=this.rows;this.colDefns.length>0?this.colDefns.splice(t,0,e):this.colDefns.push(e),void 0!==this.width&&(this.width+=e.width);for(var d=0;d<h.length;d++)r=h[parseInt(d.toString(),10)],n=this.rowDefns[parseInt(d.toString(),10)],o=e,s=new u,s.style=this.cellStyle,s.desiredCellWidth=s.minWidth=o.width,s.desiredCellHeight=s.minHeight=n.height,s.children=[],t>r.cells.length-1?r.cells.push(s):r.cells.splice(t,0,s),this.children.push(s);i&&(this.measure(new a.a(this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.removeRow=function(t){var e,i,r=this.rows,n=r[parseInt(t.toString(),10)];this.height-=this.rowDefns[parseInt(t.toString(),10)].height;for(var o=0;o<n.cells.length;o++)e=n.cells[parseInt(o.toString(),10)],this.children.splice(this.children.indexOf(e),1),(i=document.getElementById(e.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i);this.rows.splice(t,1),this.rowDefns.splice(t,1),this.measure(new a.a(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.removeColumn=function(t){var e,i,r=this.rows;this.width-=this.colDefns[parseInt(t.toString(),10)].width;for(var n=0;n<r.length;n++)e=r[parseInt(n.toString(),10)].cells[parseInt(t.toString(),10)],this.children.splice(this.children.indexOf(e),1),i=document.getElementById(e.id+"_groupElement"),i&&i.parentElement&&i.parentElement.removeChild(i),r[parseInt(n.toString(),10)].cells.splice(t,1);this.colDefns.splice(t,1),this.measure(new a.a(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateRowIndex=function(t,e){var i=this.rows[parseInt(t.toString(),10)];this.rows.splice(t,1),this.rows.splice(e,0,i);var r=this.rowDefns[parseInt(t.toString(),10)];this.rowDefns.splice(t,1),this.rowDefns.splice(e,0,r),this.measure(new a.a(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateColumnIndex=function(t,e,i){for(var r,n,o=t;o<this.rows.length;o++)r=this.rows[parseInt(o.toString(),10)],n=this.rows[parseInt(o.toString(),10)].cells[parseInt(e.toString(),10)],r.cells.splice(e,1),r.cells.splice(i,0,n);var s=this.colDefns[parseInt(e.toString(),10)];this.colDefns.splice(e,1),this.colDefns.splice(i,0,s);var h=this.desiredCellWidth[parseInt(e.toString(),10)];this.desiredCellWidth.splice(e,1),this.desiredCellWidth.splice(i,0,h),this.measure(new a.a(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.measure=function(e){var i=void 0;if(void 0!==this.rows&&this.rows.length>0){var r=0,n=0;i=new a.a(0,0),this.calculateSize();for(var o=0,s=this.rows;o<s.length;o++){var h=s[o];n=0;for(var d=0,l=h.cells;d<l.length;d++){var c=l[d],p=c.measure(new a.a(c.desiredCellWidth,c.desiredCellHeight));1===c.rowSpan&&(0===n||void 0===this.desiredRowHeight[parseInt(r.toString(),10)]?this.desiredRowHeight[parseInt(r.toString(),10)]=p.height:this.desiredRowHeight[parseInt(r.toString(),10)]=Math.max(p.height,this.desiredRowHeight[parseInt(r.toString(),10)])),1===c.columnSpan&&(0===r||void 0===this.desiredCellWidth[parseInt(n.toString(),10)]?this.desiredCellWidth[parseInt(n.toString(),10)]=p.width:this.desiredCellWidth[parseInt(n.toString(),10)]=Math.max(p.width,this.desiredCellWidth[parseInt(n.toString(),10)]),r===this.rows.length-1&&(i.width+=this.desiredCellWidth[parseInt(n.toString(),10)])),n++}i.height+=this.desiredRowHeight[parseInt(r.toString(),10)],r++}r=n=0;for(var g=0,u=0,f=this.rows;u<f.length;u++){var h=f[u];n=0;for(var m=0,y=0,v=h.cells;y<v.length;y++){var c=v[y];if(1!==c.columnSpan){c.desiredSize.width=0;for(var b=0;b<c.columnSpan;b++)b+n<h.cells.length&&(c.desiredSize.width+=this.desiredCellWidth[b+n],c.minWidth=c.desiredSize.width,c.measure(c.desiredSize));n++}else c.desiredSize.width=this.desiredCellWidth[parseInt(m.toString(),10)],c.measure(c.desiredSize);if(1!==c.rowSpan){c.desiredSize.height=0;for(var b=0;b<c.rowSpan;b++)b+g<this.rows.length&&(c.desiredSize.height+=this.desiredRowHeight[b+g],c.minHeight=c.desiredSize.height,c.measure(c.desiredSize))}else c.desiredSize.height=this.desiredRowHeight[parseInt(g.toString(),10)],c.measure(c.desiredSize);r++,m++}g++}}return void 0===i&&(i=t.prototype.validateDesiredSize.call(this,i,e)),t.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},e.prototype.arrange=function(t,e){var i=0,r=0;if(void 0!==this.rows&&this.rows.length>0){for(var n=this.offsetX-t.width*this.pivot.x,o=this.offsetY-t.height*this.pivot.y,s=n,h=0,d=this.rows;h<d.length;h++){var l=d[h];s=n,i=0;for(var c=0,p=l.cells;c<p.length;c++){var g=p[c],u=Math.max(this.desiredCellWidth[parseInt(i.toString(),10)],g.desiredSize.width),f=Math.max(this.desiredRowHeight[parseInt(r.toString(),10)],g.desiredSize.height);g.offsetX=s+u*g.pivot.x,g.offsetY=o+f*g.pivot.y,s+=this.desiredCellWidth[parseInt(i.toString(),10)],g.arrange(new a.a(u,f)),i++}o+=this.desiredRowHeight[parseInt(r.toString(),10)],r++}if(e){var g=void 0,l=void 0,m=void 0,y=void 0,v=void 0;for(r=0;r<this.rows.length;r++)for(l=this.rows[parseInt(r.toString(),10)],i=0;i<l.cells.length;i++)if(g=l.cells[parseInt(i.toString(),10)],g.columnSpan>1&&this.children.splice(this.children.indexOf(g)+1,g.columnSpan-1),g.rowSpan>1)for(m=r,y=0;m+g.rowSpan-1<this.rows.length&&y<g.rowSpan-1;m++,y++)v=this.rows[m+1].cells[parseInt(i.toString(),10)],this.children.splice(this.children.indexOf(v),1)}}return this.actualSize=t,this.updateBounds(),t},e}(o.a),c=function(){function t(){this.height=void 0}return t}(),p=function(){function t(){this.width=void 0}return t}(),g=function(){function t(){this.cells=null}return t}(),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnSpan=1,e.rowSpan=1,e}return d(e,t),e}(n.a),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rowId=0,e.columnId=0,e.rowSpan=1,e.columnSpan=1,e}return d(e,t),e}(r.a)},function(t,e,i){"use strict";i.d(e,"a",function(){return $});var r=i(0),n=(i.n(r),i(28)),o=i(39),a=i(38),s=i(68),h=i(85),d=i(15),l=i(6),c=i(2),p=i(10),g=i(51),u=i(69),f=i(35),m=i(7),y=i(1),v=i(17),b=i(11),S=i(5),w=i(33),x=i(20),I=i(23),P=i(31),C=i(50),z=i(57),O=i(55),T=i(53),A=i(73),L=i(26),E=i(75),B=i(4),M=i(41),D=i(9),k=i(3),R=i(30),_=i(21),j=i(52),N=i(29),H=i(24),W=i(19),V=i(13),X=i(70),Y=i(48),U=i(66),G=i(40),F=i(34),Z=i(8),q=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Q=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},K=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function a(t){try{h(r.next(t))}catch(t){o(t)}}function s(t){try{h(r.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}h((r=r.apply(t,e||[])).next())})},J=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,o=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(t){i=[6,t],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,o,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},$=function(t){function e(e,n){var o=t.call(this,e,n)||this;o.version=17.1,o.checkMenu=!1,o.isServerUpdate=!1,o.oldNodeObjects=[],o.oldDiagramObject={},o.oldConnectorObjects=[],o.canEnableBlazorObject=!1,o.connectorTable={},o.groupTable={},o.scrollActions=y.t.None,o.blazorActions=y.i.Default,o.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},o.textEditing=!1,o.isTriggerEvent=!1,o.preventNodesUpdate=!1,o.preventConnectorsUpdate=!1,o.callBlazorModel=!0,o.selectionConnectorsList=[],o.deleteVirtualObject=!1,o.canLayout=!0,o.swimlaneChildTable={},o.swimlaneZIndexTable={},o.canExpand=!1,o.changedConnectorCollection=[],o.changedNodesCollection=[],o.previousNodeCollection=[],o.previousConnectorCollection=[],o.crudDeleteNodes=[],o.previousSelectedObjects=[],o.blazorAddorRemoveCollection=[],o.blazorRemoveIndexCollection=[],o.diagramid=88123,o.selectedObject={helperObject:void 0,actualObject:void 0},o.renderTimer=null;var a,s,h=i.i(r.isBlazor)()&&window&&window.Blazor&&!o.dataSourceSettings.dataSource;o.ignoreCollectionWatch=!0;for(var d=0;e&&e.nodes&&d<e.nodes.length;d++)a=e.nodes[parseInt(d.toString(),10)],s=o.nodes[parseInt(d.toString(),10)],a.children&&a.children.length>0&&(a.style&&a.style.fill||(s.style.fill="transparent"),a.style&&a.style.strokeColor||(s.style.strokeColor="transparent")),a.shape&&"UmlActivity"===a.shape.type&&i.i(c.c)(a,s),a.shape&&"SwimLane"===a.shape.type&&i.i(c.d)(a,s),h&&o.previousNodeCollection.push(i.i(k.e)(s,void 0,void 0,!0)),o.nodeDefaults&&i.i(c.B)(s,a,o.nodeDefaults),o.updateAnnotationText(s.annotations);if(e&&e.connectors)for(var d=0;e&&e.connectors&&d<e.connectors.length;d++)a=e.connectors[parseInt(d.toString(),10)],s=o.connectors[parseInt(d.toString(),10)],h&&o.previousConnectorCollection.push(i.i(k.e)(s,void 0,void 0,!0)),o.connectorDefaults&&i.i(c.B)(s,a,o.connectorDefaults),o.updateAnnotationText(s.annotations);for(var d=0;e&&e.connectors&&d<e.connectors.length;d++){var l=e.connectors[parseInt(d.toString(),10)],p=o.connectors[parseInt(d.toString(),10)];if(l.shape&&"None"!==l.shape.type&&i.i(c.m)(l,p),i.i(r.isBlazor)()){var g=i.i(k.e)(o.bulkChanges);o.enableServerDataBinding(!0),o.protectPropertyChange(!0);for(var u=Object.keys(g),f=0;f<u.length;f++){var m=u[parseInt(f.toString(),10)],v=m.split("-");v&&v[0]&&("nodes"===v[0]&&(g[""+m].sfIndex=Number(v[1]),o.changedNodesCollection.push(g[""+m])),"connectors"===v[0]&&(g[""+m].sfIndex=Number(v[1]),o.changedConnectorCollection.push(g[""+m])))}}}return o}return q(e,t),e.prototype.updateAnnotationText=function(t){if(i.i(r.isBlazor)()&&t.length>0)for(var e=0;t&&e<t.length;e++){var n=t[parseInt(e.toString(),10)];n.content=n.content.split("\\n").join("\n")}},e.prototype.callFromServer=function(t){if("getParentID"===t.methodName){var e=t.id;return this.nameTable[""+e].parentId}if("getEdges"===t.methodName){var i=t.outEdge,e=t.id;return i?this.nameTable[""+e].outEdges:this.nameTable[""+e].inEdges}if("updateDiagramObjects"===t.methodName){var r=t.obj;if(this.isServerUpdate=!0,t.IsAdding){this.add.apply(this,r)}else{this.remove.apply(this,r)}this.isServerUpdate=!1}else if("invokeLoadDiagramMethod"===t.methodName){this.loadDiagram(t.data)}},e.prototype.clearCollection=function(t){for(var e,i=[],r=0,n=Object.keys(this.nameTable);r<n.length;r++){var o=n[r];e=this.nameTable[""+o],e&&(t&&e instanceof p.a||!t&&e instanceof l.a)&&i.push(e)}this.clearObjects(i)},e.prototype.onPropertyChanged=function(n,o){var a=!0,s=!1,h=!1;if(this.diagramActions&y.p.Render){for(var d=0,l=Object.keys(n);d<l.length;d++){switch(l[d]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var p=0,g=this.views;p<g.length;p++){var u=g[p],f=this.views[""+u];f instanceof e||f.updateView(f)}break;case"nodes":if(n.nodes.length>0&&0===o.nodes.length)this.clearCollection(),h=!0;else{for(var m=0,v=Object.keys(n.nodes);m<v.length;m++){var b=v[m],S=Number(b),w=this.nodes[parseInt(S.toString(),10)],x=n.nodes[parseInt(S.toString(),10)];n.nodes[parseInt(S.toString(),10)].style&&n.nodes[parseInt(S.toString(),10)].style.gradient&&(this.updateGradient(n.nodes[parseInt(S.toString(),10)],o.nodes[parseInt(S.toString(),10)],this.nodes[parseInt(S.toString(),10)]),this.nodes[parseInt(S.toString(),10)].oldGradientValue=i.i(k.e)(n.nodes[parseInt(S.toString(),10)].style.gradient)),s=s||void 0!==x.excludeFromLayout,this.nodePropertyChange(w,o.nodes[parseInt(S.toString(),10)],x,void 0,!0,!0);var I={element:i.i(c.b)(w),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:i.i(c.b)(o.nodes[parseInt(S.toString(),10)]),newValue:i.i(c.b)(n.nodes[parseInt(S.toString(),10)])};i.i(r.isBlazor)()&&(I.element={node:i.i(c.b)(w)},I.oldValue={node:i.i(c.b)(void 0)},I.newValue={node:i.i(c.b)(void 0)}),this.triggerEvent(y.r.propertyChange,I),a&&(a=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":;if(n.connectors.length>0&&0===o.connectors.length)this.clearCollection(!0),h=!0;else{for(var P=0,C=Object.keys(n.connectors);P<C.length;P++){var b=C[P],S=Number(b),w=this.connectors[parseInt(S.toString(),10)],x=n.connectors[parseInt(S.toString(),10)];x&&(x.sourceDecorator||x.targetDecorator)&&(this.diagramActions|=y.p.DecoratorPropertyChange),this.connectorPropertyChange(w,o.connectors[parseInt(S.toString(),10)],x,!0,!0),x&&(x.sourceDecorator||x.targetDecorator)&&(this.diagramActions=this.diagramActions&~y.p.DecoratorPropertyChange);var I={element:i.i(c.b)(w),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:i.i(c.b)(o.connectors[parseInt(S.toString(),10)]),newValue:i.i(c.b)(n.connectors[parseInt(S.toString(),10)])};i.i(r.isBlazor)()&&(I.element={connector:i.i(c.b)(w)},I.oldValue={connector:i.i(c.b)(void 0)},I.newValue={connector:i.i(c.b)(void 0)}),this.triggerEvent(y.r.propertyChange,I),w&&w.parentId&&"UmlClassifier"===this.nameTable[w.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[w.parentId]||w),a&&(a=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(n.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(n.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(n);break;case"commandManager":this.initCommands();break;case"layout":s=!0;break;case"segmentThumbShape":this.updateSelector();break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?h=!0:s=!0;break;case"tooltip":i.i(R.b)(this);break;case"rulerSettings":this.updateRulerSettings(n);break;case"layers":this.updateLayer(n);break;case"scrollSettings":this.scrollActions|=y.t.PropertyChange,this.updateScrollSettings(n),this.scrollActions&=~y.t.PropertyChange,this.scrollSettings.horizontalOffset=-this.scroller.horizontalOffset||0,this.scrollSettings.verticalOffset=-this.scroller.verticalOffset||0;break;case"locale":n.locale!==o.locale&&(this.realActions|=y.a.PreventDataInit,t.prototype.refresh.call(this),this.realActions&=~y.a.PreventDataInit);break;case"contextMenuSettings":if(void 0!==n.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=n.contextMenuSettings.showCustomMenuOnly),void 0!==n.contextMenuSettings.show&&(this.contextMenuSettings.show=n.contextMenuSettings.show),n.contextMenuSettings.items){for(var z=n.contextMenuSettings.items,O=0,T=Object.keys(z);O<T.length;O++){var b=T[O],S=Number(b);this.contextMenuSettings.items[parseInt(S.toString(),10)]=z[parseInt(S.toString(),10)]}this.contextMenuModule&&this.contextMenuModule.refreshItems()}break;case"serializationSettings":void 0!==n.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=n.serializationSettings.preventDefaults)}}if(s&&!h){if(o.layout&&"DifferentPoint"===o.layout.connectionPointOrigin&&"SamePoint"===n.layout.connectionPointOrigin||o.layout&&n.layout&&!n.layout.enableRouting&&o.layout.enableRouting){for(var A=0;A<this.nodes.length;A++){var L=this.nodes[parseInt(A.toString(),10)];if(L.ports&&L.ports.length>0){for(var E=[],B=L.ports.length-1;B>=0;B--)"LineDistribution"===L.ports[parseInt(B.toString(),10)].id.split("_")[1]&&E.push(L.ports[parseInt(B.toString(),10)]);this.removePorts(L,E)}}for(var B=0;B<this.connectors.length;B++){var M=this.connectors[parseInt(B.toString(),10)],D=M.sourcePortID,_=M.targetPortID;M.sourcePortID="",M.targetPortID="",M.sourcePortWrapper=void 0,M.targetPortWrapper=void 0,M.segments=[],this.connectorPropertyChange(M,{sourcePortID:D,targetPortID:_},{sourcePortID:"",targetPortID:""})}}this.doLayout(),this.renderReactTemplates()}if(a&&this.propertyChange){var I={element:i.i(c.b)(this),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:i.i(c.b)(o),newValue:i.i(c.b)(n)};i.i(r.isBlazor)()&&(I.element={diagram:i.i(c.b)(this)},I.oldValue={diagram:i.i(c.b)(void 0)},I.newValue={diagram:i.i(c.b)(void 0)}),this.triggerEvent(y.r.propertyChange,I)}if(!h&&this.canLogChange()&&this.modelChanged(n,o)){var j=[],N=[],H=[];if(n.nodes&&Object.keys(n.nodes).length>0)for(var W=0,V=Object.keys(n.nodes);W<V.length;W++){var b=V[W],X=parseInt(b);N.push(this.nodes[parseInt(X.toString(),10)].id)}if(n.connectors&&Object.keys(n.connectors).length>0)for(var Y=0,U=Object.keys(n.connectors);Y<U.length;Y++){var b=U[Y],G=parseInt(b);H.push(this.connectors[parseInt(G.toString(),10)].id)}j=N.concat(H);var F={type:"PropertyChanged",undoObject:o,redoObject:n,category:"Internal"};this.historyManager&&this.addHistoryEntry(F,j)}this.resetDiagramActions(),h&&(this.initObjects(!0),this.refreshDiagramLayer(),s&&this.doLayout());var Z=1===Object.keys(n).length&&void 0!==n.scrollSettings;if(!h)for(var q=0,Q=this.views;q<Q.length;q++){var f=Q[q],u=this.views[""+f];u instanceof e||(n.scrollSettings&&(n.scrollSettings.currentZoom,o.scrollSettings.currentZoom),Z||this.refreshCanvasDiagramLayer(u))}}},e.prototype.updateSnapSettings=function(t){(void 0!==t.snapSettings.constraints||t.snapSettings.horizontalGridlines||t.snapSettings.verticalGridlines||t.snapSettings.gridType)&&this.diagramRenderer.updateGrid(this.snapSettings,i.i(B.p)(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.updateGradient=function(t,e,r){if(r.oldGradientValue)for(var n=r,o=r,a=e.style.gradient,s=e.style.gradient,h=0,d=Object.keys(t.style.gradient);h<d.length;h++){var l=d[h];switch(l){case"type":n.type&&(a.type=n.type);break;case"x1":n.x1&&(a.x1=n.x1);break;case"x2":n.x2&&(a.x2=n.x2);break;case"y1":n.y1&&(a.y1=n.y1);break;case"y2":n.y2&&(a.y2=n.y2);break;case"cx":o.cx&&(s.cx=o.cx);break;case"cy":o.cy&&(s.cy=o.cy);break;case"fx":o.fx&&(s.fx=o.fx);break;case"fy":o.fy&&(s.fy=o.fy);break;case"r":o.r&&(s.r=o.r);break;case"stops":if(r.oldGradientValue.stops){var c=Object.values(i.i(k.e)(r.oldGradientValue.stops));c.pop(),e.style.gradient.stops=c}}}},e.prototype.updateRulerSettings=function(t){void 0!==t.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,i.i(B.p)(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==t.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===t.rulerSettings.horizontalRuler&&void 0===t.rulerSettings.verticalRuler||(void 0!==t.rulerSettings.horizontalRuler.thickness||void 0!==t.rulerSettings.verticalRuler.thickness?(i.i(f.b)(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):i.i(f.c)(this)),this.diagramRenderer.updateGrid(this.snapSettings,i.i(B.p)(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.getPersistData=function(){var t=["loaded"];return this.addOnPersist(t)},e.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new h.a,this.initializeServices(),this.setCulture();window.measureElement&&(window.measureElement=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},e.prototype.initializePrivateVariables=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-diagram").length;this.element.id="diagram_"+this.diagramid+"_"+t}this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new T.a(this),this.eventHandler=new O.a(this,this.commandHandler),this.spatialSearch=new E.a(this.nameTable),this.scroller=new A.a(this)},e.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new r.L10n(this.getModuleName(),this.defaultLocale,this.locale))},e.prototype.setCulture=function(){this.localeObj=new r.L10n(this.getModuleName(),this.defaultLocale,this.locale)},e.prototype.render=function(){this.refreshing&&this.dataSourceSettings.dataSource&&!this.isLoading&&(this.nodes=[],this.connectors=[]),this.ignoreCollectionWatch=!0;window.domTable={};var t=[];if(i.i(r.isBlazor)()){for(var e=[],n=[],s=0;s<this.changedNodesCollection.length;s++)e.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedNodesCollection[parseInt(s.toString(),10)]));for(var s=0;s<this.changedConnectorCollection.length;s++)n.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedConnectorCollection[parseInt(s.toString(),10)]));var h="sfBlazor",d="Blazor",l={nodes:e,connectors:n};if(window&&window[""+d]&&!this.dataSourceSettings.dataSource&&(e.length>0||n.length>0)){var c={methodName:"UpdateBlazorProperties",diagramobj:l};window[""+h].updateBlazorProperties(c,this)}}this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new a.a(this.element.id,new o.a,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0);var p=!1;if(i.i(r.isBlazor)()&&!this.dataSourceSettings.dataSource&&"None"!==this.layout.type){for(var g=0,u=this.nodes;g<u.length;g++){var c=u[g];this.insertValue(i.i(k.e)(c),!0)}for(var f=0,m=this.connectors;f<m.length;f++){var c=m[f];this.insertValue(i.i(k.e)(c),!1)}p=!0}for(var v=this.nodes,s=0;s<v.length;s++)v[parseInt(s.toString(),10)].isExpanded||t.push(v[parseInt(s.toString(),10)]);if(t.length)for(var s=t.length-1;s>=0;s--)0===s?this.commandHandler.expandNode(t[parseInt(s.toString(),10)],this,!1):this.commandHandler.expandNode(t[parseInt(s.toString(),10)],this,!0);if(this.canLayout&&this.doLayout(),p&&this.commandHandler.getBlazorOldValues(),this.lineRoutingModule){var b=[],S=[],w=[];if(i.i(r.isBlazor)())for(var x=0,I=this.connectors;x<I.length;x++){var c=I[x];b.push(i.i(k.e)(c,void 0,void 0,!0))}if(this.connectors.sourceID!==this.connectors.targetID&&this.lineRoutingModule.lineRouting(this),i.i(r.isBlazor)()){for(var P=0,C=this.connectors;P<C.length;P++){var c=C[P];S.push(i.i(k.e)(c,void 0,void 0,!0))}if(this.commandHandler.getObjectChanges(b,S,w),!(this.blazorActions&y.i.ClearObject)){var h="sfBlazor",d="Blazor",l={nodes:[],connectors:w};if(window&&window[""+d]){var c={methodName:"UpdateBlazorProperties",diagramobj:l};window[""+h].updateBlazorProperties(c,this)}}}}this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,i.i(B.p)(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),r.Browser.isDevice&&(this.tool=y.k.ZoomPan|y.k.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=i.i(R.b)(this),this.diagramActions=y.p.Render,this.initCommands();var z=document.getElementsByClassName(this.element.id+"_hiddenUserHandleTemplate");i.i(B.q)(this.userHandleTemplate,z,this.selectedItems,this.element.id),i.i(r.isBlazor)()&&this.layout&&"None"===this.layout.type&&this.updateTemplate(),this.isLoading=!1,this.renderComplete(),this.updateFitToPage(),this.refreshing&&this.renderReactTemplates()},e.prototype.updateFitToPage=function(){this.pageSettings&&this.pageSettings.fitOptions&&this.pageSettings.fitOptions.canFit&&this.fitToPage(this.pageSettings.fitOptions)},e.prototype.updateTemplate=function(){for(var t,e,n,o=0;o<this.nodes.length;o++)if(t=this.nodes[parseInt(o.toString(),10)],"HTML"===t.shape.type||"Native"===t.shape.type){i.i(r.updateBlazorTemplate)("diagramsf_node_template","NodeTemplate",this,!0);break}for(var o=0;o<this.nodes.length;o++)if(t=this.nodes[parseInt(o.toString(),10)],(e=t.annotations[0])&&"Template"===e.annotationType){i.i(r.updateBlazorTemplate)("diagramsf_annotation_template","AnnotationTemplate",this,!1);break}for(var o=0;o<this.connectors.length;o++)if((n=this.connectors[parseInt(o.toString(),10)].annotations[0])&&"Template"===n.annotationType){i.i(r.updateBlazorTemplate)("diagramsf_annotation_template","AnnotationTemplate",this,!1);break}for(var o=0;o<this.selectedItems.userHandles.length;o++)if(this.selectedItems.userHandles[parseInt(o.toString(),10)].template){i.i(r.updateBlazorTemplate)("diagramsf_userHandle_template","UserHandleTemplate",this,!1);break}},e.prototype.resetTemplate=function(){for(var t,e,n,o=0;o<this.nodes.length;o++)if(t=this.nodes[parseInt(o.toString(),10)],"HTML"===t.shape.type&&""===t.shape.content){i.i(r.resetBlazorTemplate)("diagramsf_node_template","NodeTemplate");break}for(var o=0;o<this.nodes.length;o++)if(t=this.nodes[parseInt(o.toString(),10)],(e=t.annotations[0])&&"Template"===e.annotationType&&e.content instanceof HTMLElement){i.i(r.resetBlazorTemplate)("diagramsf_annotation_template","AnnotationTemplate");break}for(var o=0;o<this.connectors.length;o++)if((n=this.connectors[parseInt(o.toString(),10)].annotations[0])&&"Template"===n.annotationType&&n.content instanceof HTMLElement){i.i(r.resetBlazorTemplate)("diagramsf_annotation_template","AnnotationTemplate");break}for(var o=0;o<this.selectedItems.userHandles.length;o++)if(this.selectedItems.userHandles[parseInt(o.toString(),10)].template){i.i(r.updateBlazorTemplate)("diagramsf_userHandle_template","UserHandleTemplate",this,!1);break}},e.prototype.renderInitialCrud=function(){var t=this;if(t.dataSourceSettings.crudAction.read){var e=new r.Ajax(t.dataSourceSettings.crudAction.read,"GET",!1);e.onSuccess=function(e){t.dataSourceSettings.dataManager?t.dataSourceSettings.dataManager=JSON.parse(e):t.dataSourceSettings.dataSource=JSON.parse(e),t.dataBind()},e.send().then()}if(t.dataSourceSettings.connectionDataSource.crudAction.read){var e=new r.Ajax(t.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1);e.onSuccess=function(e){t.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(e),t.dataBind()},e.send().then()}},e.prototype.getModuleName=function(){return"diagram"},e.prototype.getClassName=function(){return"Diagram"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t.push({member:"Bridging",args:[]}),t.push({member:"ConnectorEditingTool",args:[]}),i.i(r.isBlazor)()&&t.push({member:"BlazorTooltip",args:[]}),this.constraints&y.j.UndoRedo&&t.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&t.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&t.push({member:"Snapping",args:[this]}),t.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&t.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||t.push({member:"OrganizationalChart",args:[this]}),"ComplexHierarchicalTree"===this.layout.type&&t.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&t.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&t.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&t.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&t.push({member:"DataBinding",args:[]}),this.constraints&y.j.LineRouting&&t.push({member:"LineRouting",args:[]}),(this.layout&&"DifferentPoint"===this.layout.connectionPointOrigin||"Linear"===this.layout.arrangement||this.layout.enableRouting)&&t.push({member:"LineDistribution",args:[]}),t},e.prototype.removeUserHandlesTemplate=function(){if(this.selectedItems.userHandles.length)for(var t=0;t<this.selectedItems.userHandles.length;t++)for(var e=0,r=this.views;e<r.length;e++){var n=r[e];i.i(B.m)(this.selectedItems.userHandles[parseInt(t.toString(),10)].name+"_template_hiddenUserHandle",n)}},e.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),this.removeUserHandlesTemplate(),this.clearTemplate(),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var e=document.getElementsByClassName("e-diagram-tooltip");e.length>0;)e[0].parentNode.removeChild(e[0]);var i=document.getElementById(this.element.id+"content");i&&this.element.removeChild(i);if(window.measureElement){window.measureElement.usageCount-=1;window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null)}}window.domTable={};for(var r=0;r<this.layers.length;r++){this.layers[parseInt(r.toString(),10)].zIndexTable={}}this.diagramActions=void 0},e.prototype.wireEvents=function(){var t=r.Browser.touchStartEvent,e=r.Browser.touchEndEvent,i=r.Browser.touchMoveEvent,n=r.Browser.isPointer?"pointerleave":"mouseleave",o=r.Browser.isPointer,a="mozilla"===r.Browser.info.name?o?"mousewheel":"DOMMouseScroll":"mousewheel";r.EventHandler.add(this.diagramCanvas,t,this.eventHandler.mouseDown,this.eventHandler),r.EventHandler.add(this.diagramCanvas,i,this.eventHandler.mouseMove,this.eventHandler),r.EventHandler.add(this.diagramCanvas,e,this.eventHandler.mouseUp,this.eventHandler),r.EventHandler.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),r.EventHandler.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),r.EventHandler.add(this.diagramCanvas,"keyup",this.eventHandler.keyUp,this.eventHandler),r.EventHandler.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),r.EventHandler.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),r.EventHandler.add(this.diagramCanvas,a,this.eventHandler.mouseWheel,this.eventHandler),r.EventHandler.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},e.prototype.unWireEvents=function(){var t=r.Browser.touchStartEvent,e=r.Browser.touchMoveEvent,i=r.Browser.isPointer?"pointerleave":"mouseleave",n=r.Browser.isPointer,o="mozilla"===r.Browser.info.name?n?"mousewheel":"DOMMouseScroll":"mousewheel",a=r.Browser.touchEndEvent;r.EventHandler.remove(this.diagramCanvas,t,this.eventHandler.mouseDown),r.EventHandler.remove(this.diagramCanvas,e,this.eventHandler.mouseMove),r.EventHandler.remove(this.diagramCanvas,a,this.eventHandler.mouseUp),r.EventHandler.remove(this.diagramCanvas,i,this.eventHandler.mouseLeave),r.EventHandler.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),r.EventHandler.remove(this.diagramCanvas,"keyup",this.eventHandler.keyUp),r.EventHandler.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),r.EventHandler.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),r.EventHandler.remove(this.diagramCanvas,o,this.eventHandler.mouseWheel),r.EventHandler.remove(window,"resize",this.eventHandler.windowResize)},e.prototype.select=function(t,e,n){if(i.i(r.isBlazor)()){for(var o=0;o<t.length;o++)t[parseInt(o.toString(),10)]=this.nameTable[t[parseInt(o.toString(),10)].id];t=this.nameTable[t.id]||t}null!=t&&this.commandHandler.selectObjects(t,e,n)},e.prototype.getDiagramAction=function(t){var e;return 2===t&&y.p.Render?e="Render":t&y.p.UndoRedo?e="UndoRedo":t&y.p.PublicMethod?e="PublicMethod":t&y.p.ToolAction?e="ToolAction":t&y.p.TextEdit?e="TextEdit":t&y.p.Group?e="Group":t&y.p.Interactions?e="Interactions":t&y.p.PreventHistory?e="PreventHistory":t&y.p.DecoratorPropertyChange?e="DecoratorPropertyChange":t&y.p.PreventZIndexOnDragging?e="PreventZIndexOnDragging":t&y.p.isGroupDragging?e="isGroupDragging":t&y.p.DragUsingMouse&&(e="DragUsingMouse"),e},e.prototype.selectAll=function(){var t=[];t=this.getObjectsOfLayer(this.activeLayer.objects),this.select(t)},e.prototype.unSelect=function(t){i.i(r.isBlazor)()&&(this.commandHandler.oldSelectedObjects=i.i(k.e)(this.selectedItems),t=this.nameTable[t.id]||t),t&&i.i(L.b)(this,t)&&(this.commandHandler.unSelect(t),this.commandHandler.updateBlazorSelector())},e.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},e.prototype.updateViewPort=function(){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.eventHandler.updateViewPortSize(this.element),this.updateBlazorDiagramProperties(t,!0)},e.prototype.cutCommand=function(){this.cut()},e.prototype.cut=function(){this.commandHandler.cut()},e.prototype.addProcess=function(t,e){this.bpmnModule&&this.bpmnModule.addProcess(t,e,this)},e.prototype.removeProcess=function(t){this.bpmnModule&&this.bpmnModule.removeProcess(t,this)},e.prototype.pasteCommand=function(){this.paste()},e.prototype.paste=function(t){this.commandHandler.paste(t)},e.prototype.fitToPage=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.fitToPage(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.bringIntoView=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.bringIntoView(t,!0),this.updateBlazorDiagramProperties(e,!0)},e.prototype.bringToCenter=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.bringToCenter(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.copyCommand=function(){this.copy()},e.prototype.copy=function(){return this.commandHandler.copy()},e.prototype.group=function(){var t=[];t=this.selectedItems.nodes,t=t.concat(this.selectedItems.connectors),t.length>1&&(this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.group(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues())},e.prototype.unGroup=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.unGroup(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},e.prototype.sendToBack=function(){this.commandHandler.sendToBack()},e.prototype.setActiveLayer=function(t){var e=this.commandHandler.getLayer(t);this.activeLayer=e},e.prototype.addLayer=function(t,e){this.commandHandler.addLayer(t,e)},e.prototype.addDiagramLayer=function(t,e){this.commandHandler.addLayer(t,e,!1)},e.prototype.removeLayer=function(t){this.commandHandler.removeLayer(t,i.i(r.isBlazor)())},e.prototype.removeDiagramLayer=function(t){this.commandHandler.removeLayer(t,!1)},e.prototype.moveObjects=function(t,e){var r=i.i(k.e)(this.layers);this.enableServerDataBinding(!1),this.commandHandler.moveObjects(t,e);var n=this.commandHandler.deepDiffer.map(r,i.i(k.e)(this.layers)),o=this.commandHandler.deepDiffer.frameObject({},n);this.oldDiagramObject={layers:o},this.commandHandler.updateBlazorProperties()},e.prototype.layerObjectUpdate=function(){if(i.i(r.isBlazor)()){this.enableServerDataBinding(!1),this.oldDiagramObject.layers=[];for(var t=0;t<this.layers.length;t++){var e=i.i(k.e)(this.layers[parseInt(t.toString(),10)]);e.sfIndex=this.layers[parseInt(t.toString(),10)].zIndex,this.oldDiagramObject.layers.push(e)}}},e.prototype.sendLayerBackward=function(t){this.layerObjectUpdate(),this.commandHandler.sendLayerBackward(t),this.commandHandler.updateLayerObject(this.oldDiagramObject,!0)},e.prototype.bringLayerForward=function(t){this.layerObjectUpdate(),this.commandHandler.bringLayerForward(t),this.commandHandler.updateLayerObject(this.oldDiagramObject)},e.prototype.cloneLayer=function(t){this.commandHandler.cloneLayer(t)},e.prototype.bringToFront=function(){this.commandHandler.bringToFront()},e.prototype.moveForward=function(){this.commandHandler.sendForward()},e.prototype.sendBackward=function(){this.commandHandler.sendBackward()},e.prototype.getObject=function(t){return this.nameTable[""+t]},e.prototype.getNodeObject=function(t){return i.i(k.e)(this.nameTable[""+t])},e.prototype.getConnectorObject=function(t){return i.i(k.e)(this.nameTable[""+t])},e.prototype.getActiveLayer=function(){return this.activeLayer},e.prototype.nudgeCommand=function(t,e,i){"object"!=typeof t&&(this.selectedItems.nodes.length||this.selectedItems.connectors.length)>0&&this.nudge(t)},e.prototype.nudge=function(t,e,r){var n,o=0,a=0;"Left"===t||"Right"===t?(n="Left"===t,o=(n?-1:1)*(e||1)):(n="Up"===t,a=(n?-1:1)*(r||1));var s=this.selectedItems,h=this.selectedItems.wrapper.children[0];if(h instanceof b.a)this.commandHandler.labelDrag(s.nodes[0],h,o,a);else{var d=i.i(k.e)(this.selectedItems);this.protectPropertyChange(!0),this.drag(s,o,a),this.protectPropertyChange(!1);var l={type:"PositionChanged",redoObject:i.i(k.e)(this.selectedItems),undoObject:d,category:"Internal"};this.addHistoryEntry(l)}this.refreshCanvasLayers()},e.prototype.insertBlazorDiagramObjects=function(t){if(i.i(r.isBlazor)()&&!(this.blazorActions&y.i.interaction)){if(this.enableServerDataBinding(!1),t instanceof l.G){for(var e=0;e<t.nodes.length;e++)this.insertBlazorDiagramObjects(t.nodes[parseInt(e.toString(),10)]);for(var e=0;e<t.connectors.length;e++)this.insertBlazorDiagramObjects(t.connectors[parseInt(e.toString(),10)])}if(!(t instanceof l.G)){if(t&&t.children&&t.children.length>0)for(var e=0;e<t.children.length;e++)this.insertBlazorDiagramObjects(this.nameTable[t.children[parseInt(e.toString(),10)]]);var n=i.i(k.e)(this.nameTable[t.id]);this.insertValue(n,!(i.i(c.l)(t)===p.a))}}},e.prototype.drag=function(t,e,n){if(this.insertBlazorDiagramObjects(t),i.i(r.isBlazor)()&&t.id&&(t=this.nameTable[t.id]||t),this.bpmnModule&&t instanceof l.a){if(this.bpmnModule.updateAnnotationDrag(t,this,e,n))return}if(t instanceof l.G){if(this.preventConnectorsUpdate=!0,t.nodes&&t.nodes.length){for(var o=0,a=t.nodes;o<a.length;o++){var s=a[o];if(this.callBlazorModel=!1,this.drag(s,e,n),s.parentId){var h=this.nameTable[s.parentId];if(h.isLane){var d=this.nameTable[h.parentId];i.i(W.d)(h,d,s,this)}}}this.callBlazorModel=!0}if(t.connectors&&t.connectors.length){this.callBlazorModel=!1;for(var c=0,p=t.connectors;c<p.length;c++){var g=p[c];this.drag(g,e,n),-1===this.selectionConnectorsList.indexOf(g)&&this.selectionConnectorsList.push(g)}this.callBlazorModel=!0}this.updateSelector(),this.diagramActions&y.p.DragUsingMouse&&this.updatePage()}else t instanceof l.a&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(t,this,e,n),this.commandHandler.drag(t,e,n);if(t instanceof l.G){this.preventConnectorsUpdate=!1;for(var u=0,f=this.selectionConnectorsList;u<f.length;u++){var m=f[u];this.updateConnectorProperties(this.nameTable[m.id]),"Bpmn"===m.shape.type&&"Default"===m.shape.sequence&&"Sequence"===m.shape.flow&&this.commandHandler.updatePathElementOffset(m)}this.selectionConnectorsList=[]}this.diagramActions&y.p.ToolAction||this.diagramActions&y.p.DragUsingMouse||this.updateSelector(),!this.callBlazorModel||this.blazorActions&y.i.interaction||this.blazorActions&y.i.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues()},e.prototype.disableStackContainerPadding=function(t,e){if(t instanceof G.a&&(t.considerPadding=e),t.children)for(var i=0,r=t.children;i<r.length;i++){var n=r[i];this.disableStackContainerPadding(n,!1)}},e.prototype.scale=function(t,e,r,n){this.disableStackContainerPadding(t.wrapper,!1),this.insertBlazorDiagramObjects(t);var o=!0;if(t.id&&(t=this.nameTable[t.id]||t),t instanceof l.G){if(t.nodes&&t.nodes.length){this.callBlazorModel=!1;for(var a=0,s=t.nodes;a<s.length;a++){var h=s[a];o=this.commandHandler.scale(h,e,r,n,t),this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds)||this.commandHandler.scale(h,1/e,1/r,n,t)}this.callBlazorModel=!0}if(t.connectors&&t.connectors.length){this.callBlazorModel=!1;for(var d=0,p=t.connectors;d<p.length;d++){var g=p[d];this.commandHandler.scale(g,e,r,n,t),this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds)||this.commandHandler.scale(g,1/e,1/r,n,t)}this.callBlazorModel=!0}var u=this.selectedItems;i.i(c.C)(this,u)||this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(t,e,r,n,t.children?t:void 0);return!this.callBlazorModel||this.blazorActions&y.i.interaction||this.blazorActions&y.i.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),this.disableStackContainerPadding(t.wrapper,!0),o},e.prototype.rotate=function(t,e,r){this.insertBlazorDiagramObjects(t);var n;if(t.id&&(t=this.nameTable[t.id]||t),t)if(r=r||{x:t.wrapper.offsetX,y:t.wrapper.offsetY},t instanceof l.G){this.callBlazorModel=!1,t.rotateAngle+=e,t.wrapper.rotateAngle+=e;var o=i.i(k.i)(t.wrapper);if(!(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,o)))return t.rotateAngle-=e,t.wrapper.rotateAngle-=e,n;var a=[];a=a.concat(t.nodes),a=a.concat(t.connectors),this.commandHandler.rotateObjects(t,a,e,r),this.callBlazorModel=!0}else this.commandHandler.rotateObjects(t,[t],e,r);return!this.callBlazorModel||this.blazorActions&y.i.interaction||this.commandHandler.getBlazorOldValues(),n},e.prototype.dragSourceEnd=function(t,e,i){this.insertBlazorDiagramObjects(t),this.commandHandler.dragSourceEnd(t,e,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},e.prototype.dragTargetEnd=function(t,e,i){this.insertBlazorDiagramObjects(t),this.commandHandler.dragTargetEnd(t,e,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},e.prototype.findObjectsUnderMouse=function(t,e){return this.eventHandler.findObjectsUnderMouse(t,e)},e.prototype.findObjectUnderMouse=function(t,e,i){return this.eventHandler.findObjectUnderMouse(t,e,i)},e.prototype.findTargetObjectUnderMouse=function(t,e,i,r,n){return this.eventHandler.findTargetUnderMouse(t,e,i,r,n)},e.prototype.findElementUnderMouse=function(t,e,i){return this.eventHandler.findElementUnderMouse(t,e,i)},e.prototype.findActionToBeDone=function(t,e,i,r){return this.eventHandler.findActionToBeDone(t,e,i,r)},e.prototype.getTool=function(t){var e,r=i.i(k.h)(this.getCustomTool);return r&&(e=r(t))?e:this.eventHandler.getTool(t)},e.prototype.getCursor=function(t,e){var r,n=i.i(k.h)(this.getCustomCursor);if(n&&(r=n(t,e)))return r;if(this.customCursor.length)for(var o=0;o<this.customCursor.length;o++)if(this.customCursor[parseInt(o.toString(),10)].action===t)return this.customCursor[parseInt(o.toString(),10)].cursor;return this.eventHandler.getCursor(t)},e.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},e.prototype.addHistoryEntry=function(t,e){if(this.undoRedoModule&&this.constraints&y.j.UndoRedo&&(!this.currentSymbol||this.checkCurrentSymbol(this.currentSymbol,t))){if(t.undoObject&&"helper"===t.undoObject.id)return;this.undoRedoModule.addHistoryEntry(t,this),"StartGroup"!==t.type&&"EndGroup"!==t.type&&this.historyChangeTrigger(t,"CustomAction",e)}},e.prototype.checkCurrentSymbol=function(t,e){var i=!1;if(e.undoObject&&e.redoObject){var r=e.undoObject,n=e.undoObject;return n.id&&r.id&&n.id!==t.id&&r.id!==t.id?i=!0:i}return i},e.prototype.addCustomHistoryEntry=function(t){i.i(r.isBlazor)()&&this.undoRedoModule&&this.constraints&y.j.UndoRedo&&(t.type=void 0,t.category="External",this.undoRedoModule.addHistoryEntry(t,this))},e.prototype.historyChangeTrigger=function(t,e,n){var o={},a=[];if("Internal"===t.category){switch(t&&t.redoObject&&t.redoObject.nodes instanceof Array&&t.redoObject.connectors instanceof Array?a=t.redoObject.nodes.concat(t.redoObject.connectors):t.redoObject&&a.push(t.redoObject),o.type=t.type,i.i(r.isBlazor)()&&(o.entryType=t.type),t.type){case"PositionChanged":o.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},o.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY};break;case"RotationChanged":o.oldValue={rotateAngle:t.undoObject.rotateAngle},o.newValue={rotateAngle:t.redoObject.rotateAngle};break;case"SizeChanged":o.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY,width:t.undoObject.width,height:t.undoObject.height},o.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY,width:t.redoObject.width,height:t.redoObject.height};break;case"CollectionChanged":o[t.changeType]=a;break;case"ConnectionChanged":o.oldValue={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},o.newValue={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY}}var s=void 0,h=[],d=[];if(void 0===n&&"PropertyChanged"===t.type){for(var l=0;l<Object.keys(t.undoObject).length;l++)if("nodes"===Object.keys(t.undoObject)[parseInt(l.toString(),10)])for(var g=0,u=Object.keys(t.undoObject.nodes);g<u.length;g++){var f=u[g],m=parseInt(f);h.push(this.nodes[parseInt(m.toString(),10)].id)}for(var l=0;l<Object.keys(t.undoObject).length;l++)if("connectors"===Object.keys(t.undoObject)[parseInt(l.toString(),10)])for(var v=0,b=Object.keys(t.undoObject.connectors);v<b.length;v++){var f=b[v],m=parseInt(f);d.push(this.connectors[parseInt(m.toString(),10)].id)}n=h.concat(d)}if(s={cause:t.category,source:i.i(c.b)(a),change:i.i(c.b)(o),action:e,sourceId:n},i.i(r.isBlazor)()){s={cause:t.category,change:i.i(c.b)(o),source:{connectors:void 0,nodes:void 0},action:e};var S=s.source;S.connectors=[],S.nodes=[];for(var w=void 0,l=0;l<a.length;l++)w=i.i(c.b)(a[parseInt(l.toString(),10)]),i.i(c.l)(a[parseInt(l.toString(),10)])===p.a?S.connectors.push(w):S.nodes.push(w);s.source=S}a.length&&this.triggerEvent(y.r.historyChange,s)}},e.prototype.startGroupAction=function(){var t={type:"StartGroup",category:"Internal"};this.diagramActions&y.p.UndoRedo||this.addHistoryEntry(t)},e.prototype.endGroupAction=function(){var t={type:"EndGroup",category:"Internal"};this.diagramActions&y.p.UndoRedo||this.addHistoryEntry(t)},e.prototype.undo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&y.j.UndoRedo&&this.undoRedoModule.undo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.redo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&y.j.UndoRedo&&this.undoRedoModule.redo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.getBlazorDiagramObjects=function(t){if(t)for(var e=0;e<t.length;e++)this.insertBlazorDiagramObjects(t[parseInt(e.toString(),10)]);else this.insertBlazorDiagramObjects(this.selectedItems);this.callBlazorModel=!1,this.canEnableBlazorObject=!0},e.prototype.align=function(t,e,i){this.getBlazorDiagramObjects(e),e||(e=[],e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|y.p.PublicMethod,this.commandHandler.align(e,t,i||"Object"),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.distribute=function(t,e){this.getBlazorDiagramObjects(e),e||(e=[],e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|y.p.PublicMethod,this.commandHandler.distribute(e,t),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},e.prototype.sameSize=function(t,e){this.getBlazorDiagramObjects(e),e||(e=[],e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|y.p.PublicMethod,this.commandHandler.sameSize(e,t),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},e.prototype.updateBlazorDiagramProperties=function(t,e){if(i.i(r.isBlazor)()&&!e){var n=this.allowServerDataBinding;this.enableServerDataBinding(!0);for(var o=0;o<t.length;o++)this.oldDiagramObject[t[parseInt(o.toString(),10)]]=i.i(k.e)(this[t[parseInt(o.toString(),10)]]);this.enableServerDataBinding(n)}e&&this.commandHandler.getDiagramOldValues(this.oldDiagramObject,t)},e.prototype.getZoomingAttribute=function(){var t=[];return t.push("scrollSettings"),t.push("snapSettings"),t},e.prototype.zoom=function(t,e){var i=this.getZoomingAttribute();this.updateBlazorDiagramProperties(i),this.scroller.zoom(t,0,0,e),this.blazorActions&y.i.interaction||this.updateBlazorDiagramProperties(i,!0)},e.prototype.zoomTo=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e);var i=t.zoomFactor?t.zoomFactor:.2;i="ZoomOut"===t.type?1/(1+i):1+i,this.scroller.zoom(i,0,0,t.focusPoint),this.updateBlazorDiagramProperties(e,!0)},e.prototype.pan=function(t,e,i,r){var n=this.getZoomingAttribute();this.updateBlazorDiagramProperties(n),this.setCursor("grabbing"),this.scroller.zoom(1,t,e,i,r),this.updateBlazorDiagramProperties(n,!0)},e.prototype.reset=function(){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0}),this.updateBlazorDiagramProperties(t,!0)},e.prototype.resetSegments=function(){var t=[],e=[],n=[];if(i.i(r.isBlazor)())for(var o=0,a=this.connectors;o<a.length;o++){var s=a[o];t.push(i.i(k.e)(s,void 0,void 0,!0))}if(this.constraints&y.j.LineRouting&&this.lineRoutingModule)this.lineRoutingModule.lineRouting(this);else{this.protectPropertyChange(!0);for(var h=void 0,d=0;d<this.connectors.length;d++)h=this.connectors[parseInt(d.toString(),10)],h.segments=[],this.connectorPropertyChange(h,{},{segments:h.segments});this.protectPropertyChange(!1)}if(i.i(r.isBlazor)()){for(var l=0,c=this.connectors;l<c.length;l++){var s=c[l];e.push(i.i(k.e)(s,void 0,void 0,!0))}this.commandHandler.getObjectChanges(t,e,n);var p={nodes:[],connectors:n};if(window&&window.Blazor){var s={methodName:"UpdateBlazorProperties",diagramobj:p};window.sfBlazor.updateBlazorProperties(s,this)}}},e.prototype.setBlazorDiagramProps=function(t){var e=this.getZoomingAttribute();t?this.updateBlazorDiagramProperties(e):this.updateBlazorDiagramProperties(e,!0)},e.prototype.triggerEvent=function(t,e){return K(this,void 0,void 0,function(){var n;return J(this,function(o){switch(o.label){case 0:return e&&this.updateEventValue(e),[4,this.trigger(y.r[""+t],e)];case 1:return n=o.sent(),i.i(r.isBlazor)()&&"string"==typeof n&&(n=JSON.parse(n)),[2,n]}})})},e.prototype.updateEventValue=function(t){var e=t.element;t.element&&e instanceof l.G&&e.nodes.length+e.connectors.length===1&&(t.element=1===e.nodes.length?e.nodes[0]:e.connectors[0])},e.prototype.addNodeToLane=function(t,e,r){if(this.nameTable[""+e]){var n=this.nameTable[""+e];if(this.protectPropertyChange(!0),this.undoRedoModule&&this.historyManager.startGroupAction(),this.nameTable[t.id]||(t.offsetX=n.wrapper.bounds.width+n.wrapper.bounds.x,t.offsetY=n.wrapper.bounds.height+n.wrapper.bounds.y,t=this.add(t)),t.parentId="",n.shape.phases.length)for(var o=0;o<n.shape.phases.length;o++){var a=e+r+o;if(this.nameTable[""+a]&&this.nameTable[""+a].isLane){var s=this.nameTable[""+a].wrapper.bounds,h={x:s.x+(s.x-n.wrapper.bounds.x+t.margin.left+t.wrapper.bounds.width/2),y:s.y+n.wrapper.bounds.y-t.margin.top};if("Horizontal"===n.shape.orientation)h.y=s.y;else{h.x=s.x;var d=this.nameTable[""+a].parentId+n.shape.lanes[0].id+"_0_header";h.y=s.y+(n.wrapper.bounds.y-this.nameTable[""+d].wrapper.bounds.height+t.margin.top+t.wrapper.bounds.height/2)}if(s.containsPoint(h)||a===e+r+(n.shape.phases.length-1)){i.i(W.e)(this,this.nameTable[""+a],t,void 0,!0),i.i(W.d)(this.nameTable[""+a],n,t,this);break}}}else{var a=e+r+"0";this.nameTable[""+a]&&(i.i(W.e)(this,this.nameTable[""+a],t,void 0,!0),i.i(W.d)(this.nameTable[""+a],n,t,this))}this.undoRedoModule&&this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}this.updateDiagramElementQuad()},e.prototype.showTooltip=function(t){t&&t.id&&!t.wrapper&&(t=this.nameTable[t.id]);var e=i.i(k.i)(t.wrapper),r={x:0,y:0},n=t.tooltip.content?t.tooltip.content:"X:"+Math.round(e.x)+" Y:"+Math.round(e.y);t&&"Custom"===t.tooltip.openOn&&(r=t instanceof l.a?{x:t.offsetX+t.width/2,y:t.offsetY+t.height/2}:{x:t.targetPoint.x,y:t.targetPoint.x},this.commandHandler.showTooltip(t,r,n,"SelectTool",!0))},e.prototype.hideTooltip=function(t){t&&"Custom"===t.tooltip.openOn&&this.tooltipObject.close()},e.prototype.addNode=function(t,e){return this.add(t,e)},e.prototype.addChildToGroup=function(t,e){var n=this.allowServerDataBinding;this.enableServerDataBinding(!1);var o=this.isProtectedOnChange;this.protectPropertyChange(!0),t=this.getObject(t.id),i.i(r.isBlazor)()&&this.insertValue(t,!0);var a=!(this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.Group||this.diagramActions&y.p.PreventHistory);a&&this.startGroupAction();var s=this.addChild(t,e);if(a){var h={};h[""+s]=i.i(k.e)(this.getObject(s));var d={type:"AddChildToGroupNode",changeType:"Insert",undoObject:i.i(k.e)(t),redoObject:i.i(k.e)(t),category:"Internal",objectId:s,childTable:h};this.addHistoryEntry(d),this.endGroupAction()}this.protectPropertyChange(o),this.enableServerDataBinding(n),this.updateSelector(),i.i(r.isBlazor)()&&a&&this.commandHandler.getBlazorOldValues()},e.prototype.getHistoryStack=function(t){var e=[],i=t?this.historyManager.undoStack:this.historyManager.redoStack;if(void 0!==this.historyManager.stackLimit){for(var r=i.length-1;r>=0;r--)if(e.push(i[parseInt(r.toString(),10)]),e.length>this.historyManager.stackLimit)return e}else e=i;return e},e.prototype.getEdges=function(t){return t.outEdge?this.nameTable[t.id].outEdges:this.nameTable[t.id].inEdges},e.prototype.getParentId=function(t){return this.nameTable[""+t].parentId},e.prototype.addConnector=function(t){return this.add(t)},e.prototype.UpdateBlazorDiagramModelCollection=function(t,e,r,n){if(!(this.blazorActions&y.i.ClearObject)){if(window&&window.Blazor){var o=void 0,a=[],s=[],h=[],d=[];if(n&&!e)for(var g=0;g<this.blazorAddorRemoveCollection.length;g++)h.push(i.i(c.l)(this.blazorAddorRemoveCollection[parseInt(g.toString(),10)])===p.a?"Connector":"Node"),o=i.i(c.b)(this.blazorAddorRemoveCollection[parseInt(g.toString(),10)]),s.push(o),d=this.blazorRemoveIndexCollection;else if(!this.isServerUpdate||r){this.isServerUpdate=!0;var u=i.i(c.b)(t),f=[],m=void 0,v=[];if(!e){v=r||this.commandHandler.getChildren(t,f);for(var g=0;g<v.length;g++)u=i.i(c.b)(v[parseInt(g.toString(),10)]),s.push(u),m=i.i(c.l)(v[parseInt(g.toString(),10)])===p.a?this.connectors.indexOf(v[parseInt(g.toString(),10)]):this.nodes.indexOf(v[parseInt(g.toString(),10)]),d.push(m),h.push(i.i(c.l)(v[parseInt(g.toString(),10)])===p.a?"Connector":"Node");r||(s.push(i.i(c.b)(t)),d.push(this.nodes.indexOf(t)),h.push(i.i(c.l)(t)===p.a?"Connector":"Node"))}if(e&&e.length>0)for(var g=0;g<e.length;g++){u=i.i(c.b)(e[parseInt(g.toString(),10)]);var b=e[parseInt(g.toString(),10)]instanceof l.a;b?s.push(u):a.push(u),h.push(i.i(c.l)(e[parseInt(g.toString(),10)])===p.a?"Connector":"Node")}this.isServerUpdate=!1}var S={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(s),ObjectType:h,removalIndex:e?void 0:d,isMultipleObjects:!0,annotationIndex:void 0,connectorObj:JSON.stringify(a)}};window.sfBlazor.updateBlazorProperties(S,this),n&&!e&&(this.blazorAddorRemoveCollection=[],this.blazorRemoveIndexCollection=[])}}},e.prototype.UpdateBlazorDiagramModel=function(t,e,r,n){if(!(this.blazorActions&y.i.GroupClipboardInProcess)){if(window&&window.Blazor&&!this.isServerUpdate&&!(this.diagramActions&y.p.Clear)){var o=i.i(c.b)(t),a={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(o),ObjectType:e,removalIndex:r,isMultipleObjects:!1,annotationIndex:n,connectorObj:void 0}};window.sfBlazor.updateBlazorProperties(a,this)}}},e.prototype.UpdateBlazorLabelOrPortObjects=function(t,e,r,n){if(window&&window.Blazor&&t.length>0&&!this.isServerUpdate&&!(this.diagramActions&y.p.Clear)){for(var o=[],a=[],s=[],h=0;h<t.length;h++)o.push(i.i(c.b)(t[parseInt(h.toString(),10)])),a.push(e),s.push(n);var d={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(o),ObjectType:a,removalIndex:r,isMultipleObjects:!0,annotationIndex:s,connectorObj:null,portIndex:"Port"===e?s:[]}};window.sfBlazor.updateBlazorProperties(d,this)}},e.prototype.addBlazorDiagramObjects=function(){var t=[],e=[];if(this.dataBindingModule&&!(this.realActions&y.a.PreventDataInit)){for(var r=0;r<this.nodes.length;r++)t.push(i.i(k.e)(this.nodes[parseInt(r.toString(),10)],void 0,void 0,!0));for(var r=0;r<this.connectors.length;r++)e.push(i.i(k.e)(this.connectors[parseInt(r.toString(),10)],void 0,void 0,!0))}if(window&&window.Blazor){var n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(t),isConnector:!1}};window.sfBlazor.updateBlazorProperties(n,this),n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(e),isConnector:!0}},window.sfBlazor.updateBlazorProperties(n,this)}},e.prototype.removeNodeEdges=function(t,e,i){var r=this.nameTable[""+t],n=i?r.outEdges:r.inEdges;if(n.length>0)for(var o=0;o<n.length;o++)n[parseInt(o.toString(),10)]===e&&n.splice(o,1)},e.prototype.insertBlazorConnector=function(t){i.i(r.isBlazor)()&&t instanceof p.a&&(t.sourceID&&this.nameTable[t.sourceID]&&this.insertValue(i.i(k.e)(this.nameTable[t.sourceID]),!0),t.targetID&&this.nameTable[t.targetID]&&this.insertValue(i.i(k.e)(this.nameTable[t.targetID]),!0))},e.prototype.add=function(t,n){var o,a=this.isProtectedOnChange;if(this.protectPropertyChange(!0),t){t=i.i(k.e)(t);var s=void 0;if(s={element:t,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changing",type:"Addition",cancel:!1},this.parentObject&&(s.parentId=this.parentObject.id),i.i(r.isBlazor)()&&(s=i.i(c.D)(s,t,"Changing","Addition")),"helper"===t.id||this.diagramActions&y.p.PreventCollectionChangeOnDragOver||this.triggerEvent(y.r.collectionChange,s),s.cancel&&this.drawingObject){this.removeElements(s.element),this.tooltipObject.close();var h=this.getObject(s.element.sourceID),d=void 0;if(i.i(c.l)(s.element)===p.a){if(s.element.sourceID&&(this.removeNodeEdges(s.element.sourceID,s.element.id,!0),h.ports.length>0)){for(var g=0;g<h.ports.length;g++){var u=h.ports[parseInt(g.toString(),10)];u.id===s.element.sourcePortID&&(d=!(u.outEdges.length>0))}this.removePortEdges(h,s.element.sourcePortID,s.element.id,d)}s.element.targetID&&this.removeNodeEdges(s.element.targetID,s.element.id,!1)}}this.diagramActions=this.diagramActions|y.p.PublicMethod,t.id=t.id||i.i(k.g)();var f=this.activeLayer;if(!s.cancel&&!f.lock){if(f.objects.indexOf(t.id)<0&&!f.lock&&(f.visible||(f.visible=!0,this.dataBind()),f.objects.push(t.id)),i.i(c.l)(t)===p.a)o=new p.a(this,"connectors",t,!0),o.status="New",i.i(c.B)(o,t,this.connectorDefaults),this.connectors.push(o),this.initObject(o),i.i(r.isBlazor)()&&(this.blazorActions&y.i.GroupingInProgress?this.blazorAddorRemoveCollection.push(o):this.blazorAddorRemoveCollection.length>0?(this.isServerUpdate=!1,this.blazorAddorRemoveCollection.push(o),this.UpdateBlazorDiagramModelCollection(void 0,this.blazorAddorRemoveCollection,void 0,!0),this.blazorAddorRemoveCollection=[],this.commandHandler.getBlazorOldValues()):this.isServerUpdate||this.blazorActions&y.i.GroupClipboardInProcess||(this.UpdateBlazorDiagramModel(o,"Connector"),this.commandHandler.getBlazorOldValues())),!1===t.visible&&this.updateElementVisibility(o.wrapper,o,t.visible),this.updateEdges(o),this.insertBlazorConnector(o);else{if(o=new l.a(this,"nodes",t,!0),i.i(c.B)(o,t,this.nodeDefaults),o.parentId=t.parentId?t.parentId:o.parentId,o.umlIndex=t.umlIndex,o.status="New",this.nodes.push(o),this.initObject(o,f,void 0,n),i.i(r.isBlazor)()&&(this.blazorActions&y.i.GroupingInProgress?this.blazorAddorRemoveCollection.push(o):this.blazorAddorRemoveCollection.length>0?(this.blazorAddorRemoveCollection.push(o),this.isServerUpdate=!1,this.UpdateBlazorDiagramModelCollection(void 0,this.blazorAddorRemoveCollection,void 0,!0),this.commandHandler.getBlazorOldValues(),this.blazorAddorRemoveCollection=[]):this.isServerUpdate||this.blazorActions&y.i.GroupClipboardInProcess||(this.UpdateBlazorDiagramModel(o,"Node"),this.commandHandler.getBlazorOldValues())),this.updateTemplate(),this.bpmnModule){if(o.shape.annotations&&0!==o.shape.annotations.length)for(var v=0,b=this.bpmnModule.getTextAnnotationConn(o);v<b.length;v++){var S=b[v];this.initConnectors(S,f,!1)}o.shape.activity&&o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(o,this)}if(this.lineRoutingModule&&this.constraints&y.j.LineRouting)for(var w=this.spatialSearch.findObjects(o.wrapper.outerBounds),g=0;g<w.length;g++){var x=w[parseInt(g.toString(),10)];x instanceof p.a&&this.connectorPropertyChange(x,{},{sourceID:x.sourceID,targetID:x.targetID,sourcePortID:x.sourcePortID,targetPortID:x.targetPortID,sourcePoint:x.sourcePoint,targetPoint:x.targetPoint})}if(o.umlIndex>-1&&t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type){var I=this.nameTable[t.parentId];I.children.splice(o.umlIndex,0,o.id),I.wrapper.children.splice(o.umlIndex,0,o.wrapper),I.wrapper.measure(new m.a),I.wrapper.arrange(I.wrapper.desiredSize),this.updateDiagramObject(I)}}if(s={element:o,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changed",type:"Addition",cancel:!1},this.parentObject&&(s.parentId=this.parentObject.id),i.i(r.isBlazor)()&&(s=i.i(c.D)(s,t,"Changed","Addition")),"helper"===t.id||this.diagramActions&y.p.PreventCollectionChangeOnDragOver||this.triggerEvent(y.r.collectionChange,s),!(this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.Group||this.diagramActions&y.p.PreventHistory)){var P={type:"CollectionChanged",changeType:"Insert",undoObject:i.i(k.e)(t),redoObject:i.i(k.e)(t),category:"Internal"};this.addHistoryEntry(P)}this.parentObject=void 0,"SVG"===this.mode&&(this.updateSvgNodes(o),this.updateTextElementValue(o),this.updateDiagramObject(o),o.shape.activity&&o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length&&this.updateProcesses(o),this.updateBridging())}}this.protectPropertyChange(a),this.resetDiagramActions(y.p.PublicMethod),o&&this.layers.length>1&&this.moveNode(o);for(var C=0,z=this.views;C<z.length;C++){var O=z[C],T=this.views[""+O];T instanceof e||this.refreshCanvasDiagramLayer(T)}return this.renderReactTemplates(),o},e.prototype.updateSvgNodes=function(t){if(t.children)for(var e=0,r=t.children;e<r.length;e++){var n=r[e];if(this.nameTable[""+n]&&this.nameTable[""+n].parentId){var o=i.i(B.n)(n+"_groupElement",this.element.id);o&&o.parentNode.removeChild(o)}}},e.prototype.updateProcesses=function(t){if(this.bpmnModule&&t&&t.shape&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length){var e=t.shape.activity.subProcess.processes;this.moveSvgNode(t.id);for(var i=0,r=e;i<r.length;i++){var n=r[i];this.moveSvgNode(n);var o=[];o=o.concat(this.nameTable[""+n].outEdges,this.nameTable[""+n].inEdges);for(var a=o.length-1;a>=0;a--)this.moveSvgNode(o[parseInt(a.toString(),10)])}for(var s=0,h=e;s<h.length;s++){var n=h[s];this.nameTable[""+n].shape.activity.subProcess.processes&&this.nameTable[""+n].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[""+n])}}else this.moveSvgNode(t.id)},e.prototype.moveSvgNode=function(t){var e=i.i(B.n)(t+"_groupElement",this.element.id),r=e.parentElement;e.parentNode.removeChild(e),r.appendChild(e)},e.prototype.addTextAnnotation=function(t,e){if(this.bpmnModule){var r=this.bpmnModule.addAnnotation(e,t,this);if(this.initConnectors(r,this.commandHandler.getObjectLayer(e.id),!1),this.updateDiagramObject(e),!(this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.Group)){var n={type:"CollectionChanged",changeType:"Insert",undoObject:i.i(k.e)(t),redoObject:i.i(k.e)(t),category:"Internal"};this.addHistoryEntry(n)}if(e.parentId){var o=this.nameTable[e.parentId];if(o&&o.isLane){this.nameTable[o.parentId].isTextNode=!0}}}},e.prototype.spliceConnectorEdges=function(t,e){var i=[],r=e?this.nameTable[t.sourceID]:this.nameTable[t.targetID];if(r){i=e?r.outEdges:r.inEdges;for(var n=i.length-1;n>=0;n--)i[parseInt(n.toString(),10)]===t.id&&i.splice(n,1);for(var o=0;r.ports&&o<r.ports.length;o++){var a=!e;this.removePortEdges(r,r.ports[parseInt(o.toString(),10)].id,t.id,a)}}},e.prototype.removeDependentConnector=function(t){if(t){var e=void 0,r=[];r=r.concat(t.outEdges,t.inEdges);for(var n=r.length-1;n>=0;n--)(e=this.nameTable[r[parseInt(n.toString(),10)]])&&(this.connectorTable[e.id]=i.i(k.e)(e),this.remove(e))}},e.prototype.removeObjectsFromLayer=function(t){if(t.children)for(var e=0;e<t.children.length;e++){var r=this.nameTable[t.children[parseInt(e.toString(),10)]];r&&this.removeObjectsFromLayer(r)}var n=this.layers.indexOf(this.commandHandler.getObjectLayer(t.id)),o=this.layers[parseInt(n.toString(),10)].objects,a=o.indexOf(t.id);a>-1&&(i.i(L.b)(this,t)&&this.unSelect(t),this.layers[parseInt(n.toString(),10)].objects.splice(a,1),delete this.layers[parseInt(n.toString(),10)].zIndexTable[this.nameTable[t.id].zIndex])},e.prototype.removeElements=function(t){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===t.shape.type){var e=i.i(B.n)(t.id+"_groupElement",this.element.id),r=t;if(r.ports&&r.ports.length>0)for(var n=0;n<r.ports.length;n++){var o=r.ports[parseInt(n.toString(),10)],a=i.i(B.n)(r.id+"_"+o.id+"_groupElement",this.element.id);a&&a.parentNode.removeChild(a)}e&&e.parentNode.removeChild(e)}if(this.refreshCanvasLayers(),t.wrapper){var s=t.wrapper.children,h=void 0;if(s)for(var n=0;n<s.length;n++){if(s[parseInt(n.toString(),10)]instanceof N.a||s[parseInt(n.toString(),10)].id&&s[parseInt(n.toString(),10)].id.indexOf("icon_content")>0){s[parseInt(n.toString(),10)].id.indexOf("icon_content")>0&&"SVG"===this.mode&&(h=i.i(B.n)(s[parseInt(n.toString(),10)].id+"_shape_groupElement",this.element.id),h&&h.parentNode.removeChild(h),(h=i.i(B.n)(s[parseInt(n.toString(),10)].id+"_rect_groupElement",this.element.id))&&h.parentNode.removeChild(h));for(var d=0,l=this.views;d<l.length;d++){var p=l[d];i.i(B.m)(s[parseInt(n.toString(),10)].id+"_groupElement",p);var g=this.scroller.removeCollection.indexOf(t.id);this.scroller.removeCollection.splice(g,1)}}else if(s[parseInt(n.toString(),10)]instanceof H.a)for(var u=0,f=this.views;u<f.length;u++){var p=f[u];i.i(B.m)(t.id+"_html_element",p),i.i(B.m)(s[parseInt(n.toString(),10)].id+"_html_element",p);var m=!0,y=this.nameTable[t.parentId];(this.isAngular||this.isReact||this.isVue)&&y&&y.isLane&&(m=!1),m&&this.clearTemplate(["nodeTemplate_"+t.id]),s[parseInt(n.toString(),10)].annotationId&&this.clearTemplate(["annotationTemplate_"+t.id+s[parseInt(n.toString(),10)].annotationId])}i.i(c.E)(s[parseInt(n.toString(),10)].id)}}},e.prototype.removeCommand=function(){this.remove()},e.prototype.remove=function(t){var e=[];e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors);var n,o=!1;if(t){if(t=this.nameTable[t.id],this.insertBlazorConnector(t),t&&(i.i(D.v)(t)||this.diagramActions&y.p.Clear)&&(n={element:t,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changing",type:"Removal",cancel:!1},i.i(r.isBlazor)()&&(n=i.i(c.D)(n,t,"Changing","Removal")),this.diagramActions&y.p.Clear||"helper"===t.id||this.triggerEvent(y.r.collectionChange,n),!n.cancel)){if(i.i(D.v)(t)&&t&&t.shape&&"SwimLane"===t.shape.type&&i.i(V.k)(this,t),this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(t,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.PreventHistory||!(t instanceof l.a||t instanceof p.a))){var a={type:"CollectionChanged",changeType:"Remove",undoObject:i.i(k.e)(t),redoObject:i.i(k.e)(t),category:"Internal"};this.diagramActions&y.p.Clear||t.children&&!t.isLane&&!t.isPhase&&t.children.length>0&&this.undoRedoModule&&"None"===this.layout.type&&(this.historyManager.startGroupAction(),o=!0),t instanceof l.a&&this.removeDependentConnector(t),t.isLane||t.isPhase||this.diagramActions&y.p.Clear||this.isStackChild(t)||this.addHistoryEntry(a)}!t.children||t.isLane||t.isPhase||i.i(r.isBlazor)()&&this.diagramActions&y.p.UndoRedo||this.deleteGroup(t),t.parentId&&(this.deleteChild(t),this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[t.parentId]),this.updateConnectorEdges(this.nameTable[t.parentId])));var s=void 0;this.diagramActions=this.diagramActions|y.p.PublicMethod;var h=this.nameTable[t.id];if(h instanceof l.a){if("Bpmn"===h.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(h,this),h.isLane||h.isPhase||"SwimLane"===h.shape.type){var d=h.isLane||h.isPhase?this.nameTable[h.parentId]:this.nameTable[h.id];d.wrapper.children[0];h.isLane?i.i(V.l)(this,h,d):h.isPhase&&i.i(V.m)(this,h,d)}s=this.nodes.indexOf(h),i.i(r.isBlazor)()&&"helper"!==t.id&&(this.blazorActions&y.i.GroupingInProgress?(this.blazorRemoveIndexCollection.splice(0,0,s),this.blazorAddorRemoveCollection.splice(0,0,t)):this.blazorAddorRemoveCollection.length>0?(this.commandHandler.getBlazorOldValues(),this.blazorRemoveIndexCollection.splice(0,0,s),this.blazorAddorRemoveCollection.splice(0,0,t),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0)):this.isServerUpdate||this.blazorActions&y.i.GroupClipboardInProcess||this.UpdateBlazorDiagramModel(t,"Node",s)),-1!==s&&(this.crudDeleteNodes.push(this.nameTable[h.id]),this.nodes.splice(s,1),this.updateNodeEdges(h))}else s=this.connectors.indexOf(h),i.i(r.isBlazor)()&&(this.blazorActions&y.i.GroupingInProgress?(this.blazorAddorRemoveCollection.splice(0,0,t),this.blazorRemoveIndexCollection.splice(0,0,s)):this.blazorAddorRemoveCollection.length>0?(this.commandHandler.getBlazorOldValues(),this.blazorAddorRemoveCollection.splice(0,0,t),this.blazorRemoveIndexCollection.splice(0,0,s),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0)):this.isServerUpdate||this.blazorActions&y.i.GroupClipboardInProcess||this.UpdateBlazorDiagramModel(t,"Connector",s)),-1!==s&&(this.crudDeleteNodes.push(this.nameTable[h.id]),this.connectors.splice(s,1)),this.updateEdges(h),this.spliceConnectorEdges(t,!0),this.spliceConnectorEdges(t,!1);if(this.isServerUpdate||this.blazorActions&y.i.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),o&&this.historyManager.endGroupAction(),i.i(L.b)(this,h)&&this.unSelect(h),!h.isPhase){if(this.removeObjectsFromLayer(t),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[t.id],e.length>0&&e[0].id===h.id&&h.parentId){var g=this.nameTable[h.parentId];if(g&&g.isLane&&"SwimLane"===this.nameTable[g.parentId].shape.type){var d=this.nameTable[g.parentId];i.i(V.n)(this,d,g,h)}}this.removeElements(h),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&y.p.Clear||(this.removeFromAQuad(h),n={element:t,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changed",type:"Removal",cancel:!1},i.i(r.isBlazor)()&&(n=i.i(c.D)(n,t,"Changed","Removal")),"helper"!==t.id&&this.triggerEvent(y.r.collectionChange,n),this.resetTool())}}}else if(e.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),this.blazorActions|=y.i.GroupingInProgress,o=!0),i.i(r.isBlazor)()&&e.length>1&&this.clearSelection();for(var u=0;u<e.length;u++){e[parseInt(u.toString(),10)];if(this.nameTable[e[parseInt(u.toString(),10)].id]){if(e[parseInt(u.toString(),10)]instanceof p.a&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(e[parseInt(u.toString(),10)])>-1)return void this.remove(this.nameTable[e[parseInt(u.toString(),10)].targetID]);i.i(r.isBlazor)()&&(!this.isServerUpdate&&e&&e.length>1&&(this.isServerUpdate=!0),e[parseInt(u.toString(),10)].parentId&&this.insertBlazorDiagramObjects(this.nameTable[e[parseInt(u.toString(),10)].parentId])),this.remove(e[parseInt(u.toString(),10)]),i.i(r.isBlazor)()&&e[parseInt(u.toString(),10)].parentId&&(this.commandHandler.getBlazorOldValues(),this.isServerUpdate=!1)}}o&&(this.blazorActions&=~y.i.GroupingInProgress,this.isServerUpdate=!0,this.commandHandler.getBlazorOldValues(),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0),this.historyManager.endGroupAction(),this.isServerUpdate=!1),this.clearSelection()}if(!(t&&(i.i(D.v)(t)||this.diagramActions&y.p.Clear)||this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.PreventHistory||!(t instanceof l.a||t instanceof p.a))){var a={type:"ConnectionChanged",undoObject:i.i(k.e)(t),redoObject:i.i(k.e)(t),category:"Internal"};t.isLane||t.isPhase||this.diagramActions&y.p.Clear||this.isStackChild(t)||this.addHistoryEntry(a)}if(this.tooltipObject.close(),i.i(r.isBlazor)()&&e&&e.length>0){for(var f=!0,m=0;m<e.length;m++)this.nameTable[e[parseInt(m.toString(),10)].id]&&(f=!1);f&&(this.isServerUpdate=!1)}},e.prototype.isStackChild=function(t){var e,i=this.nameTable[t.parentId];if(t&&t.parentId&&i.container&&"Stack"===i.container.type&&"UmlClassifier"!==this.nameTable[t.parentId].shape.type){e=!0;var r={sourceIndex:i.wrapper.children.indexOf(t.wrapper),source:t,target:void 0,targetIndex:void 0},n={type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:t,target:void 0,targetIndex:void 0},undoObject:r,category:"Internal"};this.diagramActions&y.p.UndoRedo||this.addHistoryEntry(n)}return e},e.prototype.deleteChild=function(t,e){var i;if(e=e?this.nameTable[e.id]:this.nameTable[t.parentId],i="string"==typeof t?t:t.id,e&&e.children){for(var r=0;r<e.children.length;r++)if(e.children[parseInt(r.toString(),10)]===i){e.children.splice(r,1);for(var n=0;n<e.wrapper.children.length;n++)e.wrapper.children[parseInt(n.toString(),10)].id===i&&e.wrapper.children.splice(n,1);var o=this.getObject(e.parentId);if(o&&o.shape instanceof l.i)for(var a=0;a<o.shape.lanes.length;a++){var s=t.parentId.split(o.id);if(o.shape.lanes[parseInt(a.toString(),10)].id===s[1].slice(0,-1))for(var h=0;h<o.shape.lanes[parseInt(a.toString(),10)].children.length;h++)if(t.id===o.shape.lanes[parseInt(a.toString(),10)].children[parseInt(h.toString(),10)].id){o.shape.lanes[parseInt(a.toString(),10)].children.splice(h,1);break}}}e.wrapper.measure(new m.a),e.wrapper.arrange(e.wrapper.desiredSize)}},e.prototype.addChild=function(t,e,r){var n,o=this.nameTable[t.id];if(o.children||(o.children=[]),o.children&&("string"==typeof e?this.nameTable[""+e]&&(n=e):(n=e.id=e.id||i.i(k.g)(),this.add(e)),n&&(!e.umlIndex||-1===e.umlIndex))){var a=this.nameTable[""+n];if(a.parentId=o.id,o.container&&"Stack"===o.container.type&&this.updateStackProperty(o,a),r)o.children.splice(r,0,n),o.wrapper.children.splice(r,0,a.wrapper);else{o.children.push(n),o.wrapper.children.push(a.wrapper);var s=this.getObject(t.parentId);if(s&&s.shape instanceof l.i)for(var h=0;h<s.shape.lanes.length;h++){var d=a.parentId.split(t.parentId);if(s.shape.lanes[parseInt(h.toString(),10)].id===d[1].slice(0,-1)){s.shape.lanes[parseInt(h.toString(),10)].children.push(a);break}}}o.wrapper.measure(new m.a),o.wrapper.arrange(o.wrapper.desiredSize),o.isLane||(this.nameTable[t.id].width=o.wrapper.actualSize.width,this.nameTable[t.id].height=o.wrapper.actualSize.height,this.nameTable[t.id].offsetX=o.wrapper.offsetX,this.nameTable[t.id].offsetY=o.wrapper.offsetY),void 0!==o.container&&(a.offsetX=a.wrapper.offsetX,a.offsetY=a.wrapper.offsetY),(!o.parentId||this.nameTable[o.parentId]&&"SwimLane"!==this.nameTable[o.parentId].shape.type)&&this.updateDiagramObject(o)}return n},e.prototype.clear=function(){this.clearObjects()},e.prototype.clearObjects=function(t){var e=[];if(t?e=t:(e=e.concat(this.nodes),e=e.concat(this.connectors)),this.diagramActions=this.diagramActions|y.p.Clear,i.i(r.isBlazor)()&&r.blazorTemplates.diagramsf_node_template){this.resetTemplate();var n=r.blazorTemplates.diagramsf_node_template.length;n>0&&r.blazorTemplates.diagramsf_node_template.splice(0,n-1)}for(var o=0,a=e;o<a.length;o++){var s=a[o];this.nameTable[s.id]&&this.remove(s)}this.diagramActions=this.diagramActions&~y.p.Clear,this.spatialSearch=new E.a(this.nameTable),this.initHistory()},e.prototype.startEditCommad=function(){var t,e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(e&&e instanceof l.a)if(e.isLane&&e.parentId)for(var i=this.nameTable[e.parentId],r=i.shape.lanes,n=e.id.slice(i.id.length),o=n.substring(0,n.length-1),a=0;a<r.length;a++)e.isLane&&o===r[parseInt(a.toString(),10)].id&&(t=this.nameTable[r[parseInt(a.toString(),10)].header.id]);else if("SwimLane"===e.shape.type&&e.shape.header&&e.shape.hasHeader){var s=e.wrapper.children[0].rows[0].cells[0].children[0].id;t=this.nameTable[""+s]}this.startTextEdit(t)},e.prototype.startTextEdit=function(t,e){if(!i.i(D.o)(this)&&!i.i(D.q)(this)||i.i(D.p)(this)){this.textEditing=!0;var n=this.scroller.transform,o=i.i(D.w)(this)?n.scale:1,a=void 0,s=void 0,h=void 0,d=void 0,g=void 0,u=void 0;if(t||(t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),t){if(i.i(r.isBlazor)()){var f=i.i(k.e)(t);f.annotations.length>0&&this.insertValue(f,t instanceof l.a),t=this.nameTable[t.id]||t}t.shape&&"UmlClassifier"===t.shape.type&&(t=this.nameTable[t.children[0]]);var v=!1;if(this.bpmnModule&&(u=this.bpmnModule.getTextAnnotationWrapper(t,e))&&(t=this.nameTable[t.id.split("_textannotation_")[0]]),u?v=!0:("Text"!==t.shape.type&&0===t.annotations.length&&(t.constraints&y.f.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(t,[{id:i.i(k.g)(),content:""}]))),!e&&("Text"!==t.shape.type&&t.annotations.length>0||"Text"===t.shape.type)&&(e="Text"===t.shape.type?t.wrapper.children[0].id.split("_")[1]:t.annotations[0].id),e&&(u=this.getWrapper(t.wrapper,e))),t&&u&&!(u instanceof H.a)&&(!i.i(D.x)(u,t)||v)){var b=u.style,S=void 0;S=u.bounds.width<t.wrapper.bounds.width?u.bounds.width:t.wrapper.bounds.width,S=90>S?90:S;var w=document.getElementById(this.element.id+"_editTextBoxDiv"),x=document.getElementById(this.element.id+"_editBox");if(a=x?x.value:u.content,this.activeLabel.text=a,w||x||(w=i.i(B.a)("div",{}),x=i.i(B.a)("textarea",{}),this.diagramCanvas.appendChild(w),w.appendChild(x),x.appendChild(document.createTextNode(a))),s=i.i(B.r)(u.style,a,void 0,void 0,S),s.isEmpty()&&(s="Text"!==t.shape.type?new m.a(i.i(c.F)(t,u.id.split(t.id+"_")[1]).width||50,u.style.fontSize):new m.a(t.width>50?50:t.width,u.style.fontSize)),t.parentId&&"UmlClassifier"===this.nameTable[t.parentId].shape.type?(s.width=t.wrapper.bounds.width-20,d=(t.wrapper.bounds.center.x+n.tx)*n.scale-s.width/2*o-2.5,g=(t.wrapper.bounds.center.y+n.ty)*n.scale-s.height/2*o-3,u.style.textAlign="Left"):(s.width=Math.max(s.width,50),d=(u.bounds.center.x+n.tx)*n.scale-s.width/2*o-2.5,g=(u.bounds.center.y+n.ty)*n.scale-s.height/2*o-3),t instanceof p.a&&"Bezier"===t.type){var I=this.getMidPoint(t);d=(I.cx+n.tx)*n.scale-s.width/2*o-2.5,g=(I.cy+n.ty)*n.scale-s.height/2*o-3}h={id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+d+"px;top:"+g+"px;width:"+(s.width+1)*o+"px;height:"+s.height*o+"px; containerName:"+t.id+";"},i.i(B.b)(w,h),h={id:this.element.id+"_editBox",style:"width:"+(s.width+1)*o+"px;height:"+s.height*o+"px;resize: none;outline: none;overflow: hidden;;font-family:"+b.fontFamily+";font-size:"+b.fontSize*o+"px;text-align:"+u.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"},i.i(B.b)(x,h),x.style.fontWeight=b.bold?"bold":"",x.style.fontStyle=b.italic?"italic":"",x.style.lineHeight=(1.2*b.fontSize+"px;").toString(),x.style.textDecoration=b.textDecoration?b.textDecoration:"",this.activeLabel.parentId=t.id,this.activeLabel.id=e,u.visible=!1,this.updateDiagramObject(t),this.diagramActions=this.diagramActions|y.p.TextEdit,this.isTriggerEvent||(r.EventHandler.add(x,"input",this.eventHandler.inputChange,this.eventHandler),r.EventHandler.add(x,"focusout",this.focusOutEdit,this),x.select())}}}},e.prototype.updateConnectorfixedUserHandles=function(t){if(t.fixedUserHandles.length)for(var e=void 0,i=0,r=t.fixedUserHandles;i<r.length;i++){var n=r[i];e=this.getWrapper(t.wrapper,n.id),t.updateAnnotation(n,t.intermediatePoints,t.wrapper.bounds,e)}t.wrapper.measure(new m.a(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.updateNodeExpand=function(t,e){for(var i=0;i<t.outEdges.length;i++){var r=this.nameTable[t.outEdges[parseInt(i.toString(),10)]],n=this.nameTable[r.targetID];r.visible=e,n&&(e||(this.updateElementVisibility(r.wrapper,r,!1),n.isExpanded=e),this.updateNodeExpand(n,n.isExpanded),n.visible=e,e||this.updateElementVisibility(n.wrapper,n,!1))}},e.prototype.updateConnectorAnnotation=function(t){if(t.annotations.length)for(var e=void 0,i=0,r=t.annotations;i<r.length;i++){var n=r[i];e=this.getWrapper(t.wrapper,n.id),t.updateAnnotation(n,t.intermediatePoints,t.wrapper.bounds,e,this.diagramActions&y.p.Interactions)}t.wrapper.measure(new m.a(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.removeChildrenFromLayout=function(t){for(var e,i=[],r=0;r<t.length;r++)e=t[parseInt(r.toString(),10)],e.parentId||e.processId||i.push(e);return i},e.prototype.doLayout=function(){var t,e=!1,n="ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type,o=this.isProtectedOnChange;this.protectPropertyChange(!0);var a=this.removeChildrenFromLayout(this.nodes),s=this.layout.enableRouting&&"ComplexHierarchicalTree"===this.layout.type,h={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if("None"!==this.layout.type){if((s||"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&n||"Linear"===this.layout.arrangement)&&this.lineDistributionModule.initLineDistribution(this.layout,this),this.organizationalChartModule)t=this.organizationalChartModule.updateLayout(a,this.nameTable,this.layout,h,this.dataSourceSettings.id,this.diagramActions),e=!0,this.layoutAnimateModule&&t.rootNode&&!this.diagramActions?this.updateNodeExpand(t.rootNode,t.rootNode.isExpanded):this.layoutAnimateModule||!t.rootNode||t.rootNode.isExpanded||this.canExpand||this.updateNodeExpand(t.rootNode,t.rootNode.isExpanded);else if(this.mindMapChartModule)a&&a.length>0&&this.mindMapChartModule.updateLayout(a,this.nameTable,this.layout,h,this.dataSourceSettings.id,this.dataSourceSettings.root),e=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(a,this.nameTable,this.layout,h),e=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(a,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,h),e=!0;else if(this.complexHierarchicalTreeModule){var d=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);d.length>0&&this.complexHierarchicalTreeModule.doLayout(d,this.nameTable,this.layout,h,this.lineDistributionModule),e=!0}if(e){this.preventDiagramUpdate=!0;var l={},p=a;i.i(r.isBlazor)()&&!this.commandHandler.canUpdateTemplate&&this.updateTemplate();for(var g=0,u=p;g<u.length;g++){var f=u[g],v=f;if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&y.p.PreventIconsUpdate||(this.updateIcon(v),this.updateDefaultLayoutIcons(v)),this.preventNodesUpdate=!0,this.nodePropertyChange(v,{},{offsetX:v.offsetX,offsetY:v.offsetY},!0),this.preventNodesUpdate=!1,v.wrapper.measure(new m.a(v.wrapper.width,v.wrapper.height)),v.wrapper.arrange(v.wrapper.desiredSize),this.updateDiagramObject(v,!0),v.inEdges.length>0)for(var b=0;b<v.inEdges.length;b++){var S=this.nameTable[v.inEdges[parseInt(b.toString(),10)]];l[S.id]=S}if(v.outEdges.length>0)for(var w=0;w<v.outEdges.length;w++){var x=this.nameTable[v.outEdges[parseInt(w.toString(),10)]];l[x.id]=x}}for(var I=0,P=Object.keys(l);I<P.length;I++){var C=P[I];s&&this.lineDistributionModule.resetConnectorSegments(this.nameTable[""+C]);var S=l[""+C],z=this.getPoints(S);s&&this.lineDistributionModule.resetRoutingSegments(S,this,z),i.i(c.t)(S,z),"Bpmn"===S.shape.type&&"Default"===S.shape.sequence&&"Sequence"===S.shape.flow&&this.commandHandler.updatePathElementOffset(S),S.wrapper.measure(new m.a(void 0,void 0)),S.wrapper.arrange(S.wrapper.desiredSize),this.updateConnectorAnnotation(S),this.updateConnectorfixedUserHandles(S),this.updateQuad(S),this.updateDiagramObject(S,!0)}(s||"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&n)&&this.lineDistributionModule.distributeLines(this.layout,this),this.preventDiagramUpdate=!1,this.updatePage(),this.diagramActions&y.p.Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}o||this.protectPropertyChange(o)}return e&&this.updateDiagramElementQuad(),this.blazorActions&y.i.expandNode?t:!i.i(r.isBlazor)()||null},e.prototype.saveDiagram=function(){for(var t,e,r,n,o=[],a=0;a<this.nodes.length;a++)if(t=this.nodes[parseInt(a.toString(),10)],"SwimLane"===t.shape.type){e=t.wrapper.children[0],r=e.childTable;for(var s=0,h=Object.keys(r);s<h.length;s++){var d=h[s];n=r[""+d],o=i.i(c.G)(n,o)}for(var l=0;l<o.length;l++)this.nameTable[o[parseInt(l.toString(),10)]]&&(this.swimlaneChildTable[o[parseInt(l.toString(),10)]]=this.nameTable[o[parseInt(l.toString(),10)]].zIndex);this.swimlaneZIndexTable[t.id]=t.zIndex}return i.i(c.H)(this)},e.prototype.loadDiagram=function(t){return i.i(c.I)(t,this)},e.prototype.getDiagramContent=function(t){if(this.printandExportModule){return this.printandExportModule.getDiagramContent(t)}return""},e.prototype.exportImage=function(t,e){this.printandExportModule&&this.printandExportModule.exportImages(t,e)},e.prototype.printImage=function(t,e){this.printandExportModule&&(e.printOptions=!0,this.printandExportModule.exportImages(t,e))},e.prototype.setStackLimit=function(t){this.undoRedoModule&&t&&(this.historyManager.stackLimit=t,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,t,this,!0))},e.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},e.prototype.getDiagramBounds=function(){if(this.printandExportModule){var t=this.printandExportModule.getDiagramBounds("",{});return t.width=t.width>this.scrollSettings.viewPortWidth?t.width+(t.x>0?t.x:0):this.scrollSettings.viewPortWidth,t.height=t.height>this.scrollSettings.viewPortHeight?t.height+(t.y>0?t.y:0):this.scrollSettings.viewPortHeight,t.x=t.x>0?0:t.x,t.y=t.y>0?0:t.y,t}return new S.a},e.prototype.exportDiagram=function(t){if(this.printandExportModule){return this.printandExportModule.exportDiagram(t)}return""},e.prototype.print=function(t){this.printandExportModule&&this.printandExportModule.print(t)},e.prototype.addPorts=function(t,e){this.protectPropertyChange(!0);var n=[],o=!0;if(i.i(r.isBlazor)()&&null!==t&&t.ports.length>0&&!(this.diagramActions&y.p.UndoRedo)){-1!==Number(i.i(c.J)(t,e[0].id,!1))&&(o=!1)}t=this.nameTable[t.id]||t;var a;e.length>1&&this.startGroupAction();for(var s=0;s<e.length;s++){if(a=new _.b(t,"ports",e[parseInt(s.toString(),10)],!0),t.ports.push(a),i.i(r.isBlazor)()&&o&&n.push(a),t.children){var h=t.wrapper;t.initPort(this.getDescription,t.wrapper.children[h.children.length-1],a)}else{t.wrapper.children.push(t.initPortWrapper(t.ports[t.ports.length-1]))}if(!(this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.Group)){var d={type:"PortCollectionChanged",changeType:"Insert",undoObject:i.i(k.e)(a),redoObject:i.i(k.e)(t),category:"Internal"};this.addHistoryEntry(d)}}e.length>1&&this.endGroupAction(),i.i(r.isBlazor)()&&o&&this.UpdateBlazorLabelOrPortObjects(n,"Port",void 0,this.nodes.indexOf(t)),t.wrapper.measure(new m.a(t.width,t.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addConstraints=function(t,e){return t|e},e.prototype.removeConstraints=function(t,e){return t&~e},e.prototype.addNodeLabels=function(t,e){this.addLabels(t,e)},e.prototype.addConnectorLabels=function(t,e){this.addLabels(t,e)},e.prototype.addLabels=function(t,e){this.protectPropertyChange(!0);var n=!0,o=[];if(i.i(r.isBlazor)()&&null!=t&&t.annotations.length>0&&!(this.diagramActions&y.p.UndoRedo)){-1!==Number(i.i(c.J)(t,e[0].id,!0))&&(n=!1)}t=this.nameTable[t.id]||t;var a,s=t.wrapper;e.length>1&&this.startGroupAction();for(var h=0;h<e.length;h++){if(t instanceof l.a)if(a=new x.b(t,"annotations",e[parseInt(h.toString(),10)],!0),t.annotations.push(a),i.i(r.isBlazor)()&&n&&o.push(a),t.children){for(var d=t,g=0;g<d.wrapper.children.length;g++)if(d.wrapper.children[parseInt(g.toString(),10)].id===d.id+"group_container"){var u=d.wrapper.children[parseInt(g.toString(),10)];u.children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id))}}else s.children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id));else if(t instanceof p.a){a=new x.c(t,"annotations",e[parseInt(h.toString(),10)],!0),t.annotations.push(a),i.i(r.isBlazor)()&&n&&o.push(a);var f=s.children[0],v=new S.a(f.offsetX-f.width/2,f.offsetY-f.height/2,f.width,f.height);s.children.push(t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,v,this.getDescription,this.element.id))}if(!(this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.Group)){var b={type:"LabelCollectionChanged",changeType:"Insert",undoObject:i.i(k.e)(a),redoObject:i.i(k.e)(t),category:"Internal"};this.addHistoryEntry(b)}}e.length>1&&this.endGroupAction(),i.i(r.isBlazor)()&&n&&this.UpdateBlazorLabelOrPortObjects(o,t instanceof l.a?"NodeAnnotation":"ConnectorAnnotation",void 0,t instanceof l.a?this.nodes.indexOf(t):this.connectors.indexOf(t)),t.wrapper.measure(new m.a(s.width,s.height)),t.wrapper.arrange(s.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addLanes=function(t,e,r){t=this.nameTable[t.id]||t;for(var n=0;n<e.length;n++)i.i(V.o)(this,t,e[parseInt(n.toString(),10)],r),void 0!==r&&(r+=1);this.updateDiagramElementQuad()},e.prototype.addPhases=function(t,e){t=this.nameTable[t.id]||t;for(var r=0;r<e.length;r++)i.i(V.p)(this,t,e[parseInt(r.toString(),10)]);this.updateDiagramElementQuad()},e.prototype.removeLane=function(t,e){i.i(V.l)(this,void 0,t,e),this.updateDiagramElementQuad()},e.prototype.removePhase=function(t,e){i.i(V.m)(this,void 0,t,e),this.updateDiagramElementQuad()},e.prototype.removelabelExtension=function(t,e,r,n){for(var o=0;o<n.children.length;o++){var a=n.children[parseInt(o.toString(),10)];if((a instanceof b.a||a instanceof H.a)&&a.id.match("_"+e[parseInt(r.toString(),10)].id+"$")){for(var s=0;s<t.annotations.length;s++)if(a.id.match("_"+t.annotations[parseInt(s.toString(),10)].id+"$")){if(!(this.diagramActions&y.p.UndoRedo)){var h={type:"LabelCollectionChanged",changeType:"Remove",undoObject:i.i(k.e)(t.annotations[parseInt(s.toString(),10)]),redoObject:i.i(k.e)(t),category:"Internal"};this.addHistoryEntry(h)}t.annotations.splice(s,1)}if(n.children.splice(o,1),"SVG"===this.mode){var d=i.i(B.n)(a.id,this.element.id);if(d){var l=i.i(B.n)(a.id,this.element.id);l.parentNode.removeChild(l)}i.i(B.n)(a.id+"_text",this.element.id)&&(d=i.i(B.n)(a.id+"_text",this.element.id),d.parentNode.removeChild(d));var c=i.i(B.n)(a.id+"_html_element",this.element.id);c&&c.parentNode.removeChild(c)}else this.refreshCanvasLayers()}}},e.prototype.removeLabels=function(t,e){var n=!0;if(i.i(r.isBlazor)()&&null!==t&&!(this.diagramActions&y.p.UndoRedo)){var o=t.annotations.length>0?Number(i.i(c.J)(t,e[0].id,!0)):-1;-1===o&&(n=!1)}if(t=this.nameTable[t.id]||t,i.i(r.isBlazor)()&&n){for(var a=[],s=[],h=0;h<e.length;h++){var o=Number(i.i(c.J)(t,e[parseInt(h.toString(),10)].id,!0));s.push(o),a.push(e[parseInt(h.toString(),10)])}this.UpdateBlazorLabelOrPortObjects(a,t instanceof l.a?"NodeAnnotation":"ConnectorAnnotation",s,t instanceof l.a?this.nodes.indexOf(t):this.connectors.indexOf(t))}e.length>1&&this.startGroupAction();for(var h=e.length-1;h>=0;h--)if(t.children&&t.children.length>0)for(var d=0;d<t.wrapper.children.length;d++)this.removelabelExtension(t,e,h,t.wrapper.children[parseInt(d.toString(),10)]);else this.removelabelExtension(t,e,h,t.wrapper);e.length>1&&this.endGroupAction()},e.prototype.removePortsExtenion=function(t,e,r,n){for(var o=0;o<n.children.length;o++){var a=n.children[parseInt(o.toString(),10)];if(a instanceof v.a&&a.id.match("_"+e[parseInt(r.toString(),10)].id+"$")){for(var s=0;s<t.ports.length;s++)if(a.id.match("_"+t.ports[parseInt(s.toString(),10)].id+"$")){if(!(this.diagramActions&y.p.UndoRedo)){var h={type:"PortCollectionChanged",changeType:"Remove",undoObject:i.i(k.e)(t.ports[parseInt(s.toString(),10)]),redoObject:i.i(k.e)(t),category:"Internal"};this.addHistoryEntry(h)}t.ports.splice(s,1)}if(n.children.splice(o,1),"SVG"===this.mode){var d=i.i(B.n)(a.id,this.element.id);d.parentNode.removeChild(d)}else this.refreshCanvasLayers()}}},e.prototype.removePorts=function(t,e){var n=!0;if(i.i(r.isBlazor)()&&null!==t&&!(this.diagramActions&y.p.UndoRedo)){var o=t.ports.length>0?Number(i.i(c.J)(t,e[0].id,!1)):-1;-1===o&&(n=!1)}if(t=this.nameTable[t.id]||t,i.i(r.isBlazor)()&&n){for(var a=[],s=[],h=e.length-1;h>=0;h--){var o=Number(i.i(c.J)(t,e[parseInt(h.toString(),10)].id,!1));a.push(o),s.push(e[parseInt(h.toString(),10)])}this.UpdateBlazorLabelOrPortObjects(s,"Port",a,this.nodes.indexOf(t))}e.length>1&&this.startGroupAction();for(var h=e.length-1;h>=0;h--)if(t.children&&t.children.length>0)for(var d=0;d<t.wrapper.children.length;d++){var l=t.wrapper.children[parseInt(d.toString(),10)];l.id.match(t.wrapper.id)&&this.removePortsExtenion(t,e,h,t.wrapper.children[parseInt(d.toString(),10)])}else this.removePortsExtenion(t,e,h,t.wrapper);e.length>1&&this.endGroupAction()},e.prototype.getSizeValue=function(t,e){var r;if(r=t.toString().indexOf("px")>0?t.toString():t.toString().indexOf("%")>0?void 0!==e?"100%":t.toString():t.toString()+"px",e){i.i(f.a)(this);r="calc("+r+" - "+e+"px)"}return r},e.prototype.renderRulers=function(){this.rulerSettings.showRulers?(i.i(f.d)(this),i.i(f.e)(this,!0),i.i(f.e)(this,!1)):i.i(f.b)(this)},e.prototype.intOffPageBackground=function(){var t=new m.a;t=i.i(f.a)(this);var e=document.getElementById(this.element.id+"content"),r=this.getSizeValue(this.width,t.width),n=this.getSizeValue(this.height,t.height),o=this.rulerSettings.showRulers?"width:"+r+"; height:"+n+";top:"+t.height+"px;left:"+t.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+r+"; height:"+n+";position:absolute; left:0px;  top:0px;overflow: auto;",a={id:this.element.id+"content",tabindex:"0",style:o};e?(this.diagramCanvas=e,i.i(B.i)(this.diagramCanvas,o)):(this.diagramCanvas=i.i(B.a)("div",a),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},e.prototype.initDiagram=function(){this.intOffPageBackground(),i.i(B.b)(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},e.prototype.renderHiddenUserHandleTemplateLayer=function(t){var e={class:this.element.id+"_hiddenUserHandleTemplate",style:"width:"+t.width+"px; height:"+t.height+"px;visibility:hidden ;  overflow: hidden;"},r=i.i(B.a)("div",e);this.element.appendChild(r)},e.prototype.renderBackgroundLayer=function(t,e){var r=this.createSvg(this.element.id+"_backgroundLayer_svg",t.width,t.height);i.i(B.i)(r,e);var n=i.i(B.d)("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});r.appendChild(n);var o={id:this.element.id+"_backgroundLayer",class:"e-background-layer"},a=i.i(B.d)("g",o);r.appendChild(a),this.diagramCanvas.appendChild(r)},e.prototype.renderGridLayer=function(t,e){var r=this.createSvg(this.element.id+"_gridline_svg",t.width,t.height);r.setAttribute("class","e-grid-layer");var n=i.i(B.d)("g",{id:this.element.id+"_gridline"}),o=i.i(B.d)("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%"});i.i(c.K)()?o.setAttribute("fill","url("+location.protocol+"//"+location.host+location.pathname+"#"+this.element.id+"_pattern)"):o.setAttribute("fill","url(#"+this.element.id+"_pattern)"),n.appendChild(o),r.appendChild(n),this.diagramCanvas.appendChild(r),i.i(B.e)(r,{style:e})},e.prototype.renderDiagramLayer=function(t,e){var r={id:this.element.id+"_diagramLayer_div",style:"width:"+t.width+"px; height:"+t.height+"px;"+e};if(this.diagramLayerDiv=i.i(B.a)("div",r),"SVG"===this.mode){var o=this.createSvg(this.element.id+"_diagramLayer_svg",t.width,t.height);o.style["pointer-events"]="none",o.setAttribute("class","e-diagram-layer");var a=i.i(B.d)("g",{id:this.element.id+"_diagramLayer"}),s=i.i(B.d)("g",{});this.diagramLayer=a,o.style["pointer-events"]="all",s.appendChild(a),o.appendChild(s),this.diagramLayerDiv.appendChild(o)}else this.diagramLayer=n.a.createCanvas(this.element.id+"_diagram",t.width,t.height),i.i(B.i)(this.diagramLayer,"position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},e.prototype.initLayers=function(){var t="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",e=document.getElementById(this.element.id),r=e.getBoundingClientRect(),n=i.i(B.s)();this.scroller.scrollerWidth=n,this.scroller.setViewPortSize(r.width,r.height),this.renderRulers();if(window.measureElement){window.measureElement=null;document.getElementById("measureElement").remove()}i.i(B.t)(),this.renderBackgroundLayer(r,t),this.renderGridLayer(r,t),this.renderDiagramLayer(r,t),this.renderHTMLLayer(r,t),this.renderPortsExpandLayer(r,t),this.renderNativeLayer(r,t),this.renderAdornerLayer(r,t),this.renderHiddenUserHandleTemplateLayer(r)},e.prototype.renderAdornerLayer=function(t,e){var r=i.i(B.a)("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e}),n=i.i(B.a)("div",{id:this.element.id+"_diagramUserHandleLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e});n.setAttribute("class","e-userHandle-layer"),r.appendChild(n);var o=this.createSvg(this.element.id+"_diagramAdorner_svg",t.width,t.height);o.setAttribute("class","e-adorner-layer"),o.style["pointer-events"]="none",this.adornerLayer=i.i(B.d)("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.style[" pointer-events"]="all",o.appendChild(this.adornerLayer),r.appendChild(o),this.diagramCanvas.appendChild(r);var a=i.i(B.d)("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(a),i.i(B.e)(o,{style:"pointer-events:none;"})},e.prototype.renderPortsExpandLayer=function(t,e){var r=this.createSvg(this.element.id+"_diagramPorts_svg",t.width,t.height);r.setAttribute("class","e-ports-expand-layer");var n=i.i(B.d)("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});r.appendChild(n);var o=i.i(B.d)("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});r.appendChild(o),this.diagramCanvas.appendChild(r),i.i(B.e)(r,{style:e})},e.prototype.renderHTMLLayer=function(t,e){this.htmlLayer=i.i(B.a)("div",{id:this.element.id+"_htmlLayer",style:"width:"+t.width+"px; height:"+t.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var r=i.i(B.a)("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(r),this.diagramCanvas.appendChild(this.htmlLayer)},e.prototype.renderNativeLayer=function(t,e){var r=this.createSvg(this.element.id+"_nativeLayer_svg",t.width,t.height),n=i.i(B.d)("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});r.appendChild(n),this.diagramLayerDiv.appendChild(r),i.i(B.e)(r,{class:"e-native-layer",style:e})},e.prototype.createSvg=function(t,e,r){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.i(B.e)(n,{id:t,width:e,height:r}),n},e.prototype.updateBazorShape=function(){for(var t=0;t<this.nodes.length;t++){var e=this.nodes[parseInt(t.toString(),10)];switch(e.shape.type){case"Bpmn":e.shape.bpmnShape=e.shape.shape?e.shape.shape:e.shape.bpmnShape;break;case"UmlActivity":e.shape.umlActivityShape=e.shape.shape?e.shape.shape:e.shape.umlActivityShape;break;case"Flow":e.shape.flowShape=e.shape.shape?e.shape.shape:e.shape.flowShape;break;case"Basic":e.shape.basicShape=e.shape.shape?e.shape.shape:e.shape.basicShape;break;case"Text":e.shape.textContent=e.shape.content?e.shape.content:e.shape.textContent}}},e.prototype.initObjects=function(t){this.updateBazorShape(),this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(t)},e.prototype.initLayerObjects=function(){var t=this.layers.length>1,e=[],n=window&&window.Blazor&&!this.dataSourceSettings.dataSource,o={},a={},s=[],h=[],d=[],c=[],g=[],u=[],f=[];i.i(r.isBlazor)()&&n&&(h=this.previousNodeCollection,d=this.previousConnectorCollection);for(var m=0,v=this.nodes;m<v.length;m++){var b=v[m];b.id=b.id||i.i(k.g)(),this.addToLayer(b,t),o[b.id]=b}for(var S=0,w=this.connectors;S<w.length;S++){var b=w[S];b.id=b.id||i.i(k.g)(),this.addToLayer(b,t),o[b.id]=b}for(var x=0,I=this.layers;x<I.length;x++){for(var P=I[x],C=0,z=P.objects;C<z.length;C++){var b=z[C];if(o[""+b])if(o[""+b]instanceof p.a){var O=o[""+b];if(O.sourceID&&O.targetID){var T=o[O.sourceID],A=o[O.targetID],L=!0;this.isLoading&&(T&&T.children&&T.children.length>0||A&&A.children&&A.children.length>0)&&(L=!1),T&&T.wrapper&&A&&A.wrapper&&L?this.initConnectors(o[""+b],P):e.push(o[""+b])}else this.initConnectors(o[""+b],P)}else o[""+b].children?s.push(b):o[""+b].shape instanceof l.e&&o[""+b].shape.activity.subProcess.processes&&o[""+b].shape.activity.subProcess.processes.length>0?a[o[""+b].id]=b:this.initNodes(o[""+b],P)}if(this.bpmnModule)for(var E=0,B=this.bpmnModule.textAnnotationConnectors;E<B.length;E++){var b=B[E];this.initConnectors(b,P,!1)}}for(var M=0,D=Object.keys(a);M<D.length;M++){var b=D[M];this.initObject(o[""+b]),this.bpmnModule.updateDocks(o[""+b],this)}for(var R=this.alignGroup(s,o),_=0,j=R;_<j.length;_++){var b=j[_],P=this.commandHandler.getObjectLayer(b);this.initNodes(o[""+b],P)}for(var N=0,H=e;N<H.length;N++){var O=H[N],P=this.commandHandler.getObjectLayer(O.id);this.initConnectors(O,P)}if(i.i(r.isBlazor)()&&n){for(var W=0,V=this.nodes;W<V.length;W++){var b=V[W];c.push(i.i(k.e)(b,void 0,void 0,!0))}for(var X=0,Y=this.connectors;X<Y.length;X++){var b=Y[X];g.push(i.i(k.e)(b,void 0,void 0,!0))}if(this.commandHandler.getObjectChanges(h,c,u),this.commandHandler.getObjectChanges(d,g,f),!(this.blazorActions&y.i.ClearObject)){var U={nodes:u,connectors:f},b={methodName:"UpdateBlazorProperties",diagramobj:U};window.sfBlazor.updateBlazorProperties(b,this)}}},e.prototype.alignGroup=function(t,e){var i,r,n,o,a=[],s=[];for(n=0;n<t.length;n++){i=t[parseInt(n.toString(),10)],r=e[""+i];var h=void 0;if(r&&r.children.length)for(o=0;o<r.children.length;o++)h=r.children[parseInt(o.toString(),10)],t.indexOf(h)>-1&&-1===a.indexOf(h)&&-1===s.indexOf(h)&&a.splice(0,0,h);-1===a.indexOf(i)&&s.push(i)}return a=a.concat(s)},e.prototype.addToLayer=function(t,e){var i;if(e&&(i=this.commandHandler.getObjectLayer(t.id)),e&&i||-1===this.activeLayer.objects.indexOf(t.id)&&this.activeLayer.objects.push(t.id),(t instanceof l.a||t instanceof p.a)&&("SwimLane"!==t.shape.type||t.children&&t.children.length>0)){if(t.parentId){var r=this.swimlaneZIndexTable[t.parentId],n=this.swimlaneChildTable[t.id];(r&&-1!==r||n&&-1!==n)&&(t.zIndex=this.swimlaneChildTable[t.id])}t instanceof p.a&&t.sourceID&&t.targetID?-1!==this.activeLayer.objects.indexOf(t.sourceID)&&-1!==this.activeLayer.objects.indexOf(t.targetID)&&this.setZIndex(i||this.activeLayer,t):this.setZIndex(i||this.activeLayer,t)}},e.prototype.updateLayer=function(t){for(var e=0,i=Object.keys(t.layers);e<i.length;e++){for(var r=i[e],n=this.layers[""+r].objects,o=0,a=n;o<a.length;o++){var s=a[o],h=this.nameTable[""+s];void 0!==t.layers[""+r].visible?this.updateElementVisibility(h.wrapper,h,t.layers[""+r].visible):!0===t.layers[""+r].lock&&this.unSelect(h)}void 0!==t.layers[""+r].lock&&(this.layers[""+r].lock=t.layers[""+r].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},e.prototype.updateScrollSettings=function(t){var e=-this.scroller.horizontalOffset+t.scrollSettings.horizontalOffset||0,n=-this.scroller.verticalOffset+t.scrollSettings.verticalOffset||0,o={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===e&&0===n||this.pan(e,n);var a={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},s="Start";this.realActions&y.a.PanInProgress&&(s="Progress");var h={oldValue:o,newValue:a,source:this,panState:s};i.i(r.isBlazor)()&&this.scrollChange&&(h={oldValue:o,newValue:a,sourceId:this.element.id,panState:s}),this.triggerEvent(y.r.scrollChange,h),this.commandHandler.updatePanState(!0),"Canvas"===this.mode&&this.constraints&y.j.Virtualization&&this.refreshDiagramLayer()},e.prototype.initData=function(){var t=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;if(this.dataBindingModule&&!(this.realActions&y.a.PreventDataInit))if(t&&this.dataSourceSettings.connectionDataSource.dataManager){var e=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;this.nodes=this.generateData(e,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)}else t&&t.dataSource&&(t.dataSource.url||"BlazorAdaptor"===t.adaptorName&&!t.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this)},e.prototype.generateData=function(t,e){var r,n=[];for(r=0;r<t.length;r++){var o=t[parseInt(r.toString(),10)],a=e?this.makeData(o,!0):this.makeData(o,!1);!a||!a.id||i.i(c.L)(n,a.id)&&i.i(c.L)(n,a.id)||n.push(a)}return n},e.prototype.makeData=function(t,e){var r,n=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,o={};if(o.id=t[n.id]?t[n.id]:i.i(k.g)(),n.sourceID&&(o.sourceID=t[n.sourceID]),n.targetID&&(o.targetID=t[n.targetID]),t[n.sourcePointX]&&t[n.sourcePointY]&&(o.sourcePoint={x:Number(t[n.sourcePointX]),y:Number(t[n.sourcePointY])}),t[n.targetPointX]&&t[n.targetPointY]&&(o.targetPoint={x:Number(t[n.targetPointX]),y:Number(t[n.targetPointY])}),n.crudAction.customFields&&n.crudAction.customFields.length>0)for(r=0;r<n.crudAction.customFields.length;r++)o[n.crudAction.customFields[parseInt(r.toString(),10)]]=t[n.crudAction.customFields[parseInt(r.toString(),10)]];return o},e.prototype.initNodes=function(t,e){this.preventDiagramUpdate=!0,this.initObject(t,e),this.preventDiagramUpdate=!1},e.prototype.initConnectors=function(t,e,i){this.preventDiagramUpdate=!0,this.initObject(t,e,i),this.updateEdges(t),this.preventDiagramUpdate=!1},e.prototype.setZIndex=function(t,e){var i=t;if(-1===e.zIndex){for(;i.zIndexTable[i.objectZIndex+1];)t.objectZIndex++;e.zIndex=++i.objectZIndex}else{var r=e.zIndex;if(i.zIndexTable[parseInt(r.toString(),10)])for(var n=Object.keys(i.zIndexTable).length,o=0,a=0;a<n;a++){if(a===r){for(var s=n;s>r;s--)i.zIndexTable[parseInt(s.toString(),10)]=i.zIndexTable[s-1],this.nameTable[i.zIndexTable[parseInt(s.toString(),10)]]&&(this.nameTable[i.zIndexTable[parseInt(s.toString(),10)]].zIndex=s);i.zIndexTable[parseInt(a.toString(),10)]=e.id}o++}}},e.prototype.initializeDiagramLayers=function(){for(var t=0;t<this.layers.length;t++)if(-1!==this.layers[parseInt(t.toString(),10)].zIndex){var e=this.layers[parseInt(t.toString(),10)];this.layers[parseInt(t.toString(),10)]=this.layers[this.layers[parseInt(t.toString(),10)].zIndex],this.layers[e.zIndex]=e}for(var i=0,r=this.layers;i<r.length;i++){var n=r[i];n.zIndex=-1!==n.zIndex?n.zIndex:this.layers.indexOf(n),this.layerZIndexTable[n.zIndex]=n.id}for(var t=0;t<this.layers.length;t++)for(var o=t+1;o<this.layers.length;o++)if(this.layers[parseInt(t.toString(),10)].zIndex>this.layers[parseInt(o.toString(),10)].zIndex){var e=this.layers[parseInt(t.toString(),10)];this.layers[parseInt(t.toString(),10)]=this.layers[parseInt(o.toString(),10)],this.layers[parseInt(o.toString(),10)]=e}if(0===this.layers.length){var a={id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}};this.commandHandler.addLayer(a,null,!0)}this.setActiveLayer(this.layers[this.layers.length-1].id)},e.prototype.resetTool=function(){this.eventHandler.resetTool()},e.prototype.initObjectExtend=function(t,e,i){if(i){var r=this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds);if(e.zIndexTable[t.zIndex]=t.id,!r){for(var n=t instanceof l.a?this.nodes:this.connectors,o=0;o<=n.length;o++)n[parseInt(o.toString(),10)]&&t.id===n[parseInt(o.toString(),10)].id&&n.splice(o,1);delete e.zIndexTable[t.zIndex]}}},e.prototype.initObject=function(t,e,r,n){if(void 0===r&&(r=!0),void 0!==t){if(r&&(e||(this.addToLayer(t,!1),e=this.activeLayer),(t instanceof l.a||t instanceof p.a)&&("SwimLane"!==t.shape.type||t.children&&t.children.length>0)&&this.setZIndex(e,t)),t instanceof l.a){if(r){if("helper"!==t.id){var o=i.i(k.h)(this.getNodeDefaults);if(o){var a=o(t,this);if(a&&a.ports)for(var s=0;s<a.ports.length;s++)a.ports[parseInt(s.toString(),10)].inEdges=[],a.ports[parseInt(s.toString(),10)].outEdges=[];a&&a!==t&&i.i(k.m)(a,t)}}this.initNode(t,this.element.id)}}else if(t instanceof p.a){var o=i.i(k.h)(this.getConnectorDefaults);if(o){var a=o(t,this);a&&a!==t&&i.i(k.m)(a,t),t.segments.length&&t.type!==t.segments[0].type&&(t.segments=[])}var h=this.nameTable[t.sourceID],d=this.nameTable[t.targetID],g=this.getConnectedPort(h,t,!0),u=this.getConnectedPort(d,t),f=this.findInOutConnectPorts(h,!1),v=this.findInOutConnectPorts(d,!0);if((void 0!==h&&i.i(D.e)(h)||""!==t.sourcePortID&&i.i(D.f)(f))&&(t.sourceWrapper=this.getEndNodeWrapper(h,t,!0),t.sourcePortID&&g&&g.constraints&&!(g.constraints&y.d.None)&&g.constraints&y.d.OutConnect&&(t.sourcePortWrapper=this.getWrapper(h.wrapper,t.sourcePortID))),(void 0!==d&&i.i(D.g)(d)||""!==t.targetPortID&&i.i(D.h)(v))&&(t.targetWrapper=this.getEndNodeWrapper(d,t,!1),t.targetPortID&&u&&u.constraints&&!(u.constraints&y.d.None)&&u.constraints&y.d.InConnect&&(t.targetPortWrapper=this.getWrapper(d.wrapper,t.targetPortID))),!r){var b=t.getConnectorPoints(t.type);i.i(c.t)(t,b)}r&&t.init(this);for(var S=0;S<t.wrapper.children.length;S++)this.pathTable[t.wrapper.children[parseInt(S.toString(),10)].data]&&(t.wrapper.children[parseInt(S.toString(),10)].absoluteBounds=this.pathTable[t.wrapper.children[parseInt(S.toString(),10)].data].absoluteBounds);t.wrapper.measure(new m.a(void 0,void 0)),t.wrapper.arrange(t.wrapper.desiredSize),t instanceof p.a&&"Bezier"===t.type&&(this.updateConnectorAnnotation(t),this.updateConnectorfixedUserHandles(t));for(var w=0;w<t.wrapper.children.length;w++)this.pathTable[t.wrapper.children[parseInt(w.toString(),10)].data]={},this.pathTable[t.wrapper.children[parseInt(w.toString(),10)].data].absoluteBounds=t.wrapper.children[parseInt(w.toString(),10)].absoluteBounds}if(t instanceof l.a&&t.children&&t.container)for(var s=0;s<t.children.length;s++)this.nameTable[t.children[parseInt(s.toString(),10)]].offsetX=this.nameTable[t.children[parseInt(s.toString(),10)]].wrapper.offsetX,this.nameTable[t.children[parseInt(s.toString(),10)]].offsetY=this.nameTable[t.children[parseInt(s.toString(),10)]].wrapper.offsetY;if(this.bpmnModule&&t instanceof l.a&&"Bpmn"===t.shape.type&&t.shape.annotations.length>0&&this.bpmnModule.updateQuad(t,this),this.initObjectExtend(t,e,r),this.nameTable[t.id]=t,t instanceof l.a&&t.children){this.preventNodesUpdate=!0,this.preventConnectorsUpdate=!0,n||t.container||this.updateGroupOffset(t,!0),this.groupTable[t.id]=t.children;for(var s=0;s<t.children.length;s++){var x=this.nameTable[t.children[parseInt(s.toString(),10)]];x&&(x.parentId=t.id)}this.isLoading||!t.rotateAngle||t.container||this.commandHandler.rotateObjects(t,[t],t.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),this.preventNodesUpdate=!1,this.preventConnectorsUpdate=!1}void 0===this.enterObject&&this.updateQuad(t)}!1===t.visible&&this.updateElementVisibility(t.wrapper,t,!1)},e.prototype.getConnectedPort=function(t,e,i){if(t&&t.ports)for(var r=0,n=t.ports;r<n.length;r++){var o=n[r];if(o.id===e.sourcePortID&&i)return o;if(o.id===e.targetPortID&&!i)return o}return null},e.prototype.scaleObject=function(t,e,i){var r=i?t.wrapper.actualSize.width:t.wrapper.actualSize.height,n=i?1+(e-r)/r:1,o=i?1:1+(e-r)/r;this.realActions|=y.a.PreventDrag,this.scale(t,n,o,{x:.5,y:.5}),this.realActions&=~y.a.PreventDrag},e.prototype.updateDefaultLayoutIcons=function(t){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(t,t.expandIcon),this.updateDefaultLayoutIcon(t,t.collapseIcon))},e.prototype.updateDefaultLayoutIcon=function(t,e){if("None"!==e.shape&&"Auto"===e.horizontalAlignment&&"Auto"===e.verticalAlignment&&.5===e.offset.x&&1===e.offset.y){var i=this.getWrapper(t.wrapper,"icon_content"),r=void 0,n=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(r=.5,n="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(r="LeftToRight"===this.layout.orientation?1:0,n=.5),i.setOffsetWithRespectToBounds(r,n,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",t.wrapper.measure(new m.a(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)}},e.prototype.updateGroupOffset=function(t,e){var n=!1;if(t.children&&t.children.length>0&&!t.container||t.processId){var o=this.nameTable[t.id];if(!(this.realActions&y.a.PreventScale||this.realActions&y.a.PreventDrag)){if(!o.offsetX||!(this.realActions&y.a.EnableGroupAction)&&(this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.ToolAction||this.diagramActions&y.p.PublicMethod))i.i(r.isBlazor)()&&(this.insertValue(i.i(k.e)(o),!0),n=!0),o.offsetX=t.wrapper.offsetX;else{this.realActions|=y.a.PreventScale;var a=o.offsetX-t.wrapper.offsetX;o.offsetX=t.wrapper.offsetX;var s=o.offsetY-t.wrapper.offsetY;o.offsetY=t.wrapper.offsetY,"None"===t.flip&&a+s!==0&&this.drag(o,a,s),this.realActions&=~y.a.PreventScale}if(!o.offsetY||!(this.realActions&y.a.EnableGroupAction)&&(this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.ToolAction||this.diagramActions&y.p.PublicMethod))i.i(r.isBlazor)()&&(this.insertValue(i.i(k.e)(o),!0),n=!0),o.offsetY=t.wrapper.offsetY;else{this.realActions|=y.a.PreventScale;var s=o.offsetY-t.wrapper.offsetY;o.offsetY=t.wrapper.offsetY,"None"===t.flip&&this.drag(o,0,s),this.realActions&=~y.a.PreventScale}this.diagramActions&&(i.i(r.isBlazor)()&&(this.insertValue(i.i(k.e)(o),!0),n=!0),o.width=t.wrapper.actualSize.width,o.height=t.wrapper.actualSize.height)}}e&&t.children&&t.children.length>0&&(void 0!==this.nameTable[t.id].width?this.scaleObject(t,this.nameTable[t.id].width,!0):(i.i(r.isBlazor)()&&(this.insertValue(i.i(k.e)(this.nameTable[t.id]),!0),n=!0),this.nameTable[t.id].width=t.wrapper.actualSize.width),void 0!==this.nameTable[t.id].height?this.scaleObject(t,this.nameTable[t.id].height,!1):(i.i(r.isBlazor)()&&(this.insertValue(i.i(k.e)(this.nameTable[t.id]),!0),n=!0),this.nameTable[t.id].height=t.wrapper.actualSize.height)),!n||this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.ToolAction||this.diagramActions&y.p.PublicMethod||this.commandHandler.getBlazorOldValues()},e.prototype.initNode=function(t,e,n){var o,a=t.initContainer(),s=new I.a;if(this.diagramSettings.inversedAlignment||(a.inversedAlignment=!1),a.children||(a.children=[]),t.children){a.measureChildren=!1,s.id=t.id+"group_container",s.style.fill="none",s.style.strokeColor="none",s.horizontalAlignment="Stretch",s.verticalAlignment="Stretch",a.style=t.style,a.padding.left=t.padding.left,a.padding.right=t.padding.right,a.padding.top=t.padding.top,a.padding.bottom=t.padding.bottom,s.children=[],s.preventContainer=!0,t.container&&(s.relativeMode="Object");var h=!!(t.ports&&t.ports.length>0);if(i.i(r.isNullOrUndefined)(t.container)&&!h&&a.children.push(s),t.container&&"Grid"===t.container.type)for(var d=0;d<t.children.length;d++){var p=new I.a,g=this.nameTable[t.children[d]];p.children=[],p.children.push(g.wrapper),g&&a.addObject(g.wrapper,g.rowIndex,g.columnIndex,g.rowSpan,g.columnSpan)}else for(var d=0;d<t.children.length;d++)if(this.nameTable[t.children[d]]){var g=this.nameTable[t.children[d]];this.updateStackProperty(t,g,d),a.children.push(g.wrapper),a.elementActions=a.elementActions|y.e.ElementIsGroup,g.wrapper.flip="None"===g.wrapper.flip?t.wrapper.flip:g.wrapper.flip}(h||t.container&&"Grid"!==t.container.type)&&a.children.push(s)}else{var u=i.i(k.h)(this.setNodeTemplate);u&&"helper"!==t.id&&(o=u(t,this)),o||(o=t.init(this)),a.children.push(o)}var f;f=i.i(k.h)(this.getDescription),(t.children?a:o).description=f||(t.annotations.length?t.annotations[0].content:t.id);var v=t.children?s:a;t.initAnnotations(this.getDescription,v,this.element.id,!!i.i(D.y)(this),this.annotationTemplate),t.initPorts(this.getDescription,v),t.initIcons(this.getDescription,this.layout,v,e);for(var d=0;t.fixedUserHandles,d<t.fixedUserHandles.length;d++){var b=t.initfixedUserHandles(t.fixedUserHandles[d]);v.children.push(b)}if("SwimLane"===t.shape.type&&t.wrapper&&t.wrapper.children.length>0&&t.wrapper.children[0]instanceof P.a){if(this.setZIndex(this.activeLayer,t),this.connectors.length>0)for(var d=0;d<this.connectors.length;d++){var S=this.connectors[d];S.sourceID&&S.targetID&&-1===this.activeLayer.objects.indexOf(S.sourceID)&&-1===this.activeLayer.objects.indexOf(S.targetID)&&this.setZIndex(this.activeLayer,S)}i.i(V.g)(t),i.i(V.q)(this,t),this.updateDiagramElementQuad()}else a.measure(new m.a(t.width,t.height),t.id,this.onLoadImageSize.bind(this)),a instanceof P.a?a.arrange(a.desiredSize,!0):a.arrange(a.desiredSize);"None"!==t.wrapper.flip&&t.wrapper.elementActions&y.e.ElementIsGroup&&i.i(c.M)(t.wrapper,t.wrapper.offsetX,t.wrapper.offsetY,this,t.wrapper.flip),t instanceof l.a&&t.container&&(t.width<a.outerBounds.width||t.height<a.outerBounds.height)&&a.bounds.x<=a.outerBounds.x&&a.bounds.y<=a.outerBounds.y&&(t.width=a.width=a.outerBounds.width,t.height=a.height=a.outerBounds.height,a.measure(new m.a(t.width,t.height)),a.arrange(a.desiredSize)),t.container&&"Grid"===t.container.type&&t.children&&t.children.length>0&&this.updateChildPosition(t)},e.prototype.updateDiagramElementQuad=function(){for(var t=0;t<this.nodes.length;t++)this.nodes[parseInt(t.toString(),10)].wrapper&&this.nodes[parseInt(t.toString(),10)].wrapper instanceof d.a&&this.updateQuad(this.nodes[parseInt(t.toString(),10)])},e.prototype.onLoadImageSize=function(t,e){var r=this.getObject(t),n=document.getElementById(t+"sf-imageNode");n&&n.parentNode.removeChild(n),this.nodePropertyChange(r,{},{width:e.width,height:e.height});var o={element:i.i(k.e)(r),size:e};this.triggerEvent(y.r.onImageLoad,o)},e.prototype.updateChildPosition=function(t){for(var e=0;e<t.children.length;e++){var i=this.getObject(t.children[parseInt(e.toString(),10)]);i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,i.children&&i.children.length>0&&this.updateChildPosition(i)}},e.prototype.canExecute=function(){return!0},e.prototype.updateStackProperty=function(t,e,i){t.container&&"Stack"===t.container.type&&(e.width||(e.wrapper.horizontalAlignment="Stretch",e.horizontalAlignment="Stretch"),e.height||(e.verticalAlignment="Stretch",e.wrapper.verticalAlignment="Stretch"),i&&"UmlClassifier"===t.shape.type&&(e.umlIndex=i))},e.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},e.prototype.initCommands=function(){var t=this.commandManager.commands,e={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.C,keyModifiers:y.v.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.V,keyModifiers:y.v.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.X,keyModifiers:y.v.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.A,keyModifiers:y.v.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Z,keyModifiers:y.v.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Y,keyModifiers:y.v.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:y.u.Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:y.u.Tab,keyModifiers:y.v.Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:y.u.Enter}}};this.initCommandManager(t,e)},e.prototype.overrideCommands=function(t,e){for(var i,r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];if(i=e[""+o],t.gesture.key===i.gesture.key&&t.gesture.keyModifiers===i.gesture.keyModifiers){delete e[""+o];break}}},e.prototype.initCommandManager=function(t,e){var i=0;if(t)for(i=0;i<t.length;i++)e[t[parseInt(i.toString(),10)].name]&&t[parseInt(i.toString(),10)]?(t[parseInt(i.toString(),10)].canExecute&&(e[t[parseInt(i.toString(),10)].name].canExecute=t[parseInt(i.toString(),10)].canExecute),t[parseInt(i.toString(),10)].execute&&(e[t[parseInt(i.toString(),10)].name].execute=t[parseInt(i.toString(),10)].execute),(t[parseInt(i.toString(),10)].gesture.key||t[parseInt(i.toString(),10)].gesture.keyModifiers)&&(e[t[parseInt(i.toString(),10)].name].gesture=t[parseInt(i.toString(),10)].gesture),""!==t[parseInt(i.toString(),10)].parameter&&(e[t[parseInt(i.toString(),10)].name].parameter=t[parseInt(i.toString(),10)].parameter)):(this.overrideCommands(t[parseInt(i.toString(),10)],e),e[t[parseInt(i.toString(),10)].name]={execute:t[parseInt(i.toString(),10)].execute,canExecute:t[parseInt(i.toString(),10)].canExecute,gesture:t[parseInt(i.toString(),10)].gesture,parameter:t[parseInt(i.toString(),10)].parameter});this.commands=e},e.prototype.updateNodeEdges=function(t){for(var e=0,i=t.inEdges;e<i.length;e++){var r=i[e];this.nameTable[""+r]&&(this.nameTable[""+r].targetID="")}for(var n=0,o=t.outEdges;n<o.length;n++){var r=o[n];this.nameTable[""+r]&&(this.nameTable[""+r].sourceID="")}t.inEdges=[],t.outEdges=[]},e.prototype.updateIconVisibility=function(t,e){for(var i=0;i<t.wrapper.children.length;i++){var r=t.wrapper.children[parseInt(i.toString(),10)];if(r.id){var n=r.id.split(t.id)[1];n&&n.match("^_icon")&&(r.visible=e,this.updateDiagramContainerVisibility(r,e))}}},e.prototype.updateEdges=function(t){if(void 0!==t.sourceID&&""!==t.sourceID){var e=this.nameTable[t.sourceID];e&&e.outEdges&&0===e.outEdges.length&&(e.outEdges=[]),e&&e.outEdges&&-1===e.outEdges.indexOf(t.id)&&e.outEdges.push(t.id),this.updatePortEdges(e,t,!1)}if(void 0!==t.targetID&&""!==t.targetID){var e=this.nameTable[t.targetID];if(e&&e.inEdges&&0===e.inEdges.length&&(e.inEdges=[]),e&&e.inEdges&&-1===e.inEdges.indexOf(t.id)&&e.inEdges.push(t.id),this.updatePortEdges(e,t,!0),e&&e.visible&&e.outEdges){var i=0!==e.outEdges.length;this.updateIconVisibility(e,i)}}},e.prototype.updatePortEdges=function(t,e,i){if(t)for(var r=0;r<t.ports.length;r++){var n=t.ports[parseInt(r.toString(),10)],o=i?e.targetPortID:e.sourcePortID;if(n.id===o){var a=i?n.inEdges:n.outEdges;-1===a.indexOf(e.id)&&a.push(e.id)}}},e.prototype.refreshDiagram=function(){if(this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize(),this.addBlazorDiagramObjects(),i.i(r.isBlazor)()&&this.layout&&this.layout.layoutInfo&&this.layout.layoutInfo.isRootInverse&&this.nodes.length>2){var t=this.nodes[0];if(t.outEdges.length>1)for(var e=this.isProtectedOnChange,n=1;n<t.outEdges.length;n++){var o=this.nameTable[t.outEdges[parseInt(n.toString(),10)]],a=this.allowServerDataBinding;this.protectPropertyChange(!1),this.enableServerDataBinding(!1),this.preventDiagramUpdate=!0;var s=this.getObject(o.targetID);"Left"===s.data.Branch&&(o.sourcePortID=t.ports[1].id),this.dataBind(),this.preventDiagramUpdate=!1,this.enableServerDataBinding(a),this.protectPropertyChange(e)}}if(i.i(r.isBlazor)())for(var h=void 0,d=0,l=this.views;d<l.length;d++){var c=l[d];h=this.views[""+c],h.renderDocument&&(h.renderDocument(h),h.diagramRenderer.setLayers(),h.updateView(h),this.renderNodes(h))}this.updateFitToPage()},e.prototype.updateCanupdateStyle=function(t,e){for(var i=0;i<t.length;i++)t[parseInt(i.toString(),10)].children&&this.updateCanupdateStyle(t[parseInt(i.toString(),10)].children,e),t[parseInt(i.toString(),10)].canApplyStyle=e},e.prototype.getZindexPosition=function(t,e){var r=[],n=void 0;r=r.concat(this.nodes),r=r.concat(this.connectors);var o;if(-1!==t.zIndex)for(var a=0;a<r.length;a++)if(r[parseInt(a.toString(),10)].zIndex>t.zIndex){"HTML"!==t.shape.type&&"Native"!==t.shape.type||(o="HTML"===t.shape.type?"html":"native"),n=i.i(B.u)(e,r[parseInt(a.toString(),10)].id,o);break}return n},e.prototype.updateDiagramObject=function(t,e,r){for(var n,o=0,a=this.views;o<a.length;o++){var s=a[o];if(n=this.views[""+s],this.diagramActions&&"SVG"===n.mode){var h=this.layers.length>1,d=void 0;if(h&&(d=this.commandHandler.getObjectLayer(t.id)),void 0===d||d&&d.visible||r){var l=i.i(B.f)(this.element.id);window.domTable[n.element.id+"_diagramLayer"]||(window.domTable[n.element.id+"_diagramLayer"]=document.getElementById(n.element.id+"_diagramLayer"));var c=window.domTable[n.element.id+"_diagramLayer"];this.diagramActions&y.p.Interactions&&this.updateCanupdateStyle(t.wrapper.children,!0);var p=this.getMidPoint(t);this.diagramRenderer.updateNode(t.wrapper,c,l,void 0,e?void 0:this.getZindexPosition(t,n.element.id),p),this.updateCanupdateStyle(t.wrapper.children,!0)}}}},e.prototype.applyMarginBezier=function(t,e){for(var i=0;i<t.wrapper.children.length;i++)t.wrapper&&t.wrapper.children[parseInt(i.toString(),10)]instanceof b.a&&(e.cx=e.cx+t.wrapper.children[parseInt(i.toString(),10)].margin.left,e.cx=e.cx-t.wrapper.children[parseInt(i.toString(),10)].margin.right,e.cy=e.cy+t.wrapper.children[parseInt(i.toString(),10)].margin.top,e.cy=e.cy-t.wrapper.children[parseInt(i.toString(),10)].margin.bottom)},e.prototype.getMidPoint=function(t){var e;e=t.annotations[0]?t.annotations[0].offset:.5;var i;if(t instanceof p.a&&"Bezier"===t.type){var r=this.getBezierPoints(t),n=Z.a.getLengthFromListOfPoints(r),o=e*n,a=this.commandHandler.getPointAtLength(o,r,0);i={cx:a.x,cy:a.y},this.applyMarginBezier(t,i),this.applyAlignment(t,i)}return i},e.prototype.applyAlignment=function(t,e){for(var i=0;i<t.wrapper.children.length;i++)if(t.wrapper&&t.wrapper.children[parseInt(i.toString(),10)]instanceof b.a){var r=t.wrapper.children[parseInt(i.toString(),10)];switch(r.horizontalAlignment){case"Auto":case"Left":e.cx=r.inversedAlignment?e.cx:e.cx-r.desiredSize.width;break;case"Stretch":case"Center":e.cx-=r.desiredSize.width*r.pivot.x;break;case"Right":e.cx=r.inversedAlignment?e.cx-r.desiredSize.width:e.cx}switch(r.verticalAlignment){case"Auto":case"Top":e.cy=r.inversedAlignment?e.cy:e.cy-r.desiredSize.height;break;case"Stretch":case"Center":e.cy-=r.desiredSize.height*r.pivot.y;break;case"Bottom":e.cy=r.inversedAlignment?e.cy-r.desiredSize.height:e.cy}}},e.prototype.getBezierPoints=function(t){var e,i=[],r={x:t.sourcePoint.x,y:t.sourcePoint.y};for(i.push(r),e=0;e<t.segments.length;e++){var n=t.segments[parseInt(e.toString(),10)].getPoints(t.segments[parseInt(e.toString(),10)],r);i.push.apply(i,n),r=i[i.length-1]}return i},e.prototype.updateGridContainer=function(t){for(var e,r=i.i(B.f)(this.element.id),n=0,o=this.views;n<o.length;n++){var a=o[n];if(e=this.views[""+a],"SVG"===e.mode&&this.diagramActions){var s=document.getElementById(e.element.id+"_diagramLayer");this.diagramRenderer.updateNode(t,s,r,void 0)}else this.refreshCanvasDiagramLayer(e)}},e.prototype.getObjectsOfLayer=function(t){for(var e=[],i=0,r=t;i<r.length;i++){var n=r[i];this.nameTable[""+n]&&e.push(this.nameTable[""+n])}return e},e.prototype.refreshDiagramLayer=function(){for(var t,e=0,i=this.views;e<i.length;e++){var r=i[e];switch(t=this.views[""+r],t.mode){case"SVG":this.refreshSvgDiagramLayer(t);break;case"Canvas":this.refreshCanvasLayers(t)}}},e.prototype.refreshCanvasLayers=function(t){if(t)this.refreshCanvasDiagramLayer(t);else for(var e=0,i=this.views;e<i.length;e++){var r=i[e],n=this.views[""+r];this.refreshCanvasDiagramLayer(n)}},e.prototype.renderBasicElement=function(t){for(var e=i.i(B.f)(t.element.id),r=0;r<this.basicElements.length;r++){var n=this.basicElements[parseInt(r.toString(),10)];n instanceof d.a&&(n.prevRotateAngle=0),n.measure(new m.a(n.width,n.height)),n.arrange(n.desiredSize),t.diagramRenderer.renderElement(n,t.diagramLayer,e)}},e.prototype.refreshElements=function(t){if(!this.isDestroyed){if(this.clearCanvas(t),t instanceof e)t.diagramLayer.getContext("2d").setTransform(t.scroller.currentZoom,0,0,t.scroller.currentZoom,0,0),t.diagramLayer.getContext("2d").scale(1.5,1.5);else{var r=document.getElementById(t.element.id+"_nativeLayer");r.children.length>0&&t.updateView(t)}var n=i.i(B.f)(t.element.id);this.renderDiagramElements(t.diagramLayer,t.diagramRenderer,n);for(var o=0;o<this.basicElements.length;o++){var r=this.basicElements[parseInt(o.toString(),10)];r.measure(new m.a(r.width,r.height)),r.arrange(r.desiredSize),t.diagramRenderer.renderElement(r,t.diagramLayer,n)}t instanceof e&&(t.diagramLayer.style.transform="scale("+2/3+")",t.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},e.prototype.refreshCanvasDiagramLayer=function(t){var e=this;"SVG"===t.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(t),!this.diagramActions||0==(this.diagramActions&y.p.Render)||y.p.ToolAction&this.diagramActions||i.i(D.y)(this)||1!==this.scroller.currentZoom?this.refreshElements(t):this.renderTimer||(this.renderTimer=setTimeout(function(){e.refreshElements(t)},40)))},e.prototype.updatePortVisibility=function(t,e,r){var n,o=!this.drawingObject||!this.drawingObject.shape;if(t instanceof l.a&&o&&i.i(D.d)(t)){for(var a=t.ports,s=!1,h=0;h<a.length;h++)n=this.getWrapper(t.wrapper,a[parseInt(h.toString(),10)].id),(e&y.c.Hover||e&y.c.Connect)&&i.i(c.i)(a[parseInt(h.toString(),10)],e)&&(n.visible=!r,s=!0);s&&this.updateDiagramObject(t),"Canvas"===this.mode&&this.refreshCanvasLayers()}},e.prototype.refreshSvgDiagramLayer=function(t){var e,r=document.getElementById(t.element.id+"_diagramLayer"),n=i.i(B.f)(t.element.id);if(i.i(D.y)(this))this.scroller.virtualizeElements();else{for(var o=0;o<this.basicElements.length;o++)e=this.basicElements[parseInt(o.toString(),10)],e.measure(new m.a(e.width,e.height)),e.arrange(e.desiredSize,!(this.diagramActions&y.p.Render)),this.diagramRenderer.renderElement(e,r,n);this.renderDiagramElements(r,this.diagramRenderer,n)}},e.prototype.removeVirtualObjects=function(t){if(this.deleteVirtualObject){for(var e=0;e<this.scroller.removeCollection.length;e++){var i=this.nameTable[this.scroller.removeCollection[parseInt(e.toString(),10)]];this.removeElements(i)}this.deleteVirtualObject=!1}clearInterval(t)},e.prototype.updateTextElementValue=function(t){for(var e=0;e<t.wrapper.children.length;e++){var i=t.wrapper.children[parseInt(e.toString(),10)];i instanceof b.a&&(i.canMeasure=!0,i.measure(new m.a(t.width,t.height)),i.arrange(i.desiredSize))}},e.prototype.updateVirtualObjects=function(t,e,r){var n=document.getElementById(this.element.id+"_diagramLayer"),o=i.i(B.f)(this.element.id);if("SVG"===this.mode){for(var a=0;a<t.length;a++){var s=this.scroller.removeCollection.indexOf(t[parseInt(a.toString(),10)]);s>=0&&this.scroller.removeCollection.splice(s,1);var h=this.nameTable[t[parseInt(a.toString(),10)]];this.updateTextElementValue(h),this.diagramRenderer.renderElement(h.wrapper,n,o,void 0,void 0,void 0,void 0,h.zIndex)}for(var d=0;d<r.length;d++)this.scroller.removeCollection.push(r[parseInt(d.toString(),10)]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},e.prototype.renderDiagramElements=function(t,e,r,n,o,a){void 0===n&&(n=!0);var s=this.scroller.getPageBounds();s.x*=this.scroller.currentZoom,s.y*=this.scroller.currentZoom,s.width*=this.scroller.currentZoom,s.height*=this.scroller.currentZoom;for(var h,d=-this.scroller.horizontalOffset-s.x,l=-this.scroller.verticalOffset-s.y,c=0,g=Object.keys(this.layerZIndexTable);c<g.length;c++){var u=g[c],f=this.commandHandler.getLayer(this.layerZIndexTable[""+u]),v=void 0,b=void 0;"Canvas"===this.mode&&i.i(D.y)(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var S="Canvas"===this.mode&&i.i(D.y)(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,w=0,x=Object.keys(S||f.zIndexTable);w<x.length;w++){var I=x[w],P=S?this.nameTable[S[""+I]]:this.nameTable[f.zIndexTable[""+I]];if(P&&!P.parentId&&f.visible&&(!P.processId||this.refreshing)){var C=void 0;if(C=this.scroller.currentZoom<1?{tx:-s.x/this.scroller.currentZoom,ty:-s.y/this.scroller.currentZoom,scale:this.scroller.transform.scale}:{tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale},i.i(D.y)(this)){if(this.scroller.currentZoom<1){if(s.x<0||this.scroller.horizontalOffset<0){var z=this.scroller.verticalOffset<0?this.scroller.verticalOffset:0;v=(d>0?d:0)+"px",b=(this.realActions&y.a.vScrollbarMoved?0:-z)+"px"}else v="0px",b="0px";this.realActions&y.a.hScrollbarMoved&&(this.realActions=this.realActions&~y.a.hScrollbarMoved),this.realActions&y.a.vScrollbarMoved&&(this.realActions=this.realActions&~y.a.vScrollbarMoved)}else v=(s.x<0?d:-this.scroller.horizontalOffset)+"px",b=(s.y<0?l:-this.scroller.verticalOffset)+"px";this.diagramLayer.style.left=v,this.diagramLayer.style.top=b,C.tx=-s.x/C.scale,C.ty=-s.y/C.scale}var O=!0;if(o&&(O=!1),this.updateTextElementValue(P),this.refreshing&&P.shape.activity&&P.shape.activity.subProcess&&P.shape.activity.subProcess.processes){for(var T=0;T<P.shape.activity.subProcess.processes.length;T++){var A=P.shape.activity.subProcess.processes[parseInt(T.toString(),10)];P.wrapper.children.push(this.nameTable[""+A].wrapper)}P.wrapper.measure(new m.a(P.wrapper.bounds.width,P.wrapper.bounds.height)),P.wrapper.arrange(P.wrapper.desiredSize)}P instanceof p.a&&"Bezier"===P.type?(h=this.getMidPoint(P),"Canvas"===this.mode&&n&&(h.cx+=C.tx,h.cy+=C.ty)):h=null,e.renderElement(P.wrapper,t,r,!e.isSvgMode&&n?C:void 0,void 0,void 0,O&&(!this.diagramActions||a),void 0,void 0,h)}}}},e.prototype.updateBridging=function(t){if(this.bridgingModule)for(var e=0;e<this.connectors.length;e++){var i=this.connectors[parseInt(e.toString(),10)];this.bridgingModule.updateBridging(i,this);var r=this.connectors[parseInt(e.toString(),10)].wrapper;if(r&&r.children&&r.children.length>0){var n=r.children[0],o=n.data;(i.isBezierEditing&&this.selectedItems.connectors[0].id===i.id||"Bezier"!==i.type)&&i.getSegmentElement(i,n,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0,void 0,!1),n.data!==o&&(r.measure(new m.a),r.arrange(r.desiredSize),"SVG"!==this.mode||t||this.updateDiagramObject(i))}}},e.prototype.setCursor=function(t){this.diagramRenderer.setCursor(this.diagramCanvas,t)},e.prototype.clearCanvas=function(t){var e=t.contentWidth||t.diagramLayer.width/this.scroller.currentZoom,i=t.contentHeight||t.diagramLayer.height/this.scroller.currentZoom;if("SVG"!==t.mode){n.a.getContext(t.diagramLayer).clearRect(0,0,e,i)}},e.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),i.i(f.c)(this),i.i(D.y)(this)&&this.scroller.virtualizeElements()},e.prototype.setOffset=function(t,e){window.domTable[this.element.id+"content"]||(window.domTable[this.element.id+"content"]=document.getElementById(this.element.id+"content"));var i=window.domTable[this.element.id+"content"];i&&(i.scrollLeft=t,i.scrollTop=e)},e.prototype.setSize=function(t,e){if(this.diagramLayer&&!this.preventDiagramUpdate){var r=i.i(f.a)(this);t-=r.width,e-=r.height;var n=this.spatialSearch.getPageBounds();n.x*=this.scroller.currentZoom,n.y*=this.scroller.currentZoom,n.width*=this.scroller.currentZoom,n.height*=this.scroller.currentZoom;var o="SVG"===this.mode?1:1.5,a="SVG"===this.mode?i.i(B.v)(this.element.id):this.diagramLayer,s="Canvas"===this.mode&&this.constraints&y.j.Virtualization?this.scroller.viewPortWidth:t,h="Canvas"===this.mode&&this.constraints&y.j.Virtualization?this.scroller.viewPortHeight:e;a.setAttribute("width",(o*s).toString()),a.setAttribute("height",(o*h).toString());var d=document.getElementById(this.element.id+"_diagramUserHandleLayer");d&&(d.style.width=t+"px",d.style.height=e+"px");var l={width:t.toString(),height:e.toString()};this.diagramLayerDiv.style.width=t+"px",this.diagramLayerDiv.style.height=e+"px",i.i(B.e)(i.i(B.w)(this.element.id),l),i.i(B.e)(i.i(B.x)(this.element.id),l);var c=i.i(B.o)(this.element.id);i.i(B.e)(c,l),c.parentNode.style.width=t+"px",c.parentNode.style.height=e+"px";var p=i.i(B.p)(this.element.id);i.i(B.e)(p,l),this.diagramRenderer.updateGrid(this.snapSettings,p,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),i.i(B.e)(i.i(B.y)(this.element.id),l),this.htmlLayer.style.width=t+"px",this.htmlLayer.style.height=e+"px","SVG"===this.mode||i.i(D.y)(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&i.i(D.y)(this)&&this.scroller.virtualizeElements()}},e.prototype.transformLayers=function(){var t=this.spatialSearch.getPageBounds();t.x*=this.scroller.currentZoom,t.y*=this.scroller.currentZoom,t.width*=this.scroller.currentZoom,t.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,i.i(B.p)(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.diagramActions&y.p.DragUsingMouse||this.updateSelector(),this.renderPageBreaks(t)},e.prototype.removePageBreaks=function(){if(this.diagramLayer){var t=i.i(B.z)(this.element.id);if(t&&t.childNodes)for(var e=t.childNodes.length,r=0;r<e;r++)t.removeChild(t.childNodes[0])}},e.prototype.renderPageBreaks=function(t){this.removePageBreaks();var e=i.i(B.z)(this.element.id);if(e){var r=0;t=this.scroller.getPageBounds(!0);var n=(this.scroller.transform.tx+t.x)*this.scroller.currentZoom,o=(this.scroller.transform.ty+t.y)*this.scroller.currentZoom,s=t.height*this.scroller.currentZoom,h=t.width*this.scroller.currentZoom;a.a.renderSvgBackGroundImage(this.pageSettings.background,this.element,n,o,h,s);var d={id:e.id+"rect",x:n,y:o,height:s,width:h,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"};if(this.diagramRenderer.drawRect(e,d),this.pageSettings.showPageBreaks){var l=this.scroller.getPageBreak(t);for(r=0;r<l.length;r++)this.diagramRenderer.drawLine(e,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(l[parseInt(r.toString(),10)].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[parseInt(r.toString(),10)].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(l[parseInt(r.toString(),10)].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[parseInt(r.toString(),10)].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:l[parseInt(r.toString(),10)].y1===l[parseInt(r.toString(),10)].y2?"HorizontalLines":"VerticalLines"})}}},e.prototype.validatePageSize=function(){var t=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(t=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=t):this.pageSettings.height>this.pageSettings.width&&(t=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=t)},e.prototype.setOverview=function(t,e){if(t)t&&(this.views.push(t.id),this.views[t.id]=t,t.renderDocument(t),t.diagramRenderer.setLayers(),t.updateView(t),this.renderNodes(t));else{for(var i=0;i<this.views.length;i++)this.views[parseInt(i.toString(),10)]===e&&(t=this.views[""+e]);this.views[""+e]=void 0;var r=this.views.indexOf(e);this.views.splice(r,1)}},e.prototype.renderNodes=function(t){if(t){var e=new a.a(t.id,new o.a,!1),r=document.getElementById(t.element.id+"_diagramLayer"),n=i.i(B.f)(t.element.id);this.renderDiagramElements(r,t.diagramRenderer||e,n,void 0,void 0,!0)}},e.prototype.updateThumbConstraints=function(t,e,r){for(var n=t.length,o=0;o<n;o++){var a=t[parseInt(o.toString(),10)],s=!1,h=!1,d=e.thumbsConstraints;a instanceof l.a?(s="Bpmn"===a.shape.type&&"Activity"===a.shape.shape&&!1===a.shape.activity.subProcess.collapsed||"TextAnnotation"===a.shape.shape,h="Bpmn"===a.shape.type&&"TextAnnotation"===a.shape.shape,i.i(D.n)(a)&&d&y.l.Rotate&&!s||(d&=~y.l.Rotate),i.i(D.b)(a,"SouthEast")&&d&y.l.ResizeSouthEast&&!h||(d&=~y.l.ResizeSouthEast),i.i(D.b)(a,"NorthWest")&&d&y.l.ResizeNorthWest&&!h||(d&=~y.l.ResizeNorthWest),i.i(D.b)(a,"East")&&d&y.l.ResizeEast&&!h||(d&=~y.l.ResizeEast),i.i(D.b)(a,"West")&&d&y.l.ResizeWest&&!h||(d&=~y.l.ResizeWest),i.i(D.b)(a,"North")&&d&y.l.ResizeNorth&&!h||(d&=~y.l.ResizeNorth),i.i(D.b)(a,"South")&&d&y.l.ResizeSouth&&!h||(d&=~y.l.ResizeSouth),i.i(D.b)(a,"NorthEast")&&d&y.l.ResizeNorthEast&&!h||(d&=~y.l.ResizeNorthEast),i.i(D.b)(a,"SouthWest")&&d&y.l.ResizeSouthWest&&!h||(d&=~y.l.ResizeSouthWest)):a instanceof p.a?(r||(d|=y.l.Default),i.i(D.l)(a)?d|=y.l.ConnectorSource:d&=~y.l.ConnectorSource,i.i(D.m)(a)?d|=y.l.ConnectorTarget:d&=~y.l.ConnectorTarget):(r||(d|=y.l.Default),i.i(D.b)(a)||(d&=~(y.l.ResizeSouthEast|y.l.ResizeSouthWest|y.l.ResizeSouth|y.l.ResizeEast|y.l.ResizeWest|y.l.ResizeNorth|y.l.ResizeNorthEast|y.l.ResizeNorthWest)),i.i(D.n)(a)||(d&=~y.l.Rotate)),e.thumbsConstraints=d}},e.prototype.renderSelector=function(t,e){var n=this.isProtectedOnChange;i.i(r.isBlazor)()&&(this.isProtectedOnChange=!0);var o,a,s=new m.a,h=this.selectedItems,d=(h.constraints,this.diagramRenderer.rendererActions),c=document.getElementsByClassName("blazor-inner-template");if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(d,y.q.DrawSelectorBorder):this.removeConstraints(d,y.q.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===h.nodes.length&&0===h.connectors.length&&(h.rotateAngle=h.nodes[0].rotateAngle,h.pivot=h.nodes[0].pivot),h.wrapper.measure(s),h.wrapper.arrange(h.wrapper.desiredSize),h.width=h.wrapper.actualSize.width,h.height=h.wrapper.actualSize.height,h.offsetX=h.wrapper.offsetX,h.offsetY=h.wrapper.offsetY,0!==h.rotateAngle){for(var g=0,u=h.nodes;g<u.length;g++){var f=u[g];f.offsetX=f.wrapper.offsetX,f.offsetY=f.wrapper.offsetY}for(var v=0,b=h.connectors;v<b.length;v++){b[v]}}var S=(this.spatialSearch.getPageBounds(),i.i(B.A)(this.element.id)),w=i.i(B.B)(this.element.id);if(h.thumbsConstraints=y.l.Default,h.annotation?this.updateThumbConstraints([h.annotation],h):(this.updateThumbConstraints(h.nodes,h),this.updateThumbConstraints(h.connectors,h,!0)),h.annotation)this.renderSelectorForAnnotation(h,S);else if(h.nodes.length+h.connectors.length===1||this.nameTable.helper){if(h.nodes[0]instanceof l.a){var x=h.nodes[0];i.i(W.a)(this,x)&&(e||"UmlClassifier"===x.shape.type||x.parentId&&this.nameTable[x.parentId]&&"UmlClassifier"===this.nameTable[x.parentId].shape.type||((!x.container||"Canvas"!==x.container.type&&"Grid"!==x.container.type)&&(h.nodes[0].constraints&=~(y.f.Rotate|y.f.HideThumbs)),h.thumbsConstraints&=~y.l.Rotate));var I=!!e||!!(x.constraints&y.f.HideThumbs),P=!!("SwimLane"===x.shape.type||x.isLane||x.isPhase||e);this.diagramRenderer.renderResizeHandle(h.wrapper.children[0],S,h.thumbsConstraints,this.scroller.currentZoom,h.constraints,this.scroller.transform,void 0,i.i(D.d)(x),I,P,h.handleSize)}else if(h.connectors[0]instanceof p.a&&i.i(D.z)(this.diagramRenderer.rendererActions)){var C=h.connectors[0];this.diagramRenderer.renderEndPointHandle(C,S,h.thumbsConstraints,h.constraints,this.scroller.transform,void 0!==C.sourceWrapper,void 0!==C.targetWrapper,!(!this.connectorEditingToolModule||!i.i(D.s)(C)),!!this.connectorEditingToolModule,h.handleSize)}}else this.diagramRenderer.renderResizeHandle(h.wrapper,S,h.thumbsConstraints,this.scroller.currentZoom,h.constraints,this.scroller.transform,void 0,i.i(D.d)(h),null,null,h.handleSize);if(!h.annotation&&!this.currentSymbol&&(this.diagramRenderer.renderUserHandler(h,S,this.scroller.transform,w),i.i(r.isBlazor)()&&c.length>0))for(o=0;o<this.selectedItems.userHandles.length;o++){var z=this.selectedItems.userHandles[parseInt(o.toString(),10)];a=document.getElementById(z.name+"_html_element"),a.style.display="block"}}this.selectedItems.selectedObjects.length>1&&this.updateSelectionRectangle(),this.isProtectedOnChange=n},e.prototype.updateSelectionRectangle=function(){for(var t=i.i(B.A)(this.element.id),e=!1,r=0;r<this.selectedItems.selectedObjects.length;r++)e=0===r,i.i(c.l)(this.selectedItems.selectedObjects[parseInt(r.toString(),10)])===p.a?this.diagramRenderer.renderSelectionLine(this.selectedItems.selectedObjects[parseInt(r.toString(),10)].wrapper.children[0],t,this.scroller.transform,e):this.diagramRenderer.renderSelectionRectangle(this.selectedItems.selectedObjects[parseInt(r.toString(),10)].wrapper,t,this.scroller.transform,e)},e.prototype.updateSelector=function(){var t=this.allowServerDataBinding;this.enableServerDataBinding(!1);var e,n,o=new m.a,a=this.selectedItems,s=a.constraints,h=document.getElementsByClassName("blazor-inner-template");if(this.diagramActions&y.p.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==a.wrapper&&a.wrapper.children&&a.wrapper.children.length)){var d=!0,g=!0;if(i.i(c.C)(this,a)){var u=this.eventHandler.action,f=u.includes("Rotate"),v=u.includes("None")||u.includes("Select")||u.includes("Drag");(f||v)&&(g=!1),v||(d=!1)}if(d&&(a.wrapper.measure(o),a.wrapper.arrange(a.wrapper.desiredSize)),0!==a.rotateAngle||a.rotateAngle!==a.wrapper.prevRotateAngle)for(var b=0,S=a.nodes;b<S.length;b++){var w=S[b];w.offsetX=w.wrapper.offsetX,w.offsetY=w.wrapper.offsetY}a.width=a.wrapper.actualSize.width,a.height=a.wrapper.actualSize.height,a.offsetX=a.wrapper.offsetX,a.offsetY=a.wrapper.offsetY;var x=i.i(B.A)(this.element.id),I=i.i(B.B)(this.element.id),P=this.eventHandler.canHideResizers();if(a.thumbsConstraints=y.l.Default,a.annotation?this.updateThumbConstraints([a.annotation],a):(this.updateThumbConstraints(a.nodes,a),this.updateThumbConstraints(a.connectors,a,!0)),this.selectedItems.constraints&y.g.UserHandle&&!a.annotation&&!this.currentSymbol&&(this.diagramRenderer.renderUserHandler(a,x,this.scroller.transform,I),i.i(r.isBlazor)()&&h.length>0))for(e=0;e<this.selectedItems.userHandles.length;e++){var C=this.selectedItems.userHandles[parseInt(e.toString(),10)];n=document.getElementById(C.name+"_html_element"),n.style.display="block"}if(a.annotation)this.renderSelectorForAnnotation(a,x);else if(a.nodes.length+a.connectors.length===1){if(a.connectors[0]instanceof p.a&&i.i(D.z)(this.diagramRenderer.rendererActions)){var z=a.connectors[0];this.diagramRenderer.renderEndPointHandle(z,x,a.thumbsConstraints,s,this.scroller.transform,void 0!==z.sourceWrapper,void 0!==z.targetWrapper,!(!this.connectorEditingToolModule||!i.i(D.s)(z)),!!this.connectorEditingToolModule,a.handleSize)}else if(a.nodes[0]instanceof l.a){var O=a.nodes[0];i.i(W.a)(this,a.nodes[0])&&("UmlClassifier"===O.shape.type||O.parentId&&this.nameTable[O.parentId]&&"UmlClassifier"===this.nameTable[O.parentId].shape.type||((!O.container||"Canvas"!==O.container.type&&"Grid"!==O.container.type)&&(a.nodes[0].constraints&=~(y.f.HideThumbs|y.f.Rotate)),a.thumbsConstraints&=~y.l.Rotate));var T=!("SwimLane"!==O.shape.type&&!O.isLane&&!O.isPhase);this.diagramRenderer.renderResizeHandle(a.wrapper.children[0],x,a.thumbsConstraints,this.scroller.currentZoom,a.constraints,this.scroller.transform,P,i.i(D.d)(a.nodes[0]),!!(a.nodes[0].constraints&y.f.HideThumbs),T,a.handleSize)}}else this.diagramActions&y.p.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|y.q.PreventRenderSelector),i.i(c.C)(this,a)&&g||this.diagramRenderer.renderResizeHandle(a.wrapper,x,a.thumbsConstraints,this.scroller.currentZoom,a.constraints,this.scroller.transform,P,i.i(D.d)(a),null,null,a.handleSize),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~y.q.PreventRenderSelector}this.selectedItems.selectedObjects.length>1&&this.updateSelectionRectangle(),this.enableServerDataBinding(t)},e.prototype.renderSelectorForAnnotation=function(t,e){this.diagramRenderer.renderResizeHandle(t.wrapper.children[0],e,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,void 0,i.i(D.d)(t.annotation),void 0,void 0,t.handleSize)},e.prototype.drawSelectionRectangle=function(t,e,i,r){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(t,e,i,r,this.adornerLayer,this.scroller.transform)},e.prototype.renderHighlighter=function(t){var e=i.i(B.o)(this.element.id);this.diagramRenderer.renderHighlighter(t,e,this.scroller.transform)},e.prototype.clearHighlighter=function(){var t=i.i(B.o)(this.element.id),e=t.getElementById(t.id+"_highlighter");e&&e.parentNode.removeChild(e)},e.prototype.getNodesConnectors=function(t){for(var e=0;e<this.nodes.length;e++){var i=this.nodes[parseInt(e.toString(),10)];t.push(i)}for(var e=0;e<this.connectors.length;e++){var r=this.connectors[parseInt(e.toString(),10)];t.push(r)}return t},e.prototype.clearSelectorLayer=function(){var t,e,n=i.i(B.o)(this.element.id),o=document.getElementsByClassName("blazor-inner-template");if(this.currentSymbol){var a=n.getElementById("borderRect_symbol");a&&a.parentNode.removeChild(a)}else{var s=n.getElementById(this.adornerLayer.id+"_selected_region");s&&s.parentNode.removeChild(s),this.clearHighlighter();for(var h=i.i(B.A)(this.element.id).childNodes,d=void 0,l=h.length;l>0;l--)d=h[l-1],d.parentNode.removeChild(d);if(i.i(r.isBlazor)()&&!(this.diagramActions&y.p.DragUsingMouse)&&o.length>0)for(t=0;t<this.selectedItems.userHandles.length;t++){var c=this.selectedItems.userHandles[parseInt(t.toString(),10)];e=document.getElementById(c.name+"_html_element"),e.style.display="none"}else if(!i.i(r.isBlazor)()){var p=i.i(B.B)(this.element.id).childNodes;for(t=p.length;t>0;t--)p[t-1].parentNode.removeChild(p[t-1])}}},e.prototype.getWrapper=function(t,e){var i;e=t.id+"_"+e;for(var r=t instanceof I.a?t:this.getPortContainer(this.nameTable[t.id]),n=0;n<r.children.length;n++)e===r.children[parseInt(n.toString(),10)].id&&(i=r.children[parseInt(n.toString(),10)]);return i},e.prototype.getEndNodeWrapper=function(t,e,n){if("Bpmn"===t.shape.type&&t.wrapper.children[0]instanceof I.a){if(!i.i(r.isBlazor)()&&"Activity"===t.shape.shape||i.i(r.isBlazor)()&&"Activity"===t.shadow.bpmnShape){if(n&&"Transaction"===t.shape.activity.subProcess.type&&e.sourcePortID){var o=e.sourcePortID,a=t.wrapper.children[0].children[0].children[2];if(a.children)for(var s=0,h=a.children;s<h.length;s++){var d=h[s];if(d.visible&&d.id===t.id+"_"+o)return d.children[0]}}return t.wrapper.children[0].children[0].children[0]}return t.wrapper.children[0].children[0]}return this.containsMargin(t.wrapper.children[0])||t.children?t.wrapper:t.wrapper.children[0]},e.prototype.containsMargin=function(t){return t.margin&&(0!==t.margin.left||0!==t.margin.top||0!==t.margin.right||0!==t.margin.bottom)},e.prototype.focusOutEdit=function(){this.endEdit(),"Canvas"===this.mode&&1!==this.scroller.currentZoom&&this.refreshDiagramLayer()},e.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1,"Canvas"===this.mode&&1!==this.scroller.currentZoom&&this.refreshDiagramLayer()},e.prototype.endEdit=function(){return K(this,void 0,void 0,function(){var t,e,n,o,a,s,h,d,p,g,u,f,m,v,b,S,w,v,S,x,I,P,C,z,O,T,A,L,E,B;return J(this,function(M){switch(M.label){case 0:return this.diagramActions&y.p.TextEdit?(t="Blazor",e="sfBlazor",n=void 0,o=void 0,a={},this.enableServerDataBinding(!1),i.i(r.isBlazor)()&&(this.canEnableBlazorObject=!0),s=document.getElementById(this.element.id+"_editBox"),i.i(r.isBlazor)()&&s||!i.i(r.isBlazor)()?(h=s.value,r.EventHandler.remove(s,"input",this.eventHandler.inputChange),r.EventHandler.remove(s,"focusout",this.focusOutEdit),d=document.getElementById(this.element.id+"_editTextBoxDiv"),p=void 0,p=this.nameTable[this.activeLabel.parentId],g=i.i(c.F)(p,this.activeLabel.id),u={oldValue:this.activeLabel.text,newValue:h,cancel:!1,element:p,annotation:g},i.i(r.isBlazor)()&&this.textEdit&&(u=this.getBlazorTextEditArgs(u)),f=!1,d.parentNode.removeChild(d),m=void 0,this.bpmnModule?(p=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),m=this.bpmnModule.getTextAnnotationWrapper(p,this.activeLabel.id),(f=!!p)?d.textContent===h&&h===this.activeLabel.text?[3,5]:i.i(r.isBlazor)()?this.textEdit&&window&&window[""+t]?(v={EventName:"textEdit",args:JSON.stringify(u)},[4,window[""+e].updateBlazorDiagramEvents(v,this)]):[3,2]:[3,3]:[3,5]):[3,5]):[3,11]):[3,11];case 1:u=M.sent()||u,M.label=2;case 2:return[3,4];case 3:this.triggerEvent(y.r.textEdit,u),M.label=4;case 4:u.cancel||this.bpmnModule.updateTextAnnotationContent(p,this.activeLabel,h,this),M.label=5;case 5:return f?[3,10]:(p=this.nameTable[this.activeLabel.parentId],b=i.i(c.F)(p,this.activeLabel.id),!b||b instanceof l.m?n=i.i(r.isBlazor)()&&"Text"===p.shape.type?{shape:{textContent:p.shape.content}}:{shape:{content:p.shape.content}}:(S=i.i(c.J)(p,b.id,!0),a[""+S]={content:b.content},n={annotations:a}),(w=this.eventHandler.isAddTextNode(p,!0))||d.textContent===h&&h===this.activeLabel.text?[3,9]:i.i(r.isBlazor)()?window&&window[""+t]&&this.textEdit?(v={EventName:"textEdit",args:JSON.stringify(u)},[4,window[""+e].updateBlazorDiagramEvents(v,this)]):[3,7]:[3,8]);case 6:u=M.sent()||u,M.label=7;case 7:return[3,9];case 8:this.triggerEvent(y.r.textEdit,u),M.label=9;case 9:m||(m=this.getWrapper(p.wrapper,this.activeLabel.id)),b.content===h||u.cancel||(p.parentId&&"UmlClassifier"===this.nameTable[p.parentId].shape.type&&-1===h.indexOf("+")&&-1===h.indexOf("-")&&-1===h.indexOf("#")&&-1===h.indexOf("~")&&-1===p.id.indexOf("_umlClass_header")&&(h=" + "+h),(p.isLane||p.isPhase)&&this.protectPropertyChange(!0),b instanceof l.m?o=i.i(r.isBlazor)()&&"Text"===p.shape.type?{shape:{textContent:h}}:{shape:{content:h}}:(S=i.i(c.J)(p,b.id,!0),x={},x[""+S]={content:h},o={annotations:x}),I=this.getIndex(p,p.id),I&&(P={},P[""+I]=n,C={},C[""+I]=o,i.i(c.l)(p)===l.a?this.onPropertyChanged({nodes:C},{nodes:P}):this.onPropertyChanged({connectors:C},{connectors:P})),this.protectPropertyChange(!0),i.i(r.isBlazor)()&&"Text"===p.shape.type?p.shape.textContent=h:b.content=h,this.protectPropertyChange(!1),this.updateSelector(),(p.isLane||p.isPhase)&&this.protectPropertyChange(!1)),w&&(this.removeObjectsFromLayer(p),this.removeFromAQuad(p),delete this.nameTable[this.activeLabel.parentId],""!==h&&(this.clearSelection(),z=i.i(k.e)(p),p=this.add(z),this.updateDiagramObject(p),this.commandHandler.oldSelectedObjects=i.i(c.N)(this),this.commandHandler.select(this.nameTable[p.id]),this.commandHandler.updateBlazorSelector())),M.label=10;case 10:if(this.selectedItems.nodes.length){if(O=this.nameTable[this.activeLabel.parentId],(T=this.nameTable[O.parentId])&&"SwimLane"===T.shape.type||"SwimLane"===O.shape.type)if(A="LaneHeaderParent",L="PhaseHeaderParent","SwimLane"===O.shape.type&&(T=this.nameTable[this.activeLabel.parentId],O=p),O.isLane||O.isPhase)for(E=O.isLane?T.shape.lanes:T.shape.phases,B=0;B<E.length;B++)E[parseInt(B.toString(),10)].id===(O[""+A]||O[""+L])&&(E[parseInt(B.toString(),10)].header.annotation.content=O.annotations[0].content);else O.isHeader&&T.shape.hasHeader&&(T.shape.header.annotation.content=O.annotations[0].content);this.dataBind()}m.visible=!0,this.updateDiagramObject(p),this.diagramActions=this.diagramActions&~y.p.TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},this.commandHandler.getBlazorOldValues(),i.i(r.isBlazor)()&&(this.canEnableBlazorObject=!1),this.enableServerDataBinding(!0),M.label=11;case 11:return[2]}})})},e.prototype.getIndex=function(t,e){for(var r=i.i(c.l)(t)===l.a?this.nodes:this.connectors,n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].id.toString()===e.toString())return n.toString();return null},e.prototype.getBlazorTextEditArgs=function(t){var e=i.i(c.l)(t.element)===p.a?{connectorId:t.element.id}:{nodeId:t.element.id},r={};return i.i(c.l)(t.element)===l.a&&"Text"===t.element.shape.type?r.textNode=t.element.shape:r.annotationId=t.element.annotations[0].id,t={oldValue:t.oldValue,newValue:t.newValue,cancel:t.cancel,element:e,annotation:r}},e.prototype.canLogChange=function(){return!(!(this.diagramActions&y.p.Render)||this.diagramActions&y.p.ToolAction||this.diagramActions&y.p.UndoRedo||this.diagramActions&y.p.PublicMethod)},e.prototype.modelChanged=function(t,e){return!!(t.connectors||e.connectors||t.nodes||e.connectors||t.pageSettings||e.pageSettings||t.bridgeDirection||e.bridgeDirection)},e.prototype.resetDiagramActions=function(t){var e=!!t;this.diagramActions&y.p.UndoRedo&&(!e||t===y.p.UndoRedo)&&(this.diagramActions=this.diagramActions&~y.p.UndoRedo),this.diagramActions&y.p.PublicMethod&&(!e||t===y.p.PublicMethod)&&(this.diagramActions=this.diagramActions&~y.p.PublicMethod)},e.prototype.removeNode=function(t,e){this.removeObjectsFromLayer(t),this.removeFromAQuad(this.nameTable[t.id]);var n=document.getElementById(t.id+"_groupElement");if(delete this.nameTable[t.id],t.children&&delete this.groupTable[t.id],i.i(r.isBlazor)())for(var o=0;o<this.nodes.length;o++)t.id===this.nodes[parseInt(o.toString(),10)].id&&this.UpdateBlazorDiagramModel(t,"Node",o);if(this.nodes.splice(this.nodes.indexOf(t),1),n&&n.children&&n.children.length>0)for(var a=void 0,s=n.children.length-1;s>=0;s--){var h=n.children[parseInt(s.toString(),10)];e.length>0&&-1!==e.indexOf(h.id.split("_")[0])&&(a?n.parentNode.insertBefore(h,a):n.parentNode.insertBefore(h,n),a=h)}n&&n.parentNode.removeChild(n)},e.prototype.deleteGroup=function(t){var e=[],i=[];t.children&&(i=this.commandHandler.getChildren(t,e)),this.UpdateBlazorDiagramModelCollection(t);for(var r=0,n=i;r<n.length;r++){var o=n[r];this.nameTable[o.id]&&this.remove(o)}},e.prototype.updateObject=function(t,e,i){if(!(this.diagramActions&y.p.ToolAction)){var r=t.wrapper.children[0].bounds;if(!this.commandHandler.checkBoundaryConstraints(void 0,void 0,r))if(t instanceof l.a){for(var n=e,o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];switch(s){case"width":t.width=n.width;break;case"height":t.height=n.height;break;case"offsetX":t.offsetX=n.offsetX;break;case"offsetY":t.offsetY=n.offsetY;break;case"rotateAngle":t.rotateAngle=n.rotateAngle}}this.nodePropertyChange(t,i,e)}else{for(var h=0,d=Object.keys(i);h<d.length;h++){var s=d[h],c=e,p=t.sourcePoint,g=t.targetPoint;switch(s){case"sourcePoint":p.x=c.sourcePoint.x||p.x,p.y=c.sourcePoint.y||p.y;break;case"targetPoint":g.x=c.targetPoint.x||g.x,g.y=c.targetPoint.y||g.y}}this.connectorPropertyChange(t,i,e)}}},e.prototype.nodePropertyChangeExtend=function(t,e,r,n){return void 0!==r.style&&"Bpmn"!==t.shape.type&&(i.i(c.O)(r.style,t.wrapper.children[0]),n=!0),void 0!==r.shadow&&(this.updateShadow(t.shadow,r.shadow),n=!0),void 0!==r.constraints&&(e.constraints&y.f.Select&&!(r.constraints&y.f.Select)&&i.i(L.b)(this,t)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),n=!0)),this.swimLaneNodePropertyChange(t,e,r,n),n},e.prototype.swimLaneNodePropertyChange=function(t,e,r,n){if("SwimLane"===t.shape.type&&!this.currentSymbol){if(e.shape){var o=r.shape,a=t.shape,s="Horizontal"===a.orientation,h=a.padding,d=e.shape,l=t.wrapper.children[0],c=void 0,p=void 0,g=void 0;if(d.lanes||d.phases){if(d.lanes)for(var u=0,f=Object.keys(o.lanes);u<f.length;u++){var m=f[u],v=Number(m),b=d.lanes[parseInt(v.toString(),10)],S=void 0,w=o.lanes[parseInt(v.toString(),10)];if(w&&w.header&&(g=a.lanes[parseInt(v.toString(),10)].header.id,c=b.header,p=w.header,this.nodePropertyChange(this.nameTable[""+g],c,p)),b.children)for(var x=0,I=Object.keys(b.children);x<I.length;x++){var C=I[x];g=a.lanes[parseInt(v.toString(),10)].children[Number(C)].id;var z=this.nameTable[""+g];c=b.children[Number(C)],p=w.children[Number(C)],this.nodePropertyChange(z,c,p)}b.width&&!s&&(S=a.phases&&a.phaseSize?v+1:v,l.updateColumnWidth(S,w.width,!0,h),this.updateDiagramElementQuad()),b.height&&s&&(S=a.header&&a.hasHeader?v+1:v,S+=a.phases&&a.phaseSize?1:0,l.updateRowHeight(S,w.height,!0,h),this.updateDiagramElementQuad())}if(o.phases)for(var O=0,T=Object.keys(o.phases);O<T.length;O++){var A=T[O],v=Number(A),L=o.phases[parseInt(v.toString(),10)],E=void 0,B=a.header&&a.hasHeader?1:0;if(L&&L.header&&(g=a.phases[parseInt(v.toString(),10)].header.id,c=d.phases[parseInt(v.toString(),10)].header,p=L.header,this.nodePropertyChange(this.nameTable[""+g],c,p)),L.offset){if(0===v)E=L.offset;else{var M=a.phases[v-1];E=L.offset-M.offset,E<=0&&(E=L.offset)}s?(l.updateColumnWidth(v,E,!0,h),i.i(V.c)(t,this,l.rows[parseInt(B.toString(),10)].cells[parseInt(v.toString(),10)],v)):l.updateRowHeight(B+v,E,!0,h)}}}if(void 0!==o.phaseSize&&a.phases.length)if(0===o.phaseSize||0===d.phaseSize)if(d.phaseSize)s?(l.removeRow(a.header&&a.hasHeader?1:0),t.height=t.wrapper.height=l.height):(a.header&&a.hasHeader&&(l.rows[0].cells[1].children=l.rows[0].cells[0].children,l.rows[0].cells[1].columnSpan=l.rows[0].cells[0].columnSpan-1,l.rows[0].cells[0].children=[]),l.removeColumn(0));else{if(s){var D=new P.b;D.height=o.phaseSize,l.addRow(a.header&&a.hasHeader?1:0,D,!0),t.height=t.wrapper.height+=o.phaseSize}else{var R=new P.c;R.width=o.phaseSize,l.addColumn(0,R,!0),a.header&&a.hasHeader&&(l.rows[0].cells[0].children=l.rows[0].cells[1].children,l.rows[0].cells[1].children=[],l.rows[0].cells[1].columnSpan=1,l.rows[0].cells[1].minWidth=void 0,l.rows[0].cells[0].columnSpan=a.lanes.length+1)}for(var _=0;_<a.phases.length;_++)""===a.phases[parseInt(_.toString(),10)].id&&(a.phases[parseInt(_.toString(),10)].id=i.i(k.g)()),i.i(V.r)(l,this,t,a.header&&a.hasHeader?1:0,s,_)}else s?l.updateRowHeight(a.header&&a.hasHeader?1:0,o.phaseSize,!1):l.updateColumnWidth(0,o.phaseSize,!1);if(a.header&&a.hasHeader&&d.header){var j=l.rows[0].cells[0].children[0].id,N=this.nameTable[""+j];this.nodePropertyChange(N,d.header,o.header)}t.height=t.wrapper.height=l.height,t.width=t.wrapper.width=l.width}else if(e.constraints){var H=e.constraints&y.f.Select,W=r.constraints&y.f.Select;if(H!==W){var o=t.shape,N=this.nameTable[t.id+o.header.id];N.constraints=W?N.constraints|y.f.Select:N.constraints&~y.f.Select;var X=void 0;if(o.phaseSize>0)for(var Y=0;Y<o.phases.length;Y++)X=this.nameTable[t.id+o.phases[parseInt(Y.toString(),10)].id+"_header"],X.constraints=W?X.constraints|y.f.Select:X.constraints&~y.f.Select;for(var U=void 0,G=void 0,F=o.phases.length||1,Y=0;Y<o.lanes.length;Y++)for(var Z=0;Z<F;Z++)U=this.nameTable[t.id+o.lanes[parseInt(Y.toString(),10)].id+Z],U.constraints=W?U.constraints|y.f.Select:U.constraints&~y.f.Select,0===Z&&(G=this.nameTable[t.id+o.lanes[parseInt(Y.toString(),10)].id+"_"+Z+"_header"],G.constraints=W?G.constraints|y.f.Select:G.constraints&~y.f.Select)}}n=!0}return n},e.prototype.insertValue=function(t,e){if(!(this.blazorActions&y.i.GroupClipboardInProcess)){for(var i=void 0,r=e?this.oldNodeObjects:this.oldConnectorObjects,n=0;n<r.length;n++)r[parseInt(n.toString(),10)].id===t.id&&(i=!0);i||(e?this.oldNodeObjects.push(t):this.oldConnectorObjects.push(t))}},e.prototype.nodePropertyChange=function(t,e,n,o,a,s){if(this.canEnableBlazorObject&&"helper"!==t.id){var h=i.i(k.e)(t);this.insertValue(h,!0)}var d,l=t.wrapper.outerBounds,g=t.wrapper.bounds,u=!1;if(void 0!==n.width&&(t.children?t.container?t.wrapper.width=n.width:this.scaleObject(t,n.width,!0):(t.wrapper.children[0].width=n.width,d=!0,u=!0)),void 0!==n.height&&(t.children?t.container?t.wrapper.height=n.height:this.scaleObject(t,n.height,!1):(t.wrapper.children[0].height=n.height,d=!0,u=!0)),d=this.nodePropertyChangeExtend(t,e,n,d),void 0!==n.constraints&&i.i(D.a)(e)!==i.i(D.a)(n)&&(t.wrapper.children[0].shadow=i.i(D.a)(t)?t.shadow:null),void 0!==n.offsetX){if("None"!==t.wrapper.flip){if(t.offsetX!==t.wrapper.offsetX&&void 0!==e.offsetX){var f=n.offsetX-e.offsetX;t.wrapper.offsetX=t.wrapper.offsetX+f,this.updateFlipOffset(t.wrapper,f,0,t.wrapper.flip)}}else t.wrapper.offsetX=n.offsetX;d=!0,u=!0}if(void 0!==n.offsetY){if("None"!==t.wrapper.flip){if(t.offsetY!==t.wrapper.offsetY&&void 0!==e.offsetY){var v=n.offsetY-e.offsetY;t.wrapper.offsetY=t.wrapper.offsetY+v,this.updateFlipOffset(t.wrapper,0,v,t.wrapper.flip)}}else t.wrapper.offsetY=n.offsetY;d=!0,u=!0}if(void 0!==n.padding&&(t.wrapper.padding.left=void 0!==n.padding.left?n.padding.left:t.wrapper.padding.left,t.wrapper.padding.right=void 0!==n.padding.right?n.padding.right:t.wrapper.padding.right,t.wrapper.padding.top=void 0!==n.padding.top?n.padding.top:t.wrapper.padding.top,t.wrapper.padding.bottom=void 0!==n.padding.bottom?n.padding.bottom:t.wrapper.padding.bottom,d=!0),void 0!==n.pivot&&(t.wrapper.pivot=n.pivot,d=!0),void 0!==n.minWidth&&(t.wrapper.minWidth=t.wrapper.children[0].minWidth=n.minWidth,d=!0,u=!0),void 0!==n.minHeight&&(t.wrapper.minHeight=t.wrapper.children[0].minHeight=n.minHeight,d=!0,u=!0),void 0!==n.maxWidth&&(t.wrapper.maxWidth=n.maxWidth,d=!0,u=!0),void 0!==n.maxHeight&&(t.wrapper.maxHeight=n.maxHeight,d=!0,u=!0),void 0!==n.flip)if(t.wrapper.flip=n.flip,d=!0,u=!0,t.wrapper.elementActions&y.e.ElementIsGroup)if(i.i(c.M)(t.wrapper,t.offsetX,t.offsetY,this,n.flip),t&&t.children)for(var S=0,w=t.children;S<w.length;S++){var x=w[S],I=this.nameTable[""+x];I.wrapper.flip=n.flip,this.updatePorts(I,n.flip)}else this.updatePorts(t,t.flip);else!t.flipMode||"Port"!==t.flipMode&&"All"!==t.flipMode?"None"===t.flip&&this.updatePorts(t,n.flip):this.updatePorts(t,n.flip);if(void 0!==n.flipMode&&(d=!0,u=!0,!t.flipMode||"Port"!==t.flipMode&&"All"!==t.flipMode?"Label"===t.flipMode?this.updatePorts(t,"None"):"None"===t.flipMode&&this.updatePorts(t,t.flipMode):this.updatePorts(t,t.flip)),void 0!==n.rotateAngle&&t.constraints&y.f.Rotate&&(t.children&&a&&this.commandHandler.rotateObjects(t,[t],t.rotateAngle-t.wrapper.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),t.wrapper.rotateAngle=n.rotateAngle,d=!0,u=!0),void 0!==n.backgroundColor&&(t.wrapper.style.fill=n.backgroundColor),void 0!==n.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==n.shape&&"Bpmn"!==t.shape.type&&(d=!0,i.i(c.P)(n,t,e,this),u=!0),n.margin&&(d=!0,this.updateMargin(t,n),u=!0),((void 0!==n.shape&&void 0===n.shape.type||void 0!==n.width||void 0!==n.height||void 0!==n.style)&&"Bpmn"===t.shape.type&&this.bpmnModule||i.i(r.isBlazor)()&&n&&n.shape&&"Bpmn"===n.shape.type)&&(d=!0,u=!0,this.bpmnModule.updateBPMN(n,e,t,this)),"UmlActivity"===t.shape.type&&(!i.i(r.isBlazor)()&&"FinalNode"===t.shape.shape||i.i(r.isBlazor)()&&"FinalNode"===t.shape.umlActivityShape)&&(d=!0,u=!0,this.updateUMLActivity(n,e,t,this)),(t.shape&&"UmlClassifier"===t.shape.type||t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type)&&(d=!0,u=!0),void 0!==n.ports)for(var P=0,C=Object.keys(n.ports);P<C.length;P++){var z=C[P],O=Number(z);d=!0;var T=n.ports[""+z],A=t.ports[parseInt(O.toString(),10)];this.updatePort(T,A,t.wrapper),u=!0}if(void 0!==n.annotation||void 0!==n.annotations||void 0!==n.width)for(var L=0,E=Object.keys(n.annotations||t.annotations);L<E.length;L++){var z=E[L],O=Number(z);d=!0;var T=void 0;T=n.annotation?n.annotation:n.annotations?n.annotations[""+z]:t.annotations;var B=t.annotations[parseInt(O.toString(),10)];if(B){var M=!!t.width;this.updateAnnotation(T,B,t.wrapper,t,M);var R=this.nameTable[t.parentId];if(R&&"SwimLane"===R.shape.type){if(t.isLane||t.isPhase)for(var _=t.isLane?R.shape.lanes:R.shape.phases,j=0;j<_.length;j++)if(_[parseInt(j.toString(),10)].id===(t.LaneHeaderParent||t.PhaseHeaderParent)){_[parseInt(j.toString(),10)].header.annotation.content=t.annotations[0].content,_[parseInt(j.toString(),10)].header.annotation.style=t.annotations[0].style;break}}}}if(void 0===n.expandIcon&&void 0===n.collapseIcon&&void 0===n.isExpanded||(this.updateIcon(t),this.updateDefaultLayoutIcons(t),void 0!==n.isExpanded&&(this.canExpand=!0,this.commandHandler.expandNode(t,this)),d=!0,this.canExpand=!1),void 0!==n.fixedUserHandles)for(var O=void 0,T=void 0,N=void 0,H=0,W=Object.keys(n.fixedUserHandles);H<W.length;H++){var z=W[H];O=Number(z),d=!0,n.fixedUserHandles[parseInt(O.toString(),10)]&&(T=n.fixedUserHandles[parseInt(O.toString(),10)]),N=t.fixedUserHandles[parseInt(O.toString(),10)],N&&this.updateNodefixedUserHandle(T,N,t.wrapper,t)}if(void 0!==n.tooltip&&this.updateTooltip(t,n),d){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(t,{offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY},this),this.checkSelectedItem(t)&&t.wrapper.children[0]instanceof b.a&&t.wrapper.children[0].refreshTextElement(),t.wrapper.measure(new m.a(t.wrapper.bounds.width,t.wrapper.bounds.height),t.id,this.onLoadImageSize.bind(this)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateObject(t,e,n),!("SwimLane"!==t.shape.type||this.currentSymbol||this.diagramActions&y.p.ToolAction)){i.i(V.d)(this,t);var X=t.wrapper.children[0],Y=t.shape,U=X.columnDefinitions().length;if("Horizontal"===Y.orientation){var O=Y.header&&Y.hasHeader?1:0;i.i(V.c)(t,this,X.rows[parseInt(O.toString(),10)].cells[U-1],U-1)}t.wrapper.measure(new m.a(t.wrapper.bounds.width,t.wrapper.bounds.height)),t.wrapper.arrange(t.wrapper.desiredSize)}if(this.diagramActions&y.p.ToolAction&&!(this.diagramActions&y.p.UndoRedo)||this.checkSelectedItem(t)&&this.updateSelector(),!1===l.equals(l,t.wrapper.outerBounds)&&(this.updateQuad(t),t.parentId&&this.nameTable[t.parentId])){var G=this.nameTable[t.parentId];this.updateQuad(G)}if(o?t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length):this.commandHandler.connectorSegmentChange(t,g,void 0!==n.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(t,this),n.annotations&&t.processId||this.updateGroupOffset(t),t.parentId&&this.nameTable[t.parentId]){var F=this.nameTable[t.parentId];F.wrapper.measure(new m.a(F.wrapper.width,t.wrapper.height)),F.wrapper.arrange(F.wrapper.desiredSize),F.offsetX=F.wrapper.offsetX,F.offsetY=F.wrapper.offsetY}if(!1===g.equals(g,t.wrapper.bounds)&&t.children&&this.updateGroupOffset(t),"SwimLane"===t.shape.type&&!this.currentSymbol&&this.diagramActions&y.p.Render){var Z=i.i(V.s)(this,t.wrapper.children[0],void 0,!0);i.i(V.e)(Z,this)}if(!this.preventNodesUpdate){if(!i.i(D.y)(this)||i.i(D.y)(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)if(this.diagramActions&y.p.PreventZIndexOnDragging)this.updateDiagramObject(t,!0);else if(this.updateDiagramObject(t),void 0!==this.bpmnModule&&"SwimLane"===t.shape.type&&t.isTextNode)for(var q=t,Q=0;Q<q.shape.lanes.length;Q++)for(var K=q.shape.lanes[parseInt(Q.toString(),10)],J=0;J<K.children.length;J++){var $=K.children[parseInt(J.toString(),10)];"Bpmn"===$.shape.type&&this.bpmnModule.updateTextAnnotationProp($,{offsetX:$.offsetX,offsetY:$.offsetY},this,!1)}if(!o&&u&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&y.j.LineRouting&&"helper"!==t.id&&(this.diagramActions&y.p.ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0)),this.updateConnectorEdges(t),"helper"!==t.id&&!(this.diagramActions&y.p.ToolAction)))for(var tt=this.spatialSearch.findObjects(t.wrapper.outerBounds),et=0;et<tt.length;et++){var it=tt[parseInt(et.toString(),10)];it instanceof p.a&&this.connectorPropertyChange(tt[parseInt(et.toString(),10)],{},{sourceID:it.sourceID,targetID:it.targetID,sourcePortID:it.sourcePortID,targetPortID:it.targetPortID,sourcePoint:it.sourcePoint,targetPoint:it.targetPoint})}}"New"!==t.status&&this.diagramActions&&(t.status="Update")}if(!s){var rt=t,nt={element:rt,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:e,newValue:n};i.i(r.isBlazor)()&&this.propertyChange&&(nt.element={node:i.i(c.b)(rt)},nt.oldValue={node:i.i(c.b)(e)},nt.newValue={node:i.i(c.b)(n)}),this.triggerEvent(y.r.propertyChange,nt)}},e.prototype.updatePorts=function(t,e){if(t&&t.ports.length>0)for(var r=0,n=Object.keys(t.ports);r<n.length;r++){var o=n[r],a=Number(o),s=t.ports[parseInt(a.toString(),10)],h=this.getWrapper(t.wrapper,s.id);h=i.i(c.h)(h,e,s),h.relativeMode="Point",h.measure(new m.a(h.width,h.height)),h.arrange(h.desiredSize)}},e.prototype.updateFlipOffset=function(t,e,i,r){if(t.hasChildren())for(var n=0,o=t.children;n<o.length;n++){var a=o[n];"Horizontal"!==r&&"Both"!==r||(a.flipOffset.x=a.flipOffset.x+e),"Vertical"!==r&&"Both"!==r||(a.flipOffset.y=a.flipOffset.y+i),(a instanceof I.a||a instanceof d.a)&&this.updateFlipOffset(a,e,i,r)}},e.prototype.updateUMLActivity=function(t,e,i,r){if(void 0!==t.width||void 0!==t.height){var n=i.wrapper.children[0].children[0];n.width=t.width,n.height=t.height;var o=i.wrapper.children[0].children[1];o.width=t.width/1.5,o.height=t.height/1.5}},e.prototype.updateConnectorProperties=function(t){if(this.preventConnectorsUpdate){-1===this.selectionConnectorsList.indexOf(t)&&t&&this.selectionConnectorsList.push(t)}else{var e={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint,sourceID:t.sourceID,targetID:t.targetID,sourcePortID:t.sourcePortID,targetPortID:t.targetPortID};this.connectorPropertyChange(t,{},e,void 0,!0)}},e.prototype.updateConnectorEdges=function(t){if(t.inEdges.length>0)for(var e=0;e<t.inEdges.length;e++)this.updateConnectorProperties(this.nameTable[t.inEdges[parseInt(e.toString(),10)]]);if(t.outEdges.length>0)for(var i=0;i<t.outEdges.length;i++)this.updateConnectorProperties(this.nameTable[t.outEdges[parseInt(i.toString(),10)]]);t.parentId&&this.nameTable[t.parentId]&&this.updateConnectorEdges(this.nameTable[t.parentId])},e.prototype.connectorProprtyChangeExtend=function(t,e,i,r){return void 0!==i.type&&i.type!==e.type&&t.segments.length>0&&void 0===i.segments&&(t.segments=[]),void 0!==i.shape&&void 0!==t.shape&&t.shape&&"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(t,e,i,this),void 0!==t.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),r=!0):r},e.prototype.connectorPropertyChange=function(t,e,r,n,o){if(this.canEnableBlazorObject){var a=i.i(k.e)(t);this.insertValue(a,!1)}var s=t.wrapper.bounds,h=!1,d=[];h=this.connectorProprtyChangeExtend(t,e,r,h);var l,p,g,u;if(void 0!==r.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==r.sourcePoint||void 0!==r.targetPoint||void 0!==r.sourceID||void 0!==r.targetID||void 0!==r.targetPadding||void 0!==r.sourcePortID||void 0!==r.targetPortID||void 0!==r.sourcePadding||void 0!==r.type||void 0!==r.segments||void 0!==r.flip){if(void 0!==r.sourceID&&r.sourceID!==e.sourceID||r.sourcePortID){var f=this.nameTable[t.sourceID];if(p=this.findInOutConnectPorts(f,!1),(!f||i.i(D.e)(f)||""!==t.sourcePortID&&i.i(D.f)(p))&&(t.sourceWrapper=f?this.getEndNodeWrapper(f,t,!0):void 0,t.sourcePortID&&void 0===r.sourcePortID&&(t.sourcePortWrapper=f?this.getWrapper(f.wrapper,t.sourcePortID):void 0),this.removePortEdges(this.nameTable[e.sourceID]||f,e.sourcePortID||t.sourcePortID,t.id,!1)),void 0!==r.sourceID&&void 0!==e.sourceID&&""!==e.sourceID){var v=this.nameTable[e.sourceID];void 0!==v&&v.outEdges&&-1!==v.outEdges.indexOf(t.id)&&i.i(c.Q)(v.outEdges,t.id)}this.updateEdges(t)}if(void 0!==r.targetID&&r.targetID!==e.targetID){var b=this.nameTable[r.targetID];if(l=this.findInOutConnectPorts(b,!0),(!b||i.i(D.g)(b)||""!==t.targetPortID&&i.i(D.h)(l))&&(t.targetWrapper=b?this.getEndNodeWrapper(b,t,!1):void 0,t.targetPortID&&void 0===r.targetPortID&&(t.targetPortWrapper=b?this.getWrapper(b.wrapper,t.targetPortID):void 0),this.removePortEdges(this.nameTable[e.targetID]||b,e.targetPortID||t.targetPortID,t.id,!0)),void 0!==e&&void 0!==e.targetID&&""!==e.targetID){var S=this.nameTable[e.targetID];void 0!==S&&S.inEdges&&-1!==S.inEdges.indexOf(t.id)&&i.i(c.Q)(S.inEdges,t.id)}this.updateEdges(t)}if(void 0!==r.sourcePortID&&r.sourcePortID!==e.sourcePortID){t.sourceID&&this.nameTable[t.sourceID]&&(g=this.nameTable[t.sourceID].wrapper);var f=this.nameTable[t.sourceID];!f||i.i(D.e)(f)||""!==t.sourcePortID&&i.i(D.f)(p)?t.sourcePortWrapper=g?this.getWrapper(g,r.sourcePortID):void 0:""!==t.sourcePortID||i.i(D.e)(f)||(t.sourcePortWrapper=void 0)}if(void 0!==r.targetPortID&&r.targetPortID!==e.targetPortID){var b=this.nameTable[t.targetID];t.targetID&&this.nameTable[t.targetID]&&(u=this.nameTable[t.targetID].wrapper),!b||i.i(D.g)(b)||""!==t.targetPortID&&i.i(D.h)(l)?t.targetPortWrapper=u?this.getWrapper(u,r.targetPortID):void 0:""!==t.targetPortID||i.i(D.g)(b)||(t.targetPortWrapper=void 0)}void 0!==r.flip&&(t.flip=r.flip,i.i(c.s)(t)),"Orthogonal"===t.type&&this.lineRoutingModule&&this.diagramActions&&this.constraints&y.j.LineRouting&&!(this.diagramActions&y.p.ToolAction)&&(this.lineRoutingModule.renderVirtualRegion(this,!0),t.sourceID!==t.targetID&&t.segments.length>1&&this.lineRoutingModule.refreshConnectorSegments(this,t,!1)),d=this.getPoints(t)}void 0!==r.style&&i.i(c.O)(r.style,t.wrapper.children[0]),(d.length>0||void 0!==r.sourceDecorator||void 0!==r.targetDecorator&&i.i(c.R)(Object.keys(r.targetDecorator))||void 0!==r.cornerRadius)&&(i.i(c.t)(t,d.length>0?d:t.intermediatePoints,this.diagramActions),void 0!==r.type&&(h=!0),d.length>0&&(t.wrapper.measure(new m.a(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateConnectorAnnotation(t),this.updateConnectorfixedUserHandles(t),this.updateObject(t,e,r))),(r.sourcePoint||r.targetPoint||r.segments)&&this.diagramActions===y.p.Render&&(h=!0),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.commandHandler.updatePathElementOffset(t),n||this.updateBridging(),this.updateAnnotations(r,t),this.updatefixedUserHandle(r,t),t.wrapper.measure(new m.a(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),!1===s.equals(s,t.wrapper.bounds)&&this.updateQuad(t),!0!==h||!this.checkSelectedItem(t)||this.diagramActions&y.p.ToolAction&&!(this.diagramActions&y.p.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!i.i(D.y)(this)||i.i(D.y)(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)&&(this.diagramActions&y.p.PreventZIndexOnDragging?this.updateDiagramObject(t,!0):this.updateDiagramObject(t)),this.diagramActions&&"New"!==t.status&&(t.status="Update"),this.triggerPropertyChange(o,t,e,r)},e.prototype.removePortEdges=function(t,e,r,n){if(t)for(var o=0;o<t.ports.length;o++){var a=t.ports[parseInt(o.toString(),10)];if(a.id===e){var s=n?a.inEdges:a.outEdges;i.i(c.Q)(s,r)}}},e.prototype.getpropertyChangeArgs=function(t,e,r,n){return n.element={connector:i.i(c.b)(t)},n.oldValue={connector:i.i(c.b)(e)},n.newValue={connector:i.i(c.b)(r)},n},e.prototype.triggerPropertyChange=function(t,e,n,o){if(!t){var a=e,s={element:i.i(c.b)(a),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:i.i(c.b)(n),newValue:i.i(c.b)(o)};i.i(r.isBlazor)()&&(s=this.getpropertyChangeArgs(a,n,o,s)),this.triggerEvent(y.r.propertyChange,s)}},e.prototype.findInOutConnectPorts=function(t,e){var r={};return t&&(r=i.i(c.u)(t,e)),r},e.prototype.getPoints=function(t,e){var i=!!this.lineDistributionModule;return t.getConnectorPoints(t.type,e,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0,i)},e.prototype.updateNodeProperty=function(t,e,i){if(void 0===e)this.updateElementVisibility(t,this.nameTable[t.id],e);else{t.style.opacity=i;for(var r=0;r<t.children.length;r++)t.children[parseInt(r.toString(),10)]instanceof d.a&&this.updateNodeProperty(t.children[parseInt(r.toString(),10)],void 0,i),t.children[parseInt(r.toString(),10)].style.opacity=i}},e.prototype.checkSelectedItem=function(t){var e=this.selectedItems,i=!1,r=[];return r=r.concat(e.nodes,e.connectors),r.length>0&&t.id===r[r.length-1].id&&(i=!0),i},e.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof d.a)for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[parseInt(i.toString(),10)],e);t.visible=e},e.prototype.updateElementVisibility=function(t,e,i){if(void 0!==i){if(t.visible=i,e instanceof l.a){if(e.children)for(var r=0,n=e.children;r<n.length;r++){var o=n[r];this.updateElementVisibility(this.nameTable[""+o].wrapper,this.nameTable[""+o],i)}else t.children[0].visible=i,this.updateDiagramContainerVisibility(t.children[0],i),"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(e,i,this);if(e.ports)for(var a=0,s=e.ports;a<s.length;a++){var h=s[a];if(h.visibility&y.c.Visible){var d=this.getWrapper(t,h.id);d.visible=i}}if(e.annotations)for(var c=0,g=e.annotations;c<g.length;c++){var u=g[c],d=this.getWrapper(t,u.id);d.visible=i}}else for(var f=0;f<3;f++)t.children[parseInt(f.toString(),10)].visible=i;if(e.annotations)for(var m=0,v=e.annotations;m<v.length;m++){var u=v[m],d=this.getWrapper(t,u.id);d.visible=i}if(e.expandIcon||e.collapseIcon){var d=this.getWrapper(t,"icon_content");if(d){for(var f=0;f<d.children.length;f++)d.children[parseInt(f.toString(),10)].visible=i;d.visible=i}e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length)}!1===i&&this.unSelect(this.nameTable[t.id]),(e instanceof l.a&&!this.preventNodesUpdate||e instanceof p.a&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[t.id],void 0,!0)}},e.prototype.updateAnnotations=function(t,e){if(void 0!==t.annotations)for(var i=0,r=Object.keys(t.annotations);i<r.length;i++){var n=r[i],o=Number(n),a=t.annotations[""+n],s=e.annotations[parseInt(o.toString(),10)];this.updateAnnotation(a,s,e.wrapper,e)}},e.prototype.updatefixedUserHandle=function(t,e){if(void 0!==t.fixedUserHandles)for(var i=void 0,r=void 0,n=void 0,o=0,a=Object.keys(t.fixedUserHandles);o<a.length;o++){var s=a[o];i=Number(s),r=t.fixedUserHandles[""+s],n=e.fixedUserHandles[parseInt(i.toString(),10)],this.updateConnectorfixedUserHandle(r,n,e.wrapper,e)}},e.prototype.updateConnectorfixedUserHandle=function(t,e,i,r,n){var o=!1,a=this.getWrapper(i,e.id);void 0!==a&&(void 0!==t.width&&(a.width=t.width,o=!0),void 0!==t.height&&(a.height=t.height,o=!0),e instanceof F.b&&void 0!==t.offset&&r.updateAnnotation(e,r.intermediatePoints,r.wrapper.bounds,a),e instanceof F.b&&t.displacement&&(void 0===t.displacement.x&&void 0===t.displacement.y||(o=!0)),void 0!==t.fill&&(a.style.fill=t.fill),void 0!==t.handleStrokeColor&&(a.style.strokeColor=t.handleStrokeColor),void 0!==t.handleStrokeWidth&&(a.style.strokeWidth=t.handleStrokeWidth),void 0!==t.visibility&&(a.visible=t.visibility),void 0!==t.cornerRadius&&(a.cornerRadius=t.cornerRadius),this.updatefixedUserHandleContent(t,o,a,r,e,i),!0===o&&(a.measure(new m.a(a.width,a.height)),a.arrange(a.desiredSize)))},e.prototype.updateAnnotation=function(t,e,r,n,o){var a=!1,s=this.getWrapper(r,e.id);if(void 0!==s){if(void 0!==t.width&&void 0!==t.height&&(s.width=t.width,s.height=t.height,a=!0),void 0!==t.rotateAngle&&(s.rotateAngle=t.rotateAngle),!o||s instanceof H.a||s.refreshTextElement(),e instanceof x.c&&void 0!==t.segmentAngle&&(s.rotateAngle=e.rotateAngle),e instanceof x.b&&void 0!==t.offset){var h=t.offset;a=!0;var d=void 0!==h.x?h.x:e.offset.x,l=void 0!==h.y?h.y:e.offset.y;s.setOffsetWithRespectToBounds(d,l,"Fraction"),s.relativeMode="Point"}else e instanceof x.c&&(void 0!==t.offset||void 0!==t.segmentAngle)&&n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,s);if(e instanceof x.c&&t.displacement&&(void 0===t.displacement.x&&void 0===t.displacement.y||(a=!0,n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,s))),void 0!==t.margin&&(a=!0,void 0!==t.margin.bottom&&(s.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(s.margin.top=t.margin.top),void 0!==t.margin.left&&(s.margin.left=t.margin.left),void 0!==t.margin.right&&(s.margin.right=t.margin.right)),(a||o)&&(s.width=e.width||n.width,e.template&&(s.width=s.width||s.actualSize.width,s.height=e.height||n.height||s.actualSize.height)),void 0!==t.horizontalAlignment&&(s.horizontalAlignment=t.horizontalAlignment,a=!0),void 0!==t.verticalAlignment&&(s.verticalAlignment=t.verticalAlignment,a=!0),void 0!==t.visibility&&(s.visible=!(!r.visible||!t.visibility)),void 0!==t.constraints){s.constraints&y.b.Select&&!(t.constraints&y.b.Select)&&i.i(L.b)(this,n,!1,s),s.constraints=t.constraints}void 0!==t.style&&i.i(c.O)(t.style,s),void 0!==t.hyperlink&&i.i(c.S)(t.hyperlink,s,e),this.updateAnnotationContent(t,a,s,n,e,r),!0===a&&(s.measure(new m.a(s.width,s.height)),s.arrange(s.desiredSize)),s instanceof H.a||s.refreshTextElement()}},e.prototype.updatefixedUserHandleContent=function(t,e,i,r,n,o){void 0!==t&&this.updateConnectorfixedUserHandleWrapper(i,r,n,o)},e.prototype.updateConnectorfixedUserHandleWrapper=function(t,e,r,n){for(var o=0,a=this.views;o<a.length;o++){var s=a[o];i.i(B.m)(t.id+"_groupElement",s),i.i(B.m)(t.id+"_html_element",s)}if(e instanceof p.a){var h=e.wrapper,d=h.children[0],l=new S.a(d.offsetX-d.width/2,d.offsetY-d.height/2,d.width,d.height);t=e.getfixedUserHandle(e.fixedUserHandles[e.fixedUserHandles.length-1],e.intermediatePoints,l)}for(var c=0;c<n.children.length;c++)t.id===n.children[parseInt(c.toString(),10)].id&&n.children.splice(c,1,t)},e.prototype.updateAnnotationContent=function(t,e,n,o,a,s){void 0!==t.content&&(n&&(!0,"UmlActivity"===o.shape.type&&(i.i(r.isBlazor)()&&"StructuredNode"===o.shape.umlActivityShape||!i.i(r.isBlazor)()&&"StructuredNode"===o.shape.shape)?n.content="<<"+t.content+">>":n.content=t.content),n instanceof H.a&&this.updateAnnotationWrapper(n,o,a,s)),void 0!==t.template&&(n.content=t.template,this.updateAnnotationWrapper(n,o,a,s))},e.prototype.updateAnnotationWrapper=function(t,e,r,n){for(var o=0,a=this.views;o<a.length;o++){var s=a[o];i.i(B.m)(t.id+"_groupElement",s),i.i(B.m)(t.id+"_html_element",s)}if(e instanceof l.a)t=e.initAnnotationWrapper(r,this.element.id);else if(e instanceof p.a){var h=e.wrapper,d=h.children[0],c=new S.a(d.offsetX-d.width/2,d.offsetY-d.height/2,d.width,d.height);t=e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,c,this.getDescription,this.element.id)}for(var g=0;g<n.children.length;g++)t.id===n.children[parseInt(g.toString(),10)].id&&n.children.splice(g,1,t)},e.prototype.updateNodefixedUserHandle=function(t,e,i,r){var n=!1,o=this.getWrapper(i,e.id);if(void 0!==o){if(void 0!==t.width&&(o.actualSize.width=t.width,n=!0),void 0!==t.height&&(o.height=t.height,n=!0),e instanceof F.a&&void 0!==t.offset){var a=t.offset;n=!0;var s=void 0!==a.x?a.x:e.offset.x,h=void 0!==a.y?a.y:e.offset.y;o.setOffsetWithRespectToBounds(s,h,"Fraction"),o.relativeMode="Point"}void 0!==t.margin&&(n=!0,void 0!==t.margin.bottom&&(o.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(o.margin.top=t.margin.top),void 0!==t.margin.left&&(o.margin.left=t.margin.left),void 0!==t.margin.right&&(o.margin.right=t.margin.right)),void 0!==t.visibility&&(o.visible=t.visibility),void 0!==t.fill&&(o.style.fill=t.fill),void 0!==t.handleStrokeColor&&(o.style.strokeColor=t.handleStrokeColor),void 0!==t.handleStrokeWidth&&(o.style.strokeWidth=t.handleStrokeWidth),void 0!==t.cornerRadius&&(o.cornerRadius=t.cornerRadius),this.updatefixedUserHandleWrapper(o,r,e,i),!0===n&&(o.measure(new m.a(o.width,o.height)),o.arrange(o.desiredSize))}},e.prototype.updatefixedUserHandleWrapper=function(t,e,r,n){for(var o=0,a=this.views;o<a.length;o++){var s=a[o];i.i(B.m)(t.id+"_groupElement",s),i.i(B.m)(t.id+"_html_element",s)}e instanceof l.a&&(t=e.initfixedUserHandles(r));for(var h=0;h<n.children.length;h++)t.id===n.children[parseInt(h.toString(),10)].id&&n.children.splice(h,1,t)},e.prototype.updatePort=function(t,e,r){var n=!1,o=this.getWrapper(r,e.id);if(void 0!==o){if(void 0!==t.offset){n=!0;var a=void 0!==t.offset.x?t.offset.x:e.offset.x,s=void 0!==t.offset.y?t.offset.y:e.offset.y;o.setOffsetWithRespectToBounds(a,s,"Fraction"),o.relativeMode="Point"}if(void 0!==t.width&&(n=!0,o.width=t.width),void 0!==t.height&&(n=!0,o.height=t.height),void 0!==t.visibility&&(o.visible=!(!r.visible||!i.i(c.i)(e,y.c.Visible))),void 0!==t.margin&&(n=!0,void 0!==t.margin.bottom&&(o.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(o.margin.top=t.margin.top),void 0!==t.margin.right&&(o.margin.right=t.margin.right),void 0!==t.margin.left&&(o.margin.left=t.margin.left)),void 0!==t.horizontalAlignment&&(n=!0,o.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(n=!0,o.verticalAlignment=t.verticalAlignment),void 0!==t.style&&(void 0!==t.style.fill&&(o.style.fill=t.style.fill),void 0!==t.style.opacity&&(o.style.opacity=t.style.opacity),void 0!==t.style.strokeColor&&(o.style.strokeColor=t.style.strokeColor),void 0!==t.style.strokeWidth&&(o.style.strokeWidth=t.style.strokeWidth),void 0!==t.style.strokeDashArray&&(o.style.strokeDashArray=t.style.strokeDashArray)),void 0!==t.shape&&o){var h=i.i(w.a)(t.shape);o.data=h,o.canMeasurePath=!0}void 0!==t.pathData&&(o.data=String(t.pathData),n=!0),!0===n&&(o.measure(new m.a(o.width,o.height)),o.arrange(o.desiredSize))}},e.prototype.updateIcon=function(t){var e=this.getWrapper(t.wrapper,"icon_content"),r=this.diagramActions&y.p.Render?this.element.id:void 0;if(e){if("SVG"===this.mode){var n=i.i(B.n)(t.wrapper.id+"_icon_content",r);if(n){var o=i.i(B.n)(n.id+"_rect",r),a=i.i(B.n)(n.id+"_shape",r),s=i.i(B.n)(a.id+"_native_element",r);s&&s.parentNode.removeChild(s),a.parentNode.removeChild(a),o.parentNode.removeChild(o),n.parentNode.removeChild(n)}}var h=t.wrapper.children.indexOf(e);t.wrapper.children.splice(h,1)}var d=this.getPortContainer(t);t.initIcons(this.getDescription,this.layout,d,this.element.id)},e.prototype.getPortContainer=function(t){if(t.children)for(var e=0;e<t.wrapper.children.length;e++)if(t.wrapper.children[parseInt(e.toString(),10)].id===t.id+"group_container")return t.wrapper.children[parseInt(e.toString(),10)];return t.wrapper},e.prototype.updateTooltip=function(t,e){void 0!==e.tooltip.content&&(t.tooltip.content=e.tooltip.content),void 0!==e.tooltip.position&&(t.tooltip.position=e.tooltip.position),void 0!==e.tooltip.height&&(t.tooltip.height=e.tooltip.height),void 0!==e.tooltip.width&&(t.tooltip.width=e.tooltip.width),void 0!==e.tooltip.showTipPointer&&(t.tooltip.showTipPointer=e.tooltip.showTipPointer),void 0!==e.tooltip.relativeMode&&(t.tooltip.relativeMode=e.tooltip.relativeMode)},e.prototype.updateQuad=function(t){this.spatialSearch.updateQuad(t.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},e.prototype.removeFromAQuad=function(t){if(t.children)for(var e=void 0,i=t.children,r=0;r<i.length;r++)(e=this.nameTable[i[parseInt(r.toString(),10)]])&&this.removeFromAQuad(e);this.spatialSearch.removeFromAQuad(t.wrapper),this.spatialSearch.updateBounds(t.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},e.prototype.updateGroupSize=function(t){var e;t.parentId&&(e=this.nameTable[t.parentId])&&(e.parentId?this.updateGroupSize(e):(e.wrapper.measure(new m.a),e.wrapper.arrange(e.wrapper.desiredSize),this.updateGroupOffset(e),this.updateDiagramObject(e)))},e.prototype.updatePage=function(){if(this.diagramActions&y.p.Render&&!(this.diagramActions&y.p.DragUsingMouse)){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var t=0,i=this.views;t<i.length;t++){var r=i[t],n=this.views[""+r];n instanceof e||n.updateView(n)}}this.diagramActions&y.p.DragUsingMouse&&(this.renderPageBreaks(),this.scroller.updateScrollOffsets(),this.scroller.setSize())},e.prototype.protectPropertyChange=function(t){this.isProtectedOnChange=t},e.prototype.getProtectPropertyChangeValue=function(){return this.isProtectedOnChange},e.prototype.enableServerDataBinding=function(t){i.i(r.isBlazor)()&&(this.allowServerDataBinding=t,t&&(this.bulkChanges={}))},e.prototype.updateShadow=function(t,e){void 0!==e.angle&&(t.angle=e.angle),void 0!==e.color&&(t.color=e.color),void 0!==e.distance&&(t.distance=e.distance),void 0!==e.opacity&&(t.opacity=e.opacity)},e.prototype.updateMargin=function(t,e){void 0!==e.margin.top&&(t.margin.top=e.margin.top),void 0!==e.margin.bottom&&(t.margin.bottom=e.margin.bottom),void 0!==e.margin.left&&(t.margin.left=e.margin.left),void 0!==e.margin.right&&(t.margin.right=e.margin.right)},e.prototype.removePreviewChildren=function(t){if(t.children&&t.children.length&&t.shape&&"SwimLane"===t.shape.type){for(var e=0;e<t.children.length;e++){var i=t.children[parseInt(e.toString(),10)],r=this.nodes.indexOf(this.nameTable[""+i]);r>=0&&this.nodes.splice(r,1),delete this.nameTable[""+i]}var n=this.nodes.indexOf(this.nameTable[this.currentSymbol.id]);n>=0&&this.nodes.splice(n,1)}},e.prototype.selectDragedNode=function(t,e,r){this.currentSymbol=t,"SVG"!==this.mode&&this.refreshDiagramLayer(),this.commandHandler.oldSelectedObjects=i.i(c.N)(this),this.commandHandler.select(t),this.commandHandler.updateBlazorSelector(),this.eventHandler.mouseDown(e.event),this.eventHandler.mouseMove(e.event,e),this.preventDiagramUpdate=!1,this.updatePage(),r.style.opacity="0"},e.prototype.initDroppables=function(){var t,e,n=this,o={},a={};this.droppable=new r.Droppable(this.element),this.droppable.over=function(s){if(0!==n.previousSelectedObjects.length||n.currentSymbol||(n.previousSelectedObjects=n.commandHandler.getSelectedObject()),n.commandHandler.PreventConnectorSplit=!0,n.currentSymbol)s.event.touches&&s.event.touches.length&&n.eventHandler.mouseMove(s.event,s.event.touches);else{var h=null;if(!s.dragData&&"drag"===s.name){var d=document.getElementsByClassName("e-dragclone")[0];d&&(h=d)}if(s.dragData||h){var g=void 0,u=void 0;document.getElementById(n.element.id+"content").focus();var f=n.eventHandler.getMousePosition(s.event),m=void 0,v=h||s.dragData.helper,b=v.getAttribute("paletteId"),w=void 0,x=void 0,I=void 0,P=void 0;if(!b&&s.dragData){var C={source:null,element:g,cancel:!1,diagram:n,dragData:s.dragData.draggedElement.ej2_instances[0].dragData,dragItem:g};n.triggerEvent(y.r.dragEnter,C);var z=void 0,O=void 0;if(C.dragItem){if(C.dragItem.sourcePoint&&C.dragItem.targetPoint?O=new p.a(n,"connectors",C.dragItem,!0):z=new l.a(n,"nodes",C.dragItem,!0),g=z||O,n.initObject(g,void 0,void 0,!0),n.enterObject=g,n.enterTable=a,g instanceof l.a)z.offsetX=f.x+5+z.width*z.pivot.x,z.offsetY=f.y+z.height*z.pivot.y;else if(g instanceof p.a){var T=S.a.toBounds([g.sourcePoint,g.targetPoint]),A=f.x-T.left,L=f.y-T.top;g.sourcePoint.x+=A,g.sourcePoint.y+=L,g.targetPoint.x+=A,g.targetPoint.y+=L}n.preventDiagramUpdate=!0,n.currentSymbol=g,"SVG"!==n.mode&&n.refreshDiagramLayer(),n.selectDragedNode(g,s,v),delete n.enterObject,delete n.enterTable,n.droppable.selectedSymbols=v,n.allowServerDataBinding=!0}}if(b){var E=document.getElementById(b).ej2_instances[0];n.droppable.sourceElement=E;if(E){var B=E.selectedSymbols;n.allowServerDataBinding=!1,m=i.i(k.e)(E.selectedSymbols),o=E.childTable;var M=B.wrapper.children[0].children[0];if(P=i.i(c.T)(E,m,M),E.selectedSymbols instanceof l.a){"TextAnnotation"===B.shape.shape?(m.offsetX=f.x+11+P.width*m.pivot.x,m.offsetY=f.y+11+P.height*m.pivot.y):(m.offsetX=f.x+5+P.width*m.pivot.x,m.offsetY=f.y+P.height*m.pivot.y);var z=new l.a(n,"nodes",m,!0);"Bpmn"===z.shape.type&&z.shape.activity.subProcess.processes&&z.shape.activity.subProcess.processes.length&&(z.shape.activity.subProcess.processes=[]),w=z.dragSize,x=z.previewSize,I=E.symbolDragSize;var D=E.symbolPreview;if(z.width=w.width||I.width||x.width||D.width||z.width,z.height=w.height||I.height||x.height||D.height||z.height,"SwimLane"===z.shape.type){if(n.diagramActions|=y.p.PreventHistory,z.shape.isLane){z.children=[],t={id:"header"+i.i(k.g)()},"Horizontal"===z.shape.orientation?(t.width=z.shape.lanes[0].header.width,t.height=z.shape.lanes[0].height):(t.width=z.shape.lanes[0].width,t.height=z.shape.lanes[0].header.height),t.style=z.shape.lanes[0].header.style,t.offsetX=f.x+5+t.width/2,t.offsetY=f.y+t.height/2,n.diagramActions|=y.p.PreventCollectionChangeOnDragOver,t=n.add(t),e={id:"body"+i.i(k.g)()},"Horizontal"===z.shape.orientation?(e.width=z.shape.lanes[0].width-t.width,e.height=z.shape.lanes[0].height,e.offsetX=f.x+5+(z.shape.lanes[0].header.width+e.width/2),e.offsetY=f.y+e.height/2):(e.width=z.shape.lanes[0].width,e.height=z.shape.lanes[0].height-t.height,e.offsetX=f.x+5+e.width/2,e.offsetY=f.y+(z.shape.lanes[0].header.height+e.height/2)),e.style=z.shape.lanes[0].style,e=n.add(e);var R={id:"group"+i.i(k.g)(),children:[t.id,e.id]};R.shape=z.shape,R.width=z.shape.lanes[0].width,R.height=z.shape.lanes[0].height,R.previewSize=z.previewSize,R.dragSize=z.dragSize,R.addInfo=z.addInfo,z=n.add(R),n.diagramActions&=~y.p.PreventCollectionChangeOnDragOver}n.diagramActions&=~y.p.PreventHistory}if(z.shape.isPhase&&(u="Horizontal"===z.shape.orientation,u?(z.offsetX=f.x+5+(z.width||M.actualSize.width)/2,z.offsetY=f.y,z.shape.data="M20,"+z.height/2+" L"+(z.width-20)+","+z.height/2+"z",z.height=1):(z.offsetX=f.x+5,z.offsetY=f.y+(z.height||M.actualSize.height)/2,z.shape.data="M"+z.width/2+",20 L"+z.width/2+","+(z.height-20)+"z",z.width=1)),g=z,m.children){var _=m,j={};a=n.getChildren(_,j,o),i.i(c.U)(_,-_.offsetX,-_.offsetY,a,!0,n)}}else if(E.selectedSymbols instanceof p.a){g=new p.a(n,"connectors",m,!0);var N=S.a.toBounds([g.sourcePoint,g.targetPoint]),H=f.x-N.left,W=f.y-N.top;g.sourcePoint.x+=H,g.sourcePoint.y+=W,g.targetPoint.x+=H,g.targetPoint.y+=W}g.shape.isLane||(g.id+=i.i(k.g)());var C={source:E,element:g,cancel:!1,diagram:n,dragData:null,dragItem:g};if(i.i(r.isBlazor)()&&(C=n.getBlazorDragEventArgs(C)),n.enterObject=g,n.enterTable=a,n.triggerEvent(y.r.dragEnter,C),g instanceof l.a&&"SwimLane"===g.shape.type&&g.shape.isLane){var V=C.element,X=V.shape.lanes[0];u="Horizontal"===V.shape.orientation;var Y=n.nameTable[g.children[0]],U=n.nameTable[g.children[1]];w=g.dragSize,x=g.previewSize,I=E.symbolDragSize,X.width=w.width||I.width||x.width||X.width,X.height=w.height||I.height||x.height||X.height,u?(t.width=X.header.width,t.height=X.height,e.width=X.width-t.width,e.height=X.height,e.offsetX=f.x+5+(X.header.width+U.width/2),e.offsetY=f.y+U.height/2):(t.width=X.width,t.height=X.header.height,e.width=X.width,e.height=X.height-t.height,e.offsetX=f.x+5+U.width/2,e.offsetY=f.y+(X.header.height+U.height/2)),t.offsetX=f.x+5+Y.width/2,t.offsetY=f.y+Y.height/2,g.width=X.width,g.height=X.height}g instanceof l.a&&g.shape.isPhase&&(u?g.height=1:g.width=1),n.activeLayer.lock||C.cancel||(n.preventDiagramUpdate=!0,g.children&&n.findChild(g,a),n.preventDiagramUpdate=!0,-1!==g.zIndex&&(g.zIndex=-1),n.initObject(g,void 0,void 0,!0),n.selectDragedNode(g,s,v)),delete n.enterObject,delete n.enterTable}n.droppable.selectedSymbols=v,n.allowServerDataBinding=!0}}}},this.droppable.drop=function(t){return K(n,void 0,void 0,function(){var e,n,o,a,s,h,d,g,u,f,h,g,d,m,v,b;return J(this,function(S){switch(S.label){case 0:return this.allowServerDataBinding=!1,(e="sourceElement",this.currentSymbol)?(o=!1,s=this.currentSymbol instanceof p.a,t.event.touches&&this.eventHandler.mouseUp(t.event),h=void 0,h={source:this.droppable[""+e],element:this.currentSymbol,target:this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this,cancel:!1,position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},i.i(r.isBlazor)()?(h={source:i.i(c.b)(this.droppable[""+e]),element:i.i(c.l)(this.currentSymbol)===p.a?{connector:i.i(c.b)(this.currentSymbol)}:{node:i.i(c.b)(this.currentSymbol)},cancel:!1,target:{},position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},this.getDropEventArgs(h),[4,this.triggerEvent(y.r.drop,h)]):[3,2]):[3,4];case 1:return h=S.sent()||h,[3,3];case 2:this.commandHandler.PreventConnectorSplit=!1,this.triggerEvent(y.r.drop,h),S.label=3;case 3:return d="id",g=i.i(k.e)(this.currentSymbol),g.hasTarget=this.currentSymbol.hasTarget,this.removeFromAQuad(this.currentSymbol),this.removeObjectsFromLayer(this.nameTable[this.currentSymbol.id]),this.removeElements(this.currentSymbol),(this.currentSymbol.shape.isLane||this.currentSymbol.shape.isPhase)&&this.removeChildInNodes(this.currentSymbol),h.cancel&&i.i(c.V)(this.currentSymbol,this),this.currentSymbol.shape.isPhase&&(o=!0,a=this.currentSymbol.shape.orientation),this.removePreviewChildren(this.currentSymbol),delete this.nameTable[this.currentSymbol.id],this.currentSymbol=null,this.protectPropertyChange(!0),h.cancel?this.clearSelectorLayer():(this.startGroupAction(),g&&(g.shape.isLane||o)&&(o&&(g.shape.isPhase=o,g.shape.orientation=a),this.eventHandler.addSwimLaneObject(g)),"Bpmn"===g.shape.type&&g.shape.annotation&&g.hasTarget&&(u=g.shape.annotation.nodeId,g.shape.annotation.id=g.id,this.addTextAnnotation(g.shape.annotation,this.nameTable[""+u]),g.nodeId=""),g.shape.isLane||o||(g.children&&this.addChildNodes(g),h.target&&h.target instanceof l.a&&!s&&i.i(W.a)(this,h.target)&&i.i(D.i)(h.target)?i.i(W.e)(this,h.target,g):("Bezier"===g.type&&g.segments.length>0&&(g.segments=[]),n=this.add(g,!0)),(g||n)&&i.i(D.p)(this)&&this.select([this.nameTable[g[""+d]]],!1,this.previousSelectedObjects),h.target&&h.target instanceof p.a&&!0===this.enableConnectorSplit&&this.nameTable[g[""+d]]instanceof l.a&&(this.commandHandler.connectorSplit(this.nameTable[g[""+d]],h.target),this.commandHandler.PreventConnectorSplit=!1))),this.protectPropertyChange(!1),f=this.nameTable[g[""+d]],g.hasTarget&&(g.nodeId=g.hasTarget,this.remove(g)),this.bpmnModule&&f instanceof l.a&&g.processId&&(f.processId=g.processId,this.bpmnModule.dropBPMNchild(this.nameTable[f.processId],f,this)),h.cancel||this.endGroupAction(),"SVG"!==this.mode&&this.refreshDiagramLayer(),delete this.droppable[""+e],[3,5];case 4:h={source:i.i(c.b)(t.droppedElement),element:void 0,target:i.i(c.b)(this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this),cancel:!1,position:void 0},i.i(r.isBlazor)()&&(h={source:i.i(c.b)(t.droppedElement),element:void 0,cancel:!1,position:void 0,target:{}},this.getDropEventArgs(h)),this.triggerEvent(y.r.drop,h),g=void 0,d="id",S.label=5;case 5:if(m="selectedSymbols",this.droppable[""+m]&&this.droppable[""+m].parentNode)i.i(r.remove)(this.droppable[""+m]);else for(v=document.getElementsByClassName("e-dragclone"),b=0;b<v.length;b++)v[parseInt(b.toString(),10)].remove();return this.allowServerDataBinding=!0,this.previousSelectedObjects=[],[2]}})})},this.droppable.out=function(t){if("touchmove"===t.evt.type&&n.eventHandler.mouseLeave(t.evt),n.currentSymbol&&!n.eventHandler.focus){n.unSelect(n.currentSymbol),n.removeFromAQuad(n.currentSymbol),"SVG"!==n.mode&&"Native"===n.currentSymbol.shape.type&&n.removeElements(n.currentSymbol),n.removeObjectsFromLayer(n.nameTable[n.currentSymbol.id]),n.removePreviewChildren(n.currentSymbol),delete n.nameTable[n.currentSymbol.id];var e={element:i.i(c.b)(n.currentSymbol),diagram:n};i.i(r.isBlazor)()&&(e=n.getBlazorDragLeaveEventArgs(e)),n.triggerEvent(y.r.dragLeave,e),"SVG"!==n.mode?n.refreshDiagramLayer():n.removeElements(n.currentSymbol),n.currentSymbol=null;n.droppable.selectedSymbols.style.opacity="1";delete n.droppable.sourceElement,n.diagramRenderer.rendererActions=n.removeConstraints(n.diagramRenderer.rendererActions,y.q.DrawSelectorBorder),n.previousSelectedObject&&n.select(n.previousSelectedObject,n.previousSelectedObject.length>1),n.previousSelectedObject=null}}},e.prototype.getBlazorDragLeaveEventArgs=function(t){return t={diagramId:this.element.id,element:i.i(c.l)(t.element)===p.a?{connector:i.i(c.b)(t.element)}:{node:i.i(c.b)(t.element)}}},e.prototype.getDropEventArgs=function(t){if(this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode){var e=this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode;t.target=i.i(c.l)(e)===p.a?{connector:i.i(c.b)(e)}:{node:i.i(c.b)(e)}}else t.target.diagramId=this.element.id},e.prototype.removeChildInNodes=function(t){if(t){if(t.children)for(var e=0;e<t.children.length;e++)this.removeChildInNodes(this.nameTable[t.children[parseInt(e.toString(),10)]]);var i=this.nodes.indexOf(t);-1!==i&&this.nodes.splice(i,1)}},e.prototype.getBlazorDragEventArgs=function(t){return t={source:i.i(c.b)(t.source),element:i.i(c.l)(t.element)===p.a?{connector:i.i(c.b)(t.element)}:{node:i.i(c.b)(t.element)},cancel:t.cancel,diagramId:this.element.id}},e.prototype.findChild=function(t,e){for(var r,n,o=0;o<t.children.length;o++)(r=e[t.children[parseInt(o.toString(),10)]])&&(r.children&&this.findChild(r,e),r.id=r.id+i.i(k.g)(),e[r.id]=r,t.children[parseInt(o.toString(),10)]=r.id,n=new l.a(this,"nodes",r,!0),this.initObject(n,void 0,void 0,!0))},e.prototype.getChildren=function(t,e,r){for(var n,o=0;o<t.children.length;o++)(n=r[t.children[parseInt(o.toString(),10)]])&&(n.children&&(e=this.getChildren(n,e,r)),e[n.id]=i.i(k.e)(n));return e},e.prototype.addChildNodes=function(t){for(var e,i=0;i<t.children.length;i++)(e=this.nameTable[t.children[parseInt(i.toString(),10)]])&&(e.children&&this.addChildNodes(e),this.add(e,!0))},e.prototype.moveNode=function(t){for(var e,i=this.commandHandler.getObjectLayer(t.id),r=i.zIndex,n=i.objects.length,o=0;o<this.layers.length;o++)r===this.layers[parseInt(o.toString(),10)].zIndex&&(e=this.layers[o+1]);if(n>1)this.commandHandler.moveSvgNode(t.id,i.objects[n-2]),this.commandHandler.moveSvgNode(i.objects[n-2],t.id);else if(e){var a=this.commandHandler.getLayer(this.layerZIndexTable[e.zIndex]).objects[0];a?(this.commandHandler.moveSvgNode(t.id,a),this.commandHandler.updateNativeNodeIndex(t.id,a)):this.moveObjectsUp(t,i)}else this.moveObjectsUp(t,i)},e.prototype.moveObjectsUp=function(t,e){for(var i,r=this.layers.length-1;r>=0;r--)if(i=this.layers[parseInt(r.toString(),10)],e.id!==i.id){var n=this.commandHandler.getLayer(this.layerZIndexTable[i.zIndex]).objects[i.objects.length-1];if(n){this.commandHandler.moveSvgNode(t.id,n),this.commandHandler.moveSvgNode(n,t.id);break}}},e.prototype.insertData=function(t){return this.crudOperation(t,"create",this.getNewUpdateNodes("New"))},e.prototype.updateData=function(t){return this.crudOperation(t,"update",this.getNewUpdateNodes("Update"))},e.prototype.removeData=function(t){return this.crudOperation(t,"destroy",this.getDeletedNodes())},e.prototype.crudOperation=function(t,e,i){if(t){var r=this.parameterMap(t,!(t instanceof p.a));if(r){var n=t instanceof p.a?this.dataSourceSettings.connectionDataSource.crudAction[""+e]:this.dataSourceSettings.crudAction[""+e];this.raiseAjaxPost(JSON.stringify(r),n)}return r}var o=i;return this.processCrudCollection(o,this.dataSourceSettings.crudAction[""+e],this.dataSourceSettings.connectionDataSource.crudAction[""+e]),o},e.prototype.processCrudCollection=function(t,e,i){if(t.nodes){var r=[],n=void 0;for(n=0;n<t.nodes.length;n++)r.push(this.parameterMap(t.nodes[parseInt(n.toString(),10)],!0));r&&r.length>0&&this.raiseAjaxPost(JSON.stringify(r),e)}if(t.connectors){var r=[],n=void 0;for(n=0;n<t.connectors.length;n++)r.push(this.parameterMap(t.connectors[parseInt(n.toString(),10)],!1));r&&r.length>0&&this.raiseAjaxPost(JSON.stringify(r),i)}},e.prototype.parameterMap=function(t,e){var i,r={},n=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(n.id&&(r[n.id]=t.id),n.sourcePointX&&n.sourcePointY&&(r[n.sourcePointX]=t.sourcePoint.x,r[n.sourcePointY]=t.sourcePoint.y),n.targetPointX&&n.targetPointY&&(r[n.targetPointX]=t.targetPoint.x,r[n.targetPointY]=t.targetPoint.y),n.sourceID&&(r[n.sourceID]=t.sourceID),n.targetID&&(r[n.targetID]=t.targetID),n.crudAction&&n.crudAction.customFields&&n.crudAction.customFields.length>0)for(i=0;i<n.crudAction.customFields.length;i++)r[n.crudAction.customFields[parseInt(i.toString(),10)]]=t[n.crudAction.customFields[parseInt(i.toString(),10)]];return r},e.prototype.getNewUpdateNodes=function(t){var e=[],i=[];for(var r in this.nameTable){var n=this.nameTable[""+r];n.status===t&&(n&&n instanceof p.a?(n.status="None",i.push(n)):(n.status="None",e.push(n)))}return{nodes:e,connectors:i}},e.prototype.getDeletedNodes=function(){var t,e=[],i=[];for(t=0;t<this.crudDeleteNodes.length;t++){var r=this.crudDeleteNodes[parseInt(t.toString(),10)];r&&r.segments?i.push(r):r&&e.push(r)}return this.crudDeleteNodes=[],{nodes:e,connectors:i}},e.prototype.raiseAjaxPost=function(t,e){var i=new r.Ajax(e,"POST",!0,"application/json"),n=JSON.stringify(JSON.parse(t));i.send(n).then(),i.onSuccess=function(t){}},e.prototype.getHiddenItems=function(t){var e=[];if(this.contextMenuModule){this.contextMenuModule.hiddenItems=[];for(var i=0,r=t.items;i<r.length;i++){var n=r[i];if(this.contextMenuModule.ensureItems(n,t.event),n.items&&n.items.length)for(var o=0,a=n.items;o<a.length;o++){var s=a[o];this.contextMenuModule.ensureItems(s,t.event)}}return this.contextMenuModule.hiddenItems}return e},Q([i.i(r.Property)("100%")],e.prototype,"width",void 0),Q([i.i(r.Property)(!1)],e.prototype,"enableConnectorSplit",void 0),Q([i.i(r.Property)("SVG")],e.prototype,"mode",void 0),Q([i.i(r.Property)("100%")],e.prototype,"height",void 0),Q([i.i(r.Property)("Rhombus")],e.prototype,"segmentThumbShape",void 0),Q([i.i(r.Complex)({},M.b)],e.prototype,"contextMenuSettings",void 0),Q([i.i(r.Property)(y.j.Default)],e.prototype,"constraints",void 0),Q([i.i(r.Property)(y.k.Default)],e.prototype,"tool",void 0),Q([i.i(r.Property)("Top")],e.prototype,"bridgeDirection",void 0),Q([i.i(r.Property)("transparent")],e.prototype,"backgroundColor",void 0),Q([i.i(r.Complex)({},g.a)],e.prototype,"snapSettings",void 0),Q([i.i(r.Complex)({},u.a)],e.prototype,"rulerSettings",void 0),Q([i.i(r.Complex)({},s.a)],e.prototype,"pageSettings",void 0),Q([i.i(r.Complex)({},X.a)],e.prototype,"serializationSettings",void 0),Q([i.i(r.Collection)([],l.a)],e.prototype,"nodes",void 0),Q([i.i(r.Property)()],e.prototype,"drawingObject",void 0),Q([i.i(r.Collection)([],p.a)],e.prototype,"connectors",void 0),Q([i.i(r.Property)([])],e.prototype,"basicElements",void 0),Q([i.i(r.Complex)({},R.a)],e.prototype,"tooltip",void 0),Q([i.i(r.Complex)({},C.a)],e.prototype,"dataSourceSettings",void 0),Q([i.i(r.Property)()],e.prototype,"addInfo",void 0),Q([i.i(r.Property)()],e.prototype,"historyManager",void 0),Q([i.i(r.Property)()],e.prototype,"nodeTemplate",void 0),Q([i.i(r.Property)()],e.prototype,"annotationTemplate",void 0),Q([i.i(r.Property)()],e.prototype,"userHandleTemplate",void 0),Q([i.i(r.Property)()],e.prototype,"getNodeDefaults",void 0),Q([i.i(r.Property)()],e.prototype,"nodeDefaults",void 0),Q([i.i(r.Property)()],e.prototype,"getConnectorDefaults",void 0),Q([i.i(r.Property)()],e.prototype,"connectorDefaults",void 0),Q([i.i(r.Property)()],e.prototype,"setNodeTemplate",void 0),Q([i.i(r.Property)()],e.prototype,"getDescription",void 0),Q([i.i(r.Property)()],e.prototype,"getCustomProperty",void 0),Q([i.i(r.Property)()],e.prototype,"getCustomTool",void 0),Q([i.i(r.Property)()],e.prototype,"getCustomCursor",void 0),Q([i.i(r.Collection)([],Y.a)],e.prototype,"customCursor",void 0),Q([i.i(r.Property)()],e.prototype,"updateSelection",void 0),Q([i.i(r.Complex)({},U.a)],e.prototype,"diagramSettings",void 0),Q([i.i(r.Complex)({},l.G)],e.prototype,"selectedItems",void 0),Q([i.i(r.Complex)({},s.b)],e.prototype,"scrollSettings",void 0),Q([i.i(r.Complex)({},z.a)],e.prototype,"layout",void 0),Q([i.i(r.Complex)({},M.c)],e.prototype,"commandManager",void 0),Q([i.i(r.Event)()],e.prototype,"dataLoaded",void 0),Q([i.i(r.Event)()],e.prototype,"dragEnter",void 0),Q([i.i(r.Event)()],e.prototype,"dragLeave",void 0),Q([i.i(r.Event)()],e.prototype,"dragOver",void 0),Q([i.i(r.Event)()],e.prototype,"click",void 0),Q([i.i(r.Event)()],e.prototype,"historyChange",void 0),Q([i.i(r.Event)()],e.prototype,"historyStateChange",void 0),Q([i.i(r.Event)()],e.prototype,"doubleClick",void 0),Q([i.i(r.Event)()],e.prototype,"textEdit",void 0),Q([i.i(r.Event)()],e.prototype,"scrollChange",void 0),Q([i.i(r.Event)()],e.prototype,"mouseWheel",void 0),Q([i.i(r.Event)()],e.prototype,"selectionChange",void 0),Q([i.i(r.Event)()],e.prototype,"sizeChange",void 0),Q([i.i(r.Event)()],e.prototype,"connectionChange",void 0),Q([i.i(r.Event)()],e.prototype,"sourcePointChange",void 0),Q([i.i(r.Event)()],e.prototype,"targetPointChange",void 0),Q([i.i(r.Event)()],e.prototype,"propertyChange",void 0),Q([i.i(r.Event)()],e.prototype,"positionChange",void 0),Q([i.i(r.Event)()],e.prototype,"keyUp",void 0),Q([i.i(r.Event)()],e.prototype,"keyDown",void 0),Q([i.i(r.Event)()],e.prototype,"animationComplete",void 0),Q([i.i(r.Event)()],e.prototype,"rotateChange",void 0),Q([i.i(r.Event)()],e.prototype,"collectionChange",void 0),Q([i.i(r.Event)()],e.prototype,"fixedUserHandleClick",void 0),Q([i.i(r.Event)()],e.prototype,"onUserHandleMouseDown",void 0),Q([i.i(r.Event)()],e.prototype,"onUserHandleMouseUp",void 0),Q([i.i(r.Event)()],e.prototype,"onUserHandleMouseEnter",void 0),Q([i.i(r.Event)()],e.prototype,"onUserHandleMouseLeave",void 0),Q([i.i(r.Event)()],e.prototype,"segmentCollectionChange",void 0),Q([i.i(r.Event)()],e.prototype,"onImageLoad",void 0),Q([i.i(r.Event)()],e.prototype,"expandStateChange",void 0),Q([i.i(r.Event)()],e.prototype,"created",void 0),Q([i.i(r.Event)()],e.prototype,"mouseEnter",void 0),Q([i.i(r.Event)()],e.prototype,"mouseLeave",void 0),Q([i.i(r.Event)()],e.prototype,"mouseOver",void 0),Q([i.i(r.Event)()],e.prototype,"elementDraw",void 0),Q([i.i(r.Event)()],e.prototype,"contextMenuOpen",void 0),Q([i.i(r.Event)()],e.prototype,"contextMenuBeforeItemRender",void 0),Q([i.i(r.Event)()],e.prototype,"contextMenuClick",void 0),Q([i.i(r.Event)()],e.prototype,"commandExecute",void 0),Q([i.i(r.Collection)([],j.a)],e.prototype,"layers",void 0),Q([i.i(r.Event)()],e.prototype,"drop",void 0),Q([i.i(r.Event)()],e.prototype,"segmentChange",void 0),e}(r.Component)},function(t,e,i){"use strict";function r(t){return h[t.toString()]}function n(t,e){return"Custom"===t?e.pathData:d[""+t]}function o(t){return l[""+t]}function a(t){return c[""+t]}function s(t){var e;switch(t.shape){case"Minus":e="M0,50 L100,50";break;case"Plus":e="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":e="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":e="M0,0 L50,100 L100,0 Z";break;case"Path":e=t.pathData}return e}e.a=r,e.c=n,e.d=o,e.e=a,e.b=s;var h={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},d={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"},l={Square:"M0,0 L10,0 L10,10 L0,10 z",Rhombus:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Rectangle:"M0,0 L15,0 L15,10 L0,10 z ",OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Fletch:"M9.82,0 C9.82,0,6.61,5,10,10 C10,10,7.71,5,0,5 C0,5,6.61,5,9.82,0 Z ",OpenFetch:"M0.71,5.71 C0.29,5.71,0,5.43,0,5 C0,4.57,0.29,4.29,0.71,4.29 C8.5,4.29,8.57,0.71,8.57,0.71 C8.57,0.29,8.86,0,9.29,0 C9.719999999999999,0,10,0.29,10,0.71 C10,0.93,9.93,5.71,0.71,5.71 C0.71,5.71,0.71,5.71,0.71,5.71 Z M9.29,10 C8.93,10,8.57,9.71,8.57,9.29 C8.57,9.14,8.36,5.71,0.71,5.71 C0.29,5.71,0,5.36,0,5 C0,4.64,0.29,4.29,0.71,4.29 C0.71,4.29,0.71,4.29,0.71,4.29 C9.93,4.29,10,9.07,10,9.29 C10,9.71,9.71,10,9.29,10 Z ",IndentedArrow:"M10,0 C10,0,6.25,4.58,10,10 L0,5 L10,0 Z ",OutdentedArrow:"M8,0 C8,0,12.5,5,8,10 L0,5 L8,0 Z ",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M10,5 L5,10 L0,5 L5,0 L10,5 Z  ",Circle:"M10,5 C10,7.76,7.76,10,5,10 C2.24,10,0,7.76,0,5 C0,2.24,2.24,0,5,0 C7.76,0,10,2.24,10,5 Z ",Ellipse:"M15,5 C15,7.76,11.64,10,7.5,10 C3.36,10,0,7.76,0,5 C0,2.24,3.36,0,7.5,0 C11.64,0,15,2.24,15,5 Z  "},c={Square:"M0,0 L10,0 L10,10 L0,10 z",Rhombus:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Rectangle:"M0,0 L15,0 L15,10 L0,10 z",OpenArrow:"M23,15.9 L16,5 L9,15.9 L10.7,17 L16,8.7 L21,17.3Z",Fletch:"M9.82,0 C9.82,0,6.61,5,10,10 C10,10,7.71,5,0,5 C0,5,6.61,5,9.82,0 Z ",OpenFetch:"M0.71,5.71 C0.29,5.71,0,5.43,0,5 C0,4.57,0.29,4.29,0.71,4.29 C8.5,4.29,8.57,0.71,8.57,0.71 C8.57,0.29,8.86,0,9.29,0 C9.719999999999999,0,10,0.29,10,0.71 C10,0.93,9.93,5.71,0.71,5.71 C0.71,5.71,0.71,5.71,0.71,5.71 Z M9.29,10 C8.93,10,8.57,9.71,8.57,9.29 C8.57,9.14,8.36,5.71,0.71,5.71 C0.29,5.71,0,5.36,0,5 C0,4.64,0.29,4.29,0.71,4.29 C0.71,4.29,0.71,4.29,0.71,4.29 C9.93,4.29,10,9.07,10,9.29 C10,9.71,9.71,10,9.29,10 Z ",IndentedArrow:"M10,0 C10,0,6.25,4.58,10,10 L0,5 L10,0 Z ",OutdentedArrow:"M8,0 C8,0,12.5,5,8,10 L0,5 L8,0 Z ",DoubleArrow:"M10,19 L22,19 L16,13Z M10,12 L22,12 L16,6Z",Arrow:"M10,15 L22,15 L16,5Z",Diamond:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Circle:"M10,5 C10,7.76,7.76,10,5,10 C2.24,10,0,7.76,0,5 C0,2.24,2.24,0,5,0 C7.76,0,10,2.24,10,5 Z ",Ellipse:"M15,5 C15,7.76,11.64,10,7.5,10 C3.36,10,0,7.76,0,5 C0,2.24,3.36,0,7.5,0 C11.64,0,15,2.24,15,5 Z   "}},function(t,e,i){"use strict";i.d(e,"c",function(){return h}),i.d(e,"a",function(){return d}),i.d(e,"b",function(){return l});var r=i(0),n=(i.n(r),i(12)),o=i(8),a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([i.i(r.Property)("")],e.prototype,"id",void 0),s([i.i(r.Property)("transparent")],e.prototype,"fill",void 0),s([i.i(r.Property)("black")],e.prototype,"iconStrokeColor",void 0),s([i.i(r.Property)(0)],e.prototype,"iconStrokeWidth",void 0),s([i.i(r.Property)(!0)],e.prototype,"visibility",void 0),s([i.i(r.Property)(10)],e.prototype,"width",void 0),s([i.i(r.Property)(10)],e.prototype,"height",void 0),s([i.i(r.Property)("transparent")],e.prototype,"handleStrokeColor",void 0),s([i.i(r.Property)(1)],e.prototype,"handleStrokeWidth",void 0),s([i.i(r.Property)("")],e.prototype,"pathData",void 0),s([i.i(r.Property)(0)],e.prototype,"cornerRadius",void 0),s([i.i(r.Complex)({left:0,right:0,top:0,bottom:0},n.a)],e.prototype,"padding",void 0),e}(r.ChildProperty),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([i.i(r.Complex)({x:0,y:0},o.a)],e.prototype,"offset",void 0),s([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),e}(h),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([i.i(r.Property)(.5)],e.prototype,"offset",void 0),s([i.i(r.Property)("Center")],e.prototype,"alignment",void 0),s([i.i(r.Complex)({x:0,y:0},o.a)],e.prototype,"displacement",void 0),e}(h)},function(t,e,i){"use strict";function r(t){var e=s(t),r={id:t.element.id+"_overlapRuler",style:"height:"+e.height+"px;width:"+e.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"},n=i.i(u.a)("div",r);t.element.insertBefore(n,t.element.firstChild)}function n(t,e){var r=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler")),n=s(t),o=h(t),a=e?"margin-left:"+n.width+"px;":"margin-top:"+n.height+"px;";if(!r){var d="height:"+(e?n.height:o.height+100)+"px;overflow:hidden;width:"+(e?o.width+100:n.width)+"px;position:absolute;font-size:11px;"+a,l={id:t.element.id+(e?"_hRuler":"_vRuler"),style:d};r=i.i(u.a)("div",l)}t.element.insertBefore(r,t.element.firstChild);var c=e?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler,p=new f.a(c);p.orientation=e?"Horizontal":"Vertical",p.length=(e?o.width:o.height)+c.segmentWidth,p.appendTo("#"+t.element.id+(e?"_hRuler":"_vRuler")),e?t.hRuler=p:t.vRuler=p;var g=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler"));e?t.hRuler.element=g:t.vRuler.element=g}function o(t){var e=-t.scroller.horizontalOffset,i=-t.scroller.verticalOffset;t&&t.rulerSettings.showRulers?(t.hRuler.length=0,t.vRuler.length=0,void 0!==e&&t.hRuler.element&&c(t,t.hRuler,e,!0),void 0!==i&&t.vRuler.element&&c(t,t.vRuler,i,!1)):a(t)}function a(t){i.i(u.m)(t.element.id+"_hRuler"),i.i(u.m)(t.element.id+"_vRuler"),i.i(u.m)(t.element.id+"_overlapRuler")}function s(t){var e=0,i=0;return t.rulerSettings.showRulers&&(e=t.rulerSettings.horizontalRuler.thickness,i=t.rulerSettings.verticalRuler.thickness),new m.a(i,e)}function h(t){var e=s(t),i=t.scroller.viewPortHeight,r=t.scroller.viewPortWidth;return r<t.element.clientWidth-e.width&&(r=t.element.clientWidth-e.width),i<t.element.clientHeight-e.height&&(i=t.element.clientHeight-e.height),t.hRuler&&t.hRuler.length&&(r=t.hRuler.length),t.vRuler&&t.vRuler.length&&(i=t.vRuler.length),new m.a(r,i)}function d(){var t,e,i=document.getElementsByClassName("e-d-ruler-marker");if(i&&i.length>0)for(e=i.length-1;e>=0;e--)(t=i[parseInt(e.toString(),10)])&&t.parentNode.removeChild(t)}function l(t,e){t.rulerSettings.showRulers&&(t.hRuler.drawRulerMarker(t.hRuler.element,e,t.scroller.horizontalOffset),t.vRuler.drawRulerMarker(t.vRuler.element,e,t.scroller.verticalOffset))}function c(t,e,r,n){var o=s(t),a=h(t),d=n?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler;g(t,a,n),p(t,a,n),e.offset=r,e.scale=t.scroller.currentZoom,e.length=(n?a.width:a.height)+100,e.arrangeTick=i.i(y.h)(d.arrangeTick),e.dataBind();var l=n?t.hRuler.element:t.vRuler.element;n?l.style.marginLeft=o.width-e.hRulerOffset+"px":l.style.marginTop=o.height-e.vRulerOffset+"px"}function p(t,e,i){var r=document.getElementById(t.element.id+(i?"_hRuler_ruler_space":"_vRuler_ruler_space")),n=i?t.hRuler:t.vRuler;r&&t&&e&&(r.style.width=(i?e.width+2*n.segmentWidth:n.thickness)+"px",r.style.height=(i?n.thickness:e.height+2*n.segmentWidth)+"px")}function g(t,e,i){var r=document.getElementById(t.element.id+(i?"_hRuler":"_vRuler")),n=i?t.hRuler:t.vRuler;r&&t&&e&&(r.style.width=(i?e.width+n.segmentWidth:n.thickness)+"px",r.style.height=(i?n.thickness:e.height+n.segmentWidth)+"px",(r=document.getElementById(t.element.id+"_overlapRuler"))&&(i?r.style.height=n.thickness+"px":r.style.width=n.thickness+"px"))}e.d=r,e.e=n,e.c=o,e.b=a,e.a=s,e.g=d,e.f=l;var u=i(4),f=i(45),m=i(7),y=i(3)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(7),n=i(14),o=i(4),a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=function(t){function e(){var e=t.call(this)||this;return e.imageSource="",e.imageScale="None",e.imageAlign="None",e.stretch="Stretch",e}return a(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.imageSource},set:function(t){this.imageSource=t,this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,n){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=i.i(o.H)(this.source,this.contentSize,e,n),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new r.a(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new r.a(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(n.a)},function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)()],e.prototype,"width",void 0),o([i.i(r.Property)()],e.prototype,"height",void 0),e}(r.ChildProperty),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)()],e.prototype,"width",void 0),o([i.i(r.Property)()],e.prototype,"height",void 0),o([i.i(r.Property)()],e.prototype,"fit",void 0),o([i.i(r.Property)()],e.prototype,"description",void 0),o([i.i(r.Property)()],e.prototype,"template",void 0),o([i.i(r.Property)()],e.prototype,"tooltip",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return x});var r=i(17),n=i(36),o=i(11),a=i(15),s=i(16),h=i(7),d=i(3),l=i(2),c=i(4),p=i(1),g=i(39),u=i(28),f=i(22),m=i(29),y=i(24),v=i(8),b=i(9),S=i(32),w=i(33),x=function(){function t(t,e,r){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=t,this.element=i.i(c.n)(this.diagramId),this.svgRenderer=e,this.isSvgMode=r,this.renderer=r?new g.a:new u.a}return t.prototype.setCursor=function(t,e){t.style.cursor=e},t.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},t.prototype.getAdornerLayer=function(){return i.i(c.D)(this.diagramId)},t.prototype.getParentSvg=function(t,e,i){return this.diagramId&&t&&t.id?t.id.split("_icon_content").length>1||t.id.split("_nodeport").length>1||t.elementActions&p.e.ElementIsPort?this.iconSvgLayer:e&&"selector"===e?this.adornerSvgLayer:t instanceof m.a?this.nativeSvgLayer:this.diagramSvgLayer:i},t.prototype.getParentElement=function(t,e,i,r){var n=e;if(i&&this.diagramId&&t&&t.id){t.id.split("_icon_content").length>1?(n=i.getElementById(this.diagramId+"_diagramExpander"),e=null):t.id.split("_nodeport").length>1?n=i.getElementById(this.diagramId+"_diagramPorts"):t instanceof m.a?(n=i.getElementById(this.diagramId+"_nativeLayer"),e=null):t.elementActions&p.e.ElementIsPort?(n=i.getElementById(this.diagramId+"_diagramPorts"),e=null):n=i.getElementById(this.diagramId+"_diagramLayer");var o=this.getGroupElement(t,e||n,r);n=o.g,o.svg&&(i=o.svg)}return{g:n,svg:i}},t.prototype.getGroupElement=function(t,e,i){var r,n,o=this.getParentSvg(t);if(e&&o){if(o&&!(r=o.getElementById(t.id+"_groupElement"))&&o!==this.nativeSvgLayer){var a=this.nativeSvgLayer;r=a.getElementById(t.id+"_groupElement"),n=a}r||(r=this.svgRenderer.createGElement("g",{id:t.id+"_groupElement"}),void 0!==i&&e.childNodes.length>i?e.insertBefore(r,e.childNodes[parseInt(i.toString(),10)]):e.appendChild(r))}return{g:r,svg:n}},t.prototype.renderElement=function(t,e,s,h,l,c,p,g,u,f){t instanceof a.a?(!1,t.id=t.id?t.id:i.i(d.g)(),this.renderContainer(t,e,s,h,l,c,p,g,u,f)):t instanceof n.a?this.renderImageElement(t,e,h,l,p):t instanceof r.a?this.renderPathElement(t,e,h,l,p,u):t instanceof o.a?this.renderTextElement(t,e,h,l,p,f):t instanceof m.a?this.renderNativeElement(t,e,h,l,p):t instanceof y.a?this.renderHTMLElement(t,e,s,h,l,p,g):this.renderRect(t,e,h,l,u)},t.prototype.drawSelectionRectangle=function(t,e,i,r,n,o){t=(t+o.tx)*o.scale,e=(e+o.ty)*o.scale;var a={width:i*o.scale,height:r*o.scale,x:t+.5,y:e+.5,fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:n.id+"_selected_region"},s=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(s,a)},t.prototype.renderHighlighter=function(t,e,i){var r=t.actualSize.width||2,n=t.actualSize.height||2,o=t.offsetX-r*t.pivot.x,a=t.offsetY-n*t.pivot.y;o=(o+i.tx)*i.scale,a=(a+i.ty)*i.scale;var s={width:r*i.scale,height:n*i.scale,x:o,y:a,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:e.id+"_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawRectangle(e,s,this.diagramId,void 0,void 0,e)},t.prototype.renderSelectionRectangle=function(t,e,i,r){var n=t.actualSize.width||2,o=t.actualSize.height||2,a=t.offsetX-n*t.pivot.x,s=t.offsetY-o*t.pivot.y;a=(a+i.tx)*i.scale,s=(s+i.ty)*i.scale;var h={width:n*i.scale,height:o*i.scale,x:a,y:s,fill:"transparent",stroke:"#00cc00",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:r?2:1,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:t.id+"_highlighter",class:"e-diagram-selection-indicator"},d=this.getParentSvg(t,"selector");this.svgRenderer.drawRectangle(e,h,this.diagramId,void 0,void 0,d)},t.prototype.renderSelectionLine=function(t,e,i,r){var n=this.getBaseAttributes(t,i);n.data=t.absolutePath,n.id=n.id+"_highlighter";var o=t.description?t.description:t.id;this.isSvgMode||(n.x=t.flipOffset.x?t.flipOffset.x:n.x,n.y=t.flipOffset.y?t.flipOffset.y:n.y),i&&(n.x=n.x*i.scale,n.y=n.y*i.scale),n.stroke="#00cc00",n.strokeWidth=r?2:1,n.class="e-diagram-selection-indicator";var a=this.getParentSvg(t,"selector");this.svgRenderer.drawPath(e,n,this.diagramId,void 0,a,o,i.scale)},t.prototype.renderStackHighlighter=function(t,e,r,n,o,a,s){var h=t.actualSize.width||2,d=t.offsetX-h*t.pivot.x,l=t.actualSize.height||2,c=t.offsetY-l*t.pivot.y;d=(d+r.tx)*r.scale;var p,g=t.bounds,u="";if(c=(c+r.ty)*r.scale,n)if(a){var m=h*r.scale;p="M 0 0 L "+(m+2)+" 0 Z";var y=-g.x,v=-g.y,b=[];y=t.actualSize.width/Number(g.width?g.width:1)*r.scale,v=t.actualSize.height/Number(g.height?g.height:1)*r.scale;b=i.i(f.a)("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z"),b=i.i(f.b)(b),u=i.i(f.c)(b,y+m+2,v-8,!1,g.x,g.y,0,0),o.y>=t.offsetY&&(c+=l)}else{s&&o.y>=t.offsetY&&(c+=l);var m=h*r.scale;p="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+m+" 0 Z M "+m+" 0 L "+(m+10)+" 10 Z L "+(m+10)+" -10 Z"}else{var m=l*r.scale;p="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+m+" Z M 0  "+m+" L -10  "+(m+10)+" Z L 10  "+(m+10)+" Z",o.x>=t.offsetX&&(d+=h)}var S={data:p+u,width:h*r.scale,height:l*r.scale,x:d,y:c,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:e.id+"_stack_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawPath(e,S,this.diagramId)},t.prototype.drawLine=function(t,e){this.svgRenderer.drawLine(t,e)},t.prototype.drawPath=function(t,e){this.svgRenderer.drawPath(t,e,this.diagramId)},t.prototype.renderResizeHandle=function(t,e,r,n,o,a,s,h,d,c,g){var u=t.offsetX-t.actualSize.width*t.pivot.x,f=t.offsetY-t.actualSize.height*t.pivot.y,m=t.actualSize.height,y=t.actualSize.width;!c&&r&p.l.Rotate&&i.i(b.z)(this.rendererActions)&&!i.i(b.J)(this.rendererActions)&&(this.renderPivotLine(t,e,a,o,s),this.renderRotateThumb(t,e,a,o,s)),this.renderBorder(t,e,a,h,d,c);var v=t.actualSize.width*n,S=t.actualSize.height*n;d||!i.i(b.z)(this.rendererActions)||i.i(b.J)(this.rendererActions)||(v>=40&&S>=40&&(o&p.g.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",t,u,f,e,i.i(l.x)(o,"ResizeNorthWest"),r&p.l.ResizeNorthWest,a,void 0,s,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest",g),o&p.g.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",t,u+y,f,e,i.i(l.x)(o,"ResizeNorthEast"),r&p.l.ResizeNorthEast,a,void 0,s,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast",g),o&p.g.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",t,u,f+m,e,i.i(l.x)(o,"ResizeSouthWest"),r&p.l.ResizeSouthWest,a,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest",g),o&p.g.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",t,u+y,f+m,e,i.i(l.x)(o,"ResizeSouthEast"),r&p.l.ResizeSouthEast,a,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast",g)),o&p.g.ResizeNorth&&this.renderCircularHandle("resizeNorth",t,u+y/2,f,e,i.i(l.x)(o,"ResizeNorth"),r&p.l.ResizeNorth,a,void 0,s,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north",g),o&p.g.ResizeSouth&&this.renderCircularHandle("resizeSouth",t,u+y/2,f+m,e,i.i(l.x)(o,"ResizeSouth"),r&p.l.ResizeSouth,a,void 0,s,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south",g),o&p.g.ResizeWest&&this.renderCircularHandle("resizeWest",t,u,f+m/2,e,i.i(l.x)(o,"ResizeWest"),r&p.l.ResizeWest,a,void 0,s,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west",g),o&p.g.ResizeEast&&this.renderCircularHandle("resizeEast",t,u+y,f+m/2,e,i.i(l.x)(o,"ResizeEast"),r&p.l.ResizeEast,a,void 0,s,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east",g))},t.prototype.renderEndPointHandle=function(t,e,r,n,o,a,s,h,d,c){var g,u,f=t.sourcePoint,m=t.targetPoint,y=t.wrapper;if(this.renderCircularHandle("connectorSourceThumb",y,f.x,f.y,e,i.i(l.x)(n,"ConnectorSourceThumb"),r&p.l.ConnectorSource,o,a,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-sourceend",c),this.renderCircularHandle("connectorTargetThumb",y,m.x,m.y,e,i.i(l.x)(n,"ConnectorTargetThumb"),r&p.l.ConnectorTarget,o,s,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend",c),h)if(("Straight"===t.type||"Bezier"===t.type)&&t.segments.length>0)for(g=0;g<t.segments.length-1;g++){u=t.segments[parseInt(g.toString(),10)];var b="Bezier"===t.type?"e-diagram-bezier-segment-handle":"e-diagram-straight-segment-handle";this.renderCircularHandle("segementThumb_"+(g+1),y,u.point.x,u.point.y,e,!0,r&p.l.ConnectorSource,o,a,null,null,g,b,c)}else if(t.maxSegmentThumb){var S=t.segments.length<=t.maxSegmentThumb?0:1,w=t.segments.length<=t.maxSegmentThumb?t.segments.length:t.segments.length-1;for(t.maxSegmentThumb>=3&&3===t.segments.length&&(S=1,w=t.segments.length-1),S=t.segments.length>t.maxSegmentThumb+2?2:S,w=t.segments.length>t.maxSegmentThumb+2?t.segments.length-2:w,1===t.segments.length&&t.segments[0].points.length<=2&&(S=1,w=t.segments.length),g=0;g<t.segments.length;g++){var x=t.segments[parseInt(g.toString(),10)];g>=S&&g<w?this.renderOrthogonalThumbs("orthoThumb_"+(g+1),y,x,e,i.i(l.x)(n,"ConnectorSourceThumb"),o,t):x.allowDrag=!1}}else for(g=0;g<t.segments.length;g++){var x=t.segments[parseInt(g.toString(),10)];this.renderOrthogonalThumbs("orthoThumb_"+(g+1),y,x,e,i.i(l.x)(n,"ConnectorSourceThumb"),o,t)}if("Bezier"===t.type&&d){var I=t.segments.length-1,P=null!=t.bezierSettings?t.bezierSettings.controlPointsVisibility:null;for(g=0;g<=I;g++){var C=t.segments[parseInt(g.toString(),10)],z=v.a.isEmptyPoint(C.point1)?C.bezierPoint1:C.point1;(null!=P&&0==g&&i.i(l.z)(P,"Source")||0!=g&&i.i(l.z)(P,"Intermediate"))&&(this.renderCircularHandle("bezierPoint_"+(g+1)+"_1",y,z.x,z.y,e,i.i(l.x)(n,"ConnectorSourceThumb"),r&p.l.ConnectorSource,o,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-control-handle e-source",c),i.i(l.x)(n,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(g+1)+"_1",y,e,C.points[0],v.a.isEmptyPoint(C.point1)?C.bezierPoint1:C.point1,o)),z=v.a.isEmptyPoint(C.point2)?C.bezierPoint2:C.point2,(null!=P&&g==I&&i.i(l.z)(P,"Target")||g!=I&&i.i(l.z)(P,"Intermediate"))&&(this.renderCircularHandle("bezierPoint_"+(g+1)+"_2",y,z.x,z.y,e,i.i(l.x)(n,"ConnectorTargetThumb"),r&p.l.ConnectorTarget,o,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-control-handle e-target",c),i.i(l.x)(n,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(g+1)+"_2",y,e,C.points[1],v.a.isEmptyPoint(C.point2)?C.bezierPoint2:C.point2,o))}}},t.prototype.renderOrthogonalThumbs=function(t,e,i,r,n,o,a){var s,h,d,l=0;if(a.maxSegmentThumb){var c=i.points.length<3?0:1,p=i.points.length<3?i.points.length-1:i.points.length-2;for(c=1===a.segments.length?c:0,p=1===a.segments.length?p:i.points.length-1,l=c;l<p;l++)d=v.a.distancePoints(i.points[parseInt(l.toString(),10)],i.points[l+1]),s=i.points[parseInt(l.toString(),10)].y.toFixed(2)===i.points[l+1].y.toFixed(2)?"horizontal":"vertical",h=!!(d>=50&&i.allowDrag),this.renderOrthogonalThumb(t+"_"+(l+1),e,(i.points[parseInt(l.toString(),10)].x+i.points[l+1].x)/2,(i.points[parseInt(l.toString(),10)].y+i.points[l+1].y)/2,r,h,s,o)}else for(l=0;l<i.points.length-1;l++)d=v.a.distancePoints(i.points[parseInt(l.toString(),10)],i.points[l+1]),s=i.points[parseInt(l.toString(),10)].y.toFixed(2)===i.points[l+1].y.toFixed(2)?"horizontal":"vertical",h=!!(d>=50&&i.allowDrag),this.renderOrthogonalThumb(t+"_"+(l+1),e,(i.points[parseInt(l.toString(),10)].x+i.points[l+1].x)/2,(i.points[parseInt(l.toString(),10)].y+i.points[l+1].y)/2,r,h,s,o)},t.prototype.renderOrthogonalThumb=function(t,e,r,n,o,a,s,h){var d,l,c,p,g=document.getElementById(this.diagramId);if(g&&(p=g.ej2_instances[0]),"horizontal"===s)switch(d=i.i(w.d)(p.segmentThumbShape),p.segmentThumbShape){case"Arrow":case"OpenArrow":case"DoubleArrow":l=-15,c=-15;break;case"Square":case"Rectangle":case"Ellipse":l=-5,c=-5;break;case"Rhombus":case"Circle":case"Diamond":l=-10,c=-5;break;case"IndentedArrow":case"OutdentedArrow":l=-5,c=-4;break;case"Fletch":case"OpenFetch":l=-5,c=-4.5}else switch(d=i.i(w.e)(p.segmentThumbShape),p.segmentThumbShape){case"Arrow":case"OpenArrow":case"DoubleArrow":l=-15,c=-15;break;case"Square":case"IndentedArrow":case"OutdentedArrow":case"Fletch":case"OpenFetch":l=-5,c=-5;break;case"Rhombus":case"Diamond":l=-5,c=-15;break;case"Rectangle":l=-7,c=-5;break;case"Circle":l=-5,c=-7;break;case"Ellipse":l=-7,c=-7}var u={x:(r+h.tx)*h.scale+l,y:(n+h.ty)*h.scale+c,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:d,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:a,id:t,class:"e-diagram-ortho-segment-handle"};this.svgRenderer.drawPath(o,u,this.diagramId)},t.prototype.renderPivotLine=function(t,e,i,r,n){var o=t,a=!!(r&p.g.Rotate);n&&(a=!1);var s=this.getBaseAttributes(o,i);s.fill="None",s.stroke="black",s.strokeWidth=1,s.dashArray="2,3",s.visible=a;var h=i.scale;s.x*=h,s.y*=h,s.width*=h,s.height*=h,s.id="pivotLine",s.class="e-diagram-pivot-line";var d={x:o.actualSize.width*o.pivot.x*h,y:-20},l={x:o.actualSize.width*o.pivot.x*h,y:0};s.startPoint=d,s.endPoint=l,this.svgRenderer.drawLine(e,s)},t.prototype.renderBezierLine=function(t,e,i,r,n,o){var a=this.getBaseAttributes(e,o);a.id=t,a.stroke="black",a.strokeWidth=1,a.dashArray="3,3",a.fill="None",a.class="e-diagram-bezier-control-line",a.x=0,a.y=0;var s=o.scale,h=(r.x+o.tx)*s,d=(r.y+o.ty)*s,l=(n.x+o.tx)*s,c=(n.y+o.ty)*s,p={x:h,y:d},g={x:l,y:c};a.startPoint=p,a.endPoint=g,this.svgRenderer.drawLine(i,a)},t.prototype.renderCircularHandle=function(t,e,r,n,o,a,h,d,l,c,p,g,u,f){var m=e,y={x:r,y:n};if(0!==m.rotateAngle||0!==m.parentTransform){var v=i.i(s.a)();i.i(s.b)(v,m.rotateAngle+m.parentTransform,m.offsetX,m.offsetY),y=i.i(s.c)(v,y)}var b=this.getBaseAttributes(m);b.stroke="black",b.strokeWidth=1,void 0!==g?(b.id="segmentEnd_"+g,b.fill="#e2e2e2"):b.fill=l?"#8CC63F":"white",b.cornerRadius=f/2,b.angle=e.rotateAngle,b.id=t,b.visible=a,b.class=u,b.width=f,b.height=f,b.x=(y.x+d.tx)*d.scale,b.y=(y.y+d.ty)*d.scale,b.x=b.x-b.width/2,b.y=b.y-b.height/2,l&&(b.class+=" e-connected"),c&&(b.visible=!1);var S=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(o,b,this.diagramId,!0,!0,S,p,!0,h)},t.prototype.renderBorder=function(t,e,i,r,n,o){var a=t,s=this.getBaseAttributes(a,i);s.x*=i.scale,s.y*=i.scale,s.width*=i.scale,s.height*=i.scale,s.fill="transparent",s.stroke="#097F7F",s.strokeWidth=1.2,s.gradient=null,s.dashArray="6,3",s.class="e-diagram-selector",o&&(s.class+=" e-diagram-lane"),s.id="borderRect",s.id=this.rendererActions&p.q.DrawSelectorBorder?"borderRect_symbol":"borderRect",r||(s.class+=" e-disabled"),n&&(s.class+=" e-thick-border"),s.cornerRadius=0;var h=this.getParentSvg(t,"selector");this.svgRenderer.drawRectangle(e,s,this.diagramId,void 0,!0,h)},t.prototype.renderUserHandler=function(t,e,r,o){for(var a,s=t.wrapper,d=0,g=t.userHandles;d<g.length;d++){var u=g[d];a=!0,(u.disableConnectors&&t.connectors.length>0||u.disableNodes&&t.nodes.length>0)&&(a=!1);var v=document.getElementById(u.name+"_template_hiddenUserHandle");v&&(u.template=v.childNodes[0].cloneNode(!0));var b=i.i(l.y)(t,u,r);if(b.x=(b.x+r.tx)*r.scale,b.y=(b.y+r.ty)*r.scale,u.visible&&(u.visible=!!(t.constraints&p.g.UserHandle)),a)if(u.pathData){var S=u.pathData?u.pathData:u.content,w=this.getBaseAttributes(s);w.id=u.name+"_userhandle",w.fill=u.backgroundColor,w.stroke=u.borderColor,w.strokeWidth=u.borderWidth,w.centerX=b.x,w.centerY=b.y,w.radius=.5*u.size,w.class="e-diagram-userhandle-circle",w.angle=0,w.visible=u.visible,w.opacity=1,this.svgRenderer.drawCircle(e,w,1,{"aria-label":u.name+"user handle"});var x=[];x=i.i(f.a)(S),x=i.i(f.b)(x);var I=i.i(c.l)(S),P=(u.size-.45*u.size)/I.width,C=(u.size-.45*u.size)/I.height,z=i.i(f.c)(x,P,C,!0,I.x,I.y,0,0);I=i.i(c.l)(z);var O={x:b.x-I.width/2,y:b.y-I.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:u.pathColor,stroke:u.backgroundColor,strokeWidth:.5,dashArray:"",data:z,width:u.size-5,height:u.size-5,pivotX:0,pivotY:0,opacity:1,visible:u.visible};this.svgRenderer.drawPath(e,O,this.diagramId,void 0,void 0,{"aria-label":u.name+"user handle"})}else if(u.content){var T=new m.a(u.name,this.diagramId);T.content=u.content,T.offsetX=b.x,T.offsetY=b.y,T.id=u.name+"_shape",T.horizontalAlignment="Center",T.verticalAlignment="Center",T.visible=u.visible,T.setOffsetWithRespectToBounds(b.x,b.y,"Fraction"),T.relativeMode="Object",T.description=u.name||"User handle",T.measure(new h.a(u.size,u.size)),T.arrange(T.desiredSize),this.svgRenderer.drawNativeContent(T,e,u.size,u.size,this.adornerSvgLayer)}else if(u.source){var A=new n.a,O=this.getBaseAttributes(A,r);O.width=u.size,O.height=u.size,O.x=b.x-u.size/2,O.y=b.y-u.size/2,O.sourceWidth=u.size,O.sourceHeight=u.size,O.alignment=A.imageAlign,O.source=u.source,O.scale=A.imageScale,O.visible=u.visible,O.description=u.name||"User handle",O.id=u.name+"_",this.renderer.drawImage(e,O,this.adornerSvgLayer,!1)}else{var L=new y.a(u.name,this.diagramId);L.offsetX=b.x,L.offsetY=b.y,L.id=u.name+"_shape",L.visible=u.visible,L.relativeMode="Object",L.template=u.template,L.measure(new h.a(u.size,u.size)),L.arrange(L.desiredSize),this.svgRenderer.drawHTMLContent(L,o,void 0,!0,void 0)}}},t.prototype.renderRotateThumb=function(t,e,n,o,a){var d,l=(new r.a,new h.a);l.width=18,l.height=16;var c=t.offsetY-t.actualSize.height*t.pivot.y,g=t.offsetX-t.actualSize.width*t.pivot.x,u=!!(o&p.g.Rotate);a&&(u=!1);var f=g+t.pivot.x*t.actualSize.width,m=c;if(f=(f+n.tx)*n.scale,m=(m+n.ty)*n.scale,d={x:f-.5*l.width,y:m-30-.5*l.height},0!==t.rotateAngle||0!==t.parentTransform){var y=i.i(s.a)();i.i(s.b)(y,t.rotateAngle+t.parentTransform,(n.tx+t.offsetX)*n.scale,(n.ty+t.offsetY)*n.scale),d=i.i(s.c)(y,d)}var v={x:d.x,y:d.y,angle:t.rotateAngle+t.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:u,id:t.id,class:"e-diagram-rotate-handle"};v.id="rotateThumb",this.svgRenderer.drawPath(e,v,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},t.prototype.renderPathElement=function(t,e,r,n,o,a){var s=this.getBaseAttributes(t,r,a);s.data=t.absolutePath,s.data=t.absolutePath;var h=t.description?t.description:t.id;if(this.isSvgMode||(s.x=t.flipOffset.x?t.flipOffset.x:s.x,s.y=t.flipOffset.y?t.flipOffset.y:s.y),t.isExport){var d=t.absoluteBounds;s.data=i.i(c.L)(t,d,void 0,s)}this.renderer.drawPath(e,s,this.diagramId,void 0,n,h)},t.prototype.renderSvgGridlines=function(t,e,r,n,o,a){var s=document.createElementNS("http://www.w3.org/2000/svg","pattern"),h=document.createElementNS("http://www.w3.org/2000/svg","defs");h.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(t.constraints&p.w.ShowHorizontalLines||t.constraints&p.w.ShowVerticalLines)&&s.setAttribute("id",this.diagramId+"_pattern");var d=0,l=0,g=0,u=0,f=1,m=!1,y="Lines"===t.gridType,v=y?t.verticalGridlines.lineIntervals:t.verticalGridlines.dotIntervals,b=y?t.horizontalGridlines.lineIntervals:t.horizontalGridlines.dotIntervals;if(n.showRulers&&n.dynamicGrid&&o&&a)g=a.updateSegmentWidth(r.scale),u=o.updateSegmentWidth(r.scale),t.horizontalGridlines.scaledIntervals=[g/o.interval],t.verticalGridlines.scaledIntervals=[u/a.interval],m=!0;else{for(var S=0;S<v.length;S+=1)d+=v[parseInt(S.toString(),10)];for(var S=0;S<b.length;S+=1)l+=b[parseInt(S.toString(),10)];f=this.scaleSnapInterval(t,r.scale)}d=m?u:d*f,l=m?g:l*f;var w={id:this.diagramId+"_pattern",x:0,y:0,width:d,height:l,patternUnits:"userSpaceOnUse"};i.i(c.e)(s,w),this.horizontalSvgGridlines(s,d,l,f,t,n,a,m,y,b),this.verticalSvgGridlines(s,d,l,f,t,n,o,m,y,v),h.appendChild(s),e.appendChild(h)},t.prototype.horizontalSvgGridlines=function(t,e,r,n,o,a,s,h,d,g){var u,f=0,m=[];if(o.constraints&p.w.ShowHorizontalLines){o.horizontalGridlines.lineDashArray&&(m=this.renderer.parseDashArray(o.horizontalGridlines.lineDashArray)),a.showRulers&&a.dynamicGrid&&s&&(g=this.updateLineIntervals(g,a,s,r,d)),g=i.i(l._7)(g,d);for(var y=0;y<g.length;y+=2){f=i.i(l._8)(g,d,y,f);u=document.createElementNS("http://www.w3.org/2000/svg",d?"path":"circle");var v=void 0,b=d?f+g[parseInt(y.toString(),10)]/2:f;b=h?b:b*n,d?(v=""===m.toString()?{"stroke-width":g[parseInt(y.toString(),10)],d:"M0,"+b+" L"+e+","+b+" Z",class:1.25===g[parseInt(y.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:o.horizontalGridlines.lineColor}:{"stroke-width":g[parseInt(y.toString(),10)],stroke:o.horizontalGridlines.lineColor,d:"M0,"+b+" L"+e+","+b+" Z",class:1.25===g[parseInt(y.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",dashArray:m.toString()},i.i(c.e)(u,v),t.appendChild(u),f+=g[y+1]+g[parseInt(y.toString(),10)]):(this.renderDotGrid(y,t,o,0,b,n,!0),f+=g[parseInt(y.toString(),10)])}}},t.prototype.renderDotGrid=function(t,e,r,n,o,a,s){var h=s?r.verticalGridlines.dotIntervals:r.horizontalGridlines.dotIntervals;h=i.i(l._7)(h,!1);for(var d,p,g,u,f=1;f<h.length;f+=2)d=f===h.length-1?h[0]:h[f-1],p=document.createElementNS("http://www.w3.org/2000/svg","circle"),g=n,g*=a,u={cx:s?g:o,cy:s?o:g,fill:r.horizontalGridlines.lineColor,r:d},i.i(c.e)(p,u),e.appendChild(p),n+=h[parseInt(f.toString(),10)]+h[f-1]},t.prototype.verticalSvgGridlines=function(t,e,r,n,o,a,s,h,d,g){var u,f=0,m=[];if(o.constraints&p.w.ShowVerticalLines){o.verticalGridlines.lineDashArray&&(m=this.renderer.parseDashArray(o.verticalGridlines.lineDashArray)),a.showRulers&&a.dynamicGrid&&s&&(g=this.updateLineIntervals(g,a,s,e,d));g=i.i(l._7)(g,d);for(var y=0;y<g.length;y+=2){f=i.i(l._8)(g,d,y,f);var v=d?f+g[parseInt(y.toString(),10)]/2:f;v=h?v:v*n,u=document.createElementNS("http://www.w3.org/2000/svg",d?"path":"circle");var b=void 0;d?(b=""===m.toString()?{"stroke-width":g[parseInt(y.toString(),10)],d:"M"+v+",0 L"+v+","+r+" Z",class:1.25===g[parseInt(y.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:o.verticalGridlines.lineColor}:{"stroke-width":g[parseInt(y.toString(),10)],class:1.25===g[parseInt(y.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:o.verticalGridlines.lineColor,d:"M"+v+",0 L"+v+","+r+" Z",dashArray:m.toString()},i.i(c.e)(u,b),t.appendChild(u),f+=g[y+1]+g[parseInt(y.toString(),10)]):(this.renderDotGrid(y,t,o,0,v,n,!1),f+=g[parseInt(y.toString(),10)])}}},t.prototype.updateGrid=function(t,e,r,n,o,a){var s=e.getElementById(this.diagramId+"_grid_rect"),h=!1;if(s){var d=e.getElementById(this.diagramId+"_pattern");d&&d.parentNode.removeChild(d);var l=0,p=0,g=1,u="Lines"===t.gridType,f=u?t.verticalGridlines.lineIntervals:t.verticalGridlines.dotIntervals,m=u?t.horizontalGridlines.lineIntervals:t.horizontalGridlines.dotIntervals;n.showRulers&&n.dynamicGrid&&a&&o?(l=a.updateSegmentWidth(r.scale),p=o.updateSegmentWidth(r.scale),h=!0,t.horizontalGridlines.scaledIntervals=[l/o.interval],t.verticalGridlines.scaledIntervals=[p/a.interval]):g=this.scaleSnapInterval(t,r.scale);for(var y=0,v=0;v<m.length;v+=1)y+=m[parseInt(v.toString(),10)];for(var b=0,v=0;v<f.length;v+=1)b+=f[parseInt(v.toString(),10)];var S={x:-r.tx*r.scale,y:-r.ty*r.scale};i.i(c.e)(s,S),b=h?p:b*g,y=h?l:y*g,S={id:this.diagramId+"_pattern",x:0,y:0,width:b,height:y,patternUnits:"userSpaceOnUse"},d=document.createElementNS("http://www.w3.org/2000/svg","pattern"),i.i(c.e)(d,S),this.horizontalSvgGridlines(d,b,y,g,t,n,a,h,u,m),this.verticalSvgGridlines(d,b,y,g,t,n,o,h,u,f);var w=e.getElementById(this.diagramId+"_grid_pattern_defn");w&&w.appendChild(d)}},t.prototype.updateLineIntervals=function(t,e,i,r,n){for(var o=[],a=r/i.interval,s=n?i.interval:i.interval+1,h=0;h<2*s;h++)o[parseInt(h.toString(),10)]=h%2==0?n?0===h?1.25:.25:0:n?a-o[h-1]:a;return o},t.prototype.scaleSnapInterval=function(t,e){if(e>=2)for(;e>=2;)e/=2;else if(e<=.5)for(;e<=.5;)e*=2;var i;if(t.horizontalGridlines.scaledIntervals=t.horizontalGridlines.snapIntervals,t.verticalGridlines.scaledIntervals=t.verticalGridlines.snapIntervals,1!==e){var r=t.horizontalGridlines;for(r.scaledIntervals=[],i=0;i<r.snapIntervals.length;i++)r.scaledIntervals[parseInt(i.toString(),10)]=r.snapIntervals[parseInt(i.toString(),10)]*e;for(r=t.verticalGridlines,r.scaledIntervals=[],i=0;i<r.snapIntervals.length;i++)r.scaledIntervals[parseInt(i.toString(),10)]=r.snapIntervals[parseInt(i.toString(),10)]*e}return e},t.prototype.renderTextElement=function(t,e,r,n,o,a){var s=this.getBaseAttributes(t,r);a&&(s.x=a.cx,s.y=a.cy,t.bounds.x=s.x,t.bounds.y=s.y,t.isExport&&(s.x=s.x*Math.min(t.exportScaleValue.x||t.exportScaleValue.y),s.y=s.y*Math.min(t.exportScaleValue.x||t.exportScaleValue.y))),s.cornerRadius=0,s.whiteSpace=i.i(d.a)(t.style.whiteSpace,t.style.textWrapping),s.content=t.content,s.breakWord=i.i(d.b)(t.style.textWrapping),s.textAlign=i.i(d.c)(t.style.textAlign),s.color=t.style.color,s.italic=t.style.italic,s.bold=t.style.bold,s.fontSize=t.style.fontSize,s.fontFamily=t.style.fontFamily,s.textOverflow=t.style.textOverflow,s.textWrapping=t.style.textWrapping,s.textDecoration=t.style.textDecoration,s.doWrap=t.doWrap,s.wrapBounds=t.wrapBounds,s.childNodes=t.childNodes,s.isHorizontalLane=t.isLaneOrientation,s.id=t.id?t.id:i.i(d.g)(),t.isLaneOrientation&&(s.parentOffsetX=this.groupElement.offsetX,s.parentOffsetY=this.groupElement.offsetY,s.parentWidth=this.groupElement.actualSize.width,s.parentHeight=this.groupElement.actualSize.height),s.dashArray="",s.strokeWidth=0,s.fill=t.style.fill;var h=t.description?t.description:t.content?t.content:t.id;("Wrap"===t.style.textWrapping||"WrapWithOverflow"===t.style.textWrapping)&&this.groupElement&&s.height>this.groupElement.actualSize.height&&("Clip"===t.style.textOverflow||"Ellipsis"===t.style.textOverflow)&&(s.y=s.y+(s.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(e,s,this.diagramId,void 0,void 0,n),this.renderer.drawText(e,s,n,h,this.diagramId,t.isExport&&Math.min(t.exportScaleValue.x||t.exportScaleValue.y),this.groupElement),this.isSvgMode&&(t.doWrap=!1)},t.prototype.renderNativeElement=function(t,e,i,r,n){var o,a,s=this.getParentSvg(t,void 0,e)||r,h=this.getParentElement(t,e,s).g||e,d=this.getBaseAttributes(t,i);switch(d.fill="transparent",d.cornerRadius=t.cornerRadius,d.stroke="transparent",this.renderer.drawRectangle(e,d,this.diagramId,void 0,void 0,r),t.scale){case"None":o=t.contentSize.width,a=t.contentSize.height;break;case"Stretch":o=t.actualSize.width,a=t.actualSize.height;break;case"Meet":o=a=t.actualSize.width<=t.actualSize.height?t.actualSize.width:t.actualSize.height;break;case"Slice":o=a=t.actualSize.width>=t.actualSize.height?t.actualSize.width:t.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(t,h,a,o,s)},t.prototype.renderHTMLElement=function(t,e,r,n,o,a,s){var h=this.getBaseAttributes(t,n);h.fill="transparent",h.cornerRadius=t.cornerRadius,h.stroke="transparent",this.renderer.drawRectangle(e,h,this.diagramId,void 0,void 0,o),this.svgRenderer&&this.svgRenderer.drawHTMLContent(t,r.children[0],n,i.i(l._9)(r),s)},t.prototype.renderImageElement=function(t,e,i,r,n){var o=this.getBaseAttributes(t,i);o.cornerRadius=0,this.renderer.drawRectangle(e,o,this.diagramId,void 0,void 0,r);var a,s,h,d;if("Stretch"===t.stretch)a=t.actualSize.width,s=t.actualSize.height;else{var l=t.contentSize.width,c=t.contentSize.height,p=o.width/l,g=o.height/c,u=void 0;switch(t.stretch){case"Meet":u=Math.min(p,g),a=l*u,s=c*u,o.x+=Math.abs(o.width-a)/2,o.y+=Math.abs(o.height-s)/2;break;case"Slice":p=o.width/l,g=o.height/c,u=Math.max(p,g),a=l*u,s=c*u,h=o.width/a*l,d=o.height/s*c;break;case"None":a=l,s=c}}o.width=a,o.height=s,o.sourceWidth=h,o.sourceHeight=d,o.source=t.source,o.alignment=t.imageAlign,o.scale=t.imageScale,o.description=t.description?t.description:t.id,this.renderer.drawImage(e,o,r,n)},t.prototype.renderContainer=function(t,e,i,r,n,a,s,h,d,l){var c,g={svg:n,g:e},u=document.getElementById(this.diagramId);if(u&&(c=u.ej2_instances[0]),this.diagramId&&(n=this.getParentSvg(t)||n,this.isSvgMode)){var f=this.getParentElement(t,e,n,h).g||e;n=this.getParentSvg(this.hasNativeParent(t.children))||n;var y=this.getParentElement(this.hasNativeParent(t.children),f,n,h);g.svg=y.svg||n,g.g=y.g||f,a?(n&&(n.getElementById(g.g.id)||e.appendChild(g.g)),e=g.g):e=g.g}if(this.renderRect(t,e,r,n),this.groupElement=t,t.hasChildren()){for(var v,b=void 0,w=0,x=t.children;w<x.length;w++){var I=x[w];n=this.getParentSvg(this.hasNativeParent(t.children)||I)||n,this.isSvgMode&&(v=this.getParentElement(this.hasNativeParent(t.children)||I,e,n),b=v.g||e,v.svg&&(n=v.svg)),this.isSvgMode||(I.flip=t.flip),this.renderElement(I,b||e,i,r,n,!0,s,h,d,l),I instanceof o.a&&b&&!(t.elementActions&p.e.ElementIsGroup)&&this.renderFlipElement(I,b,I.flip),I instanceof o.a&&b&&t.elementActions&p.e.ElementIsGroup&&this.renderFlipElement(I,b,I.flip),I.elementActions&p.e.ElementIsPort&&b&&(b.id.includes("bpmn")?(this.renderFlipElement(t,b,I.flip),I.flip="None"):this.renderFlipElement(t,b,I.flip)),I instanceof o.a||"None"===t.flip||!(t.elementActions&p.e.ElementIsGroup)||I.elementActions&p.e.ElementIsPort||!b||this.renderFlipElement(I,b||e,t.flip)}var P=void 0;c&&c.selectedItems&&c.selectedItems.nodes&&c.selectedItems.nodes.length>0&&(P=c.selectedItems.nodes[0]);var C,z=void 0,O=void 0,T=!1;if(c&&c.selectedItems&&(C=c.getObject(t.id)),"None"!==t.flip&&(P=C),"None"==t.flip&&(P=C),P&&P.flipMode&&(T=!0),!(t.elementActions&p.e.ElementIsGroup)&&c instanceof S.a&&c.nameTable[t.id]&&"connectors"!==c.nameTable[t.id].propName&&T&&P){if(z=t.children&&t.children[0]instanceof m.a?document.getElementById(P.id+"_content_inner_native_element"):document.getElementById(P.id+"_content_groupElement"),!(t.children[0]instanceof m.a)&&"Text"!==P.shape.type&&"None"!==P.flipMode&&"Label"!==P.flipMode&&"All"!==P.flipMode||t.children[0]instanceof m.a&&"Port"===P.flipMode)return void this.renderFlipElement(t,z,P.flip);if((t.children[0]instanceof m.a&&("All"===P.flipMode||"Label"===P.flipMode)||"Label"===P.flipMode||"Image"===P.shape.type&&"Label"===P.flipMode)&&this.renderFlipElement(t,z,t.flip),"None"!==t.flip&&"None"===P.flipMode)this.renderFlipElement(t,z,t.flip);else if("None"!==t.flip&&"Label"===P.flipMode||t.children[0]instanceof m.a&&"None"!==t.flip&&P&&("None"===P.flipMode||"All"===P.flipMode)){for(var A=0;A<P.wrapper.children.length;A++)if(P.wrapper.children[parseInt(A.toString(),10)]instanceof o.a)return O=document.getElementById(P.wrapper.children[parseInt(A.toString(),10)].id+"_groupElement"),void this.renderFlipElement(t,O,t.flip)}else if("None"!==t.flip&&"All"===P.flipMode){for(var L=0;L<P.wrapper.children.length;L++)P.wrapper.children[parseInt(L.toString(),10)]instanceof o.a&&(O=document.getElementById(P.wrapper.children[parseInt(L.toString(),10)].id+"_groupElement"),this.renderFlipElement(t,O,t.flip));this.renderFlipElement(t,z,t.flip)}else this.renderFlipElement(t,z,t.flip)}if(t.elementActions&p.e.ElementIsGroup&&c instanceof S.a&&c.nameTable[t.id]&&"connectors"!==c.nameTable[t.id].propName&&T&&P){if(z=t.children&&t.children[0]instanceof m.a?document.getElementById(P.id+"_content_inner_native_element"):document.getElementById(P.id+"_content_groupElement"),!(t.children[0]instanceof m.a)&&"Text"!==P.shape.type&&"None"!==P.flipMode&&"Label"!==P.flipMode&&"All"!==P.flipMode||t.children[0]instanceof m.a&&"Port"===P.flipMode)return void this.renderFlipElement(t,z,P.flip);if((t.children[0]instanceof m.a&&("All"===P.flipMode||"Label"===P.flipMode)||"Label"===P.flipMode||"Image"===P.shape.type&&"Label"===P.flipMode)&&this.renderFlipElement(t,z,t.flip),"None"!==t.flip&&"None"===P.flipMode)this.renderFlipElement(t,z,t.flip);else if("None"!==t.flip&&"Label"===P.flipMode||t.children[0]instanceof m.a&&"None"!==t.flip&&P&&("None"===P.flipMode||"All"===P.flipMode)){for(var E=0;E<P.wrapper.children.length;E++)if(P.wrapper.children[parseInt(E.toString(),10)]instanceof o.a)return O=document.getElementById(P.wrapper.children[parseInt(E.toString(),10)].id+"_groupElement"),void this.renderFlipElement(t,O,t.flip)}else if("None"!==t.flip&&"All"===P.flipMode){for(var L=0;L<P.wrapper.children.length;L++)P.wrapper.children[parseInt(L.toString(),10)]instanceof o.a&&(O=document.getElementById(P.wrapper.children[parseInt(L.toString(),10)].id+"_groupElement"),this.renderFlipElement(t,O,t.flip));this.renderFlipElement(t,z,t.flip)}else this.renderFlipElement(t,z,t.flip)}}},t.prototype.renderFlipElement=function(t,e,r){var n={},o=1,a=1,s=0,h=0,d=0,l=0;if("None"!==r?("Horizontal"!==r&&"Both"!==r||(s=t.bounds.center.x,d=-t.bounds.center.x,o=-1),"Vertical"!==r&&"Both"!==r||(h=t.bounds.center.y,l=-t.bounds.center.y,a=-1),n={transform:"translate("+s+","+h+") scale("+o+","+a+") translate("+d+","+l+")"}):n={transform:"translate(0,0)"},n)if(t&&t.children&&t.children.length&&t.children[0]instanceof y.a){var p=e.id.split("_preview"),g=document.getElementById(p[0]+"_html_div")||i.i(c.f)(this.diagramId).children[0];e=g.querySelector("#"+t.id+"_content_html_element"),e&&(e.style.transform="scale("+o+","+a+")rotate("+(t.rotateAngle+t.parentTransform)+"deg)")}else i.i(c.e)(e,n)},t.prototype.hasNativeParent=function(t,e){if(t&&t.length>0){var i=t[0];if(i instanceof m.a)return i;i.children&&i.children.length&&this.hasNativeParent(i.children,e++||0)}},t.prototype.renderRect=function(t,e,i,r,n){var o=this.getBaseAttributes(t,i,n);o.cornerRadius=t.cornerRadius||0,t.isExport&&(o.cornerRadius*=t.exportScaleValue.x);var a=t.description?t.description:t.id;this.renderer.drawRectangle(e,o,this.diagramId,t.isExport,void 0,r,a)},t.prototype.drawRect=function(t,e){e.cornerRadius=0,this.svgRenderer.drawRectangle(t,e,this.diagramId)},t.prototype.getBaseAttributes=function(t,e,i){var r={width:t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5,fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray||"",opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,canApplyStyle:t.canApplyStyle,shapeType:t.shapeType};return i&&(r.x=r.x-.5,r.y=r.y-.5),t.isExport&&(r.width*=t.exportScaleValue.x,r.height*=t.exportScaleValue.y,r.x*=t.exportScaleValue.x,r.y*=t.exportScaleValue.y,r.strokeWidth*=t.exportScaleValue.x),t.flip&&(r.flip=t.flip),e&&(r.x+=e.tx,r.y+=e.ty),r},t.renderSvgBackGroundImage=function(t,e,r,n,o,a){if(t.source){var s=i.i(c.y)(e.id),h=s.getElementById(e.id+"_image");if(!h){var d=i.i(c.M)(e.id);h=document.createElementNS("http://www.w3.org/2000/svg","image"),h.setAttribute("id",e.id+"_image"),d.appendChild(h)}var l=new Image;l.src=t.source,h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l.src.toString());var p="None"!==t.scale?t.scale:"",g=t.align,u=g.charAt(0).toLowerCase()+g.slice(1);p&&(u+=" "+p.charAt(0).toLowerCase()+p.slice(1));var f={id:e.id+"_image",x:r,y:n,width:o,height:a,preserveAspectRatio:u};i.i(c.e)(h,f)}},t.prototype.transformLayers=function(t,e){var r=t.tx*t.scale,n=t.ty*t.scale;if(r!==this.transform.x||n!==this.transform.y||0===r||0===n){if(e){window.domTable[this.diagramId+"_diagramLayer"]||(window.domTable[this.diagramId+"_diagramLayer"]=this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer"));window.domTable[this.diagramId+"_diagramLayer"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")")}i.i(c.N)(this.diagramId).setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+")"),window.domTable[this.diagramId+"_diagramPorts"]||(window.domTable[this.diagramId+"_diagramPorts"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts"));window.domTable[this.diagramId+"_diagramPorts"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),window.domTable[this.diagramId+"_diagramExpander"]||(window.domTable[this.diagramId+"_diagramExpander"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander"));window.domTable[this.diagramId+"_diagramExpander"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),window.domTable[this.diagramId+"_nativeLayer"]||(window.domTable[this.diagramId+"_nativeLayer"]=this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer"));window.domTable[this.diagramId+"_nativeLayer"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")");return i.i(c.f)(this.diagramId).children[0].style.transform="translate("+t.tx*t.scale+"px,"+t.ty*t.scale+"px)scale("+t.scale+")",this.transform={x:t.tx*t.scale,y:t.ty*t.scale},!0}return!1},t.prototype.updateNode=function(t,e,i,r,n,o){this.renderElement(t,e,i,r,this.getParentSvg(t),void 0,void 0,n,null,o)},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return g});var r=i(8),n=i(7),o=i(22),a=i(4),s=i(3),h=i(28),d=i(29),l=i(4),c=i(2),p=i(0),g=(i.n(p),function(){function t(){}return t.prototype.renderShadow=function(t,e,n,o){void 0===n&&(n=null);var s,h,d={x:0,y:0},l=r.a.transform(d,t.shadow.angle,t.shadow.distance);o&&(h=o.getElementById(e.id+"_shadow")),h||(s=n?"path":"rect",h=document.createElementNS("http://www.w3.org/2000/svg",s),e.appendChild(h));var c={id:e.id+"_shadow",fill:t.shadow.color,stroke:t.shadow.color,opacity:t.shadow.opacity.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+(t.x+l.x)+","+(t.y+l.y)+")"};if(o){var p=o.getElementById(e.id);p&&p.insertBefore(h,p.firstChild)}i.i(a.e)(h,c),n?n&&this.renderPath(h,t,n):i.i(a.e)(h,{width:t.width,height:t.height})},t.prototype.parseDashArray=function(t){return[]},t.prototype.drawRectangle=function(t,e,r,n,o,s,h,d,l){e.shadow&&!n&&this.renderShadow(e,t,void 0,s);var c;c=e.id===t.id?e.id+"_container":e.id;var p;s&&(p=s.getElementById(c)),p&&!o||(p=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(p));var g;s&&!e.shadow&&(g=s.getElementById(e.id+"_groupElement_shadow"))&&g.parentNode.removeChild(g);var u;u=d?{id:c,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),visibility:e.visible?"visible":"hidden",transform:"rotate("+e.angle+","+(e.x+e.width/2)+","+(e.y+e.height/2)+")",rx:e.cornerRadius||0,ry:e.cornerRadius||0,opacity:e.opacity}:{id:c,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),visibility:e.visible?"visible":"hidden",transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",rx:e.cornerRadius||0,ry:e.cornerRadius||0,opacity:e.opacity},h&&(u.role="img",u["aria-label"]=h);var f=e.class||"";l||(f.includes("e-diagram-resize-handle")||f.includes("e-diagram-endpoint-handle")||f.includes("e-diagram-bezier-control-handle"))&&(f+=" e-disabled"),e.class&&(u.class=f);h||(u["pointer-events"]="none"),i.i(a.e)(p,u),this.setSvgStyle(p,e,r)},t.prototype.updateSelectionRegion=function(t,e){var r;r=t.parentNode.getElementById(e.id);var n={id:e.id,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",class:"e-diagram-selected-region"};r||(r=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(r)),this.setSvgStyle(r,e),i.i(a.e)(r,n)},t.prototype.createGElement=function(t,e){return i.i(l.d)(t,e)},t.prototype.drawLine=function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(r,e);var n=e.x+e.width*e.pivotX,o=e.y+e.height*e.pivotY,s={id:e.id,x1:e.startPoint.x+e.x,y1:e.startPoint.y+e.y,x2:e.endPoint.x+e.x,y2:e.endPoint.y+e.y,stroke:e.stroke,"stroke-width":e.strokeWidth.toString(),opacity:e.opacity.toString(),transform:"rotate("+e.angle+" "+n+" "+o+")",visibility:e.visible?"visible":"hidden"};e.class&&(s.class=e.class),i.i(a.e)(r,s),t.appendChild(r)},t.prototype.drawCircle=function(t,e,r,n){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(o,e);var s=e.class||"";r||(s+=" e-disabled");var h={id:e.id,cx:e.centerX,cy:e.centerY,r:e.radius,visibility:e.visible?"visible":"hidden",class:s};n&&(h.role="img",h["aria-label"]=n),o.style.display=e.visible?"block":"none",i.i(a.e)(o,h),t.appendChild(o)},t.prototype.drawPath=function(t,e,r,n,s,h,d){var l=(Math.floor(10*Math.random()+1),[]);l=i.i(o.a)(e.data),l=i.i(o.h)(l),e.shadow&&this.renderShadow(e,t,l,s);var c;s&&!e.shadow&&(c=s.getElementById(e.id+"_groupElement_shadow"))&&c.parentNode.removeChild(c);var p;s&&(p=s.getElementById(e.id)),p&&!n||(p=document.createElementNS("http://www.w3.org/2000/svg","path"),t.appendChild(p)),this.renderPath(p,e,l);var g={};g=d?{id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+"),scale("+d+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity}:{id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity},h&&(g.role="img",g["aria-label"]=h),e.class&&(g.class=e.class),i.i(a.e)(p,g),this.setSvgStyle(p,e,r)},t.prototype.renderPath=function(t,e,i){var r,n,o,a,s,h,d,l,c=i,p="";for(s=0,h=0,l=0,d=c.length;l<d;++l){var g=c[parseInt(l.toString(),10)],u=g,f=u.command;switch("x1"in u&&(r=u.x1),"x2"in u&&(o=u.x2),"y1"in u&&(n=u.y1),"y2"in u&&(a=u.y2),"x"in u&&(s=u.x),"y"in u&&(h=u.y),f){case"M":p=p+"M"+s.toString()+","+h.toString()+" ";break;case"L":p=p+"L"+s.toString()+","+h.toString()+" ";break;case"C":p=p+"C"+r.toString()+","+n.toString()+","+o.toString()+","+a.toString()+",",p+=s.toString()+","+h.toString()+" ";break;case"Q":p=p+"Q"+r.toString()+","+n.toString()+","+s.toString()+","+h.toString()+" ";break;case"A":p=p+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",p+=u.largeArc.toString()+","+u.sweep+","+s.toString()+","+h.toString()+" ";break;case"Z":case"z":p+="Z "}}t.setAttribute("d",p)},t.prototype.setSvgFontStyle=function(t,e){t.style.fontStyle=e.italic?"italic":"normal",t.style.fontWeight=e.bold?"bold":"normal",t.style.fontSize=e.fontSize.toString()+"px",t.style.fontFamily=e.fontFamily},t.prototype.drawText=function(t,e,r,n,o,h,l){if(void 0!==e.content){var c=void 0,p=void 0,g=void 0,u=void 0,f=void 0,m=void 0,y=0,v=0,b=0,S=void 0,w=void 0;if(r&&(S=r.getElementById(e.id+"_text")),S){if(e.doWrap)for(;S.firstChild;)S.removeChild(S.firstChild)}else if(e.doWrap=!0,S=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===e.whiteSpace&&S.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l&&(w=document.getElementById(l.id+"_content_groupElement")),w&&l&&l.children&&l.children[0]instanceof d.a){var x=this.createGElement("g",{id:n+"_groupElement"});w.appendChild(x),x.appendChild(S)}else t.appendChild(S);var I=e.x+e.width*e.pivotX,P=e.y+e.height*e.pivotY,C=0;if(e.doWrap||"Wrap"!==e.textOverflow){for(;S.firstChild;)S.removeChild(S.firstChild);for(this.setSvgStyle(S,e,o),this.setSvgFontStyle(S,e),c=document.createTextNode(e.content),p=e.childNodes,g=e.wrapBounds,u=this.svgLabelAlign(e,g,p),g.width>e.width&&"Wrap"!==e.textOverflow&&"NoWrap"===e.textWrapping&&(p[0].text=i.i(s.p)(e.content,e)),b=0;b<p.length;b++)if(m=document.createElementNS("http://www.w3.org/2000/svg","tspan"),c=document.createTextNode(p[parseInt(b.toString(),10)].text),f=p[parseInt(b.toString(),10)],f.x=i.i(a.K)(f,p,b,e),y=u.x+f.x-g.x,v=u.y+f.dy*b+.8*e.fontSize,"Clip"!==e.textOverflow&&"Ellipsis"!==e.textOverflow||"WrapWithOverflow"!==e.textWrapping&&"Wrap"!==e.textWrapping||!l)this.setText(S,m,f,c,y,v);else{var z=e.isHorizontalLane?l.actualSize.width:l.actualSize.height;if(!(v<z))break;if("Ellipsis"===e.textOverflow&&p[b+1]){var O=p[b+1],T=u.y+O.dy*(b+1)+.8*e.fontSize;T>z&&(f.text=f.text.slice(0,f.text.length-3),f.text=f.text.concat("..."),c.data=f.text)}this.setText(S,m,f,c,y,v),C+=f.dy}}C&&e.isHorizontalLane&&(I=e.parentOffsetX+e.pivotX,P=e.parentOffsetY+e.pivotY,e.y=e.parentOffsetY-C*e.pivotY+.5),e.textDecoration&&"LineThrough"===e.textDecoration&&(e.textDecoration=i.i(s.b)(e.textDecoration));var A={id:e.id+"_text",fill:e.color,visibility:e.visible?"visible":"hidden","text-decoration":e.textDecoration,transform:"rotate("+e.angle+","+I+","+P+")translate("+e.x+","+e.y+")",opacity:e.opacity};n&&(A.role="img",A["aria-label"]=n),i.i(a.e)(S,A)}},t.prototype.setText=function(t,e,r,n,o,s){i.i(a.e)(e,{x:o.toString(),y:s.toString()}),t.setAttribute("fill",r.text),e.appendChild(n),t.appendChild(e)},t.prototype.drawImage=function(t,e,r,n){var o;r&&(o=r.getElementById(e.id+"image")),o||(o=document.createElementNS("http://www.w3.org/2000/svg","image"),t.appendChild(o));var s=new Image;s.src=e.source;var h="None"!==e.scale?e.scale:"";i.i(p.isBlazor)()&&"None"===e.alignment&&"Stretch"===h&&(h="");var d=e.alignment,l=d.charAt(0).toLowerCase()+d.slice(1);"Stretch"!==h&&(l+=" "+h.charAt(0).toLowerCase()+h.slice(1));var c={id:e.id+"image",x:e.x.toString(),y:e.y.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",width:e.width.toString(),visibility:e.visible?"visible":"hidden",height:e.height.toString(),preserveAspectRatio:l,opacity:(e.opacity||1).toString()};i.i(a.e)(o,c),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.src.toString())},t.prototype.drawHTMLContent=function(t,e,r,n,o){var a,h;if(e){var d=void 0,c=void 0,p=void 0;for(d=0;d<e.childNodes.length;d++)for(p=e.childNodes[parseInt(d.toString(),10)],c=0;c<p.childNodes.length;c++)if(p.childNodes[parseInt(c.toString(),10)].id===t.id+"_html_element"){a=p.childNodes[parseInt(c.toString(),10)];break}}if(!a){if(!(h=e.querySelector("#"+t.id+"_html_element")||e.querySelector("#"+t.nodeId+"_html_element"))){var g={id:t.nodeId+"_html_element",class:"foreign-object"};h=i.i(l.a)("div",g)}var u={id:t.id+"_html_element",class:"foreign-object"};a=i.i(l.a)("div",u);var f=!1;e.parentNode&&e.parentNode.parentNode&&e.parentNode.parentNode.parentNode&&e.parentNode.parentNode.parentNode.classList.contains("e-overview")&&(f=!0),f?a.appendChild(t.template.cloneNode(!0)):t.isTemplate?a.appendChild(t.template):a.appendChild(t.template.cloneNode(!0)),void 0!==o&&e.childNodes.length>o&&e.insertBefore(a,e.childNodes[parseInt(o.toString(),10)]),h.appendChild(a),e.appendChild(h)}var m=i.i(s.k)(t).topLeft;a.setAttribute("style","height:"+t.actualSize.height+"px; width:"+t.actualSize.width+"px;left:"+m.x+"px; top:"+m.y+"px;position:absolute;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(n?"all":"none")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";")},t.prototype.drawNativeContent=function(t,e,r,n,o){var s,h;if(o&&(s=o.getElementById(t.id+"_native_element"),h=o.getElementById(t.id+"_clip")),!s){s=document.createElementNS("http://www.w3.org/2000/svg","g"),s.setAttribute("id",t.id+"_native_element"),s.appendChild(t.template.cloneNode(!0));var d=this.createGElement("g",{id:t.id+"_inner_native_element"});d.appendChild(s),e.appendChild(d)}h&&s.removeChild(h),s.setAttribute("style","visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";"),this.setNativTransform(t,s,r,n),"Slice"===t.scale&&this.drawClipPath(t,s,r,n,o),i.i(a.e)(s,t.description?{role:"img","aria-label":t.description}:{})},t.prototype.setNativTransform=function(t,e,i,r){var n=0!==t.contentSize.width?t.contentSize.width:1,o=0!==t.contentSize.height?t.contentSize.height:1,a=t.templatePosition.x*r/n,s=t.templatePosition.y*i/o;e.setAttribute("transform","rotate("+t.parentTransform+","+t.offsetX+","+t.offsetY+") translate("+(t.offsetX-a-r*t.pivot.x)+","+(t.offsetY-s-i*t.pivot.y)+") scale("+r/n+","+i/o+")")},t.prototype.drawClipPath=function(t,e,r,n,o){var s=t.contentSize.width,h=t.contentSize.height,d=t.width/(n/s),l=t.height/(r/h),p=t.templatePosition.x+(t.width>=t.height?0:(s-d)/2),g=t.templatePosition.y+(t.height>=t.width?0:(h-l)/2),u=o.getElementById(t.id+"_clip");u=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),u.setAttribute("id",t.id+"_clip"),e.appendChild(u);var f=o.getElementById(t.id+"_clip_rect");f=document.createElementNS("http://www.w3.org/2000/svg","rect"),u.appendChild(f);var m={id:t.id+"_clip_rect",width:d.toString(),height:l.toString(),x:p.toString(),y:g.toString()};return i.i(a.e)(f,m),i.i(c.K)()?e.setAttribute("clip-path","url("+location.protocol+"//"+location.host+location.pathname+"#"+t.id+"_clip)"):e.setAttribute("clip-path","url(#"+t.id+"_clip)"),e},t.prototype.renderGradient=function(t,e,r){var n,o,s,h=i.i(l.y)(r),d=h.getElementById(r+"gradient_pattern");d||(d=i.i(l.d)("defs",{id:r+"gradient_pattern"}),h.insertBefore(d,h.firstChild));var p,g;if(i.i(c.E)(e.id),"None"!==t.gradient.type){for(var u=0;u<t.gradient.stops.length;u++)n=n?Math.max(n,t.gradient.stops[parseInt(u.toString(),10)].offset):t.gradient.stops[parseInt(u.toString(),10)].offset,o=o?Math.min(o,t.gradient.stops[parseInt(u.toString(),10)].offset):t.gradient.stops[parseInt(u.toString(),10)].offset;"Linear"===t.gradient.type?(g=t.gradient,g.id=e.id+"_linear",s=this.createLinearGradient(g),d.appendChild(s)):(p=t.gradient,p.id=e.id+"_radial",s=this.createRadialGradient(p),d.appendChild(s));for(var u=0;u<t.gradient.stops.length;u++){var f=t.gradient.stops[parseInt(u.toString(),10)],m=o<0?(n+f.offset)/(2*n):f.offset/n,y=document.createElementNS("http://www.w3.org/2000/svg","stop");i.i(a.e)(y,{offset:m.toString(),style:"stop-color:"+f.color}),s.appendChild(y)}}return s},t.prototype.createLinearGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),r={id:t.id,x1:t.x1+"%",y1:t.y1+"%",x2:t.x2+"%",y2:t.y2+"%"};return i.i(a.e)(e,r),e},t.prototype.createRadialGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),r={id:t.id,cx:t.cx+"%",cy:t.cy+"%",r:t.r+"%",fx:t.fx+"%",fy:t.fy+"%"};return i.i(a.e)(e,r),e},t.prototype.setSvgStyle=function(t,e,r){if(e.canApplyStyle||void 0===e.canApplyStyle){"none"===e.fill&&(e.fill="transparent"),"none"===e.stroke&&(e.stroke="transparent");var n=[],o=void 0;if(e.dashArray){n=(new h.a).parseDashArray(e.dashArray)}if(e.gradient&&"None"!==e.gradient.type&&r){var a=this.renderGradient(e,t,r);o=i.i(c.K)()?"url("+location.protocol+"//"+location.host+location.pathname+"#"+a.id+")":"url(#"+a.id+")"}else o=e.fill;e.stroke&&t.setAttribute("stroke",e.stroke),void 0!==e.strokeWidth&&null!==e.strokeWidth&&t.setAttribute("stroke-width",e.strokeWidth.toString()),n&&t.setAttribute("stroke-dasharray",n.toString()||"none"),o&&t.setAttribute("fill",o)}},t.prototype.svgLabelAlign=function(t,e,i){var r=new n.a(e.width,i.length*(1.2*t.fontSize)),o={x:0,y:0},a=.5*t.width,s=.5*t.height,h=a,d=s;return"left"===t.textAlign?h=0:"center"===t.textAlign?h=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(h=1*t.width),o.x=0+h+(e?e.x:0),o.y=1.2+d-r.height/2,o},t}())},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(15),n=i(3),o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orientation="Vertical",e.measureChildren=void 0,e.considerPadding=!0,e}return o(e,t),e.prototype.measure=function(t){var e="Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack;return this.desiredSize=this.measureStackPanel(t,e),this.desiredSize},e.prototype.arrange=function(t){var e="Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack;return this.actualSize=this.arrangeStackPanel(t,e),this.updateBounds(),this.actualSize},e.prototype.measureStackPanel=function(e,r){var o=void 0;if(void 0!==this.children&&this.children.length>0)for(var a=0,s=this.children;a<s.length;a++){var h=s[a];h.parentTransform=this.rotateAngle+this.parentTransform,this.measureChildren?h.measure(h.desiredSize):h.measure(e);var d=h.desiredSize.clone();this.applyChildMargin(h,d),0!==h.rotateAngle&&(d=i.i(n.n)(d,h.rotateAngle)),void 0===o?o=d:h.preventContainer||r(d,o)}return o=t.prototype.validateDesiredSize.call(this,o,e),this.stretchChildren(o),this.considerPadding&&this.applyPadding(o),o},e.prototype.arrangeStackPanel=function(e,r){if(void 0!==this.children&&this.children.length>0){var o=void 0,a=void 0;o=this.offsetX-e.width*this.pivot.x+this.padding.left,a=this.offsetY-e.height*this.pivot.y+this.padding.top;for(var s=0,h=this.children;s<h.length;s++){var d=h[s],l=d.desiredSize.clone(),c=l;"Vertical"===this.orientation?a+=d.margin.top:o+=d.margin.left,0!==d.rotateAngle&&(c=i.i(n.n)(l,d.rotateAngle));var p=r(o,a,d,this,e,c);t.prototype.findChildOffsetFromCenter.call(this,d,p),d.arrange(l,!0),"Vertical"===this.orientation?a+=c.height+d.margin.bottom:o+=c.width+d.margin.right}}return e},e.prototype.updateHorizontalStack=function(t,e){e.height=Math.max(t.height,e.height),e.width+=t.width},e.prototype.updateVerticalStack=function(t,e){e.width=Math.max(t.width,e.width),e.height+=t.height},e.prototype.arrangeHorizontalStack=function(t,e,i,r,n,o){var a=0;if("Top"===i.verticalAlignment)a=e+i.margin.top+o.height/2;else if("Bottom"===i.verticalAlignment){var s=r.offsetY+n.height*(1-r.pivot.y);a=s-r.padding.bottom-i.margin.bottom-o.height/2}else a=r.offsetY-n.height*r.pivot.y+n.height/2,i.margin.top&&(a=e+i.margin.top+o.height/2);return{x:t+o.width/2,y:a}},e.prototype.arrangeVerticalStack=function(t,e,i,r,n,o){var a=0;if("Left"===i.horizontalAlignment)a=t+i.margin.left+o.width/2;else if("Right"===i.horizontalAlignment){var s=r.offsetX+n.width*(1-r.pivot.x);a=s-r.padding.right-i.margin.right-o.width/2}else a=r.offsetX-n.width*r.pivot.x+n.width/2,i.margin.left&&(a=t+i.margin.left+o.width/2);return{x:a,y:e+o.height/2}},e.prototype.stretchChildren=function(t){if(void 0!==this.children&&this.children.length>0)for(var e=0,i=this.children;e<i.length;e++){var r=i[e];"Vertical"===this.orientation?"Stretch"===r.horizontalAlignment&&(r.desiredSize.width=t.width-(r.margin.left+r.margin.right)):"Stretch"===r.verticalAlignment&&(r.desiredSize.height=t.height-(r.margin.top+r.margin.bottom))}},e.prototype.applyChildMargin=function(t,e){e.height+=t.margin.top+t.margin.bottom,e.width+=t.margin.left+t.margin.right},e}(r.a)},function(t,e,i){"use strict";i.d(e,"d",function(){return a}),i.d(e,"a",function(){return s}),i.d(e,"c",function(){return h}),i.d(e,"b",function(){return d});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)()],e.prototype,"key",void 0),o([i.i(r.Property)()],e.prototype,"keyModifiers",void 0),e}(r.ChildProperty),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getClassName=function(){return"Command"},o([i.i(r.Property)("")],e.prototype,"name",void 0),o([i.i(r.Property)()],e.prototype,"canExecute",void 0),o([i.i(r.Property)()],e.prototype,"execute",void 0),o([i.i(r.Complex)({},a)],e.prototype,"gesture",void 0),o([i.i(r.Property)("")],e.prototype,"parameter",void 0),e}(r.ChildProperty),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Collection)([],s)],e.prototype,"commands",void 0),e}(r.ChildProperty),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)()],e.prototype,"show",void 0),o([i.i(r.Property)()],e.prototype,"showCustomMenuOnly",void 0),o([i.i(r.Property)()],e.prototype,"items",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(0),n=(i.n(r),i(12)),o=i(30),a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.getClassName=function(){return"UserHandle"},s([i.i(r.Property)("")],e.prototype,"name",void 0),s([i.i(r.Property)("")],e.prototype,"pathData",void 0),s([i.i(r.Property)("")],e.prototype,"content",void 0),s([i.i(r.Property)("")],e.prototype,"source",void 0),s([i.i(r.Property)("#000000")],e.prototype,"backgroundColor",void 0),s([i.i(r.Property)("Top")],e.prototype,"side",void 0),s([i.i(r.Property)("")],e.prototype,"borderColor",void 0),s([i.i(r.Property)(.5)],e.prototype,"borderWidth",void 0),s([i.i(r.Property)(25)],e.prototype,"size",void 0),s([i.i(r.Property)("white")],e.prototype,"pathColor",void 0),s([i.i(r.Property)(10)],e.prototype,"displacement",void 0),s([i.i(r.Property)(!0)],e.prototype,"visible",void 0),s([i.i(r.Property)(0)],e.prototype,"offset",void 0),s([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),s([i.i(r.Property)("Center")],e.prototype,"horizontalAlignment",void 0),s([i.i(r.Property)("Center")],e.prototype,"verticalAlignment",void 0),s([i.i(r.Property)(!1)],e.prototype,"disableNodes",void 0),s([i.i(r.Property)(!1)],e.prototype,"disableConnectors",void 0),s([i.i(r.Complex)({},o.a)],e.prototype,"tooltip",void 0),s([i.i(r.Property)("")],e.prototype,"template",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";function r(t){return n[t.toString()]}e.a=r;var n={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"}},function(t,e,i){"use strict";function r(t){return n[t.toString()]}e.a=r;var n={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"}},function(t,e,i){"use strict";var r=i(92);i.d(e,"a",function(){return r.a})},function(t,e,i){"use strict";i.d(e,"b",function(){return h}),i.d(e,"a",function(){return c});var r=i(0),n=(i.n(r),i(47)),o=i(64),a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([i.i(r.Property)({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),s([i.i(r.Property)({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(r.ChildProperty),d="e-tip-bottom",l={ROOT:"e-popup",RTL:"e-rtl",OPEN:"e-popup-open",CLOSE:"e-popup-close"},c=function(){function t(t){this.isBlazorTooltip=!1,this.contentEvent=null,this.width="auto",this.height="auto",this.content="",this.target="",this.position="TopCenter",this.offsetX=0,this.offsetY=0,this.tipPointerPosition="Auto",this.openDelay=0,this.closeDelay=0,this.cssClass="",this.element=t,this.tipClass=d,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0,this.showTipPointer=!0}return t.prototype.open=function(t,e,n){i.i(r.isNullOrUndefined)(this.animation.open)&&(this.animation.open=this.element.tooltip&&this.element.tooltip.animation&&this.element.tooltip.animation.open),this.showTooltip(t,e)},t.prototype.updateTooltip=function(t){this.tooltipEle&&(this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),this.reposition(t),this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY))},t.prototype.formatPosition=function(){var t,e;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=e[0],this.tooltipPositionY=e[1])},t.prototype.destroy=function(){},t.prototype.close=function(){if(this.tooltipEle){i.i(r.removeClass)([this.tooltipEle],"e-popup-close"),i.i(r.addClass)([this.tooltipEle],"e-popup-open"),r.Animation.stop(this.tooltipEle);var t=void 0,e=this;e.isHidden=!0,this.animation.close&&(t={name:this.animation.close.effect,duration:this.animation.close.duration||0,delay:this.animation.close.delay||0,timingFunction:"easeOut"}),i.i(r.isNullOrUndefined)(t)?(i.i(r.removeClass)([this.tooltipEle],l.OPEN),i.i(r.addClass)([this.tooltipEle],l.CLOSE),i.i(r.remove)(this.tooltipEle),this.tooltipEle=null):(t.end=function(){e.isHidden&&(i.i(r.remove)(e.tooltipEle),e.tooltipEle=null)},new r.Animation(t).animate(this.tooltipEle))}},t.prototype.showTooltip=function(t,e,n){var o=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:n?n.type:null,cancel:!1,target:t,event:n||null,element:this.tooltipEle,isInteracted:!i.i(r.isNullOrUndefined)(n)};var a=function(i){o.beforeRenderCallback(i,t,n,e)};this.element.trigger("beforeRender",this.tooltipEventArgs,a.bind(this))},t.prototype.beforeRenderCallback=function(t,e,n,o){this.formatPosition();t.cancel?this.isHidden=!0:(this.isHidden=!1,i.i(r.isNullOrUndefined)(this.tooltipEle)?(this.ctrlId=this.element.element.id,this.tooltipEle=i.i(r.createElement)("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+i.i(r.formatUnit)(this.width)+";height:"+i.i(r.formatUnit)(this.height)+";position:absolute; pointer-events:none;"}),this.beforeRenderBlazor(e,this),r.Animation.stop(this.tooltipEle),this.afterRenderBlazor(e,n,o,this)):e&&(this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),r.Animation.stop(this.tooltipEle),this.reposition(e),this.afterRenderBlazor(e,n,o,this),this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY)))},t.prototype.afterRenderBlazor=function(t,e,n,o){var a=this;if(t){i.i(r.removeClass)([o.tooltipEle],"e-popup-open"),i.i(r.addClass)([o.tooltipEle],"e-popup-close"),o.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:t,event:e||null,element:o.tooltipEle,isInteracted:!i.i(r.isNullOrUndefined)(e)};var s=void 0;this.animation.open&&(s={name:this.animation.open.effect,duration:this.animation.open.duration||0,delay:this.animation.open.delay||0,timingFunction:"easeIn"}),i.i(r.isNullOrUndefined)(s)?(i.i(r.removeClass)([o.tooltipEle],"e-popup-close"),i.i(r.addClass)([o.tooltipEle],"e-popup-open")):(s.begin=function(){i.i(r.removeClass)([o.tooltipEle],l.CLOSE),i.i(r.addClass)([o.tooltipEle],l.OPEN)},s.end=function(){a.element.trigger("open")},new r.Animation(s).animate(this.tooltipEle))}},t.prototype.setTipClass=function(t){0===t.indexOf("Right")?this.tipClass="e-tip-left":0===t.indexOf("Bottom")?this.tipClass="e-tip-top":0===t.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass=d},t.prototype.renderArrow=function(){this.setTipClass(this.position);var t=i.i(r.createElement)("div",{className:"e-arrow-tip "+this.tipClass});t.appendChild(i.i(r.createElement)("div",{className:"e-arrow-tip-outer "+this.tipClass})),t.appendChild(i.i(r.createElement)("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(t)},t.prototype.getTooltipPosition=function(t){this.tooltipEle.style.display="block";var e=i.i(n.a)(t,this.tooltipPositionX,this.tooltipPositionY),r=this.calculateTooltipOffset(this.position),o=this.collisionFlipFit(t,e.left+r.left,e.top+r.top);return this.tooltipEle.style.display="",o},t.prototype.checkCollision=function(t,e,r){var n={left:e,top:r,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},a=i.i(o.a)(this.tooltipEle,this.target?this.element.element:null,e,r);return a.length>0&&(n.horizontal=a.indexOf("left")>=0?"Right":a.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=a.indexOf("top")>=0?"Bottom":a.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.collisionFlipFit=function(t,e,r){var a=this.checkCollision(t,e,r),s=a.position;if(this.tooltipPositionY!==a.vertical&&(s=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?a.vertical+this.tooltipPositionX:this.tooltipPositionX+a.vertical),this.tooltipPositionX!==a.horizontal&&(0===s.indexOf("Left")&&(a.vertical="LeftTop"===s||"LeftCenter"===s?"Top":"Bottom",s=a.vertical+"Left"),0===s.indexOf("Right")&&(a.vertical="RightTop"===s||"RightCenter"===s?"Top":"Bottom",s=a.vertical+"Right"),a.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:t,event:null,element:this.tooltipEle,collidedPosition:s},this.element.trigger("beforeCollision",this.tooltipEventArgs),a.position!==s){var h=i.i(n.a)(t,a.horizontal,a.vertical);this.adjustArrow(t,s,a.horizontal,a.vertical);var d=this.calculateTooltipOffset(s);d.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(s.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,d.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(s.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,a.position=s,a.left=h.left+d.left,a.top=h.top+d.top}else this.adjustArrow(t,s,a.horizontal,a.vertical);var l={left:a.left,top:a.top},c=i.i(o.b)(this.tooltipEle,this.target?this.element.element:null,{X:!0,Y:!1},l).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===s.indexOf("Bottom")||0===s.indexOf("Top"))){var p=this.tooltipEle.querySelector(".e-arrow-tip"),g=parseInt(p.style.left,10)-(c-a.left);g<0?g=0:g+p.offsetWidth>this.tooltipEle.clientWidth&&(g=this.tooltipEle.clientWidth-p.offsetWidth),p.style.left=g.toString()+"px"}return this.tooltipEle.style.display="",l.left=c,l},t.prototype.calculateTooltipOffset=function(t){var e={top:0,left:0},i=this.tooltipEle.offsetWidth,r=this.tooltipEle.offsetHeight,n=this.tooltipEle.querySelector(".e-arrow-tip"),o=n?n.offsetWidth:0,a=n?n.offsetHeight:0,s=this.showTipPointer?0:8,h=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),d=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(t){case"RightTop":e.left+=o+s,e.top-=r-h;break;case"RightCenter":e.left+=o+s,e.top-=r/2;break;case"RightBottom":e.left+=o+s,e.top-=h;break;case"BottomRight":e.top+=a+s,e.left-=d;break;case"BottomCenter":e.top+=a+s,e.left-=i/2;break;case"BottomLeft":e.top+=a+s,e.left-=i-d;break;case"LeftBottom":e.left-=o+i+s,e.top-=h;break;case"LeftCenter":e.left-=o+i+s,e.top-=r/2;break;case"LeftTop":e.left-=o+i+s,e.top-=r-h;break;case"TopLeft":e.top-=r+a+s,e.left-=i-d;break;case"TopRight":e.top-=r+a+s,e.left-=d;break;default:e.top-=r+a+s,e.left-=i/2}return e.left+=this.offsetX,e.top+=this.offsetY,e},t.prototype.reposition=function(t){var e=this.getTooltipPosition(t);this.tooltipEle.style.left=e.left+"px",this.tooltipEle.style.top=e.top+"px"},t.prototype.beforeRenderBlazor=function(t,e){if(t){r.Browser.isDevice&&i.i(r.addClass)([e.tooltipEle],"e-bigger"),"auto"!==e.width&&(e.tooltipEle.style.maxWidth=i.i(r.formatUnit)(e.width)),e.tooltipEle.appendChild(i.i(r.createElement)("div",{className:"e-tip-content e-diagramTooltip-content"})),document.body.appendChild(e.tooltipEle),i.i(r.addClass)([e.tooltipEle],"e-popup-open"),i.i(r.removeClass)([e.tooltipEle],"e-hidden"),e.addDescribedBy(t,e.ctrlId+"_content"),e.renderContent(t),i.i(r.addClass)([e.tooltipEle],"e-popup-open"),this.showTipPointer&&e.renderArrow();var n=this.getTooltipPosition(t);this.tooltipEle.classList.remove("e-lib"),this.tooltipEle.style.left=n.left+"px",this.tooltipEle.style.top=n.top+"px",e.reposition(t),e.adjustArrow(t,e.position,e.tooltipPositionX,e.tooltipPositionY)}},t.prototype.addDescribedBy=function(t,e){var n=(t.getAttribute("aria-describedby")||"").split(/\s+/);n.indexOf(e)<0&&n.push(e),i.i(r.attributes)(t,{"aria-describedby":n.join(" ").trim(),"data-tooltip-id":e})},t.prototype.renderContent=function(t){var e=this.tooltipEle.querySelector(".e-tip-content");if(this.cssClass&&i.i(r.addClass)([this.tooltipEle],this.cssClass.split(" ")),t&&!i.i(r.isNullOrUndefined)(t.getAttribute("title"))&&(t.setAttribute("data-content",t.getAttribute("title")),t.removeAttribute("title")),i.i(r.isNullOrUndefined)(this.content))t&&!i.i(r.isNullOrUndefined)(t.getAttribute("data-content"))&&(e.innerHTML=t.getAttribute("data-content"));else if(this.isBlazorTooltip,!0)if(e.innerHTML="",this.content instanceof HTMLElement)e.appendChild(this.content);else if("string"==typeof this.content&&this.content.indexOf("<div>Blazor")<0)e.innerHTML=this.content;else{var n=i.i(r.compile)(this.content);i.i(r.append)(n({},null,null,this.element.element.id+"content"),e),"string"==typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,i.i(r.updateBlazorTemplate)(this.element.element.id+"content","Content",this))}},t.prototype.updateTipPosition=function(t){var e=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner"),n=[d,"e-tip-top","e-tip-left","e-tip-right"];i.i(r.removeClass)(e,n),this.setTipClass(t),i.i(r.addClass)(e,this.tipClass)},t.prototype.adjustArrow=function(t,e,i,r){if(this.showTipPointer){this.updateTipPosition(e);var n,o;this.tooltipEle.style.display="block";var a=this.tooltipEle.clientWidth,s=this.tooltipEle.clientHeight,h=this.tooltipEle.querySelector(".e-arrow-tip"),l=this.tooltipEle.querySelector(".e-arrow-tip-inner"),c=h.offsetWidth,p=h.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===d||"e-tip-top"===this.tipClass){if(this.tipClass===d?(o="99.9%",l.style.top="-"+(p-2)+"px"):(o=-(p-1)+"px",l.style.top="-"+(p-6)+"px"),t){var g="Center"!==i||a>t.offsetWidth;n=g&&"Left"===i||!g&&"End"===this.tipPointerPosition?a-c-2+"px":g&&"Right"===i||!g&&"Start"===this.tipPointerPosition?"2px":a/2-c/2+"px"}}else{"e-tip-right"===this.tipClass?(n="99.9%",l.style.left="-"+(c-2)+"px"):(n=-(c-1)+"px",l.style.left=c-2-c+"px");var g="Center"!==r||s>t.offsetHeight;o=g&&"Top"===r||!g&&"End"===this.tipPointerPosition?s-p-2+"px":g&&"Bottom"===r||!g&&"Start"===this.tipPointerPosition?"2px":s/2-p/2+"px"}h.style.top=o,h.style.left=n}},t.prototype.getModuleName=function(){return"BlazorTooltip"},t}()},function(t,e,i){"use strict";function r(t,e,i,r,n){if(m=i+e==="topright"?void 0:n,m=n,S=!!r,!t)return{left:0,top:0};e||(e="left"),i||(i="top"),v=t.ownerDocument,y=t;var o={left:0,top:0};return a(e.toLowerCase(),i.toLowerCase(),o)}function n(t,e){e.left=t}function o(t,e){e.top=t}function a(t,e,i){switch(f=y.getBoundingClientRect(),e+t){case"topcenter":n(u(),i),o(c(),i);break;case"topright":n(g(),i),o(c(),i);break;case"centercenter":n(u(),i),o(l(),i);break;case"centerright":n(g(),i),o(l(),i);break;case"centerleft":n(p(),i),o(l(),i);break;case"bottomcenter":n(u(),i),o(d(),i);break;case"bottomright":n(g(),i),o(d(),i);break;case"bottomleft":n(p(),i),o(d(),i);break;default:case"topleft":n(p(),i),o(c(),i)}return i}function s(){return v.documentElement.scrollTop||v.body.scrollTop}function h(){return v.documentElement.scrollLeft||v.body.scrollLeft}function d(){return S?f.bottom:f.bottom+s()}function l(){return c()+f.height/2}function c(){return S?f.top:f.top+s()}function p(){return f.left+h()}function g(){return f.right+h()-(m?m.width:0)}function u(){return p()+f.width/2}e.a=r;var f,m,y,v,b=i(0),S=(i.n(b),!1)},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)("")],e.prototype,"action",void 0),o([i.i(r.Property)("")],e.prototype,"cursor",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)("")],e.prototype,"property",void 0),o([i.i(r.Property)("")],e.prototype,"field",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"c",function(){return h}),i.d(e,"a",function(){return d});var r=i(0),n=(i.n(r),i(49)),o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Property)("")],e.prototype,"read",void 0),a([i.i(r.Property)("")],e.prototype,"create",void 0),a([i.i(r.Property)("")],e.prototype,"update",void 0),a([i.i(r.Property)("")],e.prototype,"destroy",void 0),a([i.i(r.Property)()],e.prototype,"customFields",void 0),e}(r.ChildProperty),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Property)("")],e.prototype,"id",void 0),a([i.i(r.Property)("")],e.prototype,"sourceID",void 0),a([i.i(r.Property)("")],e.prototype,"targetID",void 0),a([i.i(r.Property)(null)],e.prototype,"sourcePointX",void 0),a([i.i(r.Property)(null)],e.prototype,"sourcePointY",void 0),a([i.i(r.Property)(null)],e.prototype,"targetPointX",void 0),a([i.i(r.Property)(null)],e.prototype,"targetPointY",void 0),a([i.i(r.Property)(null)],e.prototype,"dataManager",void 0),a([i.i(r.Complex)({},s)],e.prototype,"crudAction",void 0),e}(r.ChildProperty),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Property)("")],e.prototype,"id",void 0),a([i.i(r.Property)(null)],e.prototype,"dataManager",void 0),a([i.i(r.Property)(null)],e.prototype,"dataSource",void 0),a([i.i(r.Property)("")],e.prototype,"root",void 0),a([i.i(r.Property)("")],e.prototype,"parentId",void 0),a([i.i(r.Property)()],e.prototype,"doBinding",void 0),a([i.i(r.Collection)([],n.a)],e.prototype,"dataMapSettings",void 0),a([i.i(r.Complex)({},s)],e.prototype,"crudAction",void 0),a([i.i(r.Complex)({},h)],e.prototype,"connectionDataSource",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"a",function(){return h});var r=i(0),n=(i.n(r),i(1)),o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Property)("lightgray")],e.prototype,"lineColor",void 0),a([i.i(r.Property)("")],e.prototype,"lineDashArray",void 0),a([i.i(r.Property)([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],e.prototype,"lineIntervals",void 0),a([i.i(r.Property)([1,19,.5,19.5,.5,19.5,.5,19.5,.5,19.5])],e.prototype,"dotIntervals",void 0),a([i.i(r.Property)([20])],e.prototype,"snapIntervals",void 0),e}(r.ChildProperty),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Complex)({},s)],e.prototype,"horizontalGridlines",void 0),a([i.i(r.Complex)({},s)],e.prototype,"verticalGridlines",void 0),a([i.i(r.Property)(n.w.All)],e.prototype,"constraints",void 0),a([i.i(r.Property)(5)],e.prototype,"snapAngle",void 0),a([i.i(r.Property)("Lines")],e.prototype,"gridType",void 0),a([i.i(r.Property)(5)],e.prototype,"snapObjectDistance",void 0),a([i.i(r.Property)("#07EDE1")],e.prototype,"snapLineColor",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(e,i,r,n){var o=t.call(this,e,i,r,n)||this;return o.objectZIndex=-1,o.zIndexTable={},o.objects=[],o}return n(e,t),o([i.i(r.Property)("")],e.prototype,"id",void 0),o([i.i(r.Property)(!0)],e.prototype,"visible",void 0),o([i.i(r.Property)(!1)],e.prototype,"lock",void 0),o([i.i(r.Property)()],e.prototype,"objects",void 0),o([i.i(r.Property)()],e.prototype,"addInfo",void 0),o([i.i(r.Property)(-1)],e.prototype,"zIndex",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return T});var r=i(10),n=i(6),o=i(17),a=i(11),s=i(5),h=i(32),d=i(16),l=i(3),c=i(2),p=i(26),g=i(1),u=i(9),f=i(4),m=i(8),y=i(7),v=i(52),b=i(0),S=(i.n(b),i(18)),w=i(20),x=i(19),I=i(13),P=i(13),C=i(60),z=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function a(t){try{h(r.next(t))}catch(t){o(t)}}function s(t){try{h(r.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}h((r=r.apply(t,e||[])).next())})},O=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,o=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(t){i=[6,t],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,o,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},T=function(){function t(t){this.clipboardData={},this.diagramObject={},this.newSelectedObjects={},this.oldSelectedObjects={},this.connectorsTable=[],this.PreventConnectorSplit=!1,this.processTable={},this.deepDiffer=new C.a,this.isContainer=!1,this.canUpdateTemplate=!1,this.childTable={},this.parentTable={},this.blazor="Blazor",this.blazorInterop="sfBlazor",this.cloneGroupChildCollection=[],this.diagram=t}return Object.defineProperty(t.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),t.prototype.startTransaction=function(t){this.state={element:this.diagram.selectedItems,backup:null},t&&this.diagram.protectPropertyChange(!0),i.i(f.D)(this.diagram.element.id).style.pointerEvents="none"},t.prototype.endTransaction=function(t){this.state=null,t&&this.diagram.protectPropertyChange(!1),i.i(f.D)(this.diagram.element.id).style.pointerEvents="all"},t.prototype.setFocus=function(){document.getElementById(this.diagram.element.id).focus()},t.prototype.showTooltip=function(t,e,r,o,a){var s,h,d=this,c=!1;if(t instanceof n.G?1===t.nodes.length&&0===t.connectors.length?(s=t.nodes[0].id,t.nodes[0].shape&&t.nodes[0].shape instanceof n.d&&(c=!0)):0===t.nodes.length&&1===t.connectors.length?s=t.connectors[0].id:h=document.getElementById(this.diagram.element.id+"_SelectorElement"):t instanceof n.a?(s=t.id,t.shape&&t.shape instanceof n.d&&(c=!0)):s=t.id,i.i(b.isNullOrUndefined)(h)&&!i.i(b.isNullOrUndefined)(s)){var p=c?"_content_native_element":"_groupElement";h=document.getElementById(s+p)}if(a&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var g=void 0,u=i.i(l.h)(this.diagram.selectedItems.setTooltipTemplate);u&&(g=u(t,this.diagram)),r=g instanceof HTMLElement?g.cloneNode(!0):g||r}i.i(b.isBlazor)()&&a&&this.diagram.tooltipObject.close(),t.tooltip&&(this.diagram.tooltipObject.openOn=t.tooltip.openOn),this.diagram.tooltipObject.content=r,this.diagram.tooltipObject.offsetX=0,this.diagram.tooltipObject.offsetY=0,i.i(b.isBlazor)()?this.diagram.tooltipObject.updateTooltip(h):this.diagram.tooltipObject.refresh(h),a&&setTimeout(function(){d.diagram.tooltipObject.open(h)},1)},t.prototype.connectorSplit=function(t,e){var r,n=t.id,o=i.i(l.e)(e);r=this.diagram.connectors.indexOf(e);var a;a=this.diagram.nodes.indexOf(t);var s=i.i(l.e)(t),h={},d={},c={offsetX:s.offsetX,offsetY:s.offsetY},p={sourceID:o.sourceID,sourcePoint:o.sourcePoint,sourcePortID:o.sourcePortID,targetID:o.targetID,targetPoint:o.targetPoint,targetPortID:o.targetPortID};h[parseInt(r.toString(),10)]=p,d[parseInt(a.toString(),10)]=c;var u={},f={},m={},y={};if(""!==o.sourceID&&""!==o.targetID?y.targetID=this.ConnectorTargetChange(e,n):""!==o.sourceID&&""===o.targetID?(this.nodeOffsetChange(m,s,e.targetPoint),y.targetID=this.ConnectorTargetChange(e,n)):(""===o.sourceID&&""===o.targetID||""===o.sourceID&&""!==o.targetID)&&(this.nodeOffsetChange(m,s,e.sourcePoint),y.sourceID=this.ConnectorSourceChange(e,n)),u[parseInt(r.toString(),10)]=y,f[parseInt(a.toString(),10)]=m,this.diagram.nodePropertyChange(t,c,m),this.diagram.updateSelector(),this.diagram.connectorPropertyChange(e,p,y),""!==o.sourceID&&""!==o.targetID){var v={id:"connector "+n,constraints:g.h.Default|g.h.AllowDrop,sourceID:n};""!==o.sourcePortID&&""!==o.targetPortID?(v.targetID=o.targetID,v.targetPortID=o.targetPortID):v.targetID=o.targetID,this.diagram.add(v)}var b={type:"PropertyChanged",redoObject:{nodes:f},undoObject:{nodes:d},category:"Internal"};this.diagram.addHistoryEntry(b);var S={type:"PropertyChanged",redoObject:{connectors:u},undoObject:{connectors:h},category:"Internal"};this.diagram.addHistoryEntry(S)},t.prototype.nodeOffsetChange=function(t,e,i){t.offsetX=e.offsetX=i.x,t.offsetY=e.offsetY=i.y},t.prototype.ConnectorTargetChange=function(t,e){return t.targetID=e,e},t.prototype.ConnectorSourceChange=function(t,e){return t.sourceID=e,e},t.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},t.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&g.g.ToolTip)},t.prototype.updateSelector=function(){this.diagram.updateSelector()},t.prototype.updateConnectorValue=function(t){if(t.cancel){this.enableCloneObject(!0),this.ismouseEvents(!0),this.insertBlazorObject(t.connector);var e={},i={},r=this.diagram.nameTable[t.connector.id],n="ConnectorSourceEnd"===t.connectorEnd?"sourceID":"targetID",o="ConnectorSourceEnd"===t.connectorEnd?"sourcePortID":"targetPortID",a="ConnectorTargetEnd"===t.connectorEnd,s=a?t.newValue.connectorTargetValue:t.newValue.connectorSourceValue,h=a?t.oldValue.connectorTargetValue:t.oldValue.connectorSourceValue;i[""+n]=s.nodeId,i[""+o]=s.portId,e[""+n]=h.nodeId,e[""+o]=h.portId,t.cancel&&"ConnectorTargetEnd"!==t.connectorEnd&&(r.sourceID=h.nodeId,t.connector.sourcePortID&&(r.sourcePortID=h.portId),this.diagram.connectorPropertyChange(r,i,e)),t.cancel&&"ConnectorTargetEnd"===t.connectorEnd&&(t.connector.targetPortID&&(r.targetPortID=h.portId),r.targetID=h.nodeId,this.diagram.connectorPropertyChange(r,i,e))}},t.prototype.triggerEvent=function(t,e){return z(this,void 0,void 0,function(){var r;return O(this,function(n){switch(n.label){case 0:if(t===g.r.drop||t===g.r.positionChange||t===g.r.connectionChange){if(this.diagram.currentSymbol)return[2];if(t===g.r.drop&&(e.source=i.i(c.b)(this.diagram)),this.diagram.currentDrawingObject&&t!==g.r.positionChange)return[2]}return[4,this.diagram.triggerEvent(t,e)];case 1:return r=n.sent(),[2,r]}})})},t.prototype.dragOverElement=function(t,e){if(this.diagram.currentSymbol){var r={element:i.i(c.b)(t.source),target:i.i(c.b)(t.target),mousePosition:i.i(c.b)(e),diagram:i.i(c.b)(this.diagram)};this.triggerEvent(g.r.dragOver,r)}},t.prototype.disConnect=function(t,e,o){var a,s,h,d=i.i(b.isBlazor)(),u={},f={};if(t instanceof n.G?(s=t,h=s.connectors[0]):t instanceof r.a&&this.diagram.currentDrawingObject&&(h=this.diagram.currentDrawingObject),t&&h&&(i.i(p.e)(this.diagram)||this.diagram.currentDrawingObject))if(i.i(b.isBlazor)()&&this.diagram.insertValue(i.i(l.e)(h),!1),!e||"ConnectorSourceEnd"!==e&&"ConnectorTargetEnd"!==e){if("OrthoThumb"!==e&&"SegmentEnd"!==e&&(h.sourceID||h.targetID)){u={sourceID:h.sourceID,sourcePortID:h.sourcePortID,targetID:h.targetID,targetPortID:h.targetPortID},h.sourceID="",h.sourcePortID="",h.targetID="",h.targetPortID="",f={sourceID:h.sourceID,sourcePortID:h.sourcePortID,targetID:h.targetID,targetPortID:h.targetPortID};var m={connector:i.i(c.b)(h),oldValue:u,newValue:f,cancel:!1,state:"Changing",connectorEnd:e};i.i(b.isBlazor)()&&(m={connector:i.i(c.b)(h),oldValue:{connector:i.i(c.b)(u)},newValue:{connector:i.i(c.b)(f)},cancel:!1,state:"Changed",connectorEnd:e},a=m),d||this.triggerEvent(g.r.connectionChange,m),m.cancel?(h.sourceID=u.sourceID,h.sourcePortID=u.sourcePortID,h.targetID=u.targetID,h.targetPortID=u.targetPortID):(this.diagram.connectorPropertyChange(h,u,f),this.diagram.updateDiagramObject(h),m={connector:h,oldValue:u,newValue:f,cancel:!1,state:"Changed",connectorEnd:e},i.i(b.isBlazor)()&&(m={connector:i.i(c.b)(h),oldValue:{connector:u},newValue:{connector:f},cancel:!1,state:"Changed",connectorEnd:e},a=m),d||this.triggerEvent(g.r.connectionChange,m))}}else{var y="ConnectorSourceEnd"===e?"sourceID":"targetID",v="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";h[""+y]&&(u[""+y]=h[""+y],h[""+y]="",f[""+y]=h[""+y],(h.sourcePortID||h.targetPortID)&&(u[""+v]=h[""+v],h[""+v]="",f[""+v]=h[""+v]),a=this.connectionEventChange(h,u,f,e,o))}return a},t.prototype.connectionEventChange=function(t,e,r,n,o){var a,s=i.i(b.isBlazor)(),h="ConnectorSourceEnd"===n?"sourceID":"targetID",d="ConnectorSourceEnd"===n?"sourcePortID":"targetPortID";if(this.enableCloneObject){a=this.diagram.nameTable[r[""+h]];var p=i.i(l.e)(a);this.diagram.insertValue(p,!0)}var u,f={cancel:!1,state:"Changing",connectorEnd:n,connector:i.i(c.b)(t),oldValue:{nodeId:e[""+h],portId:e[""+d]},newValue:{nodeId:r[""+h],portId:r[""+d]}};if(i.i(b.isBlazor)()&&(f={connector:i.i(c.b)(t),cancel:!1,state:"Changing",connectorEnd:n,oldValue:void 0,newValue:void 0},"ConnectorSourceEnd"===n?(f.oldValue={connectorSourceValue:{portId:e[""+d],nodeId:e[""+h]}},f.newValue={connectorSourceValue:{nodeId:r[""+h],portId:r[""+d]}}):(f.oldValue={connectorTargetValue:{nodeId:e[""+h],portId:e[""+d]}},f.newValue={connectorTargetValue:{nodeId:r[""+h],portId:r[""+d]}}),u=f),s||this.triggerEvent(g.r.connectionChange,f),f.cancel||i.i(b.isBlazor)()&&o?(t[""+h]=e[""+h],t[""+d]=e[""+d],r=e):(this.diagram.connectorPropertyChange(t,e,r),this.diagram.updateDiagramObject(t),f={connector:i.i(c.b)(t),oldValue:{nodeId:e[""+h],portId:e[""+d]},newValue:{nodeId:r[""+h],portId:r[""+d]},cancel:!1,state:"Changing",connectorEnd:n},i.i(b.isBlazor)()&&(f={connector:i.i(c.b)(t),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:n},"ConnectorSourceEnd"===n?(f.newValue={connectorSourceValue:{portId:r[""+d],nodeId:r[""+h]}},f.oldValue={connectorSourceValue:{portId:e[""+d],nodeId:e[""+h]}}):(f.oldValue={connectorTargetValue:{nodeId:e[""+h],portId:e[""+d]}},f.newValue={connectorTargetValue:{portId:r[""+d],nodeId:r[""+h]}}),u=f)),this.enableCloneObject&&void 0===a){a=this.diagram.nameTable[e[""+h]];var p=i.i(l.e)(a);this.diagram.insertValue(p,!0)}return u},t.prototype.insertBlazorObject=function(t,e){var r,o;if(t instanceof n.G){this.oldSelectedObjects=i.i(c.N)(this.diagram);for(var a=0;a<t.nodes.length;a++)r=this.diagram.getObject(t.nodes[parseInt(a.toString(),10)].id),this.diagram.insertValue(i.i(l.e)(r),!0);for(var a=0;a<t.connectors.length;a++)o=this.diagram.getObject(t.connectors[parseInt(a.toString(),10)].id),this.diagram.insertValue(i.i(l.e)(o),!1)}else t=this.diagram.getObject(t.id),this.diagram.insertValue(i.i(l.e)(t),t instanceof n.a)},t.prototype.updatePropertiesToBlazor=function(t,e){this.enableCloneObject(!1),this.ismouseEvents(!1),this.getBlazorOldValues(t,e),this.updateBlazorSelector()},t.prototype.insertSelectedObjects=function(){this.oldSelectedObjects=i.i(c.N)(this.diagram)},t.prototype.findTarget=function(t,e,r,a){if(e instanceof n.a){if(t&&t.id===e.id+"_content")return e;if(r&&"Bpmn"===e.shape.type&&(!i.i(b.isBlazor)()&&"Activity"===e.shape.shape||i.i(b.isBlazor)()&&"Activity"===e.shape.bpmnShape)&&"Transaction"===e.shape.activity.subProcess.type){var s=e.shape.activity.subProcess.transaction;if(s.success.visible&&0===t.id.indexOf(e.id+"_success"))return s.success;if(s.cancel.visible&&0===t.id.indexOf(e.id+"_cancel"))return s.cancel;if(s.failure.visible&&0===t.id.indexOf(e.id+"_failure"))return s.failure}if(t instanceof o.a)for(var h=0;h<e.ports.length;h++){var d=e.ports[parseInt(h.toString(),10)];if(t.id===e.id+"_"+d.id)return d}}if(!a)for(var l=void 0,h=0;h<e.annotations.length;h++)if(l=e.annotations[parseInt(h.toString(),10)],t.id===e.id+"_"+l.id)return l;return e},t.prototype.canDisconnect=function(t,e,i,o){var a,s;e.source instanceof n.G?(a=e.source,s=a.connectors[0]):e.source instanceof r.a&&this.diagram.currentDrawingObject&&(s=this.diagram.currentDrawingObject);var h=(this.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===t,!0),"ConnectorSourceEnd"===t?"sourceID":"targetID"),d="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";return s[""+h]!==o||s[""+d]!==i},t.prototype.changeAnnotationDrag=function(t){var e,r;if(t.source&&t.source.connectors&&t.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t.source.connectors[0])>-1){t.source instanceof n.G&&(e=t.source,r=e.connectors[0]);var o=r.id.split("_"),a=(o[o.length-1],o[o.length-3]||o[0]);if(t.target&&t.target.id!==a&&(!i.i(b.isBlazor)()&&"TextAnnotation"!==t.target.shape.shape||i.i(b.isBlazor)()&&"TextAnnotation"!==t.target.shape.bpmnShape)){this.diagram.startGroupAction();var s=this.diagram.nameTable[o[0]],h=this.getAnnotation(s,o[1]),d={id:o[1]+i.i(l.g)(),angle:m.a.findAngle(r.intermediatePoints[0],r.intermediatePoints[1]),text:h.text,length:m.a.distancePoints(r.intermediatePoints[0],r.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:h.nodeId},c=new n.v(t.target.shape,"annotations",d,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[r.targetID],this.diagram),this.diagram.refreshCanvasLayers(),c.id=o[1],this.diagram.addTextAnnotation(c,t.target),this.diagram.endGroupAction()}else r&&(r.sourceID=a,this.diagram.connectorPropertyChange(r,{},{sourceID:a}),this.diagram.updateDiagramObject(r))}},t.prototype.connect=function(t,e,o){var a,s,h,d,l,p={},u={};e.source instanceof n.G?(h=e.source,d=h.connectors[0]):e.source instanceof r.a&&this.diagram.currentDrawingObject&&(d=this.diagram.currentDrawingObject);var f=this.findTarget(e.targetWrapper||e.sourceWrapper,e.target||e.actualObject,"ConnectorSourceEnd"===t,!0),m="ConnectorSourceEnd"===t?"sourceID":"targetID",y="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";if(f instanceof n.a)u[""+m]=d[""+m],d[""+m]=f.id,p[""+m]=d[""+m],u[""+y]=d[""+y],l=this.connectionEventChange(d,u,p,t,o);else{a=d[""+m],s=d[""+y],d[""+y]=f.id,d[""+m]=e.target&&e.target.id||e.actualObject.id,p[""+m]=d[""+m],p[""+y]=d[""+y];var v={connector:i.i(c.b)(d),oldValue:{nodeId:a,portId:s},newValue:{nodeId:p[""+m],portId:p[""+y]},cancel:!1,state:"Changing",connectorEnd:t};i.i(b.isBlazor)()&&(v={connector:i.i(c.b)(d),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:t},"ConnectorSourceEnd"===t?(v.oldValue={connectorSourceValue:{portId:u[""+y],nodeId:u[""+m]}},v.newValue={connectorSourceValue:{portId:p[""+y],nodeId:p[""+m]}}):(v.newValue={connectorTargetValue:{portId:p[""+y],nodeId:p[""+m]}},v.oldValue={connectorTargetValue:{portId:u[""+y],nodeId:u[""+m]}}),l=v),this.triggerEvent(g.r.connectionChange,v),v.cancel||i.i(b.isBlazor)()&&o?(d[""+m]=a,d[""+y]=s,p[""+m]=a,p[""+y]=s):(this.diagram.connectorPropertyChange(d,u,p),this.diagram.updateDiagramObject(d),v={connector:i.i(c.b)(d),oldValue:{nodeId:a,portId:s},newValue:{nodeId:p[""+m],portId:p[""+y]},cancel:!1,state:"Changing",connectorEnd:t},i.i(b.isBlazor)()&&(v={newValue:void 0,connector:i.i(c.b)(d),oldValue:void 0,cancel:!1,state:"Changing",connectorEnd:t},"ConnectorSourceEnd"===t?(v.oldValue={connectorSourceValue:{portId:u[""+y],nodeId:u[""+m]}},v.newValue={connectorTargetValue:{portId:p[""+y],nodeId:p[""+m]}}):(v.oldValue={connectorTargetValue:{portId:u[""+y],nodeId:u[""+m]}},v.newValue={connectorTargetValue:{portId:p[""+y],nodeId:p[""+m]}})))}return this.renderHighlighter(e,void 0,"ConnectorSourceEnd"===t),l},t.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},t.prototype.UpdateBlazorDiagramModelLayers=function(t,e){var r=i.i(c.b)(t);if(window&&window.Blazor){var n={methodName:"UpdateBlazorDiagramModelLayers",diagramobj:JSON.stringify(r),isRemove:e};this.diagram.isLoading||window.sfBlazor.updateBlazorProperties(n,this.diagram)}},t.prototype.addLayer=function(t,e,r){void 0===r&&(r=!0),t.id=t.id||i.i(l.g)(),t.zIndex=this.diagram.layers.length;var n=this.diagram.allowServerDataBinding;this.diagram.enableServerDataBinding(!1),t=new v.a(this.diagram,"layers",t,!0),this.diagram.enableServerDataBinding(n),t.objectZIndex=-1,t.zIndexTable={},this.diagram.layers.push(t),r&&this.UpdateBlazorDiagramModelLayers(t,!1),this.diagram.layerZIndexTable[t.zIndex]=t.id,this.diagram.activeLayer=t;t.objects;if(e)for(var o=0;o<e.length;o++)this.diagram.add(e[parseInt(o.toString(),10)])},t.prototype.getObjectLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++){if(e[parseInt(i.toString(),10)].objects.indexOf(t)>-1)return e[parseInt(i.toString(),10)]}return this.diagram.activeLayer},t.prototype.getLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++)if(e[parseInt(i.toString(),10)].id===t)return e[parseInt(i.toString(),10)]},t.prototype.removeLayer=function(t,e){void 0===e&&(e=!0);var i=this.getLayer(t);if(i){for(var r=this.diagram.layers.indexOf(i),n=i.objects,o=n.length-1;o>=0;o--)this.diagram.unSelect(this.diagram.nameTable[n[parseInt(o.toString(),10)]]),this.diagram.remove(this.diagram.nameTable[n[parseInt(o.toString(),10)]]),"default_layer"!==i.id&&this.diagram.activeLayer.id===t&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);e&&this.UpdateBlazorDiagramModelLayers(this.diagram.layers[parseInt(r.toString(),10)],!0),delete this.diagram.layerZIndexTable[i.zIndex],this.diagram.layers.splice(r,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.moveObjects=function(t,e){var i=this.getLayer(e)||this.diagram.activeLayer;this.diagram.setActiveLayer(i.id);for(var r,n=0,o=t;n<o.length;n++){var a=o[n];this.getObjectLayer(a).objects.indexOf(a)>-1&&(r=this.diagram.nameTable[""+a],this.diagram.unSelect(r),this.diagram.remove(this.diagram.nameTable[""+a]),this.diagram.add(r))}},t.prototype.cloneLayer=function(t){var e=(this.diagram.layers,this.getLayer(t));if(e){var r=[],n={id:t+"_"+i.i(l.g)(),objects:[],visible:!0,lock:!1};this.addLayer(n,null,!0),n.zIndex=this.diagram.layers.length-1;for(var o=(r.length,0),a=e.objects;o<a.length;o++){var s=a[o];r.push(this.diagram.nameTable[""+s])}this.paste(r)}},t.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},t.prototype.copyObjects=function(){var t=[],e=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){t=this.diagram.selectedItems.connectors;for(var r=0;r<t.length;r++){var o=void 0;o=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t[parseInt(r.toString(),10)])>-1?i.i(l.e)(this.diagram.nameTable[t[parseInt(r.toString(),10)].targetID]):i.i(l.e)(t[parseInt(r.toString(),10)]),e.push(o)}}if(this.diagram.selectedItems.nodes.length>0){t=t.concat(this.diagram.selectedItems.nodes);for(var r=0;r<this.diagram.selectedItems.nodes.length;r++)if(!t[parseInt(r.toString(),10)].isPhase){var a=i.i(l.e)(this.diagram.selectedItems.nodes[parseInt(r.toString(),10)]);a.wrapper&&a.offsetX!==a.wrapper.offsetX&&(a.offsetX=a.wrapper.offsetX),a.wrapper&&a.offsetY!==a.wrapper.offsetY&&(a.offsetY=a.wrapper.offsetY);this.copyProcesses(a),e.push(i.i(l.e)(a));var s=i.i(d.a)();if(i.i(d.b)(s,-a.rotateAngle,a.offsetX,a.offsetY),a.children){for(var h=this.clipboardData.childTable,c=void 0,p=[],g=this.getAllDescendants(a,p,!0),u=0;u<g.length;u++){c=this.diagram.nameTable[g[parseInt(u.toString(),10)].id];var f=h[c.id]=i.i(l.e)(c),m=i.i(d.c)(s,{x:f.wrapper.offsetX,y:f.wrapper.offsetY});c instanceof n.a&&(f.offsetX=m.x,f.offsetY=m.y,f.rotateAngle-=a.rotateAngle)}this.clipboardData.childTable=h}if("SwimLane"===a.shape.type)for(var y=this.diagram.getObject(this.diagram.selectedItems.nodes[parseInt(r.toString(),10)].id),h=this.clipboardData.childTable,v=i.i(I.s)(this.diagram,y.wrapper.children[0],0,!0),u=0;u<v.length;u++){var b=this.diagram.getObject(v[parseInt(u.toString(),10)]);h[b.id]=i.i(l.e)(b)}if(a&&a.isLane){var h=this.clipboardData.childTable,y=this.diagram.getObject(a.parentId),S=i.i(I.v)(a,this.diagram);h[a.id]=i.i(l.e)(S),h[a.id].width=y.wrapper.actualSize.width}}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var w=0,x=t;w<x.length;w++){var P=x[w];this.diagram.nameTable[P.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(P)>-1?this.diagram.remove(this.diagram.nameTable[P.targetID]):this.diagram.remove(P))}this.endGroupAction()}return this.sortByZIndex(e,"zIndex"),e},t.prototype.copyProcesses=function(t){if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0){for(var e=t.shape.activity.subProcess.processes,r=0,n=e;r<n.length;r++){var o=n[r];this.processTable[""+o]=i.i(l.e)(this.diagram.nameTable[""+o]),this.processTable[""+o].shape.activity.subProcess.processes&&this.processTable[""+o].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[""+o])}this.clipboardData.processTable=this.processTable}},t.prototype.group=function(){this.oldSelectedObjects=i.i(c.N)(this.diagram);var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|g.p.Group;var e=[],r={};r.id="group"+i.i(l.g)(),r=new n.a(this.diagram,"nodes",r,!0),r.children=[],e=this.diagram.selectedItems.nodes,e=e.concat(this.diagram.selectedItems.connectors);for(var o=e.sort(function(t,e){return t.zIndex-e.zIndex}),a=0;a<o.length;a++)o[parseInt(a.toString(),10)].parentId||r.children.push(o[parseInt(a.toString(),10)].id);var s=this.diagram.add(r);s&&this.select(s);var h={type:"Group",undoObject:r,redoObject:r,category:"Internal"};this.addHistoryEntry(h),this.diagram.diagramActions=this.diagram.diagramActions&~g.p.Group,this.diagram.protectPropertyChange(t),this.updateBlazorSelector()},t.prototype.unGroup=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|g.p.Group;var r=[];t?r.push(t):r=this.diagram.selectedItems.nodes,this.diagram.startGroupAction();for(var n=0;n<r.length;n++){for(var o=r[parseInt(n.toString(),10)],a=i.i(l.e)(o),s=[],h=0;h<o.children.length;h++)s.push(o.children[parseInt(h.toString(),10)]);if(o.children){o.ports&&o.ports.length>0&&this.diagram.removePorts(o,o.ports),o.annotations&&o.annotations.length>0&&(!i.i(b.isBlazor)()||i.i(b.isBlazor)()&&""!==o.annotations[0].content)&&this.diagram.removeLabels(o,o.annotations);for(var d=this.diagram.nameTable[o.parentId],c=o.children.length-1;c>=0;c--)this.diagram.nameTable[o.children[parseInt(c.toString(),10)]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[o.children[parseInt(c.toString(),10)]],o),o.parentId&&o.children[parseInt(c.toString(),10)]&&this.diagram.addChild(d,o.children[parseInt(c.toString(),10)]);this.resetDependentConnectors(o.inEdges,!0),this.resetDependentConnectors(o.outEdges,!1);var p={type:"UnGroup",undoObject:a,redoObject:a,category:"Internal"};this.diagram.diagramActions&g.p.UndoRedo||this.addHistoryEntry(p),o.parentId&&this.diagram.deleteChild(o,d)}this.diagram.removeNode(o,s),this.clearSelection()}this.diagram.endGroupAction(),this.diagram.diagramActions=this.diagram.diagramActions&~g.p.Group,this.diagram.protectPropertyChange(e)},t.prototype.resetDependentConnectors=function(t,e){for(var r=0;r<t.length;r++){var n=this.diagram.nameTable[t[parseInt(r.toString(),10)]],o=i.i(l.e)(n),a=void 0;e?(n.targetID="",n.targetPortID="",a={targetID:n.targetID,targetPortID:n.targetPortID}):(n.sourceID="",n.sourcePortID="",a={sourceID:n.sourceID,sourcePortID:n.sourcePortID}),this.diagram.connectorPropertyChange(n,{},a);var s={type:"ConnectionChanged",undoObject:{connectors:[o],nodes:[]},redoObject:{connectors:[i.i(l.e)(n)],nodes:[]},category:"Internal"};this.diagram.diagramActions&g.p.UndoRedo||this.addHistoryEntry(s)}},t.prototype.paste=function(t){if(t||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var e=t?this.getNewObject(t):this.clipboardData.clipObject;if(e){var n=1!==e.length,o=!1,a={},s={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(o=!0,this.diagram.historyManager.startGroupAction());for(var h=0,d=e;h<d.length;h++){var p=d[h];a[p.id]=p}var g=[];n&&(this.diagram.isServerUpdate=!0);for(var u=0;u<e.length;u++){var p=e[parseInt(u.toString(),10)];if(i.i(c.l)(p)===r.a){var f=i.i(l.e)(p),m=f.sourceID;f.sourceID="",a[""+m]&&s[""+m]&&(f.sourceID=s[""+m]),m=f.targetID,f.targetID="",a[""+m]&&s[""+m]&&(f.targetID=s[""+m]);var y=this.cloneConnector(f,n);g.push(y),s[p.id]=y.id}else{var v=this.cloneNode(p,n);if(i.i(b.isBlazor)()&&v&&v.children&&v.children.length>0?(g=g.concat(this.cloneGroupChildCollection),this.cloneGroupChildCollection=[]):g.push(v),v){s[p.id]=v.id;var S=p.inEdges;if(S)for(var w=0,x=S;w<x.length;w++){var I=x[w];if(a[""+I]&&s[""+I]){var P=this.diagram.nameTable[s[""+I]];P.targetID=s[p.id],this.diagram.connectorPropertyChange(P,{targetID:"",targetPortID:""},{targetID:P.targetID,targetPortID:P.targetPortID})}}if(S=p.outEdges)for(var C=0,z=S;C<z.length;C++){var I=z[C];if(a[""+I]&&s[""+I]){var P=this.diagram.nameTable[s[""+I]];P.sourceID=s[p.id],this.diagram.connectorPropertyChange(P,{sourceID:"",sourcePortID:""},{sourceID:P.sourceID,sourcePortID:P.sourcePortID})}}}}}n&&(this.diagram.isServerUpdate=!1,this.diagram.UpdateBlazorDiagramModelCollection(e[0],g),this.getBlazorOldValues(),this.diagram.select(g,!0)),!0===o&&(this.diagram.historyManager.endGroupAction(),o=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},t.prototype.getNewObject=function(t){var e,r=[];this.clipboardData.pasteIndex=1;for(var n=0;n<t.length;n++)e=i.i(l.e)(t[parseInt(n.toString(),10)]),r.push(e);return r},t.prototype.cloneConnector=function(t,e){var r=i.i(l.e)(t);this.translateObject(r),r.zIndex=-1;var n=this.diagram.add(r);return this.diagram.isServerUpdate||this.selectObjects([n],e),n},t.prototype.cloneNode=function(t,e,r,n){var o,a,s={},h=i.i(l.e)(t),d=this.diagram.nameTable[t.parentId];if(t.shape&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length&&(a=h.shape.activity.subProcess.processes,h.zIndex=-1,h.shape.activity.subProcess.processes=void 0),t.shape&&"SwimLane"===t.shape.type)i.i(P.b)(t,this.diagram,this.clipboardData);else if(d&&"SwimLane"===d.shape.type)i.i(P.b)(i.i(l.e)(d),this.diagram,this.clipboardData,t,!0);else if(!t.children||!t.children.length||r&&r.length)if(t.shape&&(!i.i(b.isBlazor)()&&"TextAnnotation"===t.shape.shape||i.i(b.isBlazor)()&&"TextAnnotation"===t.shape.bpmnShape)&&-1!==t.id.indexOf("_textannotation_")&&this.diagram.nameTable[t.id])for(var c=t.id.split("_textannotation_"),p=this.diagram.nameTable[t.id],g=0;g<p.inEdges.length;g++){var u=this.diagram.nameTable[p.inEdges[parseInt(g.toString(),10)]];if(u){var f=this.diagram.nameTable[u.sourceID],m=this.getAnnotation(f,c[1]),y={id:c[1]+i.i(l.g)(),angle:m.angle,text:m.text,length:m.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:m.nodeId};this.diagram.addTextAnnotation(y,f)}}else this.translateObject(h,n),h.zIndex=-1,r&&(h.children=r),o=this.diagram.add(h);else o=this.cloneGroup(t,e);for(var v=0,S=Object.keys(s);v<S.length;v++){var w=S[v];this.diagram.add(s[""+w])}return a&&a.length&&(o.shape.activity.subProcess.processes=a,this.cloneSubProcesses(o)),o&&!this.diagram.isServerUpdate&&this.selectObjects([o],e),o},t.prototype.getAnnotation=function(t,e){var i=t.shape.annotations;if(i&&i.length)for(var r=0;r<=i.length;r++)if(i[parseInt(r.toString(),10)].id===e)return i[parseInt(r.toString(),10)]},t.prototype.cloneSubProcesses=function(t){var e=[],r={};if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length)for(var n=t.shape.activity.subProcess.processes,o=0;o<n.length;o++){for(var a=this.diagram.nameTable[n[parseInt(o.toString(),10)]]||this.clipboardData.processTable[n[parseInt(o.toString(),10)]],s=0,h=a.outEdges;s<h.length;s++){var d=h[s];e.indexOf(d)<0&&e.push(d)}for(var c=0,p=a.inEdges;c<p.length;c++){var d=p[c];e.indexOf(d)<0&&e.push(d)}var g=i.i(l.e)(this.clipboardData.processTable[n[parseInt(o.toString(),10)]]);g.processId=t.id;var u=this.cloneNode(g,!1);r[n[parseInt(o.toString(),10)]]=u.id,n[parseInt(o.toString(),10)]=u.id,this.diagram.addProcess(u,t.id);for(var f=0,m=e;f<m.length;f++){var y=m[f],v=this.diagram.nameTable[""+y]||this.diagram.connectorTable[""+y],b=i.i(l.e)(v);r[b.sourceID]&&r[b.targetID]&&(b.zIndex=-1,b.id+=i.i(l.g)(),b.sourceID=r[b.sourceID],b.targetID=r[b.targetID],e.splice(e.indexOf(y),1),this.diagram.add(b))}}},t.prototype.cloneGroup=function(t,e){var n,o=[],a=[],s=[],h=[];a=a.concat(t.children);var d=i.i(l.g)(),p=[];if(this.diagram.blazorActions|=g.i.GroupClipboardInProcess,this.clipboardData.childTable||t.children.length>0)for(var u=0;u<a.length;u++){var f=void 0;f=this.clipboardData.childTable?this.clipboardData.childTable[a[parseInt(u.toString(),10)]]:this.diagram.nameTable[a[parseInt(u.toString(),10)]],f.parentId="",f&&(i.i(c.l)(f)===r.a?s.push(f):(n=this.cloneNode(f,e,void 0,d),h.push(f.id),o.push(n.id),p.push(n)))}for(var m=0;m<s.length;m++){if(s[parseInt(m.toString(),10)].sourceID||s[parseInt(m.toString(),10)].targetID)for(var v=0;v<h.length;v++)s[parseInt(m.toString(),10)].sourceID===h[parseInt(v.toString(),10)]&&(s[parseInt(m.toString(),10)].sourceID+=d),s[parseInt(m.toString(),10)].targetID===h[parseInt(v.toString(),10)]&&(s[parseInt(m.toString(),10)].targetID+=d);n=this.cloneConnector(s[parseInt(m.toString(),10)],e),o.push(n.id),p.push(n)}var b=this.cloneNode(t,e,o);return p.push(b),b&&b.container&&b.shape&&"UmlClassifier"===b.shape.type&&(this.diagram.updateDiagramObject(b),b.wrapper.measure(new y.a)),this.diagram.blazorActions&=~g.i.GroupClipboardInProcess,this.diagram.isServerUpdate?this.cloneGroupChildCollection=p:this.diagram.UpdateBlazorDiagramModelCollection(void 0,p,void 0,!0),b},t.prototype.translateObject=function(t,e){t.id+=e||i.i(l.g)();var n=10*this.clipboardData.pasteIndex;if(i.i(c.l)(t)===r.a){if(t.sourcePoint={x:t.sourcePoint.x+n,y:t.sourcePoint.y+n},t.targetPoint={x:t.targetPoint.x+n,y:t.targetPoint.y+n},"Bezier"===t.type)for(var o=t.segments,a=0;a<o.length;a++)m.a.isEmptyPoint(o[parseInt(a.toString(),10)].point1)||(o[parseInt(a.toString(),10)].point1={x:o[parseInt(a.toString(),10)].point1.x+n,y:o[parseInt(a.toString(),10)].point1.y+n}),m.a.isEmptyPoint(o[parseInt(a.toString(),10)].point2)||(o[parseInt(a.toString(),10)].point2={x:o[parseInt(a.toString(),10)].point2.x+n,y:o[parseInt(a.toString(),10)].point2.y+n});if(("Straight"===t.type||"Bezier"===t.type)&&t.segments&&t.segments.length>0)for(var o=t.segments,a=0;a<o.length-1;a++)o[parseInt(a.toString(),10)].point.x+=n,o[parseInt(a.toString(),10)].point.y+=n}else t.offsetX+=n,t.offsetY+=n},t.prototype.drawObject=function(t){var e;i.i(b.isBlazor)()&&(e=this.diagram.getProtectPropertyChangeValue(),this.diagram.protectPropertyChange(!0));var o;t&&t.shape&&"Text"===t.shape.type&&(t.width=this.diagram.drawingObject.width?this.diagram.drawingObject.width:50,t.height=this.diagram.drawingObject.height?this.diagram.drawingObject.height:20);for(var a=i.i(l.e)(this.diagram.drawingObject),s=0,h=Object.keys(t);s<h.length;s++){var d=h[s];a[""+d]=t[""+d]}return i.i(c.l)(this.diagram.drawingObject)===n.a||i.i(c.l)(this.diagram.drawingObject)===r.a&&"Freehand"===this.diagram.drawingObject.type&&"Bezier"!==t.type?(o=new n.a(this.diagram,"nodes",a,!0),o.id=(this.diagram.drawingObject.id||"node")+i.i(l.g)()):(o=new r.a(this.diagram,"connectors",a,!0),i.i(b.isBlazor)()&&!this.diagram.drawingObject&&o.type,o.id=(this.diagram.drawingObject&&this.diagram.drawingObject.id?this.diagram.drawingObject.id:"connector")+i.i(l.g)()),i.i(b.isBlazor)()&&i.i(c.B)(o,a,i.i(c.l)(this.diagram.drawingObject)===n.a?this.diagram.nodeDefaults:this.diagram.connectorDefaults),this.diagram.initObject(o),this.diagram.updateDiagramObject(o),this.diagram.currentDrawingObject=o,i.i(b.isBlazor)()&&this.diagram.protectPropertyChange(e),o},t.prototype.addObjectToDiagram=function(t){this.diagram.removeFromAQuad(t),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[t.id]),delete this.diagram.nameTable[t.id],t instanceof r.a&&"Bezier"===t.type&&t.segments.length>0&&this.diagram.drawingObject&&"Bezier"===this.diagram.drawingObject.type&&(t.segments=[]);var e=this.diagram.add(t);"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([e]),t&&!i.i(u.k)(this.diagram)&&(this.diagram.tool&=~g.k.DrawOnce,this.diagram.currentDrawingObject=void 0)},t.prototype.enableServerDataBinding=function(t){this.diagram.enableServerDataBinding(t)},t.prototype.addText=function(t,e){var i=this.diagram.findElementUnderMouse(t,e);this.diagram.startTextEdit(t,i instanceof a.a?i.id.split("_")[1]:void 0)},t.prototype.updateArgsObject=function(t,e,n){if(t)for(var o=void 0,a=0;a<t.length;a++)o=i.i(c.l)(t[parseInt(a.toString(),10)])===r.a,o?n.connectorCollection.push(t[parseInt(a.toString(),10)].id):n.nodeCollection.push(t[parseInt(a.toString(),10)].id)},t.prototype.updateSelectionChangeEventArgs=function(t,e,r){if(i.i(b.isBlazor)()){t={cause:this.diagram.diagramActions,newValue:{},oldValue:{},state:t.state,type:t.type,cancel:!1};var n=t.oldValue,o=t.newValue;return n.connectors=[],n.nodes=[],o.connectors=[],o.nodes=[],n.nodeCollection=[],n.connectorCollection=[],o.nodeCollection=[],o.connectorCollection=[],this.updateArgsObject(this.getSelectedObject(),t,o),this.updateArgsObject(r,t,n),t}return t},t.prototype.isUserHandle=function(t){var e=this.diagram.selectedItems;if(e.wrapper&&i.i(c.x)(e.constraints,"UserHandle"))for(var r=0,n=e.userHandles;r<n.length;r++){var o=n[r];if(o.visible){var a=i.i(c.y)(e,o,this.diagram.scroller.transform);if(i.i(p.a)(t,a,o.size/(2*this.diagram.scroller.transform.scale)))return!0}}return!1},t.prototype.selectObjects=function(t,e,r){return z(this,void 0,void 0,function(){var n,o,a,s,h,d,l,f,m,y,h,v,S,w,x,I,P,h;return O(this,function(C){switch(C.label){case 0:if(n={oldValue:r||this.getSelectedObject(),newValue:t,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1},t.length>0&&t[0]&&t[0].isLane)for(o=this.diagram.getObject(t[0].parentId),t[0].shape.header=[],a="",s=0;s<t.length;s++)for(h=0;h<o.shape.lanes.length;h++)d=t[0].id.split(t[0].parentId),(a=d[1].slice(0,-1))===o.shape.lanes[parseInt(h.toString(),10)].id&&t[0].shape.header.push(o.shape.lanes[parseInt(h.toString(),10)].header);if(this.diagram.enableServerDataBinding(!1),l=!0,i.i(b.isBlazor)()?this.oldSelectedObjects=i.i(c.N)(this.diagram):this.diagram.triggerEvent(g.r.selectionChange,n),f=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),m=i.i(u.q)(this.diagram),(y=i.i(u.p)(this.diagram))||m){if(!m&&(t.length>1||e&&1===t.length)){if(1!==t.length)return[2];this.clearSelection()}if(!(y||m||1!==t.length||e&&i.i(p.f)(this.diagram)))return this.clearSelection(),[2]}if(n.cancel)return[3,5];for(h=0;h<t.length;h++)if(v=t[parseInt(h.toString(),10)])if(l=!0,i.i(p.f)(this.diagram)){if((h>0||e)&&v.children&&!v.parentId)for(S=0;S<this.diagram.selectedItems.nodes.length;S++)(w=this.diagram.nameTable[this.diagram.selectedItems.nodes[parseInt(S.toString(),10)].parentId])&&(w=this.findParent(w))&&v.id===w.id&&this.selectGroup(v);this.selectProcesses(v),l=this.selectBpmnSubProcesses(v),l&&this.select(v,h>0||e,!0)}else this.select(v,h>0||e,!0);return void 0===r&&(r=f),(n={oldValue:r||[],newValue:this.getSelectedObject(),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.diagram.renderSelector(e||t&&t.length>1),this.updateBlazorSelectorModel(r),i.i(b.isBlazor)()&&this.diagram.selectionChange&&(n=this.updateSelectionChangeEventArgs(n,t,r||[]),this.updateBlazorSelector()),i.i(b.isBlazor)())?[3,1]:(this.diagram.triggerEvent(g.r.selectionChange,n),[3,4]);case 1:return x=void 0,window&&window[this.blazor]&&this.diagram.selectionChange?(I={EventName:"selectionChange",args:JSON.stringify(n)},[4,window[this.blazorInterop].updateBlazorDiagramEvents(I,this.diagram)]):[3,3];case 2:x=C.sent(),C.label=3;case 3:if(x&&x.cancel&&(P=[],x.oldValue.nodes.length>0&&(P=x.oldValue.nodes),x.oldValue.connectors.length>0&&(P=P.concat(x.oldValue.connectors)),P))if(P.length>0)for(h=0;h<P.length;h++)this.select(this.diagram.nameTable[P[parseInt(h.toString(),10)].id],0!==h&&P.length>1);else this.clearSelection();C.label=4;case 4:this.diagram.enableServerDataBinding(!0),this.updateBlazorSelector(),C.label=5;case 5:return[2]}})})},t.prototype.updateBlazorSelector=function(){if(i.i(b.isBlazor)()&&this.oldSelectedObjects){this.newSelectedObjects=i.i(c.N)(this.diagram);var t=this.deepDiffer.map(i.i(l.e)(this.newSelectedObjects),this.oldSelectedObjects),e=this.deepDiffer.frameObject({},t),r=this.deepDiffer.removeEmptyValues(e);r.nodes=[];for(var n=0;n<this.diagram.selectedItems.nodes.length;n++)r.nodes.push(this.diagram.selectedItems.nodes[parseInt(n.toString(),10)].id);r.connectors=[];for(var n=0;n<this.diagram.selectedItems.connectors.length;n++)r.connectors.push(this.diagram.selectedItems.connectors[parseInt(n.toString(),10)].id);if(window&&window.Blazor){var o={methodName:"UpdateBlazorProperties",diagramobj:{selectedItems:r}};window.sfBlazor.updateBlazorProperties(o,this.diagram)}this.oldSelectedObjects=void 0,this.newSelectedObjects=void 0}},t.prototype.findParent=function(t){return t.parentId&&(t=this.diagram.nameTable[t.parentId],this.findParent(t)),t},t.prototype.selectProcesses=function(t){if(this.hasProcesses(t))for(var e=t.shape.activity.subProcess.processes,i=0;i<e.length;i++){var r=this.diagram.nameTable[e[parseInt(i.toString(),10)]];this.hasProcesses(r)&&this.selectObjects([r],!0),this.unSelect(r)}},t.prototype.selectGroup=function(t){for(var e=0;e<t.children.length;e++){var i=this.diagram.nameTable[t.children[parseInt(e.toString(),10)]];i.children&&this.selectGroup(i),this.unSelect(this.diagram.nameTable[t.children[parseInt(e.toString(),10)]])}},t.prototype.selectBpmnSubProcesses=function(t){var e,n=!0;if(t.processId)n=!i.i(p.b)(this.diagram,this.diagram.nameTable[t.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[t.processId]);else if(t instanceof r.a){if(t.sourceID&&this.diagram.nameTable[t.sourceID]&&this.diagram.nameTable[t.sourceID].processId&&(e=this.diagram.nameTable[t.sourceID].processId),t.targetID&&this.diagram.nameTable[t.targetID]&&this.diagram.nameTable[t.targetID].processId&&(e=this.diagram.nameTable[t.targetID].processId),e){if(i.i(p.b)(this.diagram,this.diagram.nameTable[""+e]))return!1;n=this.selectBpmnSubProcesses(this.diagram.nameTable[""+e])}}else t.parentId&&this.diagram.nameTable[t.parentId]&&"UmlClassifier"===this.diagram.nameTable[t.parentId].shape.type&&i.i(p.b)(this.diagram,this.diagram.nameTable[t.parentId])&&(n=!1);return n},t.prototype.hasProcesses=function(t){return!!(t&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)},t.prototype.select=function(t,e,r){var o=this.getObjectLayer(t.id);if(i.i(u.c)(t)&&!(t instanceof n.G)&&!i.i(p.b)(this.diagram,t)&&o&&!o.lock&&o.visible&&t.wrapper.visible){e=!!i.i(p.f)(this.diagram)&&e,e||this.clearSelection(),this.diagram.enableServerDataBinding(!1);var a=this.diagram.selectedItems;if(t instanceof n.a)if(t.isHeader){var s=this.diagram.nameTable[t.parentId];a.nodes.push(s)}else a.nodes.push(t);else a.connectors.push(t);if(a.selectedObjects.push(t),e)a.wrapper.rotateAngle=a.rotateAngle=0,a.wrapper.children.push(t.wrapper);else if(a.init(this.diagram),1===a.nodes.length&&0===a.connectors.length){var h=i.i(P.w)(this.diagram,a);h&&(a.wrapper.children[0]=h),a.rotateAngle=a.nodes[0].rotateAngle,a.wrapper.rotateAngle=a.nodes[0].rotateAngle,a.wrapper.pivot=a.nodes[0].pivot}r||this.diagram.renderSelector(e),this.diagram.enableServerDataBinding(!0)}},t.prototype.getObjectCollectionId=function(t,e){for(var i=[],r=0,n=t?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;!e&&r<n.length;)i[parseInt(r.toString(),10)]=n[parseInt(r.toString(),10)].id,r++;return i},t.prototype.updateBlazorSelectorModel=function(t,e){if(window&&window.sfBlazor){for(var r=0,n=[],o=[],a=[];t&&r<t.length;)a[parseInt(r.toString(),10)]=t[parseInt(r.toString(),10)].id,r++;r=0,n=this.getObjectCollectionId(!0,e),o=this.getObjectCollectionId(!1,e);var s={nodes:n,connectors:o},h=i.i(c.b)(s);window.sfBlazor.updateDiagramCollection&&window.sfBlazor.updateDiagramCollection.call(this.diagram,"selectedItems",h,a,!1,!0)}},t.prototype.labelSelect=function(t,e){this.oldSelectedObjects=i.i(c.N)(this.diagram);var r=this.diagram.selectedItems,o=this.diagram.allowServerDataBinding;this.diagram.allowServerDataBinding=!1,r.nodes=r.connectors=[],this.diagram.allowServerDataBinding=o,t instanceof n.a?r.nodes[0]=t:r.connectors[0]=t,r.annotation=this.findTarget(e,t),r.init(this.diagram),this.diagram.renderSelector(!1),this.updateBlazorSelector()},t.prototype.unSelect=function(t){var e=[];e.push(t);var r=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),o=r.filter(function(e){return e.id!==t.id}),a={oldValue:r,newValue:o,cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||i.i(b.isBlazor)()||this.diagram.triggerEvent(g.r.selectionChange,a),i.i(p.b)(this.diagram,t)){var s=this.diagram.selectedItems,h=void 0;if(t instanceof n.a?(h=s.nodes.indexOf(t,0),s.nodes.splice(h,1)):(h=s.connectors.indexOf(t,0),s.connectors.splice(h,1)),h=s.selectedObjects.indexOf(t,0),s.selectedObjects.splice(h,1),a={oldValue:r,newValue:o,cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(e),a={oldValue:i.i(c.b)(r),newValue:o,cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:a.cancel},!a.cancel&&(h=s.wrapper.children.indexOf(t.wrapper,0),s.wrapper.children.splice(h,1),this.diagram.updateSelector(),!this.diagram.currentSymbol))if(i.i(b.isBlazor)()){if(a=this.updateSelectionChangeEventArgs(a,[],e),this.updateBlazorSelector(),window&&window[this.blazor]&&this.diagram.selectionChange){var d={EventName:"selectionChange",args:JSON.stringify(a)};window[this.blazorInterop].updateBlazorDiagramEvents(d,this.diagram)}}else this.diagram.triggerEvent(g.r.selectionChange,a)}},t.prototype.getChildElements=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[parseInt(i.toString(),10)];r.children&&r.children.length>0?e.concat(this.getChildElements(r.children)):(e.push(r.id),r instanceof a.a&&e.push(r.id+"_text"))}return e},t.prototype.moveSvgNode=function(t,e){var r=i.i(f.n)(e+"_groupElement",this.diagram.element.id),n=i.i(f.n)(t+"_groupElement",this.diagram.element.id);r.parentNode.insertBefore(n,r)},t.prototype.sendLayerBackward=function(t){var e=this.getLayer(t);if(e&&0!==e.zIndex){var i=e.zIndex;if("SVG"===this.diagram.mode){var r=e.objects,n=this.getLayer(this.diagram.layerZIndexTable[i-1]).objects[0];if(n)for(var o=0,a=r;o<a.length;o++){var s=a[o];this.moveSvgNode(s,n)}}var h=this.getLayer(this.diagram.layerZIndexTable[i-1]);h.zIndex=h.zIndex+1,e.zIndex=e.zIndex-1;var d=this.diagram.layerZIndexTable[parseInt(i.toString(),10)];this.diagram.layerZIndexTable[parseInt(i.toString(),10)]=this.diagram.layerZIndexTable[i-1],this.diagram.layerZIndexTable[i-1]=d,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.bringLayerForward=function(t){var e=this.getLayer(t);if(e&&e.zIndex<this.diagram.layers.length-1){var i=e.zIndex,r=this.getLayer(this.diagram.layerZIndexTable[i+1]);if("SVG"===this.diagram.mode)for(var n=e.objects[0],o=r.objects,a=0,s=o;a<s.length;a++){var h=s[a];h&&this.moveSvgNode(h,n)}r.zIndex=r.zIndex-1,e.zIndex=e.zIndex+1;var d=this.diagram.layerZIndexTable[parseInt(i.toString(),10)];this.diagram.layerZIndexTable[parseInt(i.toString(),10)]=this.diagram.layerZIndexTable[i+1],this.diagram.layerZIndexTable[i+1]=d,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.sendToBack=function(t){if(this.diagram.protectPropertyChange(!0),i.i(p.f)(this.diagram)||t){var e=this.diagram.selectedItems,r=[];t&&t.id?r.push(t):(r=r.concat(e.nodes),r=r.concat(e.connectors));for(var n=t&&t.id,o=0;o<r.length;o++){var a=i.i(l.e)(r[parseInt(o.toString(),10)]);n=r[parseInt(o.toString(),10)].id;var s=this.diagram.nameTable[""+n].zIndex,h=this.diagram.layers.indexOf(this.getObjectLayer(n)),d=this.diagram.layers[parseInt(h.toString(),10)].zIndexTable,c=JSON.parse(JSON.stringify(d)),u=i.i(l.e)(this.diagram.selectedItems),f=0;if(1!==this.diagram.nodes.length&&(void 0===this.diagram.nameTable[""+n].children||this.checkObjectBehind(n,d,s))){for(var m=this.diagram.nameTable[""+n],y=s;y>0;y--)d[parseInt(y.toString(),10)]&&(d[y-1]?(d[parseInt(y.toString(),10)]=d[y-1],this.diagram.nameTable[d[parseInt(y.toString(),10)]].zIndex=y):(d[y-1]=d[parseInt(y.toString(),10)],this.diagram.nameTable[d[y-1]].zIndex=y,delete d[parseInt(y.toString(),10)]));for(var v=s;v>0;v--)d[parseInt(v.toString(),10)]&&(this.diagram.nameTable[d[parseInt(v.toString(),10)]].zIndex=v);if("SwimLane"!==m.shape.type?(d[0]=this.diagram.nameTable[""+n].id,this.diagram.nameTable[""+n].zIndex=0):f=this.swapZIndexObjects(s,d,n,c),"SVG"===this.diagram.mode){var S=this.diagram.nameTable[""+n],w="SwimLane"!==S.shape.type?1:f;w!==f&&(w=S.children&&S.children.length>0?s:1);for(var x=d[parseInt(w.toString(),10)];!x&&w<s;)x=d[++w];x=this.resetTargetNode(n,x,w,d),x&&(x=this.diagram.nameTable[""+x].parentId?this.checkParentExist(x):x,this.moveSvgNode(n,x)),this.updateNativeNodeIndex(n)}else this.diagram.refreshCanvasLayers();var I=i.i(l.e)(this.diagram.selectedItems),P={type:"SendToBack",category:"Internal",undoObject:u,redoObject:I};this.diagram.diagramActions&g.p.UndoRedo||this.addHistoryEntry(P)}this.triggerOrderCommand(a,r[parseInt(o.toString(),10)],r[parseInt(o.toString(),10)])}}this.diagram.protectPropertyChange(!1),i.i(b.isBlazor)()&&this.getZIndexObjects()},t.prototype.swapZIndexObjects=function(t,e,i,r){for(var n=0,o=0,a=-1,s=1,h=0;h<=t;h++)e[parseInt(h.toString(),10)]&&this.diagram.nameTable[e[parseInt(h.toString(),10)]].parentId===i&&(-1===a&&(a=h),o++);for(var h=0;h<=t;h++)if(e[parseInt(h.toString(),10)]&&s<=o){for(;!e[parseInt(a.toString(),10)];)a++;e[parseInt(h.toString(),10)]=e[parseInt(a.toString(),10)],this.diagram.nameTable[e[parseInt(h.toString(),10)]].zIndex=h,a++,s++}for(var d=0,h=0;h<o;h++){for(;!e[parseInt(d.toString(),10)];)d++;n=this.diagram.nameTable[e[parseInt(d.toString(),10)]].zIndex,d++}for(n+=1;!e[parseInt(n.toString(),10)];)++n;d=0,e[parseInt(n.toString(),10)]=this.diagram.nameTable[""+i].id,this.diagram.nameTable[""+i].zIndex=n,n+=1;for(var h=n;h<=t;h++)if(e[parseInt(h.toString(),10)]){for(;!r[parseInt(d.toString(),10)];)d++;e[parseInt(h.toString(),10)]=r[parseInt(d.toString(),10)],this.diagram.nameTable[e[parseInt(h.toString(),10)]].zIndex=h,d++}return n},t.prototype.resetTargetNode=function(t,e,i,r){return"SwimLane"===this.diagram.nameTable[""+t].shape.type&&void 0!==this.diagram.nameTable[""+e].parentId&&""!==this.diagram.nameTable[""+e].parentId&&this.diagram.nameTable[this.diagram.nameTable[""+e].parentId].isLane?(i+=1,r[parseInt(i.toString(),10)]?(e=r[parseInt(i.toString(),10)],e=this.resetTargetNode(t,e,i,r)):e):e},t.prototype.getZIndexObjects=function(){var t,e,i=[];for(t=0;t<this.diagram.nodes.length;t++)i.push(this.diagram.nodes[parseInt(t.toString(),10)]);for(e=0;e<this.diagram.connectors.length;e++)i.push(this.diagram.connectors[parseInt(e.toString(),10)]);this.updateBlazorZIndex(i)},t.prototype.updateBlazorZIndex=function(t){var e,i={},o=[],a=[];if(t&&t.length>0)for(e=0;e<t.length;e++){var s=t[parseInt(e.toString(),10)];s instanceof n.a?o.push(this.getBlazorObject(s)):s instanceof r.a&&a.push(this.getBlazorObject(s))}if(i={nodes:o,connectors:a},window&&window.Blazor){var h={methodName:"UpdateBlazorProperties",diagramobj:i};window.sfBlazor.updateBlazorProperties(h,this.diagram)}},t.prototype.getBlazorObject=function(t){return{sfIndex:i.i(l.l)(this.diagram,t.id),zIndex:t.zIndex}},t.prototype.checkParentExist=function(t){for(var e=t;this.diagram.nameTable[""+e].parentId;)e=this.diagram.nameTable[""+e].parentId;return e},t.prototype.checkObjectBehind=function(t,e,i){for(var r=0;r<i;r++){var n=e[parseInt(r.toString(),10)];if(this.diagram.nameTable[""+n]&&t!==this.diagram.nameTable[""+n].parentId)return!0}return!1},t.prototype.bringToFront=function(t){var e=this;if(this.diagram.protectPropertyChange(!0),i.i(p.f)(this.diagram)||t){var r=t&&t.id,n=this.diagram.selectedItems,o=[];t&&t.id?o.push(t):(o=o.concat(n.nodes),o=o.concat(n.connectors));for(var a=this,s=0;s<o.length;s++)!function(t){var n=i.i(l.e)(o[parseInt(t.toString(),10)]);r=o[parseInt(t.toString(),10)].id;for(var s=a.diagram.layers.indexOf(a.getObjectLayer(r)),h=a.diagram.layers[parseInt(s.toString(),10)].zIndexTable,d=i.i(l.e)(a.diagram.selectedItems),c=JSON.parse(JSON.stringify(h)),p=Number(Object.keys(h).sort(function(t,e){return Number(t)-Number(e)}).reverse()[0]),u=a.diagram.nameTable[""+r].zIndex,m=[],y=0,v=0;v<=p;v++)m.push(h[parseInt(v.toString(),10)]);var b=a.diagram.nameTable[""+r];if("SwimLane"===b.shape.type)for(var S=p;S>=u;S--)if(h[parseInt(S.toString(),10)]&&a.diagram.nameTable[h[parseInt(S.toString(),10)]].parentId!==r){y=S,p=y;break}for(var w=u;w<p;w++)h[parseInt(w.toString(),10)]&&(h[w+1]?(h[parseInt(w.toString(),10)]=h[w+1],a.diagram.nameTable[h[parseInt(w.toString(),10)]].zIndex=w):(h[w+1]=h[parseInt(w.toString(),10)],a.diagram.nameTable[h[w+1]].zIndex=w,delete h[parseInt(w.toString(),10)]));for(var x=u;x<p;x++)h[parseInt(x.toString(),10)]&&(a.diagram.nameTable[h[parseInt(x.toString(),10)]].zIndex=x);if("SwimLane"!==b.shape.type)h[parseInt(p.toString(),10)]=a.diagram.nameTable[""+r].id,a.diagram.nameTable[""+r].zIndex=p;else{for(var I=0,P=-1,C=0,z=0,O=JSON.parse(JSON.stringify(h)),T=0;T<=u;T++)if(h[parseInt(T.toString(),10)]&&a.diagram.nameTable[h[parseInt(T.toString(),10)]].parentId===r&&-1===P){P=T,C=T;break}for(var A=0;A<=p;A++)if(c[parseInt(A.toString(),10)]&&c[parseInt(A.toString(),10)]!==r&&a.diagram.nameTable[c[parseInt(A.toString(),10)]].parentId!==r){var L=a.diagram.nameTable[c[parseInt(A.toString(),10)]],E=a.diagram.nameTable[""+r];L.zIndex>=E.zIndex&&I++}for(var B=P,M=0;M<=I;M++){for(;!h[parseInt(B.toString(),10)];)B++;z=a.diagram.nameTable[h[parseInt(B.toString(),10)]].zIndex,B++}for(var D=z;D<=p;D++){for(;!O[parseInt(P.toString(),10)];)P++;for(;!h[parseInt(D.toString(),10)];)D++;h[parseInt(D.toString(),10)]=O[parseInt(P.toString(),10)],a.diagram.nameTable[h[parseInt(D.toString(),10)]].zIndex=D,P++}h[parseInt(p.toString(),10)]=a.diagram.nameTable[""+r].id,a.diagram.nameTable[""+r].zIndex=p,B=u+1;for(var k=C,R=0;R<I;R++){for(;!c[parseInt(B.toString(),10)];)B++;for(;a.diagram.nameTable[c[parseInt(B.toString(),10)]].parentId===r;)B++;for(;!h[parseInt(k.toString(),10)];)k++;h[parseInt(k.toString(),10)]=c[parseInt(B.toString(),10)],a.diagram.nameTable[h[parseInt(k.toString(),10)]].zIndex=k,B++,k++}}if("SVG"===a.diagram.mode){var _=a.diagram.diagramLayer,j=i.i(f.n)(r+"_groupElement",a.diagram.element.id),N=a.diagram.selectedItems.nodes;if(N.length>0&&("Native"===N[0].shape.type||"HTML"===N[0].shape.type)){j.parentNode.removeChild(j);for(var k=0;k<a.diagram.views.length;k++){j=i.i(f.n)(r+("HTML"===N[0].shape.type?"_html_element":"_content_groupElement"),a.diagram.views[parseInt(k.toString(),10)]);var H=j.parentNode.lastChild;H.parentNode.insertBefore(j,H.nextSibling)}var W=i.i(f.f)(a.diagram.element.id);a.diagram.diagramRenderer.renderElement(a.diagram.nameTable[""+r].wrapper,_,W)}else Object.keys(h).forEach(function(t){var i=h[""+t];if(i!==r&&e.diagram.nameTable[""+i].parentId!==r&&void 0!==i&&m.indexOf(r)<m.indexOf(i)){var n=e.diagram.nameTable[""+r],o=e.diagram.nameTable[""+i];""===n.parentId&&""===o.parentId&&void 0===o.parentId&&n.parentId!==o.id?(e.moveSvgNode(i,r),e.updateNativeNodeIndex(r)):e.checkGroupNode(r,i,e.diagram.nameTable)&&(e.moveSvgNode(i,r),e.updateNativeNodeIndex(r))}})}else a.diagram.refreshCanvasLayers();var V=i.i(l.e)(a.diagram.selectedItems),X={type:"BringToFront",category:"Internal",undoObject:d,redoObject:V};a.diagram.diagramActions&g.p.UndoRedo||a.addHistoryEntry(X),a.triggerOrderCommand(n,o[parseInt(t.toString(),10)],o[parseInt(t.toString(),10)])}(s)}this.diagram.protectPropertyChange(!1),i.i(b.isBlazor)()&&this.getZIndexObjects()},t.prototype.triggerOrderCommand=function(t,e,r){var n=i.i(l.e)(t),o={zIndex:n.zIndex},a={zIndex:e.zIndex},s={element:r,cause:this.diagram.diagramActions,diagramAction:this.diagram.getDiagramAction(this.diagram.diagramActions),oldValue:o,newValue:a};this.diagram.triggerEvent(g.r.propertyChange,s)},t.prototype.checkGroupNode=function(t,e,i){return i[""+e].parentId===i[""+t].parentId},t.prototype.sortByZIndex=function(t,e){var i=e||"zIndex";return t=t.sort(function(t,e){return t[""+i]-e[""+i]})},t.prototype.orderCommands=function(t,e,i){var r=e.nodes;if(r=r.concat(e.connectors),t)"SendBackward"===i?this.sendBackward(r[0]):"SendForward"===i?this.sendForward(r[0]):"BringToFront"===i?this.bringToFront(r[0]):"SendToBack"===i&&this.sendToBack(r[0]);else{var n=r[0].zIndex,o=this.diagram.nameTable[r[0].id].zIndex,a=r[0],s=this.getObjectLayer(a.id),h=s.zIndex,d=s.zIndexTable;if("SendBackward"===i||"SendForward"===i)for(var l=0;l<r.length;l++){var c=r[parseInt(l.toString(),10)],p=this.diagram.layers.indexOf(this.getObjectLayer(c.id)),g=this.diagram.nameTable[r[parseInt(l.toString(),10)].id];g.zIndex=c.zIndex,this.diagram.layers[parseInt(p.toString(),10)].zIndexTable[c.zIndex]=c.id}else if("BringToFront"===i)if("SwimLane"===r[0].shape.type)this.sendToBack(r[0]);else for(var u=o;u>n;u--)d[parseInt(u.toString(),10)]&&(d[u-1]?(d[parseInt(u.toString(),10)]=d[u-1],this.diagram.nameTable[d[parseInt(u.toString(),10)]].zIndex=u):(d[u-1]=d[parseInt(u.toString(),10)],this.diagram.nameTable[d[u-1]].zIndex=u,delete d[parseInt(u.toString(),10)]));else if("SendToBack"===i)if("SwimLane"===r[0].shape.type)this.bringToFront(r[0]);else for(var u=o;u<n;u++)d[parseInt(u.toString(),10)]&&(d[u+1]?(d[parseInt(u.toString(),10)]=d[u+1],this.diagram.nameTable[d[parseInt(u.toString(),10)]].zIndex=u):(d[u+1]=d[parseInt(u.toString(),10)],this.diagram.nameTable[d[u+1]].zIndex=u,delete d[parseInt(u.toString(),10)]));if("BringToFront"===i||"SendToBack"===i){var g=this.diagram.nameTable[r[0].id];g.zIndex=a.zIndex,this.diagram.layers[parseInt(h.toString(),10)].zIndexTable[a.zIndex]=a.id}if("SVG"===this.diagram.mode){if("SendBackward"===i)this.moveObject(r[1].id,r[0].id);else if("SendForward"===i)this.moveObject(r[0].id,r[1].id);else if("BringToFront"===i)"SwimLane"!==r[0].shape.type&&this.moveObject(r[0].id,d[r[0].zIndex+1]);else if("SendToBack"===i&&"SwimLane"!==r[0].shape.type)for(var f=this.getObjectLayer(r[0].id),l=0;l<=r[0].zIndex;l++)f.objects[parseInt(l.toString(),10)]!==r[0].id&&(this.moveSvgNode(f.objects[parseInt(l.toString(),10)],r[0].id),this.updateNativeNodeIndex(r[0].id))}else this.diagram.refreshCanvasLayers()}},t.prototype.moveObject=function(t,e){e&&(this.moveSvgNode(t,e),this.updateNativeNodeIndex(t,e))},t.prototype.sendForward=function(t){if(this.diagram.protectPropertyChange(!0),i.i(p.f)(this.diagram)||t){var e=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0]),r=i.i(l.e)(e),o=t&&t.id;o=o||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var a=this.diagram.layers.indexOf(this.getObjectLayer(o)),s=this.diagram.layers[parseInt(a.toString(),10)].zIndexTable,h=this.diagram.nameTable[""+o],d=[],u=this.diagram.spatialSearch.findObjects(h.wrapper.bounds);u.length>2&&(u=this.sortByZIndex(u));for(var f=0,m=u;f<m.length;f++){var y=m[f];if(h.id!==y.id){if(a===this.getObjectLayer(y.id).zIndex&&Number(this.diagram.nameTable[""+o].zIndex)<Number(y.zIndex)&&h.wrapper.bounds.intersects(y.wrapper.bounds)){d.push(y);break}}}if(d.length>0){var v=this.diagram.nameTable[s[Number(d[0].zIndex)]];if(v.parentId){var S=i.i(c._1)(v,this.diagram,""),w=this.diagram.nameTable[""+S];w.id!==o&&(d[0]=w)}var x=d[0].zIndex,I=h.zIndex,P=s[parseInt(x.toString(),10)],C=i.i(l.e)(this.diagram.selectedItems);this.diagram.nameTable[""+P]instanceof n.a?C.nodes.push(i.i(l.e)(this.diagram.nameTable[""+P])):C.connectors.push(i.i(l.e)(this.diagram.nameTable[""+P])),this.diagram.layers[0].zIndexTable[parseInt(x.toString(),10)]=h.id,this.diagram.nameTable[s[parseInt(x.toString(),10)]].zIndex=x,this.diagram.layers[0].zIndexTable[parseInt(I.toString(),10)]=d[0].id,this.diagram.nameTable[s[parseInt(I.toString(),10)]].zIndex=I,"SVG"===this.diagram.mode?(this.moveSvgNode(s[Number(d[0].zIndex)],o),this.updateNativeNodeIndex(s[Number(d[0].zIndex)],o)):this.diagram.refreshCanvasLayers();var z=i.i(l.e)(this.diagram.selectedItems);this.diagram.nameTable[P]instanceof n.a?z.nodes.push(i.i(l.e)(this.diagram.nameTable[P])):z.connectors.push(i.i(l.e)(this.diagram.nameTable[""+P]));var O={type:"SendForward",category:"Internal",undoObject:C,redoObject:z};this.diagram.diagramActions&g.p.UndoRedo||this.addHistoryEntry(O)}if(i.i(b.isBlazor)()){var T=[];T.push(h),T.push(d[d.length-1]),this.updateBlazorZIndex(T)}this.triggerOrderCommand(r,e,e)}this.diagram.protectPropertyChange(!1)},t.prototype.sendBackward=function(t){if(this.diagram.protectPropertyChange(!0),i.i(p.f)(this.diagram)||t){var e=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0]),r=i.i(l.e)(e),o=t&&t.id;o=o||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var a=this.diagram.layers.indexOf(this.getObjectLayer(o)),s=this.diagram.layers[parseInt(a.toString(),10)].zIndexTable,h=this.diagram.nameTable[""+o],d=[],u=this.diagram.spatialSearch.findObjects(h.wrapper.bounds);u.length>2&&(u=this.sortByZIndex(u));for(var f=0,m=u;f<m.length;f++){var y=m[f];if(h.id!==y.id){a===this.getObjectLayer(y.id).zIndex&&Number(this.diagram.nameTable[""+o].zIndex)>Number(y.zIndex)&&h.wrapper.bounds.intersects(y.wrapper.bounds)&&d.push(y)}}for(var y=d.length-1;y>=0;y--){var v=this.diagram.nameTable[d[parseInt(y.toString(),10)].id];v.parentId===o&&d.splice(y,1)}if(d.length>0){var v=this.diagram.nameTable[d[d.length-1].id];if(v.parentId){var S=i.i(c._1)(v,this.diagram,""),w=this.diagram.nameTable[""+S];o!==w.id&&(d[d.length-1]=w)}var x=d[d.length-1].zIndex,I=h.zIndex,P=s[parseInt(x.toString(),10)],C=i.i(l.e)(this.diagram.selectedItems);if(this.diagram.nameTable[""+P]instanceof n.a?C.nodes.push(i.i(l.e)(this.diagram.nameTable[""+P])):C.connectors.push(i.i(l.e)(this.diagram.nameTable[""+P])),s[parseInt(x.toString(),10)]=h.id,this.diagram.nameTable[s[parseInt(x.toString(),10)]].zIndex=x,s[parseInt(I.toString(),10)]=d[d.length-1].id,this.diagram.nameTable[s[parseInt(I.toString(),10)]].zIndex=I,"SVG"===this.diagram.mode){this.moveSvgNode(o,s[d[d.length-1].zIndex]);var z=this.diagram.nameTable[s[d[d.length-1].zIndex]];if(z.children&&z.children.length>0?this.updateNativeNodeIndex(o):this.updateNativeNodeIndex(o,s[d[d.length-1].zIndex]),i.i(b.isBlazor)()){var O=[];O.push(z),O.push(d[d.length-1]),this.updateBlazorZIndex(O)}}else this.diagram.refreshCanvasLayers();var T=i.i(l.e)(this.diagram.selectedItems);this.diagram.nameTable[""+P]instanceof n.a?T.nodes.push(i.i(l.e)(this.diagram.nameTable[""+P])):T.connectors.push(i.i(l.e)(this.diagram.nameTable[""+P]));var A={type:"SendBackward",category:"Internal",undoObject:C,redoObject:T};this.diagram.diagramActions&g.p.UndoRedo||this.addHistoryEntry(A)}this.triggerOrderCommand(r,e,e)}this.diagram.protectPropertyChange(!1)},t.prototype.updateNativeNodeIndex=function(t,e){for(var r=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(e),n=0;n<this.diagram.views.length;n++)if(r&&("HTML"===r.shape.type||"Native"===r.shape.type)){var o="HTML"===r.shape.type?"_html_element":"_content_groupElement",a=i.i(f.n)(t+o,this.diagram.views[parseInt(n.toString(),10)]),s=e?i.i(f.n)(e+o,this.diagram.views[parseInt(n.toString(),10)]):a.parentElement.firstChild;a&&s&&a.parentNode.id===s.parentNode.id&&s.parentNode.insertBefore(a,s)}},t.prototype.initSelectorWrapper=function(){var t=this.diagram.selectedItems;t.init(this.diagram),1===t.nodes.length&&0===t.connectors.length&&(t.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.pivot=t.nodes[0].pivot)},t.prototype.doRubberBandSelection=function(t){this.clearSelectionRectangle();var e=[],r=[];e=this.diagram.getNodesConnectors(e),r="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?i.i(c._2)(t,e):this.diagram.spatialSearch.findObjects(t),r.length&&this.selectObjects(r,!0)},t.prototype.clearSelectionRectangle=function(){var t=i.i(f.o)(this.diagram.element.id),e=t.getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");e&&i.i(b.remove)(e)},t.prototype.dragConnectorEnds=function(t,e,i,o,a,s){var h,d,l,c,p=!1;return e instanceof n.G?(h=e,d=h.connectors[0]):e instanceof r.a&&this.diagram.currentDrawingObject&&(this.clearSelection(),d=this.diagram.currentDrawingObject),"BezierSourceThumb"!==t&&"BezierTargetThumb"!==t||(p=!0,d.isBezierEditing=!0),"ConnectorSourceEnd"===t||"BezierSourceThumb"===t?(l=i.x-(p?o.bezierPoint1.x:d.sourcePoint.x),c=i.y-(p?o.bezierPoint1.y:d.sourcePoint.y),this.dragSourceEnd(d,l,c,null,i,t,void 0,a,s,void 0,o)):(l=i.x-(p?o.bezierPoint2.x:d.targetPoint.x),c=i.y-(p?o.bezierPoint2.y:d.targetPoint.y),this.dragTargetEnd(d,l,c,null,i,t,void 0,o))},t.prototype.getSelectedObject=function(){var t=this.diagram.selectedItems;return t.nodes.concat(t.connectors)},t.prototype.updateBlazorProperties=function(t){if(t){if(window&&window.Blazor&&"{}"!==JSON.stringify(this.deepDiffer.diagramObject)){var e={methodName:"UpdateBlazorProperties",diagramobj:this.deepDiffer.diagramObject};this.diagram.isLoading||window.sfBlazor.updateBlazorProperties(e,this.diagram)}}else if(window&&window.Blazor){var e={methodName:"UpdateBlazorProperties",diagramobj:this.diagramObject};window.sfBlazor.updateBlazorProperties(e,this.diagram)}this.deepDiffer.newNodeObject=[],this.deepDiffer.newConnectorObject=[],this.diagramObject=[],this.diagram.oldNodeObjects=[],this.diagram.oldConnectorObjects=[]},t.prototype.enableCloneObject=function(t){this.diagram.lineRoutingModule&&this.diagram.constraints&g.j.LineRouting||(this.diagram.canEnableBlazorObject=t)},t.prototype.ismouseEvents=function(t){this.diagram.blazorActions=t?this.diagram.addConstraints(this.diagram.blazorActions,g.i.interaction):this.diagram.removeConstraints(this.diagram.blazorActions,g.i.interaction)},t.prototype.updateLayerObject=function(t,e){if(i.i(b.isBlazor)()){var r={};r=this.deepDiffer.getLayerObject(t,e,this.diagram),this.diagramObject=r,this.updateBlazorProperties()}},t.prototype.getDiagramOldValues=function(t,e){for(var r={},n=0;n<e.length;n++)r[e[parseInt(n.toString(),10)]]=i.i(l.e)(this.diagram[e[parseInt(n.toString(),10)]]);var o=i.i(l.e)(r),a=this.deepDiffer.map(o,t),s=this.deepDiffer.frameObject({},a),h=this.deepDiffer.removeEmptyValues(s);h=this.deepDiffer.changeSegments(h,o),this.diagramObject=h,this.diagram.blazorActions&g.i.ClearObject||this.updateBlazorProperties()},t.prototype.getBlazorOldValues=function(t,e){if(i.i(b.isBlazor)()){for(var o=this.diagram.oldNodeObjects,a=0;a<o.length;a++)o[parseInt(a.toString(),10)].id&&(this.diagram.oldNodeObjects[parseInt(a.toString(),10)]instanceof n.a&&(this.diagram.oldNodeObjects[parseInt(a.toString(),10)]=i.i(c.b)(this.diagram.oldNodeObjects[parseInt(a.toString(),10)])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[o[parseInt(a.toString(),10)].id],t,e,this.diagram));for(var s=this.diagram.oldConnectorObjects,a=0;a<s.length;a++)s[parseInt(a.toString(),10)].id&&(this.diagram.oldConnectorObjects[parseInt(a.toString(),10)]instanceof r.a&&(this.diagram.oldConnectorObjects[parseInt(a.toString(),10)]=i.i(c.b)(this.diagram.oldConnectorObjects[parseInt(a.toString(),10)])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[s[parseInt(a.toString(),10)].id],t,e,this.diagram));(o.length>0||s.length>0)&&this.updateBlazorProperties(!0)}},t.prototype.getObjectChanges=function(t,e,r){for(var n=0;n<t.length;n++){var o=this.deepDiffer.map(e[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]),a=this.deepDiffer.frameObject({},o),s=this.deepDiffer.removeEmptyValues(a);s.children&&(s.children=i.i(l.e)(e[parseInt(n.toString(),10)]).children),s=this.deepDiffer.changeSegments(s,e[parseInt(n.toString(),10)]),s.sfIndex=i.i(l.l)(this.diagram,e[parseInt(n.toString(),10)].id),r.push(s)}},t.prototype.clearObjectSelection=function(t){var e=this.diagram.selectedItems,i=[];i=i.concat(e.nodes,e.connectors),-1===i.indexOf(t)&&(this.clearSelection(i.length>0),this.selectObjects([t],!0))},t.prototype.clearSelection=function(t,e){return z(this,void 0,void 0,function(){var r,n,o,a,s,h,d,u;return O(this,function(f){switch(f.label){case 0:return r=this.diagram.allowServerDataBinding,(this.diagram.enableServerDataBinding(!1),i.i(p.f)(this.diagram))?(n=this.diagram.selectedItems,o=this.getSelectedObject(),this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=o),a={oldValue:o,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(o,!0),t&&(i.i(b.isBlazor)()?this.oldSelectedObjects=i.i(l.e)(n):this.diagram.triggerEvent(g.r.selectionChange,a)),a.cancel?[3,4]:(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.nodes=[],n.connectors=[],n.wrapper=null,n.annotation=void 0,n.selectedObjects=[],this.diagram.clearSelectorLayer(),t?(a={oldValue:i.i(c.b)(o),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},i.i(b.isBlazor)()&&(a=this.updateSelectionChangeEventArgs(a,[],o),this.updateBlazorSelector()),i.i(b.isBlazor)()?[3,1]:(this.diagram.triggerEvent(g.r.selectionChange,a),[3,4])):[3,4])):[3,5];case 1:return s=void 0,window&&window[this.blazor]&&this.diagram.selectionChange?(h={EventName:"selectionChange",args:JSON.stringify(a)},[4,window[this.blazorInterop].updateBlazorDiagramEvents(h,this.diagram)]):[3,3];case 2:s=f.sent(),f.label=3;case 3:if(s&&s.cancel&&!e&&(d=[],s.oldValue.nodes.length>0&&(d=s.oldValue.nodes),s.oldValue.connectors.length>0&&(d=d.concat(s.oldValue.connectors)),d))for(u=0;u<d.length;u++)this.select(this.diagram.nameTable[d[parseInt(u.toString(),10)].id],0!==u&&d.length>1);f.label=4;case 4:this.updateBlazorSelector(),this.diagram.enableServerDataBinding(r),f.label=5;case 5:return[2]}})})},t.prototype.clearSelectedItems=function(){var t=this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0,e=this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0;this.clearSelection(t+e>0)},t.prototype.removeStackHighlighter=function(){var t=i.i(f.o)(this.diagram.element.id),e=t.getElementById(t.id+"_stack_highlighter");e&&e.parentNode.removeChild(e)},t.prototype.renderStackHighlighter=function(t,e){var r,n,o,a=this.diagram.selectedItems.nodes[0];if(!e){var s=this.diagram.findObjectsUnderMouse(t.position);if((e=this.diagram.findObjectUnderMouse(s,"Drag",!0))&&!(e.isLane||e.isPhase||e.isHeader))for(var h=0;h<s.length;h++){var d=this.diagram.nameTable[s[parseInt(h.toString(),10)].id];(!d.isLane||d.isPhase||d.isHeader)&&(e=d,this.diagram.parentObject=e)}}if(a&&e&&e.isLane&&a.shape&&!a.shape.isPhase&&(n=this.diagram.nameTable[e.parentId],this.diagram.currentSymbol&&"SwimLane"===n.shape.type&&(r=!0),a&&!a.parentId&&"SwimLane"!==a.shape.type||a&&a.parentId&&this.diagram.nameTable[a.parentId]&&this.diagram.nameTable[a.parentId].isLane&&a.parentId!==e.parentId&&a.parentId!==e.id)){o=this.diagram.selectedItems;var l=i.i(P.w)(this.diagram,o,e.id,!0);l&&(o.wrapper.children[0]=l),this.diagram.renderSelector(!1,!0),o.wrapper.children[0]=o.nodes[0].wrapper}if(a&&e&&e.parentId&&a.shape&&a.shape.isPhase){"SwimLane"===this.diagram.nameTable[e.parentId].shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[e.parentId].wrapper,this.diagram.renderSelector(!1,!0))}if(r&&this.diagram.currentSymbol.shape.isLane||a&&e&&a.parentId&&e.parentId&&!a.isPhase&&a.parentId===e.parentId&&a.id!==e.id&&n&&n.container&&("Stack"===n.container.type||"Grid"===n.container.type)){var l=void 0,c="Vertical"===n.container.orientation,p="Stack"===n.container?c:!c;"Grid"===n.container.type&&e.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===n.shape.orientation&&e.rowIndex!==a.rowIndex||"Vertical"===n.shape.orientation&&e.columnIndex!==a.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===n.container.orientation)&&(o=this.diagram.selectedItems,(a.isLane&&i.i(I.f)(a,this.diagram)||!a.isLane)&&(l=i.i(P.w)(this.diagram,o,e.id,r)));var g="Stack"===n.container.type?e.wrapper:l;g&&i.i(x.f)(g,p,t.position,this.diagram,!1,!0)}},t.prototype.insertBlazorConnector=function(t){if(t instanceof n.G)for(var e=0;e<t.connectors.length;e++)this.diagram.insertBlazorConnector(t.connectors[parseInt(e.toString(),10)]);else this.diagram.insertBlazorConnector(t)},t.prototype.drag=function(t,e,o){var a,s=[];if(i.i(u.d)(t)&&this.checkBoundaryConstraints(e,o,t.wrapper.bounds)&&i.i(u.G)(this.diagram))if(t instanceof n.a){var h={offsetX:t.offsetX,offsetY:t.offsetY};if(t.offsetX+=e,t.offsetY+=o,t.children&&!t.container){i.i(x.a)(this.diagram,t,!0)||(this.diagram.diagramActions=this.diagram.diagramActions|g.p.isGroupDragging);for(var d=this.getAllDescendants(t,s),l=0;l<d.length;l++)a=this.diagram.nameTable[d[parseInt(l.toString(),10)].id],this.drag(a,e,o);this.updateInnerParentProperties(t),this.diagram.diagramActions=this.diagram.diagramActions&~g.p.isGroupDragging}if(i.i(x.a)(this.diagram,t,!0)?i.i(x.i)(this.diagram,t):(t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,h,{offsetX:t.offsetX,offsetY:t.offsetY},void 0,void 0,!1),t.wrapper.measureChildren=!1),"SwimLane"===t.shape.type&&!this.diagram.currentSymbol){var c=t.wrapper.children[0],p=i.i(I.s)(this.diagram,c,0,!0);i.i(I.e)(p,this.diagram)}}else{var f=t,h={sourcePoint:f.sourcePoint,targetPoint:f.targetPoint},m="Bezier"===f.type,y=!1;f.sourceWrapper?y=!0:this.dragSourceEnd(f,e,o,!0,null,"",m),f.targetWrapper?y=!0:this.dragTargetEnd(f,e,o,!0,null,"",m);var v=!1;if(t instanceof r.a&&(v=!0),!y||v){this.dragControlPoint(f,e,o,!0);var b={sourcePoint:f.sourcePoint,targetPoint:f.targetPoint};this.diagram.connectorPropertyChange(f,h,b)}}},t.prototype.connectorSegmentChange=function(t,e,r){var n,o,a=!0;if(!1===e.equals(e,t.wrapper.bounds)&&t.outEdges.length>0)for(var s=0;s<t.outEdges.length;s++){var h=this.diagram.nameTable[t.outEdges[parseInt(s.toString(),10)]];if(a=""!==h.targetID?!this.isSelected(this.diagram.nameTable[h.targetID]):!this.isSelected(this.diagram.nameTable[h.id]),"Orthogonal"===h.type&&h.segments&&h.segments.length>1)if(r){var d=h.segments[0],l=h.segments[1],c=i.i(S.e)(t.wrapper,t.wrapper.corners,t.wrapper.bounds),p=i.i(S.f)(c,d.direction);p=i.i(S.g)(h,h.sourceWrapper,p,{x:h.sourceWrapper.offsetX,y:h.sourceWrapper.offsetY},!1);var u={corners:void 0,point:p,margin:void 0,direction:d.direction},f={corners:void 0,point:l.points[1],margin:void 0,direction:void 0},y=i.i(S.h)(u,f);d.length=m.a.distancePoints(y[0],y[1]),l.direction&&l.length&&(l.length=m.a.distancePoints(y[1],y[2]))}else if(a){switch(h.segments[0].direction){case"Bottom":n=t.wrapper.bounds.bottomCenter.x-e.bottomCenter.x,o=t.wrapper.bounds.bottomCenter.y-e.bottomCenter.y;break;case"Top":n=t.wrapper.bounds.topCenter.x-e.topCenter.x,o=t.wrapper.bounds.topCenter.y-e.topCenter.y;break;case"Left":n=t.wrapper.bounds.middleLeft.x-e.middleLeft.x,o=t.wrapper.bounds.middleLeft.y-e.middleLeft.y;break;case"Right":n=t.wrapper.bounds.middleRight.x-e.middleRight.x,o=t.wrapper.bounds.middleRight.y-e.middleRight.y}this.dragSourceEnd(h,n,o,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!(t.parentId&&this.diagram.diagramActions&g.p.isGroupDragging))}}},t.prototype.updateEndPoint=function(t,e){var i=(t.sourcePoint,t.targetPoint,t.sourceID&&t.sourceID,t.targetID&&t.targetID,t.sourcePortID&&t.sourcePortID,t.targetPortID&&t.targetPortID,t.segments&&t.segments,{sourcePoint:t.sourcePoint,targetPoint:t.targetPoint});t.sourceID&&(i.sourceID=t.sourceID),t.targetID&&(i.targetID=t.targetID),t.sourcePortID&&(i.sourcePortID=t.sourcePortID),t.targetPortID&&(i.targetPortID=t.targetPortID),t.segments&&(i.segments=t.segments),this.diagram.connectorPropertyChange(t,e||{},i),this.diagram.updateSelector()},t.prototype.dragSourceEnd=function(t,e,r,n,o,a,s,h,d,c,p){var f=this.diagram.nameTable[t.id],m={},y=this.checkBoundaryConstraints(e,r,f.wrapper.bounds);if(i.i(u.l)(f)&&y&&"BezierSourceThumb"!==a&&i.i(u.G)(this.diagram)&&(m={sourcePoint:f.sourcePoint},m=i.i(l.e)(m),f.sourcePoint.x+=e,f.sourcePoint.y+=r,"ConnectorSourceEnd"===a&&"Orthogonal"===f.type&&this.changeSegmentLength(f,h,d,c),"Bpmn"===f.shape.type&&"Default"===f.shape.sequence&&"Sequence"===f.shape.flow&&this.updatePathElementOffset(f)),"Bezier"===f.type)if(m={sourcePoint:f.sourcePoint},p)this.translateBezierPoints(t,""===a?"ConnectorSourceEnd":a,e,r,p,o,!s);else for(var v=0;v<t.segments.length;v++)this.translateBezierPoints(t,""===a?"ConnectorSourceEnd":a,e,r,t.segments[parseInt(v.toString(),10)],o,!s);return n||this.updateEndPoint(f,m),this.diagram.realActions&g.a.AnimationClick||this.diagram.refreshCanvasLayers(),y},t.prototype.updatePathElementOffset=function(t){t.wrapper.children.splice(3,1);var e=new o.a,r=t.intermediatePoints;e=i.i(c.n)(r,t),t.wrapper.children.splice(3,0,e)},t.prototype.changeSegmentLength=function(t,e,r,o){var a=!e||this.canConnect(t,e);if(t.segments&&null!==t.segments[0].direction&&(!e&&""===t.sourceID||o)&&a){var s=t.segments[0],h=t.segments[1],d=this.diagram.nameTable[t.sourceID],l=void 0;if(s.points[0]=t.sourcePoint,"Top"===s.direction||"Bottom"===s.direction?(s.points[s.points.length-1].x=t.sourcePoint.x,h.points[0].y=s.points[s.points.length-1].y):(s.points[s.points.length-1].y=t.sourcePoint.y,h.points[0].x=s.points[s.points.length-1].x),s.direction&&(s.length||0===s.length)&&(s.length=m.a.distancePoints(s.points[0],s.points[s.points.length-1])),h.direction&&(h.length||0===h.length)&&(h.length=m.a.distancePoints(s.points[s.points.length-1],h.points[h.points.length-1]),h.direction=m.a.direction(s.points[s.points.length-1],h.points[h.points.length-1])),""!==t.sourcePortID&&s.length<10)if(t.segments.length>2){var c=t.segments[2],p=m.a.direction(c.points[0],c.points[1]);s.direction===i.i(S.d)(p)?("Right"===s.direction?c.points[0].x=s.points[s.points.length-1].x=d.wrapper.corners.middleRight.x+20:"Left"===s.direction?c.points[0].x=s.points[s.points.length-1].x=d.wrapper.corners.middleLeft.x-20:"Top"===s.direction?c.points[0].y=s.points[s.points.length-1].y=d.wrapper.corners.topCenter.y-20:c.points[0].y=s.points[s.points.length-1].y=d.wrapper.corners.bottomCenter.y+20,c.direction&&c.length&&(c.length=m.a.distancePoints(c.points[0],c.points[c.points.length-1])),s.length=m.a.distancePoints(s.points[0],s.points[s.points.length-1])):s.direction===p&&c.direction&&c.length?("Top"===s.direction||"Bottom"===s.direction?(c.points[0]=s.points[0],c.points[c.points.length-1].x=c.points[0].x):(c.points[0]=s.points[0],c.points[c.points.length-1].y=c.points[0].y),c.length=m.a.distancePoints(c.points[0],c.points[c.points.length-1]),t.segments.splice(0,2)):s.length=20}else s.length=20;else if(s.length<1)if(""!==t.sourceID){if("Right"===h.direction?(l=d.wrapper.corners.middleRight,h.points[h.points.length-1].y=l.y):"Left"===h.direction?(l=d.wrapper.corners.middleLeft,h.points[h.points.length-1].y=l.y):"Top"===h.direction?(l=d.wrapper.corners.topCenter,h.points[h.points.length-1].x=l.x):(l=d.wrapper.corners.bottomCenter,h.points[h.points.length-1].x=l.x),h.length=m.a.distancePoints(l,h.points[h.points.length-1]),t.segments.length>2){var c=t.segments[2];c.direction&&c.length&&(c.length=m.a.distancePoints(h.points[h.points.length-1],c.points[c.points.length-1]))}t.segments.splice(0,1)}else t.segments.splice(0,1)}else e&&!r&&t.sourceID!==e.id&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof n.a&&a&&this.changeSourceEndToNode(t,e),e&&r&&t.sourcePortID!==r&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof n.a&&a&&this.changeSourceEndToPort(t,e,r)},t.prototype.canConnect=function(t,e){return!(!i.i(u.g)(e)||!i.i(u.e)(e))},t.prototype.changeSourceEndToPort=function(t,e,n){var o=this.diagram.getWrapper(e.wrapper,n),a={x:o.offsetX,y:o.offsetY},s=i.i(S.i)(a,i.i(l.k)(e.wrapper),e.wrapper.bounds,!1),h=t.segments[0],d=t.segments[1];if(h.direction!==s){var c=[],p={};if(h.direction===i.i(S.d)(s)){p={};var g=void 0;"Top"===s||"Bottom"===s?(g="Top"===s?{type:"Orthogonal",isTerminal:!0,direction:s,length:Math.abs(h.points[0].y-a.y)}:{type:"Orthogonal",isTerminal:!0,direction:s,length:Math.abs(a.y-h.points[0].y)},p=h.points[0].x>a.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:h.points[0].x-a.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:a.x-h.points[0].x}):(g="Right"===s?{type:"Orthogonal",isTerminal:!0,direction:s,length:Math.abs(h.points[0].x-a.x)}:{type:"Orthogonal",isTerminal:!0,direction:s,length:Math.abs(a.x-h.points[0].x)},p=h.points[0].y>a.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:h.points[0].y-a.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:a.y-h.points[0].y}),c.push(new r.f(t,"segments",g,!0)),c.push(new r.f(t,"segments",p,!0))}else p={type:"Orthogonal",direction:s,length:20,isTerminal:!0},c.push(new r.f(t,"segments",p,!0));h.direction!==i.i(S.d)(s)&&("Top"===s||"Bottom"===s?(h.points[0].x=a.x,h.points[0].y=h.points[h.points.length-1].y="Top"===s?a.y-20:a.y+20):(h.points[0].y=a.y,h.points[0].x=h.points[h.points.length-1].x="Right"===s?a.x+20:a.x-20),h.length=m.a.distancePoints(h.points[0],h.points[h.points.length-1]),d.length=m.a.distancePoints(h.points[h.points.length-1],d.points[d.points.length-1])),t.segments=c.concat(t.segments)}else h.points[0]=a,"Top"===s||"Bottom"===s?h.points[h.points.length-1].x=a.x:h.points[h.points.length-1].y=a.y,h.length=m.a.distancePoints(h.points[0],h.points[h.points.length-1]),d.length=m.a.distancePoints(h.points[h.points.length-1],d.points[d.points.length-1])},t.prototype.removeTerminalSegment=function(t,e){for(var i=0;i<t.segments.length-2;i++){var r=t.segments[0];r.isTerminal&&(e?r.isTerminal=!1:(t.segments.splice(i,1),i--))}},t.prototype.changeSourceEndToNode=function(t,e){this.removeTerminalSegment(t);var i,n,o=e.wrapper.children[0].corners,a=t.segments[0],s=t.segments[1],h=[];if("Right"===a.direction||"Left"===a.direction)if(i="Left"===a.direction?o.middleLeft:o.middleRight,a.length>o.width||"Left"===a.direction&&i.x>=a.points[0].x||"Right"===a.direction&&i.x<=a.points[0].x)a.points[0].y=a.points[a.points.length-1].y=i.y,a.points[0].x=i.x,a.length=m.a.distancePoints(a.points[0],a.points[a.points.length-1]),s.length=m.a.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1]);else{var d=void 0;d=s.direction?s.direction:m.a.direction(s.points[0],s.points[s.points.length-1]),n="Bottom"===d?o.bottomCenter:o.topCenter,s.length&&s.direction&&(s.length="Top"===d?a.points[a.points.length-1].y-(n.y+20):n.y+20-a.points[a.points.length-1].y),a.length=a.points[a.points.length-1].x-n.x,a.direction=a.length>0?"Right":"Left";var l={type:"Orthogonal",direction:d,length:20};h.push(new r.f(t,"segments",l,!0)),t.segments=h.concat(t.segments)}else if(i="Bottom"===a.direction?o.bottomCenter:o.topCenter,a.length>o.height||"Top"===a.direction&&i.y>=a.points[0].y||"Bottom"===a.direction&&i.y<=a.points[0].y)a.points[0].x=a.points[a.points.length-1].x=i.x,a.points[0].y=i.y,a.length=m.a.distancePoints(a.points[0],a.points[a.points.length-1]),s.length=m.a.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1]);else{n="Left"===s.direction?o.middleLeft:o.middleRight;var d=void 0;d=s.direction?s.direction:m.a.direction(s.points[0],s.points[s.points.length-1]),s.length&&s.direction&&(s.length="Left"===d?a.points[a.points.length-1].x-(n.x+20):n.x+20-a.points[a.points.length-1].x),a.length=a.points[a.points.length-1].y-n.y,a.direction=a.length>0?"Bottom":"Top";var l={type:"Orthogonal",direction:d,length:20};h.push(new r.f(t,"segments",l,!0)),t.segments=h.concat(t.segments)}},t.prototype.translateBezierPoints=function(t,e,n,o,a,s,h){var d=t.segments.indexOf(a),l=t.segments[parseInt(d.toString(),10)],c=d>0?t.segments[d-1]:null,p=null!==c?c.point:t.sourcePoint,g=d===t.segments.length-1?t.targetPoint:l.point;if(l)if("BezierSourceThumb"===e&&(l.vector1.angle||l.vector1.distance)){var u=l.vector1.distance,f=l.vector1.angle;l.vector1={distance:t.distance(p,s),angle:m.a.findAngle(p,s)};var y=l.vector1.distance-u,v=l.vector1.angle-f;this.translateSubsequentSegment(t,a,!0,y,v)}else if("BezierTargetThumb"===e&&(l.vector2.angle||l.vector2.distance)){var u=l.vector2.distance,f=l.vector2.angle;l.vector2={distance:t.distance(g,s),angle:m.a.findAngle(g,s)};var y=l.vector2.distance-u,v=l.vector2.angle-f;this.translateSubsequentSegment(t,a,!1,y,v)}else("ConnectorSourceEnd"===e&&!t.sourceID||"ConnectorTargetEnd"===e&&!t.targetID)&&h&&i.i(r.g)(l.vector1)&&i.i(r.g)(l.vector2)?(m.a.isEmptyPoint(l.point1)&&(l.bezierPoint1=i.i(r.h)(t.sourcePoint,t.targetPoint)),m.a.isEmptyPoint(l.point2)&&(l.bezierPoint2=i.i(r.h)(t.targetPoint,t.sourcePoint))):"BezierSourceThumb"===e||"ConnectorSourceEnd"===e&&!h&&i.i(r.g)(l.vector1)?(l.bezierPoint1.x+=n,l.bezierPoint1.y+=o,m.a.isEmptyPoint(l.point1)&&!h||(l.point1={x:l.bezierPoint1.x,y:l.bezierPoint1.y})):("BezierTargetThumb"===e||"ConnectorTargetEnd"===e&&!h&&i.i(r.g)(l.vector2))&&(l.bezierPoint2.x+=n,l.bezierPoint2.y+=o,m.a.isEmptyPoint(l.point2)&&!h||(l.point2={x:l.bezierPoint2.x,y:l.bezierPoint2.y}))},t.prototype.translateSubsequentSegment=function(t,e,i,r,n){var o=t.segments.indexOf(e);t.segments[parseInt(o.toString(),10)];t.bezierSettings.smoothness&g.s.SymmetricAngle||(n=null),t.bezierSettings.smoothness&g.s.SymmetricDistance||(r=null),null==r&&null==n||(i?0!==o&&this.updatePreviousBezierSegment(t,o,r,n):o!==t.segments.length-1&&this.updateNextBezierSegment(t,o,r,n))},t.prototype.updatePreviousBezierSegment=function(t,e,i,r){var n=t.segments[e-1],o=n.vector2.distance+i,a=(n.vector2.angle+r)%360;a<0&&(a+=360),n.vector2={distance:o,angle:a}},t.prototype.updateNextBezierSegment=function(t,e,i,r){var n=t.segments[e+1],o=n.vector1.distance+i,a=(n.vector1.angle+r)%360;a<0&&(a+=360),n.vector1={distance:o,angle:a}},t.prototype.dragTargetEnd=function(t,e,r,n,o,a,s,h){var d,c=this.diagram.nameTable[t.id],p=this.checkBoundaryConstraints(e,r,c.wrapper.bounds);if(i.i(u.m)(c)&&"BezierTargetThumb"!==a&&p&&i.i(u.G)(this.diagram)){if(d={targetPoint:c.targetPoint},d=i.i(l.e)(d),c.targetPoint.x+=e,c.targetPoint.y+=r,"ConnectorTargetEnd"===a&&"Orthogonal"===c.type&&c.segments&&c.segments.length>0){var f=c.segments[c.segments.length-2];f&&2===c.segments[c.segments.length-1].points.length&&("Left"===f.direction||"Right"===f.direction?f.points[f.points.length-1].x=c.targetPoint.x:f.points[f.points.length-1].y=c.targetPoint.y,f.length=m.a.distancePoints(f.points[0],f.points[f.points.length-1]),f.direction=m.a.direction(f.points[0],f.points[f.points.length-1]))}"Bpmn"===c.shape.type&&"Default"===c.shape.sequence&&"Sequence"===c.shape.flow&&this.updatePathElementOffset(c)}if("Bezier"===c.type)if(d={targetPoint:c.targetPoint},h)this.translateBezierPoints(t,""===a?"ConnectorTargetEnd":a,e,r,h,o,!s);else for(var y=0;y<t.segments.length;y++)this.translateBezierPoints(t,""===a?"ConnectorTargetEnd":a,e,r,t.segments[parseInt(y.toString(),10)],o,!s);return n||this.updateEndPoint(c,d),this.diagram.realActions&g.a.AnimationClick||this.diagram.refreshCanvasLayers(),p},t.prototype.dragControlPoint=function(t,e,i,r,n){var o=this.diagram.nameTable[t.id];if(("Straight"===o.type||"Bezier"===o.type)&&o.segments.length>0){if(void 0!==n&&o.segments[parseInt(n.toString(),10)])if("Bezier"===o.type){var a=o.segments[parseInt(n.toString(),10)],s=a.isInternalSegment;s&&null!==o.bezierSettings&&"FreeForm"!==o.bezierSettings.segmentEditOrientation?("Horizontal"===a.orientation?a.point.x+=e:a.point.y+=i,this.updateDirectionalBezierCurve(o)):(a.point.x+=e,a.point.y+=i),s&&(o.isBezierEditing=!0)}else o.segments[parseInt(n.toString(),10)].point.x+=e,o.segments[parseInt(n.toString(),10)].point.y+=i;else for(var h=0;h<o.segments.length-1;h++)o.segments[parseInt(h.toString(),10)].point.x+=e,o.segments[parseInt(h.toString(),10)].point.y+=i;r||this.updateEndPoint(o)}return!0},t.prototype.updateDirectionalBezierCurve=function(t){if(!(t.segments.length<2)){var e=[];e.push(t.sourcePoint);for(var r=0;r<t.segments.length-1;r++){var n=t.segments[parseInt(r.toString(),10)];"Horizontal"===n.orientation?e.push({x:n.point.x,y:e[e.length-1].y}):e.push({x:e[e.length-1].x,y:n.point.y}),r===t.segments.length-2&&("Horizontal"===n.orientation?e.push({x:n.point.x,y:t.targetPoint.y}):e.push({x:t.targetPoint.x,y:n.point.y}))}e.push(t.targetPoint);var o=e[0],a=e[e.length-1];if(t.segments.length>1){var s=e[1],h=e[2],d={x:.5*(s.x+h.x),y:.5*(s.y+h.y)},l=t.segments[0];l.vector1.angle=i.i(S.a)(o,s),l.vector1.distance=.5*m.a.findLength(o,s),l.vector2.angle=i.i(S.a)(d,s),l.vector2.distance=.5*m.a.findLength(d,s),l.point=d;var c=t.segments[1];if(c.vector1.angle=i.i(S.a)(d,h),c.vector1.distance=.5*m.a.findLength(d,h),t.segments.length>2){var p=e[3],g={x:.5*(h.x+p.x),y:.5*(h.y+p.y)};c.vector2.angle=i.i(S.a)(g,h),c.vector2.distance=.5*m.a.findLength(g,h),c.point=g;var u=t.segments[2];if(u.vector1.angle=i.i(S.a)(g,p),u.vector1.distance=.5*m.a.findLength(g,p),t.segments.length>3){var f=e[4],y={x:.5*(p.x+f.x),y:.5*(p.y+f.y)};u.vector2.angle=i.i(S.a)(y,p),u.vector2.distance=.5*m.a.findLength(y,p),u.point=y;var v=t.segments[3];v.vector1.angle=i.i(S.a)(y,f),v.vector1.distance=.5*m.a.findLength(y,f),v.vector2.angle=i.i(S.a)(a,f),v.vector2.distance=.5*m.a.findLength(a,f)}else u.vector2.angle=i.i(S.a)(a,p),u.vector2.distance=.5*m.a.findLength(a,p)}else c.vector2.angle=i.i(S.a)(a,h),c.vector2.distance=.5*m.a.findLength(a,h)}}},t.prototype.rotatePropertyChnage=function(t){var e=this.diagram.selectedItems,i=[];i=i.concat(e.nodes),i=i.concat(e.connectors);var r={x:e.offsetX,y:e.offsetY};this.rotateObjects(e,i,t-e.rotateAngle,r),e.wrapper.rotateAngle=e.rotateAngle=t,this.diagram.updateSelector()},t.prototype.rotateObjects=function(t,e,r,o,a){o=o||{};var s=i.i(d.a)();i.i(d.b)(s,r,o.x,o.y);for(var h=0,l=e;h<l.length;h++){var c=l[h];if(c instanceof n.a){if(i.i(u.n)(c)&&i.i(u.G)(this.diagram)){if(!1!==a||t!==c){({rotateAngle:c.rotateAngle}),c.rotateAngle+=r,c.rotateAngle=(c.rotateAngle+360)%360;var p=i.i(d.c)(s,{x:c.offsetX,y:c.offsetY});c.offsetX=p.x,c.offsetY=p.y,this.diagram.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY,rotateAngle:c.rotateAngle})}if(c.processId){var g=this.diagram.nameTable[c.processId],f=this.diagram.bpmnModule.getChildrenBound(g,c.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(f,c,this.diagram)}c.children&&c.children.length&&!c.container&&this.getChildren(c,e)}}else this.rotatePoints(c,r,o||{x:c.wrapper.offsetX,y:c.wrapper.offsetY});this.diagram.updateDiagramObject(c)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},t.prototype.snapConnectorEnd=function(t){return this.diagram.snapSettings.constraints&g.w.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(t),t},t.prototype.snapAngle=function(t){return this.diagram.snapSettings.constraints&g.w.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,t):0},t.prototype.rotatePoints=function(t,e,r){if(!t.sourceWrapper||!t.targetWrapper){var n=i.i(d.a)();i.i(d.b)(n,e,r.x,r.y),t.sourcePoint=i.i(d.c)(n,t.sourcePoint),t.targetPoint=i.i(d.c)(n,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.updatePathElementOffset(t);var o={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};if(this.diagram.connectorPropertyChange(t,{},o),t.segments&&t.segments.length>0){this.diagram.protectPropertyChange(!0);var a=t;a.segments=[],this.diagram.connectorPropertyChange(a,{},{segments:a.segments}),this.diagram.protectPropertyChange(!1)}}},t.prototype.updateInnerParentProperties=function(t){var e=[],i=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var r=this.getAllDescendants(t,e,!1,!0),n=0;n<r.length;n++){var o=this.diagram.nameTable[r[parseInt(n.toString(),10)].id];o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY,o.width=o.wrapper.width,o.height=o.wrapper.height}this.diagram.protectPropertyChange(i)},t.prototype.scale=function(t,e,r,n,o,a){var s=this.diagram.nameTable[t.id],h=s,d=[],p=s.wrapper;o||(o=t);var g=o.wrapper,f=g.offsetX-g.actualSize.width*g.pivot.x,m=g.offsetY-g.actualSize.height*g.pivot.y,v=i.i(c._3)(f,m,g.actualSize.width,g.actualSize.height,g.rotateAngle,g.offsetX,g.offsetY,n);if(void 0!==p.actualSize.width&&void 0!==p.actualSize.height&&i.i(u.G)(this.diagram)){if(h.children&&!h.container){for(var b=this.getAllDescendants(h,d),S=0,w=b;S<w.length;S++){var x=w[S];this.scaleObject(e,r,v,x,p,o)}t.wrapper.measure(new y.a),t.wrapper.arrange(t.wrapper.desiredSize),this.diagram.updateGroupOffset(s),this.updateInnerParentProperties(h)}else this.scaleObject(e,r,v,s,p,o);var I=i.i(l.i)(t.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,I)&&a)return this.scale(t,1/e,1/r,n,void 0,!0),!1;this.diagram.updateDiagramObject(t)}return!0},t.prototype.getAllDescendants=function(t,e,i,r){for(var n=t,o=[],a=0;a<n.children.length;a++)(t=this.diagram.nameTable[n.children[parseInt(a.toString(),10)]])&&(t.children?(i&&e.push(t),r&&o.push(t),e=this.getAllDescendants(t,e)):e.push(t));return r?o:e},t.prototype.getChildren=function(t,e){var i=t;if(t.children)for(var r=0;r<i.children.length;r++)t=this.diagram.nameTable[i.children[parseInt(r.toString(),10)]],e.push(t);return e},t.prototype.cloneChild=function(t){return this.diagram.nameTable[""+t]},t.prototype.scaleObject=function(t,e,r,o,a,s,h){t=t<0?1:t,e=e<0?1:e;var l={};if(1!==t||1!==e){var c=void 0,p=void 0;if(o instanceof n.a){var g=o,u=void 0,f=void 0;l={width:o.wrapper.actualSize.width,height:o.wrapper.actualSize.height,offsetX:o.wrapper.offsetX,offsetY:o.wrapper.offsetY,margin:{top:g.margin.top,left:g.margin.left}},"Bpmn"===g.shape.type&&g.shape.activity.subProcess.processes&&g.shape.activity.subProcess.processes.length>0&&(f=this.diagram.bpmnModule.getChildrenBound(g,g.id,this.diagram),u=g.wrapper.bounds.containsRect(f)),c=g.wrapper.actualSize.width*t,p=g.wrapper.actualSize.height*e,void 0!==g.maxWidth&&0!==g.maxWidth&&(c=Math.min(g.maxWidth,c)),void 0!==g.minWidth&&0!==g.minWidth&&(c=Math.max(g.minWidth,c)),void 0!==g.maxHeight&&0!==g.maxHeight&&(p=Math.min(g.maxHeight,p)),void 0!==g.minHeight&&0!==g.minHeight&&(p=Math.max(g.minHeight,p)),u&&(c=Math.max(c,f.right-g.wrapper.bounds.x),p=Math.max(p,f.bottom-g.wrapper.bounds.y)),t=c/g.actualSize.width,e=p/g.actualSize.height}var m=i.i(d.a)();s||(s=o);var y=s.wrapper;if(i.i(d.b)(m,-y.rotateAngle,r.x,r.y),i.i(d.d)(m,t,e,r.x,r.y),i.i(d.b)(m,y.rotateAngle,r.x,r.y),o instanceof n.a){var g=o,v=i.i(d.c)(m,{x:g.wrapper.offsetX,y:g.wrapper.offsetY}),b=g.wrapper.offsetX-g.wrapper.actualSize.width*g.pivot.x,S=g.wrapper.offsetY-g.wrapper.actualSize.height*g.pivot.y;if(c>0)if(g.processId){var w=this.diagram.nameTable[g.processId];(!w.maxWidth||g.margin.left+c<w.maxWidth)&&(g.width=c,g.offsetX=v.x)}else g.width=c,g.offsetX=v.x;if(p>0)if(g.processId){var I=this.diagram.nameTable[g.processId];(!I.maxHeight||g.margin.top+p<I.maxHeight)&&(g.height=p,g.offsetY=v.y)}else g.height=p,g.offsetY=v.y;var P=g.wrapper.offsetX-g.wrapper.actualSize.width*g.pivot.x,C=g.wrapper.offsetY-g.wrapper.actualSize.height*g.pivot.y;this.diagram.nameTable[g.processId]&&(g.margin.top+(C-S)<=0||g.margin.left+(P-b)<=0)?this.diagram.nodePropertyChange(o,{},{margin:{top:g.margin.top,left:g.margin.left}}):i.i(x.a)(this.diagram,o,!0)?i.i(x.i)(this.diagram,o):h||this.diagram.nodePropertyChange(o,l,{width:g.width,height:g.height,offsetX:g.offsetX,offsetY:g.offsetY,margin:{top:g.margin.top+(C-S),left:g.margin.left+(P-b)}})}else{var z=o,O={sourcePoint:z.sourcePoint,targetPoint:z.targetPoint};z.sourceWrapper&&z.targetWrapper||this.scaleConnector(z,m,O,t,e,r)}var T=this.diagram.nameTable[o.processId];if(T){var f=(T.wrapper.bounds,o.wrapper.bounds,this.diagram.bpmnModule.getChildrenBound(T,o.id,this.diagram));this.diagram.bpmnModule.updateSubProcessess(f,o,this.diagram)}}},t.prototype.scaleConnector=function(t,e,r,o,a,s){t.sourcePoint=i.i(d.c)(e,t.sourcePoint),t.targetPoint=i.i(d.c)(e,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.updatePathElementOffset(t);var h={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};this.diagram.connectorPropertyChange(t,r,h);var p=this.diagram.selectedItems;if(i.i(c.C)(this.diagram,p)){var g=i.i(l.e)(this.diagram.selectedItems),u={offsetX:g.offsetX,offsetY:g.offsetY,height:g.height,width:g.width,rotateAngle:g.rotateAngle},f=new n.a(this.diagram,"nodes",u,!0);f.wrapper=g.wrapper,f.wrapper.rotateAngle=p.rotateAngle,this.scaleObject(o,a,s,f,f.wrapper,f,!0),p.wrapper.actualSize.width=f.width,p.wrapper.actualSize.height=f.height,p.wrapper.offsetX=f.offsetX,p.wrapper.offsetY=f.offsetY;this.diagram.selectedItems.connectors[0].id!==t.id&&this.measureSelector(p)}},t.prototype.measureSelector=function(t){var e,r=void 0,o=i.i(l.e)(this.diagram.selectedItems),a=[];a=o.connectors;for(var s={x:this.diagram.selectedItems.offsetX,y:this.diagram.selectedItems.offsetY},h=0;h<a.length;h++){var c=i.i(d.a)();i.i(d.b)(c,-t.rotateAngle,s.x,s.y),a[parseInt(h.toString(),10)].sourcePoint=i.i(d.c)(c,a[parseInt(h.toString(),10)].sourcePoint),a[parseInt(h.toString(),10)].targetPoint=i.i(d.c)(c,a[parseInt(h.toString(),10)].targetPoint);var p={x:a[parseInt(h.toString(),10)].sourcePoint.x,y:a[parseInt(h.toString(),10)].sourcePoint.y},g={x:a[parseInt(h.toString(),10)].targetPoint.x,y:a[parseInt(h.toString(),10)].targetPoint.y};e=this.calculateBounds(p,g),void 0===r?r=e:r.uniteRect(e)}var m={};void 0!==r&&(m={x:r.x+r.width*t.wrapper.pivot.x,y:r.y+r.height*t.wrapper.pivot.y});var y={offsetX:m.x,offsetY:m.y,height:r.height,width:r.width,rotateAngle:0},v=new n.a(this.diagram,"nodes",y,!0),b=i.i(d.a)();i.i(d.b)(b,t.rotateAngle,s.x,s.y),v.rotateAngle+=t.rotateAngle,v.rotateAngle=(v.rotateAngle+360)%360;var S=i.i(d.c)(b,{x:v.offsetX,y:v.offsetY});v.offsetX=S.x,v.offsetY=S.y,t.wrapper.actualSize.width=r.width,t.wrapper.actualSize.height=r.height,t.wrapper.offsetX=v.offsetX,t.wrapper.offsetY=v.offsetY;var w=i.i(f.A)(this.diagram.element.id);this.diagram.diagramRenderer.renderResizeHandle(t.wrapper,w,t.thumbsConstraints,this.diagram.scroller.currentZoom,t.constraints,this.diagram.scroller.transform,!1,i.i(u.d)(t),null,null,t.handleSize)},t.prototype.calculateBounds=function(t,e){var i=Math.min(t.x,e.x),r=Math.max(t.x,e.x),n=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=r-i,h=o-n;return new s.a(i,n,a,h)},t.prototype.portDrag=function(t,e,r,n){var o,a,s=this.findTarget(e,t),h=i.i(l.i)(t.wrapper);s&&i.i(u.t)(s,this.diagram)&&(o=this.getPortChanges(t,s),s.offset.x+=r/h.width,s.offset.y+=n/h.height,a=this.getPortChanges(t,s),this.diagram.nodePropertyChange(t,o,a),this.diagram.updateDiagramObject(t))},t.prototype.labelDrag=function(t,e,r,o){var a=this.findTarget(e,t),s=i.i(l.k)(t.wrapper),h=this.getAnnotationChanges(t,a);a instanceof w.b?(a.offset.x+=r/s.width,a.offset.y+=o/s.height):(this.updatePathAnnotationOffset(t,a,r,o),a instanceof w.c&&(a.alignment="Center"));var d=this.getAnnotationChanges(t,a);t instanceof n.a?this.diagram.nodePropertyChange(t,h,d):this.diagram.connectorPropertyChange(t,h,d),this.diagram.updateDiagramObject(t),i.i(p.b)(this.diagram,a,!1,e)||this.labelSelect(t,e)},t.prototype.updatePathAnnotationOffset=function(t,e,r,n,o,a){var h,d,l,p,g=this.diagram.getWrapper(t.wrapper,e.id),u=g.offsetX,f=g.offsetY,y=t.intermediatePoints,v=0,b=0;switch(e.verticalAlignment){case"Center":"Center"===e.horizontalAlignment?p=o||{x:u+r,y:f+n}:"Right"===e.horizontalAlignment?p=o||{x:u+g.actualSize.width/2+r,y:f+n}:"Left"===e.horizontalAlignment&&(p=o||{x:u-g.actualSize.width/2+r,y:f+n});break;case"Top":"Center"===e.horizontalAlignment?p=o||{x:u+r,y:f-g.actualSize.height/2+n}:"Right"===e.horizontalAlignment?p=o||{x:u+g.actualSize.width/2+r,y:f-g.actualSize.height/2+n}:"Left"===e.horizontalAlignment&&(p=o||{x:u-g.actualSize.width/2+r,y:f-g.actualSize.height/2+n});break;case"Bottom":"Center"===e.horizontalAlignment?p=o||{x:u+r,y:f+g.actualSize.height/2+n}:"Right"===e.horizontalAlignment?p=o||{x:u+g.actualSize.width/2+r,y:f+g.actualSize.height/2+n}:"Left"===e.horizontalAlignment&&(p=o||{x:u-g.actualSize.width/2+r,y:f+g.actualSize.height/2+n})}var S=this.getInterceptWithSegment(p,y),w=y[y.length-1];if(b=m.a.getLengthFromListOfPoints(y),S.length>0){if(e.dragLimit.top||e.dragLimit.bottom||e.dragLimit.left||e.dragLimit.right){var x={minDistance:null};w=this.getRelativeOffset(p,y,x);var I={minDistance:null};if(l=this.getRelativeOffset(p,S,I),null!=x&&I.minDistance<x.minDistance)w=l;else{w=i.i(c._4)(t.intermediatePoints,e).point}}else l=S[S.length-1],w=l;if(w){var P=void 0,C=void 0;for(P=0;P<y.length;P++){if(null!=d){if(C=s.a.toBounds([d,y[parseInt(P.toString(),10)]]),C.containsPoint(w)){v+=m.a.findLength(d,w);break}v+=m.a.findLength(d,y[parseInt(P.toString(),10)])}d=y[parseInt(P.toString(),10)]}h={x:v/b,y:0}}this.updateLabelMargin(t,e,h,p,a,r,n)}else this.updateLabelMargin(t,e,null,p,a,r,n)},t.prototype.getRelativeOffset=function(t,e,i){var r,n,o,a;for(a=0;a<e.length;a++)o=e[parseInt(a.toString(),10)],n=Math.round(Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))),null!==i.minDistance&&Math.min(Math.abs(i.minDistance),Math.abs(n))!==Math.abs(n)||(r=o,i.minDistance=n);return r},t.prototype.dragLimitValue=function(t,e,i,r){var n=!1,o=!1;return i.x>=e.x-t.dragLimit.left-r.width/2&&i.x<=e.x+t.dragLimit.right+r.width/2&&(n=!0),i.y>=e.y-t.dragLimit.top-r.height/2&&i.y<=e.y+t.dragLimit.bottom+r.height/2&&(o=!0),{x:n,y:o}},t.prototype.updateLabelMargin=function(t,e,i,r,n,o,a){if(i=i||{x:e.offset,y:0},e&&i&&i.x>0&&i.x<1){var h=m.a.getLengthFromListOfPoints(t.intermediatePoints),d=this.getPointAtLength(h*i.x,t.intermediatePoints,0),l=this.diagram.scrollSettings.currentZoom,c=e.dragLimit;if(c.top||c.bottom||c.left||c.right){var p=(this.diagram.getWrapper(t.wrapper,e.id),new s.a(0,0,0,0)),g=this.diagram.getWrapper(t.wrapper,e.id);p.x=g.offsetX/l+o,p.y=g.offsetY/l+a,p.width=g.bounds.width/l,p.height=g.bounds.height/l;var u=new s.a(d.x-(c.left||0)-p.width/2,d.y-(c.top||0)-p.height/2,(c.left||0)+(c.right||0)+p.width,(c.top||0)+(c.bottom||0)+p.height);if(u.containsPoint(r))r=r;else{var f=void 0,y=[d,r];f=this.boundsInterSects(y,u,!1);for(var v=0,b=f;v<b.length;v++){r=b[v]}}var S=this.dragLimitValue(e,d,r,p);e.margin={left:S.x?r.x-d.x:e.margin.left,top:S.y?r.y-d.y:e.margin.top,right:0,bottom:0}}else e.margin={left:r.x-d.x,top:r.y-d.y,right:0,bottom:0};e.offset=i.x,n&&(e.width=n.width,e.height=n.height)}},t.prototype.boundsInterSects=function(t,e,i){var r;if(e){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height},{x:e.x,y:e.y}];r=this.intersect(t,n,i)}return r},t.prototype.intersect=function(t,e,r){for(var n=[],o=0;o<t.length-1;o++)for(var a=0;a<e.length-1;a++){var s=i.i(c._5)(t[o],t[o+1],e[a],e[a+1]);0!==s.x&&0!==s.y&&n.push(s)}return n},t.prototype.getPointAtLength=function(t,e,i){for(var r,n,o=0,a={x:0,y:0},s=0;s<e.length;s++)if(n=e[s],r){var h=m.a.findLength(r,n),d=void 0,l=void 0,c=void 0,p=void 0;if(o+h>=t){d=t-o,l=m.a.findAngle(r,n),c=d*Math.cos(l*Math.PI/180),p=d*Math.sin(l*Math.PI/180),a={x:r.x+c,y:r.y+p},l;break}o+=h,r=n}else r=n;return a},t.prototype.getInterceptWithSegment=function(t,e){for(var r,n,o=[],a=[],s=[],h=m.a.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight}),d=1;d<e.length;d++){s=[e[d-1],e[d]],a=[],n=Math.round(m.a.findAngle(s[0],s[1])%360),r=Math.round(m.a.findAngle(s[1],s[0])%360);var l=n>0&&n<=90||n>180&&n<=270?90:-90;a.push(m.a.transform(t,n+l,h)),a.push(m.a.transform(t,r+l,h));var p={x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y},g={x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y},u=i.i(c.j)(p,g);u.enabled&&o.push(u.intersectPt)}return o},t.prototype.getAnnotationChanges=function(t,e){var o=i.i(c.J)(t,e.id,!0),a={};return a[o]={width:e.width,height:e.height,offset:t instanceof n.a?{x:e.offset.x,y:e.offset.y}:e.offset,rotateAngle:e.rotateAngle,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,alignment:t instanceof r.a?e.alignment:void 0},{annotations:a}},t.prototype.getPortChanges=function(t,e){var r=i.i(c.J)(t,e.id,!1),n={};return n[r]={offset:e.offset},{ports:n}},t.prototype.labelRotate=function(t,e,r,o){var a,s;a=this.getAnnotationChanges(t,e);var h=(i.i(d.a)(),e.rotateAngle,this.diagram.getWrapper(t.wrapper,e.id)),l=i.i(S.a)({x:h.offsetX,y:h.offsetY},r)+90,p=this.snapAngle(l);if(l=0!==p?p:l,e instanceof w.c&&e.segmentAngle){l-=i.i(c.q)(t.intermediatePoints,e,t.wrapper.bounds).angle}l=(l+360)%360,e.rotateAngle+=l-(e.rotateAngle+h.parentTransform),e instanceof w.c&&(e.alignment="Center"),o.wrapper.rotateAngle=o.rotateAngle=e.rotateAngle,s=this.getAnnotationChanges(t,e),t instanceof n.a?this.diagram.nodePropertyChange(t,a,s):this.diagram.connectorPropertyChange(t,a,s),this.diagram.updateDiagramObject(t)},t.prototype.labelResize=function(t,e,r,o,a,s){var h,c,p;h=this.getAnnotationChanges(t,e);var g=s.wrapper.children[0];if(r&&1!==r||o&&1!==o){var u=i.i(d.a)(),f=i.i(d.a)();i.i(d.b)(u,-t.rotateAngle,t.offsetX,t.offsetY),p=(g.rotateAngle+(t instanceof n.a?t.rotateAngle:0)+360)%360,i.i(d.b)(f,-p,a.x,a.y),i.i(d.d)(f,r,o,a.x,a.y),i.i(d.b)(f,p,a.x,a.y);var m=i.i(d.c)(f,{x:g.offsetX,y:g.offsetY}),v=g.actualSize.height*o,b=g.actualSize.width*r,S=this.findTarget(g,t);if(S instanceof w.c&&(m.y+="Top"===S.verticalAlignment?-v/2:"Bottom"===S.verticalAlignment?v/2:0,m.x+="Left"===S.horizontalAlignment?-b/2:"Right"===S.horizontalAlignment?b/2:0),S instanceof w.c)this.updatePathAnnotationOffset(t,e,0,0,m,new y.a(b,v));else{var x=i.i(l.k)(t.wrapper);m=i.i(d.c)(u,m),m.x=m.x-g.margin.left+g.margin.right,m.y=m.y-g.margin.top+g.margin.bottom,m.y+="Top"===S.verticalAlignment?-v/2:"Bottom"===S.verticalAlignment?v/2:0,m.x+="Left"===S.horizontalAlignment?-b/2:"Right"===S.horizontalAlignment?b/2:0;var I=x.width/(m.x-x.x),P=x.height/(m.y-x.y);b>1&&(S.width=b,S.offset.x=1/I),v>1&&(S.height=v,S.offset.y=1/P)}}e instanceof w.c&&(e.alignment="Center"),c=this.getAnnotationChanges(t,e),t instanceof n.a?this.diagram.nodePropertyChange(t,h,c):this.diagram.connectorPropertyChange(t,h,c),this.diagram.updateDiagramObject(t)},t.prototype.getSubProcess=function(t){var e,r={nodes:[],connectors:[]};return t instanceof n.a?e=t.processId:t&&t.nodes&&t.nodes.length&&t.nodes[0].processId&&(e=t.nodes[0].processId),e?(r.nodes.push(i.i(l.e)(this.diagram.nameTable[e])),r):r},t.prototype.checkBoundaryConstraints=function(t,e,i){var r=this.diagram.pageSettings,n=this.diagram.pageSettings.boundaryConstraints,o=this.diagram.scroller;if("Page"===n||"Diagram"===n){var a=i?void 0:this.diagram.selectedItems.wrapper.bounds,s="Page"===n?r.width:o.viewPortWidth,h="Page"===n?r.height:o.viewPortHeight,d=i,l=(i?d.right:a.right)+(t||0),c=(i?d.left:a.left)+(t||0),p=(i?d.top:a.top)+(e||0),g=(i?d.bottom:a.bottom)+(e||0);return l<=s&&c>=0&&g<=h&&p>=0}return!0},t.prototype.dragSelectedObjects=function(t,e){var r=this.diagram.selectedItems;if(this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=r.offsetX,this.state.backup.offsetY=r.offsetY),r=i.i(x.j)(this.diagram,r)||r,this.checkBoundaryConstraints(t,e)){this.diagram.diagramActions=this.diagram.diagramActions|g.p.PreventZIndexOnDragging|g.p.DragUsingMouse;var o=this.diagram.selectedObject.actualObject;return(o&&o instanceof n.a&&o.isLane&&i.i(I.f)(o,this.diagram)||!o||!o.isLane)&&this.diagram.drag(r,t,e),this.diagram.diagramActions=this.diagram.diagramActions&~(g.p.PreventZIndexOnDragging|g.p.DragUsingMouse),this.diagram.refreshCanvasLayers(),!0}return!1},t.prototype.scaleSelectedItems=function(t,e,r){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY,this.state.backup.width=n.width,this.state.backup.height=n.height,this.state.backup.pivot=r),n=i.i(x.j)(this.diagram,n)||n,this.diagram.scale(n,t,e,r)},t.prototype.rotateSelectedItems=function(t){var e=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=e.rotateAngle),e=i.i(x.j)(this.diagram,e)||e,this.diagram.rotate(e,t)},t.prototype.hasSelection=function(){return i.i(p.f)(this.diagram)},t.prototype.isSelected=function(t){return i.i(p.b)(this.diagram,t)},t.prototype.initExpand=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var i=t.target||t.source,r={isExpanded:i.isExpanded};i.isExpanded=!i.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=g.p.PreventIconsUpdate,this.diagram.nodePropertyChange(i,r,{isExpanded:i.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~g.p.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1;for(var n=0,o=this.diagram.views;n<o.length;n++){var a=o[n],s=this.diagram.views[a];s instanceof h.a||this.diagram.refreshCanvasDiagramLayer(s)}this.diagram.protectPropertyChange(e)},t.prototype.expandNode=function(t,e,r){var n=this.diagram.preventNodesUpdate,o=t.isExpanded;this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(t,o,this.diagram),t.isExpanded=o;var a=this.diagram.layout.fixedNode;this.diagram.layout.fixedNode=t.id,this.diagram.diagramActions!=g.p.Render&&this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),this.diagram.blazorActions|=g.i.expandNode;var s={};if(r||(i.i(b.isBlazor)()&&(this.canUpdateTemplate=!0),s=this.diagram.doLayout()),this.canUpdateTemplate=!1,this.diagram.blazorActions&=~g.i.expandNode,this.diagram.preventNodesUpdate=n,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule&&!r)this.diagram.allowServerDataBinding=!1,this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,s,t,this.diagram);else{var h={element:i.i(c.b)(i.i(l.e)(t)),state:!!t.isExpanded};this.triggerEvent(g.r.expandStateChange,h),this.diagram.lineRoutingModule&&this.diagram.constraints&g.j.LineRouting&&this.diagram.resetSegments()}return this.diagram.layout.fixedNode=""===a?"":this.diagram.layout.fixedNode,s},t.prototype.getparentexpand=function(t,e,i,r){for(var n,o=0;o<t.inEdges.length;o++){var a=e.nameTable[t.inEdges[o]],s=e.nameTable[a.sourceID];if(s.isExpanded&&!i&&s.id!==r.sourceID&&a.visible)return!1;n=!0}return n},t.prototype.expandCollapse=function(t,e,i){for(var r=0;r<t.outEdges.length;r++){var n=i.nameTable[t.outEdges[r]],o=i.nameTable[n.targetID],a=this.getparentexpand(o,i,e,n);n.visible=e;var s={visible:o.visible,style:{opacity:o.wrapper.style.opacity}},h={visible:o.visible,style:{opacity:o.wrapper.style.opacity}};a&&(o.isExpanded&&this.expandCollapse(o,e,i),o.visible=e,o.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&e?.1:o.style.opacity,i.nodePropertyChange(o,s,h)),i.connectorPropertyChange(n,s,h)}},t.prototype.updateNodeDimension=function(t,e){t instanceof n.a&&(t.offsetX=e.x+e.width/2,t.offsetY=e.y+e.height/2,t.width=e.width,t.height=e.height,t.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(t,{},{width:e.width,height:e.height,offsetX:t.offsetX,offsetY:t.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},t.prototype.updateConnectorPoints=function(t,e){t instanceof r.a&&"Bezier"!==t.type?(this.diagram.connectorPropertyChange(t,{},{targetPoint:t.targetPoint}),this.diagram.updateDiagramObject(t)):(this.diagram.connectorPropertyChange(t,{},{segments:t.segments}),this.diagram.updateDiagramObject(t))},t.prototype.updateSelectedNodeProperties=function(t){if(this.diagram.lineRoutingModule&&this.diagram.constraints&g.j.LineRouting){var e=[],o=[],a=[],s=[],h=[],d=[];this.diagram.protectPropertyChange(!0);var c=[],p=[],u=this.diagram.selectedObject.actualObject,f=this.diagram.selectedObject.helperObject;if(f&&u){var m=f.offsetX-u.offsetX,y=f.offsetY-u.offsetY,v=f.width-u.width,S=f.height-u.height,w=f.rotateAngle-u.rotateAngle;if(this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>0&&(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=f.rotateAngle),u instanceof n.a&&"SwimLane"!==u.shape.type&&!u.isLane&&!u.isPhase&&!u.isHeader)u.offsetX===u.wrapper.offsetX&&u.offsetY===u.wrapper.offsetY&&u.width===u.wrapper.width&&u.height===u.wrapper.height&&u.rotateAngle===u.wrapper.rotateAngle||(i.i(b.isBlazor)()&&e.push(i.i(l.e)(u,void 0,void 0,!0)),u.offsetX+=m,u.offsetY+=y,u.width+=v,u.height+=S,u.rotateAngle+=w,this.diagram.nodePropertyChange(u,{},{offsetX:u.offsetX,offsetY:u.offsetY,width:u.width,height:u.height,rotateAngle:u.rotateAngle}),i.i(b.isBlazor)()&&a.push(i.i(l.e)(u,void 0,void 0,!0))),c=this.diagram.spatialSearch.findObjects(u.wrapper.outerBounds);else if(u instanceof n.G)for(var x=0;x<u.nodes.length;x++){var I=u.nodes[x];I instanceof n.a&&"SwimLane"!==I.shape.type&&!I.isLane&&!I.isPhase&&!I.isHeader&&(I.offsetX+=m,I.offsetY+=y,I.width+=v,I.height+=S,I.rotateAngle+=w,this.diagram.nodePropertyChange(I,{},{offsetX:I.offsetX,offsetY:I.offsetY,width:I.width,height:I.height,rotateAngle:I.rotateAngle}),c=c.concat(this.diagram.spatialSearch.findObjects(u.wrapper.outerBounds)))}}else t instanceof r.a?c.push(t):t instanceof n.G&&t.connectors.length&&(c=c.concat(t.connectors));for(var x=0;x<c.length;x++)c[x]instanceof r.a&&-1===p.indexOf(c[x].id)&&p.push(c[x].id);this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0);for(var x=0;x<p.length;x++){var P=this.diagram.nameTable[p[x]];if(P instanceof r.a&&"Orthogonal"===P.type){if(i.i(b.isBlazor)()&&o.push(i.i(l.e)(P,void 0,void 0,!0)),P.sourceID!=P.targetID&&P.segments.length>1){var C=this.diagram.getObject(P.sourceID),z=this.diagram.getObject(P.targetID),O=z.wrapper.outerBounds.middleLeft.x-C.wrapper.outerBounds.middleRight.x,T=z.wrapper.outerBounds.topCenter.y-C.wrapper.outerBounds.bottomCenter.y;(O>30||T>30)&&this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,P,!0)}i.i(b.isBlazor)()&&s.push(i.i(l.e)(P,void 0,void 0,!0))}}if(this.updateSelector(),i.i(b.isBlazor)()){this.getObjectChanges(e,a,h),this.getObjectChanges(o,s,d);var A={nodes:h,connectors:d};if(window&&window.Blazor&&d.length+h.length){var L={methodName:"UpdateBlazorProperties",diagramobj:A};window.sfBlazor.updateBlazorProperties(L,this.diagram)}}this.diagram.protectPropertyChange(!1)}},t.prototype.drawSelectionRectangle=function(t,e,i,r){this.diagram.drawSelectionRectangle(t,e,i,r)},t.prototype.startGroupAction=function(){this.diagram.startGroupAction()},t.prototype.endGroupAction=function(){this.diagram.endGroupAction()},t.prototype.removeChildFromBPmn=function(t,e,r){var n=this.diagram.nameTable[t.id]||t.nodes[0];if(r&&n&&n.processId&&n.processId===r.wrapper.id){var o=i.i(l.e)(n);o.processId=n.processId,this.diagram.startGroupAction();var a=[];a=a.concat(n.outEdges,n.inEdges);for(var s=a.length-1;s>=0;s--){var h=this.diagram.nameTable[a[s]];h&&this.diagram.remove(h)}var d=this.diagram.nameTable[n.processId].shape.activity.subProcess.processes||[];d.splice(d.indexOf(n.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[n.processId].wrapper,n.id),this.diagram.nameTable[n.id].processId="",n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var c=i.i(l.e)(n),p={type:"PositionChanged",redoObject:{nodes:[c]},undoObject:{nodes:[o]},category:"Internal"};this.addHistoryEntry(p),this.diagram.endGroupAction()}},t.prototype.isDroppable=function(t,e){var r=this.diagram.nameTable[t.id]||t.nodes[0];return r instanceof n.a&&(!!(!i.i(b.isBlazor)()&&"TextAnnotation"===r.shape.shape||i.i(b.isBlazor)()&&"TextAnnotation"===r.shape.bpmnShape)||(!r||"Bpmn"!==r.shape.type||!(r.processId===e.id||r.id===e.processId||"Bpmn"===e.shape.type&&e.shape.activity.subProcess.collapsed)))},t.prototype.renderHighlighter=function(t,e,i){new s.a;if(t.target instanceof n.a||e&&t.source instanceof n.a){var r=e?t.source:t.target,o=e?t.sourceWrapper:t.targetWrapper,a=this.findTarget(o,r,i,!0),h=void 0;if(a instanceof n.u)for(var d=a.id,l=t.target,c=l.wrapper.children[0].children[0].children[2],p=0,g=c.children;p<g.length;p++){var u=g[p];if(u.id===l.id+"_"+d){h=u.children[0];break}}else h=a instanceof n.a?a.wrapper:e?t.sourceWrapper:t.targetWrapper;this.diagram.renderHighlighter(h)}},t.prototype.mouseOver=function(t,e,i){return!0},t.prototype.snapPoint=function(t,e,i,r){var n,o=this.diagram.selectedItems,a=e.x<t.x,s=e.y<t.y;n={x:i,y:r};var h=n;return this.snappingModule&&(h=this.diagram.snappingModule.snapPoint(this.diagram,o,a,s,n,t,e)),h},t.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&g.w.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},t.prototype.dropAnnotation=function(t,e){if(t instanceof n.a||t instanceof n.G){var r=t instanceof n.a?t:t.nodes[0];if(this.diagram.bpmnModule&&"Bpmn"===e.shape.type&&(!i.i(b.isBlazor)()&&"TextAnnotation"===r.shape.shape||i.i(b.isBlazor)()&&"TextAnnotation"===r.shape.bpmnShape)){r.hasTarget=e.id,r.shape.annotation.nodeId=e.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(r.shape.annotation,e),r.shape.annotation.nodeId="",this.diagram.remove(r)),this.diagram.refreshDiagramLayer()}}},t.prototype.drop=function(t,e,i){if(this.diagram.bpmnModule){var r=t instanceof n.a?t:t.nodes[0];r&&"Bpmn"===r.shape.type&&"Bpmn"===e.shape.type&&(this.diagram.bpmnModule.dropBPMNchild(e,t instanceof n.a?t:t.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())}},t.prototype.addHistoryEntry=function(t){this.diagram.addHistoryEntry(t)},t.prototype.align=function(t,e,r){if(t.length>0){var n=0;t[0]=this.diagram.nameTable[t[0].id]||t[0];var o="Object"===r?i.i(l.i)(t[0].wrapper):this.diagram.selectedItems.wrapper.bounds,a={nodes:[],connectors:[]},s={nodes:[],connectors:[]};for(n="Object"===r?n+1:n;n<t.length;n++){var h=0,d=0;t[n]=this.diagram.nameTable[t[n].id]||t[n];var c=i.i(l.i)(t[n].wrapper);"Left"===e?h=o.left+c.width/2-c.center.x:"Right"===e?h=o.right-c.width/2-c.center.x:"Top"===e?d=o.top+c.height/2-c.center.y:"Bottom"===e?d=o.bottom-c.height/2-c.center.y:"Center"===e?h=o.center.x-c.center.x:"Middle"===e&&(d=o.center.y-c.center.y),a=this.storeObject(a,t[n]),this.drag(t[n],h,d),this.diagram.updateSelector(),s=this.storeObject(s,t[n])}a=i.i(l.e)(a),s=i.i(l.e)(s);var p={type:"Align",category:"Internal",undoObject:i.i(l.e)(a),redoObject:i.i(l.e)(s)};this.addHistoryEntry(p)}},t.prototype.distribute=function(t,e){if(t.length>0){var r=0,n=0,o=0,a=0,s=0,h=0,d=0,p=0,g={nodes:[],connectors:[]},u={nodes:[],connectors:[]};for(r=0;r<t.length;r++)t[r]=this.diagram.nameTable[t[r].id]||t[r];for(t=i.i(c._6)(t,e),r=1;r<t.length;r++)n=n+t[r].wrapper.bounds.topRight.x-t[r-1].wrapper.bounds.topRight.x,o=o+t[r].wrapper.bounds.topLeft.x-t[r-1].wrapper.bounds.topLeft.x,a=a+t[r].wrapper.bounds.topRight.y-t[r-1].wrapper.bounds.topRight.y,s=s+t[r].wrapper.bounds.bottomRight.y-t[r-1].wrapper.bounds.bottomRight.y,h=h+t[r].wrapper.bounds.center.x-t[r-1].wrapper.bounds.center.x,d=d+t[r].wrapper.bounds.center.y-t[r-1].wrapper.bounds.center.y,p=p+t[r].wrapper.bounds.topRight.y-t[r-1].wrapper.bounds.bottomRight.y;for(r=1;r<t.length-1;r++){var f=0,m=0,y=i.i(l.i)(t[r-1].wrapper),v=i.i(l.i)(t[r].wrapper);"RightToLeft"===e||"Center"===e?f=y.center.x-v.center.x+h/(t.length-1):"Right"===e?f=y.topRight.x-v.topRight.x+n/(t.length-1):"Left"===e?f=y.topLeft.x-v.topLeft.x+o/(t.length-1):"Middle"===e?m=y.center.y-v.center.y+d/(t.length-1):"Top"===e?m=y.topRight.y-v.topRight.y+a/(t.length-1):"Bottom"===e?m=y.bottomRight.y-v.bottomRight.y+s/(t.length-1):"BottomToTop"===e&&(m=y.bottomRight.y-v.topRight.y+p/(t.length-1)),g=this.storeObject(g,t[r]),this.drag(t[r],f,m),this.diagram.updateSelector(),u=this.storeObject(u,t[r])}g=i.i(l.e)(g),u=i.i(l.e)(u);var b={type:"Distribute",category:"Internal",undoObject:i.i(l.e)(g),redoObject:i.i(l.e)(u)};this.addHistoryEntry(b)}},t.prototype.sameSize=function(t,e){if(t.length>0){var r=0,n={x:.5,y:.5};t[0]=this.diagram.nameTable[t[0].id]||t[0];var o=i.i(l.i)(t[0].wrapper),a={nodes:[],connectors:[]},s={nodes:[],connectors:[]};for(r=1;r<t.length;r++){t[parseInt(r.toString(),10)]=this.diagram.nameTable[t[parseInt(r.toString(),10)].id]||t[0];var h=i.i(l.i)(t[parseInt(r.toString(),10)].wrapper),d=1,c=1;"Width"===e?d=o.width/h.width:"Height"===e?c=o.height/h.height:"Size"===e&&(d=o.width/h.width,c=o.height/h.height),a=this.storeObject(a,t[parseInt(r.toString(),10)]),this.scale(t[parseInt(r.toString(),10)],d,c,n),s=this.storeObject(s,t[parseInt(r.toString(),10)])}this.diagram.updateSelector(),a=i.i(l.e)(a),s=i.i(l.e)(s);var p={type:"Sizing",category:"Internal",undoObject:i.i(l.e)(a),redoObject:i.i(l.e)(s)};this.addHistoryEntry(p)}},t.prototype.storeObject=function(t,e){return e instanceof n.a?t.nodes.push(i.i(l.e)(e)):t.connectors.push(i.i(l.e)(e)),t},t.prototype.updatePanState=function(t){if(t)this.diagram.realActions=this.diagram.realActions|g.a.PanInProgress;else{this.diagram.dataBind();var e=this.diagram.scrollSettings;this.diagram.realActions=this.diagram.realActions&~g.a.PanInProgress;var i={VerticalOffset:e.verticalOffset,HorizontalOffset:e.horizontalOffset,ViewportHeight:e.viewPortHeight,ViewportWidth:e.viewPortWidth,CurrentZoom:e.currentZoom},r={oldValue:i,newValue:i,source:this.diagram,panState:"Completed"};this.triggerEvent(g.r.scrollChange,r)}},t.prototype.dataBinding=function(){this.diagram.dataBind()},t.prototype.setBlazorDiagramProps=function(t){this.diagram.setBlazorDiagramProps(t)},t.prototype.scroll=function(t,e,r){var n=i.i(u.H)(this.diagram),o=i.i(u.I)(this.diagram);i.i(b.isBlazor)()?(this.diagram.setCursor("grabbing"),this.diagram.scroller.zoom(1,(t=n?t:0)*this.diagram.scroller.currentZoom,(e=o?e:0)*this.diagram.scroller.currentZoom,r)):this.diagram.pan((t=n?t:0)*this.diagram.scroller.currentZoom,(e=o?e:0)*this.diagram.scroller.currentZoom,r,!0)},t.prototype.drawHighlighter=function(t){this.diagram.renderHighlighter(t.wrapper)},t.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},t.prototype.renderContainerHelper=function(t){return i.i(x.j)(this.diagram,t)},t.prototype.isParentAsContainer=function(t,e){return i.i(x.a)(this.diagram,t,e)},t.prototype.dropChildToContainer=function(t,e){this.diagram.diagramActions&g.p.PreventLaneContainerUpdate||"Bpmn"===e.shape.type&&"TextAnnotation"===e.shape.shape||i.i(x.e)(this.diagram,t,e)},t.prototype.updateLaneChildrenZindex=function(t,e){var i=this.findLeastIndexObject(t,e),r=this.diagram.nameTable[e.parentId];if(r&&r.zIndex>i.zIndex){for(var n=this.diagram.layers.indexOf(this.diagram.getActiveLayer()),o=this.diagram.layers[parseInt(n.toString(),10)].zIndexTable,a=JSON.parse(JSON.stringify(o)),s=i.zIndex,h=r.zIndex,d=h;d>=s;d--)if(s!==d)o[d-1]?(o[parseInt(d.toString(),10)]=o[d-1],this.diagram.nameTable[o[parseInt(d.toString(),10)]].zIndex=d):(o[d-1]=o[parseInt(d.toString(),10)],this.diagram.nameTable[o[d-1]].zIndex=d,delete o[parseInt(d.toString(),10)]);else{this.swapZIndexObjects(h,o,r.id,a)}"SVG"===this.diagram.mode?(this.moveSvgNode(e.parentId,i.id),this.updateNativeNodeIndex(e.parentId,i.id)):this.diagram.refreshCanvasLayers()}},t.prototype.findLeastIndexConnector=function(t,e,i){for(var r=0;r<t.length;r++){var n=this.diagram.nameTable[t[parseInt(r.toString(),10)]];i.zIndex>n.zIndex&&(i=n)}return i},t.prototype.findLeastIndexObject=function(t,e){var i=t;return t instanceof n.a&&(i=this.findLeastIndexConnector(t.inEdges,e,i),i=this.findLeastIndexConnector(t.outEdges,e,i)),i},t.prototype.checkSelection=function(t,e){var r;if(1===t.nodes.length&&0===t.connectors.length)if(i.i(x.a)(this.diagram,t.nodes[0],!0)){r="SwimLane"===t.nodes[0].shape?t.nodes[0]:this.diagram.nameTable[t.nodes[0].parentId];var n=t.nodes[0];if("SwimLane"===r.shape.type){var o="Horizontal"===r.shape.orientation;(n.isPhase&&(o&&"ResizeSouth"===e||!o&&"ResizeEast"===e)||n.isLane&&(o&&"ResizeEast"===e||!o&&"ResizeSouth"===e))&&i.i(P.x)(this.diagram,r,e)}else if("Grid"===r.container.type)if("Horizontal"===r.container.orientation&&1===n.rowIndex||"Vertical"===r.container.orientation&&n.rowIndex>0&&n.columnIndex>0){if("ResizeSouth"===e)for(var a=0;a<this.diagram.nodes.length;a++){var s=this.diagram.nodes[parseInt(a.toString(),10)];if(s.rowIndex===r.rows.length-1&&0===s.columnIndex){this.select(s);break}}}else if("ResizeEast"===e)for(var a=0;a<this.diagram.nodes.length;a++){var s=this.diagram.nodes[parseInt(a.toString(),10)];if(1===s.rowIndex&&s.columnIndex===r.columns.length-1){this.select(s);break}}}else i.i(P.x)(this.diagram,t.nodes[0],e)},t.prototype.zoom=function(t,e,i,r){this.diagram.scroller.zoom(t,e*this.diagram.scroller.currentZoom,i*this.diagram.scroller.currentZoom,r)},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var r=i(8),n=i(5),o=i(2),a=i(3),s=i(1),h=i(26),d=i(18),l=i(10),c=i(27),p=i(0),g=(i.n(p),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),u=function(t){function e(e,i){var r=t.call(this,e,!0)||this;return r.oldValue=null,r.endPoint=i,r}return g(e,t),e.prototype.mouseDown=function(e){var r,n=!0;if(e.source&&e.source.connectors&&(r=e.source.connectors[0]),e.info&&e.actualObject&&(n=e.info.ctrlKey&&"Orthogonal"!==e.actualObject.type),r&&n){this.inAction=!0,this.undoElement=i.i(a.e)(e.source),t.prototype.mouseDown.call(this,e);for(var o=0;o<r.segments.length;o++){var s=r.segments[parseInt(o.toString(),10)];if("OrthoThumb"===this.endPoint)for(var d=0;d<s.points.length-1;d++){var l={x:0,y:0};l.x=(s.points[parseInt(d.toString(),10)].x+s.points[d+1].x)/2,l.y=(s.points[parseInt(d.toString(),10)].y+s.points[d+1].y)/2,i.i(h.a)(this.currentPosition,l,30)&&(this.selectedSegment=s,this.segmentIndex=d)}else i.i(h.a)(this.currentPosition,s.point,10)&&(this.selectedSegment=s)}}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var n=this.currentPosition.y-this.prevPosition.y,h=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var d=void 0,l=void 0,c=!1;e.source&&e.source.connectors&&(d=e.source.connectors[0]),r.a.equals(this.startPosition,this.prevPosition)&&(c=!0),null===this.oldValue&&(this.oldValue=i.i(a.e)(this.selectedSegment));var g={source:d,state:"Start",oldValue:this.oldValue,newValue:this.oldValue,segment:this.selectedSegment,cancel:!1};if(g={source:i.i(o.b)(d),state:"Start",oldValue:i.i(o.b)(this.oldValue),newValue:i.i(o.b)(this.oldValue),segment:i.i(o.b)(this.selectedSegment),cancel:!1},c&&!i.i(p.isBlazor)()&&this.commandHandler.triggerEvent(s.r.segmentChange,g),g.cancel&&this.commandHandler.diagram.resetTool(),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==h||0!==n)&&!g.cancel){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(d,this.selectedSegment,this.currentPosition,this.segmentIndex),null===this.oldValue.length&&null===this.oldValue.direction&&(this.oldValue=i.i(a.e)(this.selectedSegment)),l=i.i(a.e)(this.selectedSegment);else{var u=this.currentPosition.x-this.selectedSegment.point.x,f=this.currentPosition.y-this.selectedSegment.point.y,m=d.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(d,u,f,!1,m),l=i.i(a.e)(this.selectedSegment)}this.commandHandler.updateSelector(),this.currentPosition=e.position;var y={source:i.i(o.b)(d),state:"Progress",oldValue:i.i(o.b)(this.oldValue),newValue:i.i(o.b)(l),segment:i.i(o.b)(this.selectedSegment),cancel:!1};this.commandHandler.triggerEvent(s.r.segmentChange,y)}}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){var n,h;if(e.source&&e.source.connectors&&(n=e.source.connectors[0],h={segments:n.segments}),e&&e.source&&e.info&&e.info.ctrlKey&&e.info.shiftKey&&"Straight"===n.type)this.addOrRemoveSegment(n,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var d=n.segments.indexOf(this.selectedSegment),l=n.segments[d-1],c=n.segments[d+1];if(d===n.segments.length-2&&this.updateLastSegment(n,this.selectedSegment))n.segments.splice(n.segments.length-2,1);else if(l&&Math.abs(l.length)<5)1!==d&&this.removePrevSegment(n,d);else if(c){var p=r.a.distancePoints(c.points[0],c.points[1]),g=c.length||0===c.length?c.length:p;Math.abs(g)<=5&&this.removeNextSegment(n,d)}this.commandHandler.updateEndPoint(n,h),n.selectedSegmentIndex=0}if(this.undoElement){var u=i.i(a.e)(e.source),f={type:"SegmentChanged",redoObject:u,undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(f)}if(n.isBezierEditing&&(n.isBezierEditing=!1),this.prevPosition!==this.startPosition){var m={source:i.i(o.b)(n),state:"Completed",oldValue:i.i(o.b)(this.oldValue),newValue:i.i(a.e)(this.selectedSegment),cancel:!1,segment:i.i(o.b)(this.selectedSegment)};this.commandHandler.triggerEvent(s.r.segmentChange,m)}t.prototype.mouseUp.call(this,e)},e.prototype.removePrevSegment=function(t,e){var n=t.segments[e-2],a=t.segments[e+1];if(!((a.length||0===a.length?a.length:r.a.distancePoints(a.points[0],a.points[1]))<=5)){var h=t.segments.slice(e-1,e+1),d={element:t,removeSegments:h,type:"Removal",cancel:!1};if(i.i(p.isBlazor)()&&(d={element:i.i(o.b)(t),removeSegments:i.i(o.b)(h),type:"Removal",cancel:d.cancel}),this.commandHandler.triggerEvent(s.r.segmentCollectionChange,d),!d.cancel){var l=t.segments[e+1];t.segments.splice(e-1,2);var c=this.selectedSegment;"Left"===c.direction||"Right"===c.direction?(n.points[n.points.length-1].x=l.points[0].x,l.points[0].y=n.points[n.points.length-1].y):(n.points[n.points.length-1].y=l.points[0].y,l.points[0].x=n.points[n.points.length-1].x),(c.length||0===c.length)&&this.findSegmentDirection(n),this.findSegmentDirection(l)}}},e.prototype.findSegmentDirection=function(t){t.direction&&(t.length||0===t.length)&&(t.length=r.a.distancePoints(t.points[0],t.points[t.points.length-1]),t.direction=r.a.direction(t.points[0],t.points[t.points.length-1]))},e.prototype.removeNextSegment=function(t,e){var n,a,h=this.selectedSegment,d=t.segments[e-1],l=t.segments[e+2],c=t.segments[e+1];if(c.length||0===c.length?(n=t.segments.slice(e,2),a={element:t,removeSegments:n,type:"Removal",cancel:!1},a={element:i.i(o.b)(t),removeSegments:i.i(o.b)(n),type:"Removal",cancel:!1},i.i(p.isBlazor)()&&(a={element:i.i(o.b)(t),removeSegments:i.i(o.b)(n),type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(s.r.segmentCollectionChange,a),a.cancel||(t.segments.splice(e,2),"Top"===h.direction||"Bottom"===h.direction?(l.points[0].y=h.points[0].y,d.points[d.points.length-1].x=l.points[0].x):(l.points[0].x=h.points[0].x,d.points[d.points.length-1].y=l.points[0].y))):(n=t.segments.slice(e+1,1),a={element:t,removeSegments:n,type:"Removal",cancel:!1},i.i(p.isBlazor)()&&(a={element:t,removeSegments:n,type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(s.r.segmentCollectionChange,a),a.cancel||(t.segments.splice(e+1,1),"Top"===h.direction||"Bottom"===h.direction?d.points[d.points.length-1].x=c.points[c.points.length-1].x:d.points[d.points.length-1].y=c.points[c.points.length-1].y,this.findSegmentDirection(d),h.length=h.direction=null)),d&&l&&!a.cancel&&(d.length=r.a.distancePoints(d.points[0],l.points[0]),d.direction=r.a.direction(d.points[0],l.points[0]),l.length||0===l.length)){l.length=r.a.distancePoints(d.points[d.points.length-1],l.points[l.points.length-1]);var g=d.points,u=l.points;l.direction=r.a.direction(g[g.length-1],u[u.length-1])}},e.prototype.addOrRemoveSegment=function(t,e){for(var r,n,o={segments:t.segments},a=0;a<t.segments.length;a++){var s=t.segments[parseInt(a.toString(),10)];i.i(h.a)(e,s.point,t.hitPadding)&&(n=a,r=!0)}if(r&&void 0!==n){if(t.segments&&t.segments[parseInt(n.toString(),10)]&&"Straight"===t.segments[parseInt(n.toString(),10)].type){var s=t.segments[parseInt(n.toString(),10)],d=t.segments[n+1];d&&(t.segments.splice(n,1),d.points[0]=s.points[0])}}else{this.commandHandler.enableServerDataBinding(!1);var c=this.findIndex(t,e);if(t.segments&&t.segments[parseInt(c.toString(),10)]&&"Straight"===t.segments[parseInt(c.toString(),10)].type){var s=t.segments[parseInt(c.toString(),10)],p=new l.d(t,"segments",{type:"Straight",point:e},!0);p.points[0]=s.points[0],p.points[1]=e,s.points[0]=e,t.segments.splice(c,0,p),r=!0}this.commandHandler.enableServerDataBinding(!0)}r&&this.commandHandler.updateEndPoint(t,o)},e.prototype.findIndex=function(t,e){for(var i=[],r=0;r<t.segments.length;r++){var o=t.segments[parseInt(r.toString(),10)],a=n.a.toBounds([o.points[0],o.points[1]]);a.Inflate(t.hitPadding),a.containsPoint(e)&&i.push(o)}if(1===i.length)return t.segments.indexOf(i[0]);for(var s=void 0,h=void 0,d=void 0,l=void 0,c=void 0,p=void 0,r=0;r<i.length;r++)l=i[parseInt(r.toString(),10)],c=(e.y-l.points[0].y)/(l.points[1].y-e.y),p=(e.x-l.points[0].x)/(l.points[1].x-e.x),s=Math.abs(c-p),0===r&&(h=s,d=0),s<h&&(h=s,d=r);return t.segments.indexOf(i[parseInt(d.toString(),10)])},e.prototype.dragOrthogonalSegment=function(t,e,i,r){var n={x:0,y:0},o={segments:t.segments};n.x=(e.points[parseInt(r.toString(),10)].x+e.points[r+1].x)/2,n.y=(e.points[parseInt(r.toString(),10)].y+e.points[r+1].y)/2;var a=i.y-n.y,s=i.x-n.x,h=t.segments.indexOf(e),d=!1;return t.allowNodeOverlap&&(t.selectedSegmentIndex=h||r),-1!==h&&(0===h&&1===t.segments.length&&2===e.points.length?(h=this.addSegments(t,e,s,a,h),d=!0):h!==t.segments.length-1||null!==e.direction&&null!==e.length?0===h&&(h=this.insertFirstSegment(t,e,s,a,h),d=!0):(h=this.addTerminalSegment(t,e,s,a,r),d=!0),h&&(d&&(this.selectedSegment=e=t.segments[parseInt(h.toString(),10)],this.segmentIndex=0),this.updateAdjacentSegments(t,h,s,a),this.commandHandler.updateEndPoint(t,o))),!0},e.prototype.addSegments=function(t,e,n,a,h){var d,c=[],g=r.a.distancePoints(e.points[0],e.points[1]),u=r.a.direction(e.points[0],e.points[1]);c.push(new l.f(t,"segments",{type:"Orthogonal",direction:u,length:g/4},!0));var f=e.points[0].y===e.points[1].y?a>0?"Bottom":"Top":n>0?"Right":"Left",m=e.points[0].x===e.points[1].x?a:n;c.push(new l.f(t,"segments",{type:"Orthogonal",direction:f,length:m},!0)),c.push(new l.f(t,"segments",{type:"Orthogonal",direction:u,length:g/2},!0));var y={element:t,addSegments:c,type:"Addition",cancel:!1};return i.i(p.isBlazor)()&&(y={addSegments:i.i(o.b)(c),type:"Addition",cancel:y.cancel,element:i.i(o.b)(t)}),this.commandHandler.triggerEvent(s.r.segmentCollectionChange,y),y.cancel||(t.segments=c.concat(t.segments),d=h+2),d},e.prototype.insertFirstSegment=function(t,e,n,a,h){var d,c,g,u,f,m=[];if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)for(var y=void 0,v=0;v<e.points.length-1;v++){var b=r.a.distancePoints(e.points[parseInt(v.toString(),10)],e.points[v+1]),S=r.a.direction(e.points[parseInt(v.toString(),10)],e.points[v+1]);f=new l.f(t,"segments",{type:"Orthogonal",direction:S,length:b},!0),0===f.length&&(!y||"Top"!==y.direction&&"Bottom"!==y.direction?f.direction=a>0?"Bottom":"Top":f.direction=n>0?"Right":"Left"),y=f,m.push(f)}else g={type:"Orthogonal",direction:e.direction,length:e.length/3},m.push(new l.f(t,"segments",g,!0)),"Bottom"===e.direction||"Top"===e.direction?(c=Math.abs(n),d=n>0?"Right":"Left"):(c=Math.abs(a),d=a>0?"Bottom":"Top"),f=new l.f(t,"segments",{type:"Orthogonal",direction:d,length:c},!0),m.push(f);var w={element:t,addSegments:m,type:"Addition",cancel:!1};if(i.i(p.isBlazor)()&&(w={element:i.i(o.b)(t),addSegments:i.i(o.b)(m),type:"Addition",cancel:w.cancel}),this.commandHandler.triggerEvent(s.r.segmentCollectionChange,w),!w.cancel){if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)t.segments.splice(0,1),u=1;else{var x=t.segments[1];x&&x.length&&(x.length=d!==x.direction?x.length+c:x.length-c),u=2,e.length=2*e.length/3}t.segments=m.concat(t.segments)}return u},e.prototype.updateAdjacentSegments=function(t,e,i,r){var n=t.segments[parseInt(e.toString(),10)],o=n.points[n.points.length-1],a=n.points[0],s=!0;if("Orthogonal"===n.type){n.points[0]=a,n.points[n.points.length-1]=o;if(t.segments[e-1]&&(s=this.updatePreviousSegment(i,r,t,e)),t.segments.length-1>e&&s){var h=t.segments[e+1];this.updateNextSegment(t,n,h,i,r)}}},e.prototype.addTerminalSegment=function(t,e,n,a,h){var d,c,g,u,f=t.segments.indexOf(e),m=[],y=t.segments.pop(),v=t.segments[t.segments.length-1];d=v&&"Orthogonal"===v.type?v:null;for(var b=0;b<e.points.length-2;b++)g=r.a.distancePoints(e.points[parseInt(b.toString(),10)],e.points[b+1]),u=r.a.direction(e.points[parseInt(b.toString(),10)],e.points[b+1]),c=new l.f(t,"segments",{type:"Orthogonal",length:g,direction:u},!0),m.push(c),d=c;var S=h;if((2===e.points.length||S===e.points.length-2)&&(d&&(d.length+=5),void 0!==S)){g=2*r.a.distancePoints(e.points[e.points.length-2],e.points[e.points.length-1])/3,u=r.a.direction(e.points[e.points.length-2],e.points[e.points.length-1]);var w=new l.f(t,"segments",{type:"Orthogonal",length:g,direction:u});m.push(w)}var x=new l.f(t,"segments",{type:"Orthogonal"},!0);m.push(x);var I,P={element:t,addSegments:m,type:"Addition",cancel:!1};return I={element:i.i(o.b)(t),addSegments:i.i(o.b)(m),type:"Addition",cancel:P.cancel},i.i(p.isBlazor)()&&(I={element:i.i(o.b)(t),addSegments:i.i(o.b)(m),type:"Addition",cancel:P.cancel}),this.commandHandler.triggerEvent(s.r.segmentCollectionChange,I),I.cancel?t.segments.push(y):(t.segments=t.segments.concat(m),f+=h),this.commandHandler.updateEndPoint(t),f},e.prototype.updatePortSegment=function(t,e,r,n,o){if(1===r&&2===t.points.length&&t.length<0){var a=e.sourceWrapper.corners,s=e.segments[parseInt(r.toString(),10)],h=e.segments[r+1],c=void 0,p=[];c=new l.f(e,"segments",{type:"Orthogonal",length:13,direction:t.direction}),p.push(c);var g=void 0;g="Left"===s.direction?s.points[0].x-(a.middleLeft.x-20):"Right"===s.direction?a.middleRight.x+20-s.points[0].x:"Bottom"===s.direction?a.bottomCenter.y+20-s.points[0].y:s.points[0].y-(a.topCenter.y-20),c=new l.f(e,"segments",{type:"Orthogonal",length:g,direction:s.direction}),p.push(c),s.length=s.length-g,h&&h.length&&h.direction&&(h.direction===t.direction?h.length-=13:h.direction===i.i(d.d)(t.direction)&&(h.length+=13)),e.segments=p.concat(e.segments),this.selectedSegment=e.segments[3]}},e.prototype.updatePreviousSegment=function(t,e,i,r){var n=i.segments[parseInt(r.toString(),10)],o=i.segments[r-1];o.points[o.points.length-1]=n.points[0];var a=!i.sourceID||""!==i.sourcePortID,s=!0;return"Orthogonal"===o.type&&("Bottom"===o.direction?o.length+=e:"Top"===o.direction?o.length-=e:"Right"===o.direction?o.length+=t:o.length-=t,""!==i.sourcePortID&&o.length<0&&!i.allowNodeOverlap?this.updatePortSegment(o,i,r,t,e):i.sourceID&&""===i.sourcePortID&&o.length<0&&1===r&&(s=!1,this.updateFirstSegment(i,n)),a&&this.changeSegmentDirection(o,i)),s},e.prototype.changeSegmentDirection=function(t,e){e.maxSegmentThumb||t.length<0&&(t.direction=i.i(d.d)(t.direction),t.length*=-1)},e.prototype.updateNextSegment=function(t,e,i,r,n){i.points[0]=e.points[e.points.length-1],i&&"Orthogonal"===i.type&&(i.length||0===i.length)&&("Left"===i.direction||"Right"===i.direction?0!==r&&(i.length="Right"===i.direction?i.length-r:i.length+r,(i.length||0===i.length)&&this.changeSegmentDirection(i,t)):0!==n&&(i.length="Bottom"===i.direction?i.length-n:i.length+n,(i.length||0===i.length)&&this.changeSegmentDirection(i,t)))},e.prototype.updateFirstSegment=function(t,e){var i,n=t.segments.indexOf(e),o=!1,a=t.segments[parseInt(n.toString(),10)],s=t.segments[n-1],h={segments:t.segments};if(s.length<0&&t.sourceID){var d=t.sourceWrapper.corners,c=[],p=void 0,g=!1;this.changeSegmentDirection(a,t);var u=t.segments[n+1],f=t.segments[n+2];switch(u&&this.changeSegmentDirection(u,t),f&&this.changeSegmentDirection(f,t),s.direction){case"Top":case"Bottom":i=a.length>0&&"Left"===a.direction?d.middleLeft:d.middleRight,a.length>d.width/2?Math.abs(s.length)<d.height/2&&(s.length=r.a.distancePoints(d.center,s.points[s.points.length-1]),a.points[0].x=i.x,a.length=r.a.distancePoints(a.points[0],a.points[a.points.length-1]),a.length-=20,o=!0):(u&&u.direction&&u.length&&(u.points[0].y=i.y,u.points[0].x=u.points[u.points.length-1].x="Right"===a.direction?i.x+20:i.x-20),o=!0,g=!0);break;case"Left":case"Right":i=a.length>0&&"Top"===a.direction?d.topCenter:d.bottomCenter,a.length>d.height/2?Math.abs(s.length)<d.width/2&&(s.length=r.a.distancePoints(d.center,s.points[s.points.length-1]),a.points[0].y=i.y,a.length=r.a.distancePoints(a.points[0],a.points[a.points.length-1]),a.length-=20,o=!0):(u&&u.direction&&u.length&&(u.points[0].x=i.x,u.points[0].y=u.points[u.points.length-1].y="Bottom"===a.direction?i.y+20:i.y-20),o=!0,g=!0)}this.changeSegmentDirection(s,t),this.changeSegmentDirection(a,t),o&&(p={type:"Orthogonal",direction:a.direction,length:20},c.push(new l.f(t,"segments",p,!0)),g&&(u&&u.direction&&u.length&&(u.length=r.a.distancePoints(u.points[0],u.points[u.points.length-1])),f&&f.direction&&f.length&&(f.length=r.a.distancePoints(u.points[u.points.length-1],f.points[f.points.length-1])),t.segments.splice(n-1,2)),t.segments=c.concat(t.segments)),this.selectedSegment=g?t.segments[n-1]:t.segments[n+1],this.commandHandler.updateEndPoint(t,h)}},e.prototype.updateLastSegment=function(t,e){if(t.targetID&&""===t.targetPortID){var r=void 0,n=void 0,a=void 0,s=void 0,h=t.targetWrapper.corners,d=e.points[0],l=e.points[e.points.length-1];"Right"===e.direction||"Left"===e.direction?(r={x:d.x,y:d.y},n={x:"Left"===e.direction?l.x-h.width/2:l.x+h.width/2,y:l.y},a={x:h.center.x,y:h.center.y-h.height},s={x:h.center.x,y:h.center.y+h.height}):(r={x:d.x,y:d.y},n={x:l.x,y:"Bottom"===e.direction?l.y+h.height/2:l.y-h.height/2},a={x:h.center.x-h.width,y:h.center.y},s={x:h.center.x+h.width,y:h.center.y});var c={x1:r.x,y1:r.y,x2:n.x,y2:n.y},p={x1:a.x,y1:a.y,x2:s.x,y2:s.y};return i.i(o.j)(c,p).enabled}return!1},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ConnectorEditingTool"},e}(c.s)},function(t,e,i){"use strict";i.d(e,"a",function(){return A});var r=i(0),n=(i.n(r),i(8)),o=i(15),a=i(10),s=i(27),h=i(6),d=i(54),l=i(26),c=i(1),p=i(2),g=i(9),u=i(30),f=i(4),m=i(11),y=i(7),v=i(3),b=i(5),S=i(16),w=i(35),x=i(9),I=i(3),P=i(19),C=i(13),z=i(24),O=i(25),T=i(21),A=function(){function t(t,e){this.currentAction="None",this.previousAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.keyArgs={},this.diagram=t,this.objectFinder=new L,this.commandHandler=e}return Object.defineProperty(t.prototype,"action",{get:function(){return this.currentAction},set:function(t){t!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~c.k.DrawOnce,this.diagram.currentDrawingObject&&(this.diagram.currentDrawingObject=null),this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===t||"LabelRotate"===t?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=t,"None"!==this.currentAction&&"Select"!==this.currentAction&&!(this.diagram.diagramActions&c.p.TextEdit)||this.commandHandler.isUserHandle(this.currentPosition)?this.diagram.diagramActions=this.diagram.diagramActions|c.p.ToolAction:this.diagram.diagramActions=this.diagram.diagramActions&~c.p.ToolAction,this.diagram.setCursor(this.diagram.getCursor(t,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blocked",{get:function(){return this.isBlocked},set:function(t){this.isBlocked=t,this.blocked?this.diagram.setCursor("not-allowed"):this.diagram.setCursor(this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),t.prototype.getMousePosition=function(t){var e,r,n;-1!==t.type.indexOf("touch")?(e=t,r=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY):(r=t.clientX,n=t.clientY);var o=new y.a;o=i.i(w.a)(this.diagram);var a=this.diagram.element.getBoundingClientRect();return r=r+this.diagram.diagramCanvas.scrollLeft-a.left-o.width,n=n+this.diagram.diagramCanvas.scrollTop-a.top-o.height,r/=this.diagram.scroller.transform.scale,n/=this.diagram.scroller.transform.scale,r-=this.diagram.scroller.transform.tx,n-=this.diagram.scroller.transform.ty,{x:r,y:n}},t.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){e.updateViewPortSize(e.diagram.element)},300),!1},t.prototype.updateViewPortSize=function(t){var e=document.getElementById(t.id);if(e){var r=e.getBoundingClientRect();this.diagram.scroller.setViewPortSize(r.width,r.height);var n=new y.a;n=i.i(w.a)(this.diagram);var o=this.diagram.getSizeValue(this.diagram.width,n.width),a=this.diagram.getSizeValue(this.diagram.height,n.height);this.diagram.diagramCanvas.style.width=o,this.diagram.diagramCanvas.style.height=a,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&i.i(w.c)(this.diagram)}},t.prototype.canHideResizers=function(){return(this.tool instanceof s.b||this.tool instanceof s.c)&&this.isMouseDown},t.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var t=[];t=t.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=!(this.eventArgs&&this.eventArgs.source&&!i.i(g.d)(this.eventArgs.source))&&(this.isMouseDown&&1===t.length&&this.tool instanceof s.d&&!i.i(g.d)(t[0]))}},t.prototype.isForeignObject=function(t,e){var i=t;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!e&&-1!==i.className.indexOf("foreign-object")||e&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},t.prototype.isMetaKey=function(t){return"mousewheel"===t.type?t.ctrlKey:navigator.platform.match("Mac")?t.metaKey:t.ctrlKey},t.prototype.renderUmlHighLighter=function(t){this.diagram.commandHandler.removeStackHighlighter();var e=this.diagram.selectedItems.nodes[0];if(e&&e.container&&"Stack"===e.container.type&&"UmlClassifier"===e.shape.type){if(!e.wrapper.bounds.containsPoint(this.currentPosition)){var r=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(r,this.action,this.inAction);if(n&&n.parentId&&n.parentId===e.id){var o="Vertical"===this.diagram.nameTable[n.parentId].container.orientation;i.i(P.f)(n.wrapper,o,t.position,this.diagram,!0)}}}},t.prototype.isDeleteKey=function(t,e){return navigator.platform.match("Mac")&&"Backspace"===t&&"delete"===e},t.prototype.isMouseOnScrollBar=function(t){var e,i,r,n,o,a=t.offsetX,s=t.offsetY,h=this.diagram.diagramCanvas,d=h.offsetHeight,l=h.offsetWidth;return!!(d<h.scrollHeight&&(e={x:l-17,y:0},i={x:l,y:0},r={x:l-17,y:d},n={x:l,y:d},o=b.a.toBounds([e,i,r,n]),0!==this.diagram.scroller.verticalOffset&&(o.x=o.x-this.diagram.scroller.horizontalOffset,o.y=o.y-this.diagram.scroller.verticalOffset),o.containsPoint({x:a,y:s})))||!!(l<h.scrollWidth&&(e={x:0,y:d-17},i={x:l,y:d-17},r={x:0,y:d},n={x:l,y:d},o=b.a.toBounds([e,i,r,n]),0!==this.diagram.scroller.horizontalOffset&&(o.x=o.x-this.diagram.scroller.horizontalOffset,o.y=o.y-this.diagram.scroller.verticalOffset),o.containsPoint({x:a,y:s})))},t.prototype.updateVirtualization=function(){var t=this,e=setInterval(function(i){t.diagram.removeVirtualObjects(e)},50);setTimeout(function(){t.diagram.deleteVirtualObject=!0},50)},t.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var t=0;t<this.diagram.selectedItems.userHandles.length;t++)this.previousAction&&this.diagram.selectedItems.userHandles[parseInt(t.toString(),10)]&&(this.checkUserHandleEvent(c.r.onUserHandleMouseLeave),this.previousAction="None")},t.prototype.checkUserHandleEvent=function(t){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var e=t===c.r.onUserHandleMouseLeave?this.previousAction:this.action,r={element:void 0},n=0;n<this.diagram.selectedItems.userHandles.length;n++)if(e===this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name||t===c.r.onUserHandleMouseUp&&"Select"===e){if(r.element=this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)],t===c.r.onUserHandleMouseEnter&&(this.previousAction=this.action,r.element.tooltip&&"Auto"===r.element.tooltip.openOn&&""!==r.element.tooltip.content)){i.i(u.c)(this.diagram,r.element);var o=void 0;o=r.element.pathData?document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_userhandle"):r.element.source?document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_image"):r.element.content?document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_shape_native_element"):document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_shape_html_element"),"Auto"===r.element.tooltip.openOn&&this.diagram.tooltipObject.open(o)}t===c.r.onUserHandleMouseDown&&(this.userHandleObject=this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name);var a=document.getElementById(this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name+"_userhandle");t===c.r.onUserHandleMouseUp&&this.commandHandler.isUserHandle(this.currentPosition)&&a&&a.id===this.userHandleObject+"_userhandle"&&this.diagram.triggerEvent(t,r),t===c.r.onUserHandleMouseLeave?this.diagram.tooltipObject&&"Custom"!==this.diagram.tooltipObject.openOn&&this.diagram.tooltipObject.close():this.diagram.triggerEvent(t,r)}},t.prototype.mouseDown=function(t){if(!0!==this.inAction||!(this.tool instanceof s.e||this.tool instanceof s.f)){this.focus=!0;var e=t.touches,r=!!document.getElementsByClassName("e-dragclone")[0];if(this.isMouseOnScrollBar(t)&&!r)return this.isScrolling=!0,void t.preventDefault();if(this.checkUserHandleEvent(c.r.onUserHandleMouseDown),!this.checkEditBoxAsTarget(t)&&i.i(g.C)(this.diagram)||i.i(g.o)(this.diagram)&&!i.i(g.r)(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,c.c.Hover,!0),!(this.tool instanceof s.g||this.tool instanceof s.h)||2!==t.button&&2!==t.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof s.g||this.tool instanceof s.h))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(t),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(t)&&(this.diagram.endEdit(),this.diagram.textEditing=!1,"Canvas"===this.diagram.mode&&1!==this.diagram.scroller.currentZoom&&this.diagram.refreshDiagramLayer());var n=this.getTargetElement();this.action=this.diagram.findActionToBeDone(n.obj,n.sourceElement,this.currentPosition,n.target);var o=this.isMetaKey(t);if(o&&t.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!o&&!t.shiftKey||i.i(g.o)(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),o||t.shiftKey){var a=o&&t.shiftKey?{ctrlKey:o,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=a}this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===t.type&&(e&&e.length>=2&&(this.touchStartList=i.i(f.C)(this.touchStartList,t,e)),e||t.preventDefault())}else{i.i(p.b)(this.diagram),i.i(p.b)(this.currentPosition),t.buttons,i.i(p.b)(this.eventArgs.actualObject),0===t.button||t.button;this.inAction=!1,this.tool.mouseUp(this.eventArgs)}this.isForeignObject(t.target)||this.isForeignObject(t.target,!0)||e||t.preventDefault()}},t.prototype.mouseMoveExtend=function(t,e){(this.tool instanceof s.g||this.tool instanceof s.h)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(t):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var i=!(this.eventArgs.target instanceof h.a&&e instanceof h.a);this.tool instanceof s.i&&this.diagram.updatePortVisibility(this.hoverElement instanceof h.a?this.hoverElement:this.hoverNode,c.c.Connect|c.c.Hover,i),this.hoverElement instanceof h.a&&this.hoverNode instanceof h.a&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,c.c.Connect|c.c.Hover,!0),this.hoverElement=i?null:e,this.hoverNode=i?null:e},t.prototype.checkAction=function(t){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof m.a||this.eventArgs.sourceWrapper instanceof z.a)){var e=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!i.i(l.b)(this.diagram,e,!1,this.eventArgs.sourceWrapper)&&i.i(g.d)(e)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else i.i(g.d)(t)&&i.i(g.c)(t)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!i.i(l.b)(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof h.G&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),t instanceof a.a&&(!(t instanceof a.a)||i.i(l.a)(this.currentPosition,t.sourcePoint,t.hitPadding)||i.i(l.a)(this.currentPosition,t.targetPoint,t.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},t.prototype.isSwimlaneElements=function(t){return!t||!(t.isLane||t.isPhase||t.isHeader)},t.prototype.mouseMove=function(t,e){if(this.focus=!0,this.isScrolling)return void t.preventDefault();if(i.i(g.C)(this.diagram)||i.i(g.o)(this.diagram)&&!i.i(g.r)(this.diagram)){this.currentPosition=this.getMousePosition(t);var r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction);i.i(w.f)(this.diagram,this.currentPosition);var a=!1,d=void 0;if("touchmove"===t.type&&(e=t.touches)&&e.length>1&&(this.touchMoveList=i.i(f.C)(this.touchMoveList,t,e),"PinchZoom"!==this.action&&(a=!0)),!1===n.a.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||a){this.eventArgs={};var p=null;if(null!==o){if(p=this.diagram.findElementUnderMouse(o,this.currentPosition),o!==this.hoverElement){var u=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==u&&this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,c.c.Hover,!0),o instanceof h.a&&(this.hoverNode=o);var m=!0;!this.isSwimlaneElements(o)&&this.hoverElement&&this.isSwimlaneElements(this.hoverElement)&&(m=!1),this.hoverElement=m?o:this.hoverElement,m?this.elementEnter(this.currentPosition,!1):this.hoverElement=o}else this.hoverElement===o&&this.hoverElement.tooltip.content&&void 0!=this.diagram.tooltipObject&&"Mouse"===this.hoverElement.tooltip.relativeMode&&this.setTooltipOffset(this.currentPosition);p&&(d=this.commandHandler.findTarget(p,o))}this.action=this.diagram.findActionToBeDone(o,p,this.currentPosition,d),this.checkUserHandleEvent(c.r.onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof s.f||this.tool instanceof s.h||this.tool instanceof s.g?this.tool.mouseMove(this.eventArgs):e&&this.tool instanceof s.j&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var y=!1;(!this.hoverElement||this.tool instanceof s.j||!(o instanceof h.a)||!this.isSwimlaneElements(o)||0!==this.diagram.selectedItems.nodes.length&&i.i(l.b)(this.diagram,this.hoverElement))&&(y=!0),this.diagram.updatePortVisibility(this.hoverElement,c.c.Hover,y);var v=this.getContent();null===o&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&v&&(this.hoverElement=null,this.elementLeave()),a=!1}else{if(this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!i.i(l.b)(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof h.G&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),t.ctrlKey||t.shiftKey){var b=t.ctrlKey&&t.shiftKey?{ctrlKey:t.ctrlKey,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=b}this.checkAction(o);var S=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,S),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|c.p.Interactions),this.mouseMoveExtend(t,o)}this.prevPosition=this.currentPosition,this.isForeignObject(t.target,!0)||t.preventDefault()}}},t.prototype.getContent=function(){var t,e=this.hoverElement instanceof h.a&&this.hoverElement.constraints&c.f.Tooltip||this.hoverElement instanceof a.a&&this.hoverElement.constraints&c.h.Tooltip,i=this.hoverElement;i instanceof h.a&&i.children&&i.children.length>0&&(t=this.findIntersectChild(i));var r=e?this.hoverElement.tooltip.content:this.diagram.tooltip.content;return r=t?t.tooltip.content:r},t.prototype.findIntersectChild=function(t){for(var e,i=new b.a(this.currentPosition.x,this.currentPosition.y,8,8),r=0;r<t.children.length;r++)if(e=this.diagram.getObject(t.children[parseInt(r.toString(),10)]),e.wrapper.outerBounds.intersects(i))return e;return null},t.prototype.checkAutoScroll=function(t){var e=this.startAutoScroll(t);if(!e&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(e){if((this.tool instanceof s.e||this.tool instanceof s.f||this.tool instanceof s.b||this.tool instanceof s.a||this.tool instanceof s.d||this.tool instanceof s.i)&&this.inAction){var i=this;this.diagram.scrollSettings.canAutoScroll&&e&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval(function(r){i.doAutoScroll(e,t,100)},100))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},t.prototype.mouseUp=function(t){this.checkUserHandleEvent(c.r.onUserHandleMouseUp),"SVG"===this.diagram.mode&&i.i(g.y)(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,c.q.DrawSelectorBorder);var e=t.touches;if(this.isScrolling)return this.isScrolling=!1,void t.preventDefault();if(!this.checkEditBoxAsTarget(t)&&i.i(g.C)(this.diagram)||i.i(g.o)(this.diagram)&&!i.i(g.r)(this.diagram)){if(this.tool&&(!(this.tool instanceof s.g||this.tool instanceof s.h)||(this.tool instanceof s.g||this.tool instanceof s.h)&&2===t.detail)){if(!this.isForeignObject(t.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==t.which&&"Drag"===this.action){this.action="Select";var n=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),o=this.diagram.findObjectsUnderMouse(this.currentPosition),a=this.diagram.findObjectUnderMouse(o,this.action,this.inAction),d=!0;!t.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===t.which&&!i.i(g.D)(this.diagram.diagramActions)&&(d=!1,this.commandHandler.clearSelection()),i.i(l.b)(this.diagram,a)&&d||this.commandHandler.selectObjects([a],void 0,n)}var u=!1,f=this.updateContainerProperties(),m=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(t),this.diagram.selectedObject.helperObject&&(m=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof s.k)){this.eventArgs.position=this.currentPosition;var y=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,y);var v=this.isMetaKey(t);if(v||t.shiftKey){var b=v&&t.shiftKey?{ctrlKey:v,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=b}if(this.diagram.diagramActions&c.p.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~c.p.Interactions),this.eventArgs.clickCount=t.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof s.b||this.tool instanceof s.a)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var S=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);S&&S.isLane&&(this.commandHandler.isContainer=!0)}u=this.diagram.lineRoutingModule&&this.diagram.nameTable.helper&&this.eventArgs.target&&this.eventArgs.target.isLane&&(this.eventArgs.source instanceof h.G&&this.eventArgs.source.nodes.length>0&&""===this.eventArgs.source.nodes[0].parentId||""===this.eventArgs.source.parentId),u&&(this.diagram.diagramActions=this.diagram.diagramActions|c.p.PreventLaneContainerUpdate),this.tool.mouseUp(this.eventArgs,f.isPreventHistory)}else this.tool.mouseUp(this.eventArgs),!this.diagram.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(!t.pageY&&t instanceof TouchEvent&&t.changedTouches?(window.getSelection().removeAllRanges(),this.diagram.contextMenuModule.contextMenu.open(t.changedTouches[0].pageY,t.changedTouches[0].pageX,this.diagram.element),t.preventDefault()):this.diagram.contextMenuModule.contextMenu.open(t.pageY,t.pageX,this.diagram.element),this.diagram.checkMenu=!1);f.hasStack&&this.diagram.endGroupAction()}if(m&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),2!==this.eventArgs.clickCount&&(this.commandHandler.updateSelectedNodeProperties(this.eventArgs.source),u)){this.diagram.diagramActions=this.diagram.diagramActions&~c.p.PreventLaneContainerUpdate;var w=this.eventArgs.source instanceof h.G?this.eventArgs.source.nodes:[this.eventArgs.source];if(w)for(var x=0;x<w.length;x++)w[parseInt(x.toString(),10)].container||(this.commandHandler.dropChildToContainer(this.eventArgs.target,w[parseInt(x.toString(),10)]),this.commandHandler.renderContainerHelper(w[parseInt(x.toString(),10)]))}if(this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0},this.diagram.diagramActions&c.p.PublicMethod&&this.diagram.constraints&c.j.LineRouting&&(this.diagram.diagramActions=this.diagram.diagramActions&~c.p.PublicMethod)),this.blocked=!1,this.hoverElement){var I=c.c.Connect;i.i(l.b)(this.diagram,this.hoverElement)&&(I|=c.c.Hover),this.diagram.updatePortVisibility(this.hoverElement,I,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof s.l||(this.tool=null)}e||t.preventDefault(),this.diagram.currentDrawingObject=void 0;var P=this.diagram.selectedItems,C=!1;if(this.commandHandler.isUserHandle(this.currentPosition)&&this.isForeignObject(t.target)&&(C=!0),!this.inAction&&P.wrapper&&P.userHandles.length>0&&!C&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var z=this.getTargetElement(),O={element:z.target instanceof T.b?z.target:i.i(p.b)(this.eventArgs.source)||i.i(p.b)(this.diagram),position:i.i(p.b)(this.eventArgs.position),count:t.detail,actualObject:i.i(p.b)(this.eventArgs.actualObject),button:0===t.button?"Left":1===t.button?"Middle":"Right"};i.i(r.isBlazor)()&&this.diagram.click&&(O=this.getBlazorClickEventArgs(O)),this.diagram.tool!==c.k.ZoomPan&&this.diagram.triggerEvent(c.r.click,O)}this.eventArgs={}}this.diagram.diagramActions=this.diagram.diagramActions&~c.p.PreventLaneContainerUpdate,this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},t.prototype.getTargetElement=function(){var t,e=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),i=this.objectFinder.findObjectUnderMouse(this.diagram,e,this.action,this.inAction,this.eventArgs,this.currentPosition),r=null;return null!==i&&(r=this.diagram.findElementUnderMouse(i,this.currentPosition))&&(t=this.commandHandler.findTarget(r,i)),{obj:i,sourceElement:r,target:t}},t.prototype.getConnectorPadding=function(t){var e,i=t.source;if(i&&i instanceof h.G&&i.connectors.length){var r=i.connectors[0];e=r.constraints&c.h.ConnectToNearByPort?r.connectionPadding:0}else i&&i instanceof a.a&&"PortDraw"===this.action&&this.tool instanceof s.f&&i.constraints&c.h.ConnectToNearByPort&&(e=i.connectionPadding);return e||0},t.prototype.getBlazorClickEventArgs=function(t){return t={element:this.eventArgs.source?{selector:i.i(p.b)(this.eventArgs.source)}:{diagram:i.i(p.b)(this.diagram)},position:i.i(p.b)(this.eventArgs.position),count:t.count,actualObject:this.eventArgs.actualObject?{selector:i.i(p.b)(this.eventArgs.actualObject)}:{diagram:i.i(p.b)(this.diagram)},button:t.button},this.eventArgs.source instanceof h.a?(t.element.selector.nodes=[],t.element.selector.nodes.push(i.i(p.b)(this.eventArgs.source))):this.eventArgs.source instanceof a.a&&(t.element.selector.connectors=[],t.element.selector.connectors.push(i.i(p.b)(this.eventArgs.source))),t},t.prototype.addSwimLaneObject=function(t){var e,r,n,o,a,s,h=0,d=t.shape,l=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(r||(r=this.diagram.findObjectUnderMouse(l,this.action,this.inAction)),this.diagram.clearSelectorLayer(),r&&!(r.isLane||r.isPhase||r.isHeader))for(var c=0;c<l.length;c++){var p=this.diagram.nameTable[l[parseInt(c.toString(),10)].id];(p.isLane||p.isPhase||p.isHeader)&&(r=p)}if(r&&(d.isPhase||d.isLane&&r.isLane)){var g=r.parentId;e=this.diagram.nameTable[""+g]}if(e&&(n=e.shape,a=d.isLane?d.orientation===n.orientation:d.orientation!==n.orientation),a&&r){if(n&&n.header&&n.hasHeader&&"Horizontal"===n.orientation&&(h=1),n.phases.length>0&&(h+=1),d.isPhase){s="Horizontal"===n.orientation?this.currentPosition.x-e.wrapper.bounds.x:this.currentPosition.y-(e.wrapper.bounds.y+n.header.height);var u={id:i.i(O._38)(),offset:s,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(e,[u])}else{var f={id:i.i(O._38)(),style:d.lanes[0].style,header:{annotation:{content:d.lanes[0].header.annotation.content,style:d.lanes[0].header.annotation.style},style:d.lanes[0].header.style}};if("Horizontal"===d.orientation?f.height=d.lanes[0].height:f.width=d.lanes[0].width,"Horizontal"===n.orientation?(o=r.rowIndex?r.rowIndex:this.diagram.nameTable[r.parentId].rowIndex,r.wrapper.offsetY<this.currentPosition.y&&(o+=1)):(o=r.columnIndex?r.columnIndex:this.diagram.nameTable[r.parentId].columnIndex,this.currentPosition.x<r.wrapper.bounds.center.x&&(o-=1)),n.lanes.length>o)f.header.width=n.lanes[parseInt(o.toString(),10)].header.width,f.header.height=n.lanes[parseInt(o.toString(),10)].header.height;else{var m=void 0;m="Horizontal"===n.orientation?r.rowIndex<3?0:o-h-1:o-1,f.header.width=n.lanes[parseInt(m.toString(),10)].header.width,f.header.height=n.lanes[parseInt(m.toString(),10)].header.height}this.diagram.addLanes(e,[f],"Horizontal"===n.orientation?o-h:o)}this.commandHandler.select(e)}else if(d.isLane){var y={id:i.i(O._38)(),width:t.width,height:t.height,addInfo:t.addInfo,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:d.lanes[0].header.style},phases:[{id:i.i(O._38)(),header:{annotation:{content:"Phase"}}}],lanes:[{id:i.i(O._38)(),height:t.height,width:t.width,style:d.lanes[0].style,header:{annotation:{content:d.lanes[0].header.annotation.content,style:d.lanes[0].header.annotation.style},style:d.lanes[0].header.style}}],orientation:d.orientation}};"Vertical"===d.orientation&&(y.width+=20),y.offsetX=this.currentPosition.x+y.width/2,y.offsetY=this.currentPosition.y+y.height/2,this.diagram.add(y)}},t.prototype.mouseLeave=function(t){if(this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject){this.updateContainerProperties();this.updateContainerBounds()&&this.diagram.endGroupAction()}this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,c.c.Hover,!0),this.hoverElement=null),this.eventArgs&&!this.eventArgs.source&&this.hoverElement&&(this.hoverElement=null),this.tool instanceof s.i&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof h.a&&(this.diagram.updatePortVisibility(this.eventArgs.target,c.c.Hover|c.c.Connect,!0),this.hoverElement=null);var e=this.diagram.selectedItems;e&&e.wrapper&&(i.i(p.C)(this.diagram,e)||this.diagram.renderSelector(!0)),(this.diagram.diagramActions&c.p.Interactions||this.diagram.diagramActions&c.p.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~c.p.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.elementLeave(),this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.tool=null,i.i(w.g)(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),t.preventDefault()},t.prototype.mouseWheel=function(t){this.diagram.blazorActions|=c.i.interaction;var e={event:t,cancel:!1};if(this.diagram.triggerEvent(c.r.mouseWheel,e),!e.cancel){var i=t.wheelDelta>0||-40*t.detail>0,r=this.getMousePosition(t);this.diagram.tooltipObject.close();if(this.isMetaKey(t)){var n=this.diagram.scrollSettings.zoomFactor;i?this.diagram.zoomTo({type:"ZoomIn",zoomFactor:n,focusPoint:r}):this.diagram.zoomTo({type:"ZoomOut",zoomFactor:n,focusPoint:r}),t.preventDefault()}else{var o=this.diagram.scroller.horizontalOffset,a=this.diagram.scroller.verticalOffset,h=i?10:-10;this.tool&&(this.tool instanceof s.g||this.tool instanceof s.h)&&(this.eventArgs={},this.getMouseEventArgs(r,this.eventArgs),this.eventArgs.position=r,this.tool.mouseWheel(this.eventArgs)),this.diagram.scrollActions|=c.t.Interaction;t.shiftKey||t.deltaX&&-0!==t.deltaX?this.diagram.scroller.zoom(1,h,0,r,!0):this.diagram.scroller.zoom(1,0,h,r,!0),this.diagram.scrollActions&=~c.t.Interaction,o===this.diagram.scroller.horizontalOffset&&a===this.diagram.scroller.verticalOffset||t.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var d=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(d,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}this.diagram.blazorActions=this.diagram.blazorActions&~c.i.interaction}},t.prototype.keyDown=function(t){if(!(this.diagram.diagramActions&c.p.TextEdit)&&!this.checkEditBoxAsTarget(t)||"Escape"===t.key||27===t.keyCode){var e=void 0,n=t.keyCode?t.keyCode:t.which,o=t.key,a=this.isMetaKey(t);if(this.diagram.commandManager&&this.diagram.commands)for(var s=this.diagram.commands,h=0,d=Object.keys(s);h<d.length;h++){var l=d[h];if((e=this.diagram.commands[""+l])&&(e.gesture.keyModifiers||e.gesture.key)&&(n===e.gesture.key||o===c.u[e.gesture.key]||this.isDeleteKey(o,l))&&(!e.gesture.keyModifiers&&!t.altKey&&!t.shiftKey&&!a||e.gesture.keyModifiers&&(a||t.altKey||t.shiftKey)&&this.altKeyPressed(e.gesture.keyModifiers)&&t.altKey||this.shiftKeyPressed(e.gesture.keyModifiers)&&t.shiftKey||this.ctrlKeyPressed(e.gesture.keyModifiers)&&a)){var g=i.i(I.h)(e.canExecute);if(i.i(r.isBlazor)()||g&&g({keyDownEventArgs:KeyboardEvent,parameter:e.parameter})){if(t.preventDefault(),"Escape"===t.key)if(this.checkEditBoxAsTarget(t))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),i.i(p.V)(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id];var u=this.diagram.droppable.sourceElement;u.draggable.intDestroy();var f=this.diagram.droppable.selectedSymbols;f.parentNode.removeChild(f);var m=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(m,c.p.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,c.q.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(m,c.p.PreventClearSelection),this.isMouseDown=!1}else this.inAction&&this.diagram.drawingObject&&this.tool&&this.tool.inAction&&(this.tool.mouseUp(this.eventArgs),this.tool=null,this.isMouseDown=!1);if(e.execute&&this.diagram.tool!==c.k.ZoomPan){var y=i.i(I.h)(e.execute);y({keyDownEventArgs:KeyboardEvent,parameter:e.parameter})}if(i.i(r.isBlazor)()){var v={gesture:e.gesture};this.diagram.triggerEvent(c.r.commandExecute,v)}break}}}}this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.keyArgs={element:i.i(p.b)(this.diagram.selectedItems),key:t.key,keyCode:t.keyCode?t.keyCode:t.which},this.getKeyModifier(this.keyArgs,t),this.diagram.diagramActions&c.p.TextEdit&&this.getlabel(this.keyArgs,t),this.diagram.triggerEvent(c.r.keyDown,this.keyArgs)},t.prototype.getlabel=function(t,e){var i=this.diagram.activeLabel;t.target=this.diagram.element.id+"_editBox";var r=this.diagram.nameTable[i.parentId];if(document.getElementById(this.diagram.element.id+"_editBox")){t.text=document.getElementById(this.diagram.element.id+"_editBox").value;for(var n=0;n<r.annotations.length;n++)if(r.annotations[parseInt(n.toString(),10)].id===i.id){t.label=r.annotations[parseInt(n.toString(),10)];break}}},t.prototype.getKeyModifier=function(t,e){t.keyModifiers=c.v.None,e.ctrlKey&&(t.keyModifiers|=c.v.Control),e.shiftKey&&(t.keyModifiers|=c.v.Shift),e.altKey&&(t.keyModifiers|=c.v.Alt),this.isMetaKey(e)&&(t.keyModifiers|=c.v.Meta)},t.prototype.keyUp=function(t){this.keyArgs={element:i.i(p.b)(this.diagram.selectedItems),key:t.key,keyCode:t.keyCode?t.keyCode:t.which};this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.getKeyModifier(this.keyArgs,t),this.diagram.diagramActions&c.p.TextEdit&&this.getlabel(this.keyArgs,t),this.diagram.triggerEvent(c.r.keyUp,this.keyArgs)},t.prototype.startAutoScroll=function(t){var e=this.getMousePosition(t);e.x*=this.diagram.scroller.currentZoom,e.y*=this.diagram.scroller.currentZoom;var n,o=i.i(w.a)(this.diagram),a=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===r.Browser.info.name&&0===this.diagram.scroller.viewPortWidth){var s=document.getElementById(this.diagram.element.id).getBoundingClientRect();s.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(s.width,s.height)}return this.diagram.scrollSettings.canAutoScroll&&(e.x+this.diagram.scroller.horizontalOffset+a.right+o.width>=this.diagram.scroller.viewPortWidth-18?n="right":e.x+this.diagram.scroller.horizontalOffset<a.left?n="left":e.y+this.diagram.scroller.verticalOffset+a.bottom+o.height>this.diagram.scroller.viewPortHeight-18?n="bottom":e.y+this.diagram.scroller.verticalOffset<a.top&&(n="top")),n},t.prototype.doAutoScroll=function(t,e,i,r){var n=t;if((this.tool instanceof s.e||this.tool instanceof s.f||this.tool instanceof s.b||this.tool instanceof s.a||this.tool instanceof s.d||this.tool instanceof s.i)&&this.inAction){var o=this.getMousePosition(e),a=(this.diagram.scrollSettings.autoScrollBorder,0),h=0,d=!1,l="",p={x:o.x,y:o.y};switch(this.tool instanceof s.a&&("ResizeSouthEast"===this.tool.corner||"ResizeSouthWest"===this.tool.corner||"ResizeNorthWest"===this.tool.corner||"ResizeNorthEast"===this.tool.corner)&&(d=!0,l=this.tool.corner),n){case"right":p.x=o.x+10,a=10,d&&("ResizeSouthEast"===l?(p.y=o.y+10,h=10):(p.y=o.y-10,h=-10));break;case"left":p.x=o.x-10,a=-10,d&&("ResizeNorthWest"===l?(p.y=o.y-10,h=-10):(p.y=o.y+10,h=10));break;case"bottom":p.y=o.y+10,h=10,d&&("ResizeSouthEast"===l?(p.x=o.x+10,a=10):(p.x=o.x-10,a=-10));break;case"top":p.y=o.y-10,h=-10,d&&("ResizeNorthEast"===l?(p.x=o.x+10,a=10):(p.x=o.x-10,a=-10))}this.eventArgs.position={x:p.x,y:p.y},this.currentPosition=this.eventArgs.position;var g=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);this.eventArgs.target=this.diagram.findObjectUnderMouse(g,this.action,this.inAction),this.tool.mouseMove(this.eventArgs),this.diagram.scrollActions|=c.t.Interaction,this.diagram.scroller.zoom(1,-a,-h,o,!0),this.diagram.scrollActions&=~c.t.Interaction}},t.prototype.mouseEvents=function(){for(var t=this.diagram.findObjectsUnderMouse(this.currentPosition),e=0;e<t.length;e++)this.eventArgs.actualObject===t[parseInt(e.toString(),10)]&&t.splice(e,1);var n={targets:{}};if(i.i(r.isBlazor)()||(n={targets:i.i(p.b)(t),element:i.i(p.b)(this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source),actualObject:i.i(p.b)(this.eventArgs.actualObject)}),i.i(r.isBlazor)()&&(this.diagram.mouseEnter||this.diagram.mouseOver)&&(n.actualObject=i.i(p.l)(this.eventArgs.actualObject)===a.a?{connector:i.i(p.b)(this.eventArgs.actualObject)}:{node:i.i(p.b)(this.eventArgs.actualObject)},n.targets.connector=[],n.targets.node=[],this.getBlazorCollectionObject(t,n)),this.lastObjectUnderMouse&&this.diagram.mouseLeave&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var o={targets:void 0,element:i.i(p.b)(this.lastObjectUnderMouse),actualObject:void 0};i.i(r.isBlazor)()&&(o={targets:void 0,element:i.i(p.l)(this.lastObjectUnderMouse)===a.a?{connector:i.i(p.b)(t)}:{node:i.i(p.b)(this.lastObjectUnderMouse)},actualObject:void 0}),this.diagram.triggerEvent(c.r.mouseLeave,o),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,void 0!==this.eventArgs.actualObject&&this.diagram.triggerEvent(c.r.mouseEnter,n)),this.eventArgs.actualObject&&this.diagram.triggerEvent(c.r.mouseOver,n)},t.prototype.getBlazorCollectionObject=function(t,e){if(t)for(var r=0;r<t.length;r++)i.i(p.l)(t[parseInt(r.toString(),10)])===a.a?e.targets.connector.push(i.i(p.b)(t[parseInt(r.toString(),10)])):e.targets.node.push(i.i(p.b)(t[parseInt(r.toString(),10)]))},t.prototype.elementEnter=function(t,e){if(!e){var n=this.hoverElement instanceof h.a&&this.hoverElement.constraints&c.f.Tooltip||this.hoverElement instanceof a.a&&this.hoverElement.constraints&c.h.Tooltip,o=this.getContent(),s=void 0;this.hoverElement&&this.hoverElement.children&&this.hoverElement.children.length>0&&(s=this.findIntersectChild(this.hoverElement)),"Auto"===this.hoverElement.tooltip.openOn&&""!==o&&(s?i.i(u.c)(this.diagram,s):i.i(u.c)(this.diagram,n?this.hoverElement:void 0)),this.hoverElement.tooltip.content&&("Mouse"===this.hoverElement.tooltip.relativeMode?this.setTooltipOffset(t):(this.diagram.tooltipObject.offsetX=0,this.diagram.tooltipObject.offsetY=0));var d=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(d,this.action,this.inAction);l instanceof h.a&&l.children&&l.children.length>0&&(l=s||l);var p=l.shape&&l.shape instanceof h.d?"_content_native_element":"_groupElement",f=document.getElementById(l.id+p);"Auto"===this.hoverElement.tooltip.openOn&&""!==o&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.openOn=this.hoverElement.tooltip.openOn,i.i(r.isBlazor)()?this.diagram.tooltipObject.open(f,{}):this.diagram.tooltipObject.dataBind()),i.i(g.E)(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&(this.diagram.tooltipObject.target=this.hoverElement.id,"Mouse"===this.hoverElement.tooltip.relativeMode?this.diagram.tooltipObject.open(this.diagram.element):this.diagram.tooltipObject.open(f))}},t.prototype.elementLeave=function(){this.diagram.tooltipObject&&"Custom"!==this.diagram.tooltipObject.openOn&&this.diagram.tooltipObject.close()},t.prototype.setTooltipOffset=function(t){var e=i.i(p.W)(this.diagram,t,this.hoverElement);this.diagram.tooltipObject.offsetX=e.x,this.diagram.tooltipObject.offsetY=e.y},t.prototype.altKeyPressed=function(t){return!!(t&c.v.Alt)},t.prototype.ctrlKeyPressed=function(t){return!!(t&c.v.Control)},t.prototype.shiftKeyPressed=function(t){return!!(t&c.v.Shift)},t.prototype.scrolled=function(t){this.diagram.updateScrollOffset(),i.i(r.isBlazor)()&&this.diagram.realActions&c.a.OverViewAction&&this.diagram.setBlazorDiagramProps(!1)},t.prototype.doubleClick=function(t){if(i.i(g.C)(this.diagram)){var e=void 0,n=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(n,this.action,this.inAction);if(null!==o&&i.i(g.C)(this.diagram)){if(e=this.diagram.findElementUnderMouse(o,this.currentPosition),this.tool&&(this.tool instanceof s.g||this.tool instanceof s.h)){i.i(p.b)(o)||i.i(p.b)(this.diagram),this.currentPosition,t.detail;this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,t.preventDefault()}else{var d=this.diagram.commandHandler.getObjectLayer(o.id);if(d&&!d.lock&&d.visible&&!(this.diagram.diagramActions&c.p.TextEdit)){var l="";"TextAnnotation"===o.shape.shape&&(l=o.wrapper.children[1].id.split("_")[1]),this.diagram.startTextEdit(o,l||(e instanceof m.a?e.id.split(o.id+"_")[1]:void 0))}}}var u={source:i.i(p.b)(o)||i.i(p.b)(this.diagram),position:this.currentPosition,count:t.detail};if(i.i(r.isBlazor)()){var f=void 0;f=o instanceof h.a?{nodes:[i.i(p.b)(o)]}:o instanceof a.a?{connectors:[i.i(p.b)(o)]}:i.i(p.b)(o),u={source:o?{selector:f}:{diagram:i.i(p.b)(this.diagram)},position:this.currentPosition,count:t.detail}}this.diagram.triggerEvent(c.r.doubleClick,u)}},t.prototype.itemClick=function(t,e){var r=t;return i.i(P.a)(this.diagram,r,!0)?r:null},t.prototype.inputChange=function(t){var e,r,n,o,h,d,l,c,p,u=document.getElementById(this.diagram.element.id+"_editBox"),m=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),y=u.value,v=y.split("\n");o=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0],(!o&&this.tool instanceof s.l||o&&"SwimLane"===o.shape.type)&&(o=this.diagram.nameTable[this.diagram.activeLabel.parentId]),o&&("Text"!==o.shape.type&&o.annotations.length>0||"Text"===o.shape.type)&&(n=this.diagram.getWrapper(o.wrapper,this.diagram.activeLabel.id),e=o.wrapper.bounds.width<n.bounds.width?o.wrapper.bounds.width:n.bounds.width,e=e>90?e:90,l=i.i(f.r)(n.style,y,void 0,void 0,e),r=Number(u.style.fontSize.split("px")[0]),v.length>1&&""===v[v.length-1]&&(l.height=l.height+r),c=this.diagram.scroller.transform,p=i.i(g.w)(this.diagram)?c.scale:1,d=l.width,d=(90>d?90:d)*p,h=(12>l.height?12:l.height)*p,o instanceof a.a&&"Bezier"===o.type||(m.style.left=(n.bounds.center.x+c.tx)*c.scale-d/2-2.5+"px",m.style.top=(n.bounds.center.y+c.ty)*c.scale-h/2-3+"px"),m.style.width=d+"px",m.style.height=h+"px",u.style.minHeight="12px",u.style.minWidth="90px",u.style.width=d+"px",u.style.height=h+"px")},t.prototype.isAddTextNode=function(t,e){return!!(this.tool instanceof s.l||e)&&(this.tool=null,t&&!i.i(x.k)(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),!(i.i(p.X)(this.diagram.nodes,t.id)||i.i(p.X)(this.diagram.connectors,t.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(t)>-1))},t.prototype.checkEditBoxAsTarget=function(t){return!(!t.target||t.target.id!==this.diagram.element.id+"_editBox")},t.prototype.getMouseEventArgs=function(t,e,r,n){e.position=t;var o,a;r?(a=this.diagram.findObjectsUnderMouse(this.currentPosition,r),o=this.diagram.findTargetObjectUnderMouse(a,this.action,this.inAction,e.position,r)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(o=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&o&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(a=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(a,this.action,this.inAction))):(a=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(a,this.action,this.inAction)),o&&o.isHeader&&(o=this.diagram.nameTable[o.parentId],this.eventArgs.actualObject=o);var s;if(o){s=this.diagram.findElementUnderMouse(o,this.currentPosition,n);var d=void 0,l=void 0,g=void 0;if((s&&o.ports&&o.ports.length&&!i.i(p.w)(o,s)||!s||!o)&&a&&a.length&&r instanceof h.G)for(d=r.connectors[0],g=a.length-1;g>=0;g--)if((l=a[parseInt(g.toString(),10)])instanceof h.a&&d&&d.connectionPadding){if(o=l,s=this.diagram.findElementUnderMouse(o,this.currentPosition,n),d.constraints&c.h.ConnectToNearByPort&&o&&o.ports&&o.ports.length&&i.i(p.w)(o,s))break;if(l instanceof h.a&&d&&d.connectionPadding&&l.wrapper.outerBounds.containsPoint(this.currentPosition)&&d.constraints&c.h.ConnectToNearByNode&&!(d.constraints&c.h.ConnectToNearByPort)){o=l,s=this.diagram.findElementUnderMouse(o,this.currentPosition,0);break}}}return r?(e.target=o,e.targetWrapper=s):(e.source=o,e.sourceWrapper=s),e.actualObject=this.eventArgs.actualObject,e.source instanceof h.G&&void 0===e.actualObject&&(e.source.nodes.length>0||e.source.connectors.length>0)&&(e.actualObject=e.source.nodes.length>0?this.diagram.nameTable[e.source.nodes[0].id]:this.diagram.nameTable[e.source.connectors[0].id]),e.startTouches=this.touchStartList,e.moveTouches=this.touchMoveList,e},t.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},t.prototype.getTool=function(t){switch(t){case"Select":return new s.d(this.commandHandler,!0);case"Drag":return new s.b(this.commandHandler);case"Rotate":return new s.c(this.commandHandler);case"LayoutAnimation":return new s.m(this.commandHandler);case"FixedUserHandle":return new s.n(this.commandHandler,!0);case"Hyperlink":return new s.k(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new s.a(this.commandHandler,t);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new s.i(this.commandHandler,t);case"SegmentEnd":case"OrthoThumb":return new d.a(this.commandHandler,t);case"Draw":var e=i.i(p.Y)(this.diagram.drawingObject);if("Node"===e&&"Text"===this.diagram.drawingObject.shape.type)return new s.l(this.commandHandler);if("Connector"===e&&"Freehand"===this.diagram.drawingObject.type)return new s.o(this.commandHandler);if("Node"===e&&("Polygon"===this.diagram.drawingObject.shape.shape||i.i(r.isBlazor)()&&"Polygon"===this.diagram.drawingObject.shape.basicShape)&&!this.diagram.drawingObject.shape.points)return new s.g(this.commandHandler);if("Node"===e||"Node"===e&&"Polygon"===this.diagram.drawingObject.shape.shape&&this.diagram.drawingObject.shape.points)return new s.e(this.commandHandler,this.diagram.drawingObject);if("Connector"===e&&"Polyline"===this.diagram.drawingObject.type)return new s.h(this.commandHandler);if("Connector"===e)return new s.f(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new s.j(this.commandHandler,!1);case"PinchZoom":return new s.j(this.commandHandler,!0);case"PortDrag":return new s.b(this.commandHandler,"Port");case"PortDraw":return new s.f(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new s.d(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new s.p(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new s.q(this.commandHandler,t);case"LabelRotate":return new s.r(this.commandHandler)}return null},t.prototype.getCursor=function(t){var e=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems,r=this.diagram.selectedItems.annotation?e.rotateAngle+e.parentTransform:e.rotateAngle;return i.i(l.c)(t,r)},t.prototype.findElementUnderMouse=function(t,e,i){return this.objectFinder.findElementUnderSelectedItem(t,e,i)},t.prototype.findObjectsUnderMouse=function(t,e){return this.objectFinder.findObjectsUnderMouse(t,this.diagram,this.eventArgs,e)},t.prototype.findObjectUnderMouse=function(t,e,i){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,this.currentPosition)},t.prototype.findTargetUnderMouse=function(t,e,i,r,n){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,r,n)},t.prototype.findActionToBeDone=function(t,e,r,n){return i.i(l.d)(t,e,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,n)},t.prototype.updateContainerBounds=function(t){var e=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject instanceof h.a){var r=this.tool instanceof s.a,n=this.diagram.selectedObject.actualObject,o=this.diagram.nameTable[n.parentId];t?i.i(P.c)(this.diagram,n,this.currentPosition,r):((!o||o&&"SwimLane"!==o.shape.type)&&this.diagram.updateDiagramObject(n),e=i.i(P.g)(this.diagram,n,this.currentPosition,r),this.diagram.updateSelector(),(n.isLane||n.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.selectObjects([n])))}return e},t.prototype.updateContainerProperties=function(){var t,e,r,n,o=!1,a=!1,s={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var d=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(d,this.action,this.inAction);if(t=this.diagram.selectedObject.helperObject,(n=this.diagram.selectedObject.actualObject)instanceof h.a){if("SwimLane"===n.shape.type&&(r=i.i(C.s)(this.diagram,n.wrapper.children[0],0,!0)),"SwimLane"!==n.shape.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l instanceof h.a&&this.diagram.getObject(l.parentId)&&"SwimLane"!==this.diagram.getObject(l.parentId).shape.type&&(l=this.diagram.getObject(l.parentId)),"Drag"===this.currentAction&&n.container&&"Canvas"===n.container.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l&&l!==n&&l.container&&"Canvas"===l.container.type&&l.isLane&&n.isLane&&l.parentId===n.parentId)i.i(C.t)(this.diagram,n,l,this.currentPosition),s.isPreventHistory=!0;else{var p=this.diagram.nameTable[n.parentId];if(!p||p&&"SwimLane"!==p.shape.type)if(p&&p.isLane&&n.constraints&c.f.AllowMovingOutsideLane){var g=this.diagram.getObject(p.parentId),u=g.id+g.shape.lanes[0].id+"0",f=this.diagram.getObject(u),m=f.wrapper.bounds.x,y=f.wrapper.bounds.y,S=g.wrapper.bounds.bottomRight.x-m,w=g.wrapper.bounds.bottomRight.y-y,x=new b.a(m,y,S,w);x.containsPoint(this.currentPosition)&&(n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.width=t.width,n.height=t.height,n.rotateAngle=t.rotateAngle)}else n.offsetX=t.offsetX,n.offsetY=t.offsetY,n&&n.shape&&"UmlClassifier"!==n.shape.type&&("Bpmn"!==n.shape.type||"Bpmn"===n.shape.type&&"TextAnnotation"!==n.shape.shape)&&(n.width=t.width,n.height=t.height),n.rotateAngle=t.rotateAngle;var I=void 0;if(p&&p.container&&"Stack"===p.container.type&&(this.diagram.startGroupAction(),a=!0),!l&&p&&p.container&&"Stack"===p.container.type&&"Drag"===this.action){var z=p.wrapper.children.indexOf(n.wrapper);if(I={targetIndex:void 0,target:void 0,sourceIndex:z,source:i.i(v.e)(n)},z>-1){var O=p.children;O.splice(O.indexOf(n.id),1),this.diagram.nameTable[n.id].parentId="",e=!0,p.wrapper.children.splice(z,1)}}if(i.i(P.h)(n,l,this.diagram,this.action),p=i.i(P.a)(this.diagram,n)?this.diagram.nameTable[n.parentId]:this.diagram.nameTable[n.parentId]||n,p&&p.container&&"Canvas"===p.container.type&&(p.wrapper.maxWidth=p.maxWidth=p.wrapper.actualSize.width,p.wrapper.maxHeight=p.maxHeight=p.wrapper.actualSize.height,o=!0),i.i(P.a)(this.diagram,n,!0)&&p&&"Canvas"===p.container.type?i.i(P.i)(this.diagram,n):s=this.updateContainerPropertiesExtend(p,n,r,t,s),this.diagram.lineRoutingModule&&this.diagram.constraints&c.j.LineRouting&&!i.i(P.a)(this.diagram,n,!0)&&(n.children&&(this.diagram.realActions|=c.a.EnableGroupAction),this.diagram.nodePropertyChange(n,{},{width:n.width,height:n.height,offsetX:n.offsetX,offsetY:n.offsetY}),n.children&&(this.diagram.realActions&=~c.a.EnableGroupAction)),n.shape.lanes&&this.updateLaneChildNode(n),o&&(p.maxWidth=p.wrapper.maxWidth=void 0,p.maxHeight=p.wrapper.maxHeight=void 0),e){this.diagram.nodePropertyChange(p,{},{offsetX:p.offsetX,offsetY:p.offsetY,width:p.width,height:p.height,rotateAngle:p.rotateAngle});var T={redoObject:{sourceIndex:void 0,source:I.source},type:"StackChildPositionChanged",undoObject:I,category:"Internal"};this.diagram.diagramActions&c.p.UndoRedo||this.diagram.addHistoryEntry(T)}n&&n.container&&("Stack"===n.container.type||"Canvas"===n.container.type&&""===n.parentId)&&(n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!1))}i.i(C.e)(r,this.diagram),s.hasStack=a}}return n&&(n.isPhase||n.isLane||n.shape&&"SwimLane"===n.shape.type)&&this.diagram.updateDiagramElementQuad(),s},t.prototype.updateLaneChildNode=function(t){for(var e=0;e<t.shape.lanes.length;e++)if(t.shape.lanes[parseInt(e.toString(),10)].children&&t.shape.lanes[parseInt(e.toString(),10)].children.length>0)for(var i=0;i<t.shape.lanes[parseInt(e.toString(),10)].children.length;i++){var r=t.shape.lanes[parseInt(e.toString(),10)].children[parseInt(i.toString(),10)].id,n=this.diagram.nameTable[""+r];n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}},t.prototype.updateContainerPropertiesExtend=function(t,e,r,n,o){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===e.shape.type){var a=i.i(v.e)(e),s=!1;if(t&&t.container&&"Grid"===t.container.type){var h="SwimLane"===t.shape.type,d=h?t.wrapper.children[0]:t.wrapper,l=h?t.shape.padding:void 0,c=t.wrapper.bounds.x,p=t.wrapper.bounds.y;if(void 0!==e.columnIndex&&"Horizontal"===t.container.orientation&&(h&&e.isPhase||!h&&1===e.rowIndex)||"Vertical"===t.container.orientation&&(!h&&e.rowIndex>0&&e.columnIndex>0||h&&e.isLane)){if("Horizontal"===t.container.orientation&&e.isPhase&&e.wrapper.width>e.maxWidth&&(e.maxWidth=e.wrapper.width,e.wrapper.maxWidth=e.wrapper.width),i.i(C.u)(this.diagram,e,t,n),d.updateColumnWidth(e.columnIndex,n.width,!0,l),e.isPhase){var g=t.shape.phases[e.columnIndex].header.id,u=this.diagram.nameTable[""+g];u.maxWidth<n.width&&(u.maxWidth=n.width,u.wrapper.maxWidth=n.width)}"SwimLane"===t.shape.type&&(t.width=t.width?d.width:t.width,i.i(C.d)(this.diagram,t),t.wrapper.width=t.width,r=i.i(C.s)(this.diagram,d,e.rowIndex,!1))}else void 0!==e.rowIndex&&(s=!0,i.i(C.u)(this.diagram,e,t,n),d.updateRowHeight(e.rowIndex,n.height,!0,l),"SwimLane"===t.shape.type&&(t.height=t.height?d.height:t.height,t.wrapper.height=t.height,r=i.i(C.s)(this.diagram,d,e.rowIndex,!0)));"SwimLane"===t.shape.type&&(o.isPreventHistory=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,rotateAngle:t.rotateAngle}),this.diagram.drag(t,c-t.wrapper.bounds.x,p-t.wrapper.bounds.y)}else e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,width:e.width,height:e.height,rotateAngle:e.rotateAngle}),e.wrapper.measureChildren=!1;if(e.wrapper.measure(new y.a(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var f=i.i(v.e)(e),m={category:"Internal",type:s?"RowHeightChanged":"ColumnWidthChanged",undoObject:a,redoObject:f};this.diagram.addHistoryEntry(m)}}return i.i(C.e)(r,this.diagram),o},t.prototype.addUmlNode=function(){var t=this.diagram.selectedItems.nodes[0],e=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),r=this.diagram.findObjectUnderMouse(e,this.action,this.inAction);if(r||(e=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),r=this.diagram.findObjectUnderMouse(e,this.action,this.inAction)),t&&t.container&&"Stack"===t.container.type&&r&&r.parentId&&r.parentId===t.id){var n=r,o=i.i(f.o)(this.diagram.element.id);if(o.getElementById(o.id+"_stack_highlighter")){var a=t.wrapper.children.indexOf(r.wrapper)+1;this.diagram.enableServerDataBinding(!1);var s=new h.a(this.diagram,"nodes",{style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},annotations:r.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(c.f.Default|c.f.HideThumbs)&~(c.f.Rotate|c.f.Drag|c.f.Resize),minHeight:25},!0);s.annotations[0].content=" + Name : Type";n.id.split("_");s.id=i.i(O._38)()+s.id,s.parentId=t.id,s.zIndex=-1,s.umlIndex=a,this.diagram.startGroupAction();t.wrapper.children.indexOf(s.wrapper);this.diagram.enableServerDataBinding(!0),this.diagram.add(s),this.diagram.updateConnectorEdges(t),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[s.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},t}(),L=function(){function t(){}return t.prototype.findObjectsUnderMouse=function(t,e,r,n,o){var d=[];n&&n instanceof h.G&&n.nodes.length+n.connectors.length===1&&(n=n.nodes[0]||n.connectors[0],n.children&&0===n.children.length&&(r.actualObject=n));for(var u,f,m,y,v,w=n&&n instanceof a.a&&(n.constraints&c.h.ConnectToNearByNode||n.constraints&c.h.ConnectToNearByPort)&&n.connectionPadding||0,x=e.spatialSearch.findObjects(new b.a(t.x-50-w,t.y-50-w,100+w,100+w)),P={},C=0,z=x;C<z.length;C++){var O=z[C],T=t;f=O.wrapper.outerBounds;var A=!O.rotateAngle&&f.containsPoint(T,w);if((O!==n||e.currentDrawingObject instanceof a.a)&&O instanceof a.a?O!==e.currentDrawingObject:O.wrapper.visible){var L=e.commandHandler.getObjectLayer(O.id);if(L&&!L.lock&&L.visible){if(v=P[L.zIndex]=P[L.zIndex]||[],O.rotateAngle){u=O.wrapper,f=i.i(I.k)(u);for(var E=0,B=u.children;E<B.length;E++)m=B[E],y=i.i(S.a)(),i.i(S.b)(y,-(m.rotateAngle+m.parentTransform),m.offsetX,m.offsetY),T=i.i(S.c)(y,t),i.i(I.k)(m).containsPoint(T,w)&&(A=!0)}if((!n||!1===i.i(l.b)(e,O))&&i.i(g.F)(O,e)&&(O instanceof a.a?i.i(p.Z)(O,t):A)){var M=O instanceof a.a?O.hitPadding||0:0;this.findElementUnderMouse(O,t,w||M)&&"helper"!==O.id&&i.i(p._0)(O,"zIndex",v)}}}}for(var D=0,k=e.layers;D<k.length;D++){var L=k[D];d=d.concat(P[L.zIndex]||[]);for(var R=0,_=d;R<_.length;R++){var O=_[R];if("Bpmn"===O.shape.type&&O.processId&&(!(e.eventHandler.tool instanceof s.b)||e.eventHandler.tool instanceof s.b&&i.i(g.i)(O))){var j=d.indexOf(e.nameTable[O.processId]);j>-1&&d.splice(j,1)}if("UmlClassifier"===O.shape.type&&O.container&&"Stack"===O.container.type){var j=d.indexOf(e.nameTable[e.nameTable[O.id].wrapper.children[0].id]);j>-1&&d.splice(j,1)}}}for(var N=0;N<d.length;N++){var H=e.nameTable[d[parseInt(N.toString(),10)].parentId];if(H)for(var W=this.findElementUnderMouse(H,t),V=0;V<H.ports.length;V++)if(W.id.match("_"+H.ports[parseInt(V.toString(),10)].id+"$")){var X=H.ports[parseInt(V.toString(),10)];if(i.i(g.t)(X,e)||i.i(g.u)(X,e))return d}for(;H;){var j=d.indexOf(H);if(-1===j)break;d.splice(j,1),H=e.nameTable[H.parentId]}}if(this.checkSwimlane(d,e),r&&!r.source)for(var N=0;N<d.length;N++){var Y=e.nameTable[d[parseInt(N.toString(),10)].parentId];if(Y&&"SwimLane"===Y.shape.type)for(var V=0;V<d.length;V++){var U=d[parseInt(V.toString(),10)];U instanceof a.a&&d.splice(N,1)}}return d},t.prototype.checkSwimlane=function(t,e){for(var r,n=0;n<t.length;n++){var o=t[parseInt(n.toString(),10)],a=void 0,s=void 0;o instanceof h.a&&(a=t[parseInt(n.toString(),10)].parentId,s=o),""===a&&(r="SwimLane"!==s.shape.type);var d=e.nameTable[""+a];if(d&&d.isLane&&e.nameTable[d.parentId].zIndex>o.zIndex&&(t[parseInt(n.toString(),10)]=d),n>0&&r&&s&&(s.isLane||s.isPhase||s.isHeader)&&t[parseInt(n.toString(),10)].zIndex<t[n-1].zIndex){var l=t[parseInt(n.toString(),10)];t[parseInt(n.toString(),10)]=t[n-1],t[n-1]=l}}if(t.length>=2)for(var c=t.length-1;c>=0;c--)if(t[parseInt(c.toString(),10)].parentId){var g=i.i(p._1)(t[parseInt(c.toString(),10)],e,""),u=i.i(p._1)(t[c-1],e,""),f=e.nameTable[""+g],m=e.nameTable[""+u];m&&g!==u&&f.zIndex<m.zIndex&&t.splice(c,1)}},t.prototype.isTarget=function(t,e,i){var r,n=e.selectedItems.connectors[0];if(r="ConnectorSourceEnd"===i?e.nameTable[n.targetID]:r=e.nameTable[n.sourceID],!r||(r.processId||t.processId)&&r.processId===t.processId||(r.processId!==t.processId&&(t=null),t&&t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])),"ConnectorSourceEnd"===i&&n.targetID){var o=e.nameTable[n.targetID];if(o&&o.shape&&"TextAnnotation"===o.shape.shape){var a=n.id.split("_");("Bpmn"===o.shape.type&&"Bpmn"!==t.shape.type||a[0]===t.id||"TextAnnotation"===t.shape.shape)&&(t=null),t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])}}return t},t.prototype.findObjectUnderMouse=function(t,e,r,n,o,d,c){var u,f,m=null;if(0!==e.length)if(c&&c instanceof h.G&&c.nodes.length+c.connectors.length===1&&(c=c.nodes[0]||c.connectors[0]),"ConnectorSourceEnd"===r&&c||"PortDraw"===r||(i.i(x.j)(t)||i.i(x.k)(t))&&i.i(p.l)(t.drawingObject)===a.a)for(var y=t.selectedItems.connectors[0],v=e.length-1;v>=0;v--){f=i.i(p.u)(e[parseInt(v.toString(),10)],!1),u=i.i(p.u)(e[parseInt(v.toString(),10)],!0);var b=t.eventHandler.tool,S=this.findTargetElement(e[parseInt(v.toString(),10)].wrapper,d,void 0);if("Draw"===r&&S&&e[parseInt(v.toString(),10)]instanceof h.a&&!i.i(p.w)(e[parseInt(v.toString(),10)],S)&&(b&&"ConnectorSourceEnd"===b.endPoint&&!i.i(g.e)(e[parseInt(v.toString(),10)])||b&&"ConnectorTargetEnd"===b.endPoint&&!i.i(g.g)(e[parseInt(v.toString(),10)])))return m;if(e[parseInt(v.toString(),10)]instanceof h.a&&(i.i(g.e)(e[parseInt(v.toString(),10)])||i.i(g.f)(f)||i.i(g.g)(e[parseInt(v.toString(),10)])||i.i(g.h)(u)||"PortDraw"===r&&b instanceof s.i&&"ConnectorTargetEnd"===b.endPoint&&(i.i(g.g)(e[parseInt(v.toString(),10)])||i.i(g.h)(u))))return m=e[parseInt(v.toString(),10)],y&&(m=this.isTarget(m,t,r)),o.actualObject=m,m}else if("ConnectorTargetEnd"===r&&c){for(var v=e.length-1;v>=0;v--)if(u=i.i(p.u)(e[parseInt(v.toString(),10)],!0),e[parseInt(v.toString(),10)]instanceof h.a&&(i.i(g.g)(e[parseInt(v.toString(),10)])||i.i(g.h)(u)))return m=e[parseInt(v.toString(),10)],m=this.isTarget(m,t,r),o.actualObject=m,m}else{if(c&&("Drag"===r||t.eventHandler.tool instanceof s.b)){for(var w=0,v=0;v<e.length;v++){var I=e[parseInt(v.toString(),10)];c!==I&&(I instanceof a.a||!d||I.wrapper.bounds.containsPoint(d))&&i.i(g.i)(I)&&(m?(m=w>=I.zIndex?m:I,w=Math.max(w,I.zIndex)):(m=I,w=m.zIndex))}return m&&"Bpmn"===m.shape.type&&(m=t.selectedItems.nodes.length>0&&"Bpmn"===t.selectedItems.nodes[0].shape.type?m:null),m&&(o.actualObject=m),m}if("Select"!==r&&"Pan"!==r||!t.eventHandler.tool)if("Pan"===r||"LayoutAnimation"===r){for(var v=e.length-1;v>=0;v--)if(e[parseInt(v.toString(),10)]instanceof h.a||e[parseInt(v.toString(),10)]instanceof a.a){var S=this.findTargetElement(e[parseInt(v.toString(),10)].wrapper,d,void 0);if("Pan"===r||S&&(S.id.match("_icon_content_shape$")||S.id.match("_icon_content_rect$")))return e[parseInt(v.toString(),10)]}}else m=e[e.length-1],o&&m&&(o.actualObject=m);else{for(var v=e.length-1;v>=0;v--)if(e[parseInt(v.toString(),10)]instanceof a.a){var P=e[v-1];if(e[v-1]instanceof h.a&&P.ports){var S=this.findTargetElement(P.wrapper,d,void 0);if(S&&(S.id.match("_icon_content_shape$")||S.id.match("_icon_content_rect$")))return P;for(var C=0;C<P.ports.length;C++)if(S&&S.id.match("_"+P.ports[parseInt(C.toString(),10)].id+"$")&&i.i(g.u)(P.ports[parseInt(C.toString(),10)],t))return P}}if(m=e[e.length-1],o.actualObject=m,!t.eventHandler.itemClick(m,!0)&&m.parentId)for(var z=m,O=i.i(l.b)(t,z);z&&(!i.i(l.b)(t,z)||O);)m=z,z=t.nameTable[z.parentId]}}return m},t.prototype.findElementUnderSelectedItem=function(t,e,i){return t instanceof h.G?1!==t.nodes.length||t.connectors&&t.connectors.length?t.nodes&&!t.nodes.length||1!==t.connectors.length?null:this.findElementUnderMouse(t.connectors[0],e):this.findElementUnderMouse(t.nodes[0],e):this.findElementUnderMouse(t,e,i)},t.prototype.findElementUnderMouse=function(t,e,i){return this.findTargetElement(t.wrapper,e,i)},t.prototype.findTargetElement=function(t,e,i){for(var r=t.children.length-1;r>=0;r--){var n=t.children[parseInt(r.toString(),10)];if(n&&n.outerBounds.containsPoint(e,i||0)){if(n instanceof o.a){var a=this.findTargetElement(n,e);if(a)return a}if(n.bounds.containsPoint(e,i||0)&&"Clip"!==n.style.textOverflow&&"Ellipsis"!==n.style.textOverflow)return n}}return t.bounds.containsPoint(e,i)&&"none"!==t.style.fill?t:null},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return d});var r=i(1),n=i(5),o=i(10),a=i(3),s=i(8),h=i(2),d=function(){function t(){this.isAnimation=!1}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"OrganizationalChart"},t.prototype.updateLayout=function(t,e,r,n,o,s){var h={type:r.type,connectionPointOrigin:r.connectionPointOrigin,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:r.orientation,horizontalSpacing:r.horizontalSpacing,verticalSpacing:r.verticalSpacing,verticalAlignment:r.verticalAlignment,horizontalAlignment:r.horizontalAlignment,fixedNode:r.fixedNode,getLayoutInfo:i.i(a.h)(r.getLayoutInfo),layoutInfo:r.layoutInfo,margin:r.margin,bounds:r.bounds,objects:[],root:r.root};return this.doLayout(h,t,n,o,s),h},t.prototype.doLayout=function(t,e,i,r,n){var o,a,s={},h=[];for(t.nameTable[t.root]&&t.firstLevelNodes.push(t.nameTable[t.root]),a=0;a<e.length;a++)if(o=e[parseInt(a.toString(),10)],!(o.excludeFromLayout||(s=t.graphNodes[o.id]=this.setUpLayoutInfo(t,o),s.tree.hasSubTree=!1,t.nameTable[t.root]||o.inEdges&&o.inEdges.length))){o.parentId||o.processId||h.push(o),o.data&&String(o.data[""+r])===t.root&&t.firstLevelNodes.push(o)}for(0===t.firstLevelNodes.length&&(t.firstLevelNodes=h),a=0;a<t.firstLevelNodes.length;a++)o=t.firstLevelNodes[parseInt(a.toString(),10)],this.updateEdges(t,o,1,n,e);if(t.firstLevelNodes.length>0){t.rootNode=t.firstLevelNodes[0];var d=0,l=0,c=void 0,p=void 0,g=void 0,u=void 0,f=void 0;for(a=0;a<t.firstLevelNodes.length;a++){f=this.updateTree(t,d,l,t.firstLevelNodes[parseInt(a.toString(),10)],0,t.firstLevelNodes[a-1]);var m=t.graphNodes[t.firstLevelNodes[parseInt(a.toString(),10)].id];f.y=Math.min(f.y,m.y),f.x=Math.min(f.x,m.x),-1!==t.orientation.indexOf("Left")?l=f.right+t.horizontalSpacing:d=f.right+t.horizontalSpacing,0===a?(c=f.x,u=f.y,g=f.right,p=f.bottom):(c=Math.min(c,f.x),u=Math.min(u,f.y),g=Math.max(g,f.right),p=Math.max(p,f.bottom))}for(this.updateAnchor(t,{x:c,y:u,right:g,bottom:p},i),a=0;a<t.firstLevelNodes.length;a++)this.updateNodes(t,t.firstLevelNodes[parseInt(a.toString(),10)],0);for(a=0;a<t.firstLevelNodes.length;a++)this.updateConnectors(t,t.firstLevelNodes[parseInt(a.toString(),10)],1)}},t.prototype.getBounds=function(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new n.a(e,i,t.actualSize.width,t.actualSize.height)},t.prototype.updateTree=function(t,e,i,r,n,o,a){var s,h,d={},l=this.getDimensions(t,r,e,i,n);d=t.graphNodes[r.id];t.maxLevel=Math.max(t.maxLevel,n),s=n;var c=this.hasChild(t,r);if(c||d.tree.assistants.length){var p=void 0,g=void 0,u=void 0,f=void 0,m=void 0,y=void 0,v=void 0;v=l.y+l.height+t.verticalSpacing,d.tree.assistants.length&&(h=this.setDepthSpaceForAssitants(t,r,v,l.height,n,t.verticalSpacing),s=h.level,v=h.bottom),d.tree.assistants.length||"Horizontal"===d.tree.orientation||(v=l.y+l.height+t.verticalSpacing/2),d.tree.children.length&&(p="Horizontal"!==d.tree.orientation||"Balanced"===d.tree.type&&1!==d.tree.children.length?"Balanced"===d.tree.type?this.updateHorizontalTreeWithMultipleRows(t,r,o,l.x,v,s):this.updateVerticalTree(t,r,l.x,v,s,a):this.updateHorizontalTree(t,r,o,l.x,v,s)),d.y&&d.y>l.y||(d.y=l.y),d.mid&&(e=d.mid),d.tree.assistants.length&&(y=void 0!==e?e:l.x,m=this.setBreadthSpaceForAssistants(t,r,l,y,v,n),c||(u=p=m,e=(u.x+u.right)/2-l.width/2,p=u),f=m?m.canMoveBy:void 0),d.x=e,d.translate||(d.treeWidth=p.right-p.x),g={x:e,y:l.y,right:e+l.width,bottom:l.y+l.height};var b={layout:t,shape:r,shapeBounds:g,treeBounds:p,dim:l,level:n};return this.translateSubTree(b,f,void 0!==o,a),d.firstChild&&"string"!=typeof d.firstChild&&(d.firstChild.x+=d.subTreeTranslation),r.treeBounds=p,p}return r.treeBounds=this.updateLeafNode(t,r,o,l,n,a),r.treeBounds},t.prototype.updateLeafNode=function(t,e,i,r,n,o){var a=t.graphNodes[e.id];a.x=r.x,a.y&&a.y>r.y||(a.y=r.y,a.maxLevel=Math.max(n,a.maxLevel||0));var s={x:r.x,y:r.y,right:r.x+r.width,bottom:r.y+r.height};a.maxLevel=Math.max(a.maxLevel||0,n);var h={layout:t,shape:e,shapeBounds:s,treeBounds:s,dim:r,level:n};return this.translateSubTree(h,void 0,void 0!==i,o),{x:a.x,y:a.y,right:a.x+r.width,bottom:a.y+r.height}},t.prototype.setUpLayoutInfo=function(t,e){var i={};return i.subTreeTranslation=0,"OrganizationalChart"===t.type?i.tree={orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:i.tree={orientation:"Horizontal",type:"Center",enableRouting:!0},i.tree.children=[],i.tree.assistants=[],i.tree.level=0,i.translate=!0,i},t.prototype.translateSubTree=function(t,e,i,r){var n=t.layout,o=t.shape,a=t.shapeBounds,s=t.treeBounds,h=t.level,d=t.dim,l=n.graphNodes[o.id],c=n.nameTable[l.firstChild?l.firstChild.child:l.tree.children[0]],p=c?n.graphNodes[c.id]:null,g=this.hasChild(n,o),u=this.findIntersectingLevels(n,a,h,l.actualLevel),f=this.findIntersectingLevels(n,s,h,l.actualLevel),m=[];u.length&&l.translate?(l.intersect=u,this.spaceLeftFromPrevSubTree(n,o,a),l.canMoveBy=l.diff,void 0!==e&&(l.canMoveBy=Math.min(e,l.canMoveBy)),c&&void 0!==p.canMoveBy&&(p.canMoveBy>=l.canMoveBy&&(l.translated=!0),l.canMoveBy=Math.min(l.canMoveBy,p.canMoveBy)),i&&(l.x-=l.canMoveBy,l.subTreeTranslation-=l.canMoveBy,g&&(this.shiftSubordinates(n,f,l.canMoveBy),s.x=Math.min(s.x,l.x),s.right=Math.max(s.right,l.x+d.width),s.bottom=Math.max(s.bottom,l.y+d.height),s.x-=l.canMoveBy,s.right-=l.canMoveBy),c&&p.canMoveBy>l.canMoveBy?l.canMoveBy=p.canMoveBy-l.canMoveBy:c&&void 0!==l.canMoveBy&&(l.canMoveBy=0))):(g&&(s.x=Math.min(s.x,a.x),s.right=Math.max(s.right,a.x+d.width),s.bottom=Math.max(s.bottom,l.y+d.height)),l.translate||(l.canMoveBy=0,l.subTreeTranslation=0)),r||(a={x:l.x,y:d.y,right:l.x+d.width,bottom:d.y+d.height},m.push({rBounds:a}),this.updateRearBounds(n,o,m,h))},t.prototype.updateRearBounds=function(t,e,i,r,n){var o,a,s,h,d=!0,l={};e&&(l=t.graphNodes[e.id],n=l.intersect,d=!l.tree.children.length&&!l.tree.assistants.length);var c=i[0].rBounds,p=i[i.length-1].rBounds;if(n&&n.length){for(o=t.levels[n[0]].rBounds,h=o.bottom,o.y<c.y&&(o.bottom=c.y,i.splice(0,0,{rBounds:o})),h>p.bottom?i.push({rBounds:{x:o.x,right:o.right,y:c.bottom,bottom:h}}):(o=t.levels[n[n.length-1]].rBounds,d&&o.bottom>p.bottom&&(o.y=p.bottom,i.push({rBounds:o}))),a=n[0],s=i.length-1;s>=0;s--)t.levels.splice(a,0,i[parseInt(s.toString(),10)]);a+=i.length,t.levels.splice(a,n.length)}else for(a=this.findLevel(t,i[i.length-1].rBounds,r),s=i.length-1;s>=0;s--)t.levels.splice(a,0,i[parseInt(s.toString(),10)])},t.prototype.shiftSubordinates=function(t,e,i){var r;if(0!==i)for(r=0;r<e.length;r++)t.levels[e[parseInt(r.toString(),10)]].rBounds&&(t.levels[e[parseInt(r.toString(),10)]].rBounds.x-=i,t.levels[e[parseInt(r.toString(),10)]].rBounds.right-=i)},t.prototype.setDepthSpaceForAssitants=function(t,e,i,r,n,o){var a,s,h,d,l=t.graphNodes[e.id],c={};for(d=i,s=0;s<l.tree.assistants.length;s++)(c=t.graphNodes[l.tree.assistants[parseInt(s.toString(),10)]])&&(c.tree.children=c.tree.assistants=[],c.y=i,h=t.nameTable[l.tree.assistants[parseInt(s.toString(),10)]],a=h.actualSize.height,-1!==t.orientation.indexOf("Left")&&(a=h.actualSize.width),d=i+a+o/2,t.maxLevel=n+1,s%2==1&&s!==l.tree.assistants.length-1&&(i=d,n++));return{level:t.maxLevel,bottom:i+a+o}},t.prototype.setBreadthSpaceForAssistants=function(t,e,i,r,n,o){var a,s,h,d,l,c,p,g={},u=t.graphNodes[e.id],f=o,m={x:0,y:0,right:0,bottom:0};for(d=0;d<u.tree.assistants.length;d++)(g=t.graphNodes[u.tree.assistants[parseInt(d.toString(),10)]])&&(h=t.nameTable[u.tree.assistants[parseInt(d.toString(),10)]],a=h.actualSize.width,-1!==t.orientation.indexOf("Left")&&(a=h.actualSize.height),l=d%2==0?r+i.width/2-20-a:r+i.width/2+20,s=this.updateTree(t,l,g.y,t.nameTable[u.tree.assistants[parseInt(d.toString(),10)]],f+1),this.hasChild(t,e)||(0===d?m=s:this.uniteRects(m,s)),d%2==0&&g.prevBounds&&(c=void 0===c?g.canMoveBy:Math.min(c,g.canMoveBy)),d%2!=1&&d!==u.tree.assistants.length-1||(p=this.findIntersectingLevels(t,s,f+1),this.updateRearBounds(t,null,[{rBounds:s}],f+1,p),f++));return m&&(m.canMoveBy=c),m},t.prototype.getDimensions=function(t,e,i,r,n){var o;o=e.actualSize.width;var a;if(a=e.actualSize.height,-1!==t.orientation.indexOf("Left")){if(!n){var s=i;i=r,r=s}a=e.actualSize.width,o=e.actualSize.height}return{x:i,y:r,width:o,height:a}},t.prototype.hasChild=function(t,e){var i=t.graphNodes[e.id];return i?i.tree.children&&i.tree.children.length:0},t.prototype.updateHorizontalTree=function(t,e,i,r,n,o){var a=this.getDimensions(t,e,r,n,o),s={};s=t.graphNodes[e.id];var h=s.tree.type,d=o,l=0;l=r;var c,p,g,u,f,m,y,v,b,S,w,x,I,P,C=n;t.levels.slice(0,t.levels.length);if(this.hasChild(t,e)){var z=-1!==t.orientation.indexOf("Left");for(x=0;x<s.tree.children.length;x++){g=t.nameTable[s.tree.children[parseInt(x.toString(),10)]],c=g.actualSize.width,p=g.actualSize.height,f=z?p:c,m=z?c:p;t.levels[d+1]&&t.levels[d+1].rBounds;if(u=this.updateTree(t,l,C,g,d+1,t.nameTable[s.tree.children[x-1]]),I=t.graphNodes[g.id],s.maxLevel=Math.max(s.maxLevel||0,I.maxLevel||0),v={x:I.x,y:I.y,right:I.x+f,bottom:I.y+m},0===x&&(y={x:Math.min(I.x,u.x),y:Math.min(I.y,u.y),right:u.right,bottom:u.bottom},P=I),w?(w.x=v.x,w.y=v.y,v.right>w.right&&(w.right=v.right),w.bottom=v.bottom):w=v,0===x&&(s.firstChild={x:I.x,canMoveBy:I.canMoveBy,child:g.id}),this.hasChild(t,g))if(!s.firstChild||s.firstChild.x>=I.firstChild.x){I.firstChild&&s.firstChild.canMoveBy<I.canMoveBy&&(S=s.firstChild.canMoveBy,I.canMoveBy=S,t.graphNodes[s.firstChild.child].canMoveBy=S,s.firstChild.canMoveBy=S);var O=void 0!==S?S:I.canMoveBy;s.firstChild={x:I.firstChild.x,canMoveBy:O,child:g.id}}else I.firstChild&&I.translated&&s.firstChild.canMoveBy>I.canMoveBy&&(s.firstChild.canMoveBy=t.graphNodes[s.firstChild.child].canMoveBy=I.canMoveBy);b=b?Math.max(I.maxLevel,b):I.maxLevel,this.uniteRects(y,u),l=0!==x&&!this.hasChild(t,g)&&I.subTreeTranslation<0?u.right-I.subTreeTranslation+t.horizontalSpacing:u.right+t.horizontalSpacing}isNaN(void 0)||(P.canMoveBy=void 0),s.mid=(P.x+w.right)/2-a.width/2,"Left"===h?s.mid=v.right-a.width:"Right"===h&&(s.mid=r)}return y},t.prototype.updateHorizontalTreeWithMultipleRows=function(t,e,i,r,n,o){var a,s,h,d,l,c,p,g,u,f,m,y=this.getDimensions(t,e,r,n,o),v=t.graphNodes[e.id],b=(v.tree.type,o),S=r,w=n,x=(t.levels.slice(0,t.levels.length),0);if(this.hasChild(t,e)){var I=-1!==t.orientation.indexOf("Left"),P=void 0,C=this.splitChildrenInRows(t,e),z=5===v.tree.children.length&&3===C[0].length,O=[],T=[];z?T=C:this.splitRows(C,O,T);var A={leftTree:O,rows:C,rightTree:T,dimensions:y},L=this.updateLeftTree(t,A,e,r,w,b);l=A.bounds;var E=void 0,B=(L||0)+(void 0!==L?t.horizontalSpacing/2:0);void 0!==L&&(v.mid=B-y.width/2,E=L+t.horizontalSpacing),w=n;var M=void 0;for(M=[],u=0;u<T.length;u++)for(S=C[u].length%2==1&&u===T.length-1||z?r:E||r,0!==u&&(w=M[u-1].bottom+t.verticalSpacing),g=0;g<T[u].length;g++)a=t.nameTable[T[u][g]],c=a.actualSize.width,p=a.actualSize.height,d=I?p:c,I?c:p,s=t.graphNodes[a.id],s.actualLevel=b+1+u,0===g&&O[u]&&O[u].length&&(s.translate=!1),z&&1===u&&(0===g&&f+d+t.horizontalSpacing<=m&&(P=!0,S=f-d/2),P&&1===g&&(S=m-d/2)),h=this.updateTree(t,S,w,a,b+1,t.nameTable[T[u][g-1]]),z&&g<=2&&0===u&&1===g&&(f=h.x-t.horizontalSpacing/2,m=h.x+d+t.horizontalSpacing/2),0===g?M[u]={x:h.x,y:h.y,right:h.right,bottom:h.bottom}:this.uniteRects(M[u],h),l||(l={x:M[u].x,y:M[u].y,right:M[u].right,bottom:M[u].bottom}),this.uniteRects(l,M[u]),S=h.right+t.horizontalSpacing,(!v.firstChild||(u===T.length-1&&C[u].length%2==1||z)&&0===g&&void 0!==s.canMoveBy&&x>s.canMoveBy)&&(x=Math.min(x,s.canMoveBy||0),v.firstChild={x:s.x,child:a.id,canMoveBy:s.canMoveBy}),A.leftCenter=f,A.rightCenter=m,A.align=P,A.level=b,A.rightBounds=M,this.alignRowsToCenter(t,u,e,A,E)}return l},t.prototype.updateLeftTree=function(t,e,i,r,n,o){for(var a,s,h,d,l,c=e.leftTree,p=t.graphNodes[i.id],g=[],u=-1!==t.orientation.indexOf("Left"),f=0;f<c.length&&c[parseInt(f.toString(),10)].length;f++){a=r,g[f-1]&&(n=g[f-1].bottom+t.verticalSpacing);for(var m=0;m<c[parseInt(f.toString(),10)].length;m++){var y=t.nameTable[c[parseInt(f.toString(),10)][parseInt(m.toString(),10)]],v=(u?y.actualSize.height:y.actualSize.width,u?y.actualSize.width:y.actualSize.height,t.graphNodes[y.id]);v.actualLevel=o+1+f,d=this.updateTree(t,a,n,y,o+1,t.nameTable[c[parseInt(f.toString(),10)][m-1]]),0===m?g[parseInt(f.toString(),10)]={x:d.x,y:d.y,right:d.right,bottom:d.bottom}:this.uniteRects(g[parseInt(f.toString(),10)],d),0===f&&0===m?(s=v.canMoveBy,p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}):0===m&&void 0!==v.canMoveBy&&s>v.canMoveBy&&(s=Math.min(s,v.canMoveBy||0),p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}),a=d.right+t.horizontalSpacing}h=0===f?g[parseInt(f.toString(),10)].right:Math.max(h,g[parseInt(f.toString(),10)].right)}for(var f=0;f<c.length&&c[parseInt(f.toString(),10)].length;f++){if(h!==g[parseInt(f.toString(),10)].right)for(var b=h-g[parseInt(f.toString(),10)].right,m=0;m<c[parseInt(f.toString(),10)].length;m++){var S=(t.nameTable[c[parseInt(f.toString(),10)][parseInt(m.toString(),10)]],t.graphNodes[c[parseInt(f.toString(),10)][parseInt(m.toString(),10)]]);S.x+=b}0===f?l={x:g[0].x,y:g[0].y,right:g[0].right,bottom:g[0].bottom}:this.uniteRects(l,g[parseInt(f.toString(),10)])}return e.bounds=l,h},t.prototype.alignRowsToCenter=function(t,e,i,r,n){var o,a,s,h=t.graphNodes[i.id],d=r.rows,l=r.rightTree,c=r.leftCenter,p=r.rightCenter,g=r.align,u=r.rightBounds,f=r.dimensions,m=r.level,y=5===h.tree.children.length&&3===d[0].length;if(y&&1===e&&(o=u[0].right-u[0].x>=u[1].right-u[1].x?0:1),e===d.length-1&&(d[parseInt(e.toString(),10)].length%2==1||y&&1===e)){a=l[parseInt(e.toString(),10)][Math.floor(l[parseInt(e.toString(),10)].length/2)];var v=t.nameTable[""+a],b=t.graphNodes[""+a].x,S=t.graphNodes[""+a].y,w=this.getDimensions(t,v,b,S,m+1);s=void 0,!g&&y?(1===o&&(e=0),s=(u[parseInt(o.toString(),10)].x+u[parseInt(o.toString(),10)].right)/2-(u[parseInt(e.toString(),10)].x+u[parseInt(e.toString(),10)].right)/2,0===e&&(h.mid+=s)):y||void 0===n||(s=n-t.horizontalSpacing/2-(b+w.width/2)),void 0!==s&&this.updateRearBoundsOfTree(t,l[parseInt(e.toString(),10)],s,f),y&&(h.mid=(p+c)/2+(0===e?s:0)-f.width/2),void 0===h.mid&&t.graphNodes[""+a]&&(h.mid=b),g=!1,e++}},t.prototype.updateRearBoundsOfTree=function(t,e,i,r){for(var n=0;n<e.length;n++){var o=t.graphNodes[e[parseInt(n.toString(),10)]];if(o.x+=i,o.canMoveBy+=i,n===e.length-1){var a={x:o.x,y:o.y,right:o.x+r.width,bottom:o.y+r.height},s=this.findIntersectingLevels(t,a,o.actualLevel);this.updateRearBounds(t,null,[{rBounds:a}],o.actualLevel,s)}}},t.prototype.splitRows=function(t,e,i){for(var r=0;r<t.length;r++){e[parseInt(r.toString(),10)]=[],i[parseInt(r.toString(),10)]=[];var n=void 0;if(n=t[parseInt(r.toString(),10)].length,t[parseInt(r.toString(),10)].length%2!=1){n=Math.ceil(t[parseInt(r.toString(),10)].length/2);for(var o=0;o<n;o++)e[parseInt(r.toString(),10)].push(t[parseInt(r.toString(),10)][parseInt(o.toString(),10)])}for(var a=e[parseInt(r.toString(),10)].length;a<t[parseInt(r.toString(),10)].length;a++)i[parseInt(r.toString(),10)].push(t[parseInt(r.toString(),10)][parseInt(a.toString(),10)])}},t.prototype.updateVerticalTree=function(t,e,i,r,n,o){var a,s,h,d,l,c,p,g,u,f,m,y,v,b,S=t.graphNodes[e.id],w=t.nameTable[S.tree.children[0]],x=-1!==t.orientation.indexOf("Left"),I="Left"===S.tree.type?-1:0,P=i,C=r,z=n,O=[],T=[];for(m=0;m<S.tree.children.length;m++){if("Alternate"===S.tree.type&&(v=m%2==0&&S.tree.children.length>2?"Left":"Right",I=m%2==0&&S.tree.children.length>2?-1:0),P=i+this.findOffset(t,e,S,v),a=t.nameTable[S.tree.children[parseInt(m.toString(),10)]],d=x?a.actualSize.height:a.actualSize.width,l=x?a.actualSize.width:a.actualSize.height,h=this.updateTree(t,P+I*d,C,a,n+1,void 0,!0),s=t.graphNodes[a.id],g={x:s.x,y:s.y,right:s.x+d,bottom:s.y+l},0===m?(this.uniteRects(h,g),p=h):this.uniteRects(p,h),!s.prevBounds||"Alternate"===S.tree.type&&m%2==1&&S.tree.children.length>2||(b=void 0!==b?Math.min(s.canMoveBy,b):s.canMoveBy),S.maxLevel=Math.max(S.maxLevel||0,s.maxLevel||0),"Alternate"===S.tree.type&&S.tree.children.length>2&&m%2==0?(0!==m&&(C=c.bottom+t.verticalSpacing/2),T.push({rBounds:g}),s.levelBounds&&(T=T.concat(s.levelBounds))):(C="Alternate"===S.tree.type&&S.tree.children.length>2?Math.max(h.bottom,c.bottom)+t.verticalSpacing/2:h.bottom+t.verticalSpacing/2,n=S.maxLevel,O.push({rBounds:g}),f?this.uniteRects(f,g):f={x:s.x,y:s.y,right:s.x+d,bottom:s.y+l},s.levelBounds&&(O=O.concat(s.levelBounds))),0===m&&(S.firstChild={x:s.x,canMoveBy:s.canMoveBy,child:a.id}),this.hasChild(t,a))if(!S.firstChild||S.firstChild.x>=s.firstChild.x){if(s.firstChild&&S.firstChild.canMoveBy<s.canMoveBy){var A=S.firstChild.canMoveBy;s.canMoveBy=A,t.graphNodes[S.firstChild.child].canMoveBy=A,S.firstChild.canMoveBy=A}S.firstChild={x:s.firstChild.x,canMoveBy:void 0!==b?b:s.canMoveBy,child:a.id}}else s.firstChild&&s.translated&&S.firstChild.canMoveBy>s.canMoveBy&&(S.firstChild.canMoveBy=t.graphNodes[S.firstChild.child].canMoveBy=s.canMoveBy);c=g}return o?S.levelBounds=O:("Alternate"===S.tree.type&&S.tree.children.length>2&&(u={x:T[0].rBounds.x,y:T[0].rBounds.y,right:T[T.length-1].rBounds.right,bottom:T[T.length-1].rBounds.bottom},y=this.findIntersectingLevels(t,u,z+1),this.updateRearBounds(t,null,T,z+1,y)),y=this.findIntersectingLevels(t,f||p,z+1),this.updateRearBounds(t,null,f?O:[{rBounds:p}],z+1,y)),isNaN(b)||(t.graphNodes[w.id].canMoveBy=b),S.childBounds=p,S.mid=i,p},t.prototype.splitChildrenInRows=function(t,e){var i,r=t.graphNodes[e.id];i=4;var n,o=[];n=r.tree.children.length;var a=this.extend(r.tree.children);if(r.tree.rows){var s=(r.tree.children.length,r.tree.rows);i=s%2==0?s:s-1}else 3===r.tree.children.length||4===r.tree.children.length?i=2:5===r.tree.children.length&&(i=3);for(;n>0;)o[o.length]=a.splice(0,i),(n-=i)<i&&(n%2==0?i=n:1!==n&&(i=n-1),n<i&&(i=n));return o},t.prototype.extend=function(t){var e,i=[];for(e=0;e<t.length;e++)i[parseInt(e.toString(),10)]=t[parseInt(e.toString(),10)];return i},t.prototype.findOffset=function(t,e,i,r){var n=0,o=-1!==t.orientation.indexOf("Left")?e.actualSize.height:e.actualSize.width,a=r||i.tree.type;switch(n=i.tree.offset||20,"Alternate"===i.tree.type&&n>=t.horizontalSpacing&&(n=t.horizontalSpacing/2),a){case"Left":n=o/2-n;break;case"Right":n+=o/2}return n},t.prototype.uniteRects=function(t,e){t.x=Math.min(t.x,e.x),t.right=Math.max(t.right,e.right),t.bottom=Math.max(t.bottom,e.bottom)},t.prototype.spaceLeftFromPrevSubTree=function(t,e,i){for(var r,n,o=t.graphNodes[e.id],a=t.horizontalSpacing,s=0;s<o.intersect.length;s++)n=t.levels[o.intersect[parseInt(s.toString(),10)]].rBounds,r=i.x-(n.right+a),(void 0===o.diff||r<o.diff)&&(o.diff=r,o.prevBounds=t.levels[o.intersect[parseInt(s.toString(),10)]].rBounds)},t.prototype.findIntersectingLevels=function(t,e,i,r){var n={x:e.x,y:e.y,right:e.right,bottom:e.bottom};n.y-=t.verticalSpacing/2,n.bottom+=t.verticalSpacing/2;var o,a,s=[];a=void 0!==r?r:i,o=t.levels[parseInt(a.toString(),10)]?t.levels[parseInt(a.toString(),10)].rBounds:null;do{if(o&&(n.y<o.y&&n.bottom>o.y||n.y<o.bottom&&o.bottom<n.bottom||n.y>=o.y&&n.bottom<=o.bottom||n.y<o.y&&n.bottom>o.bottom)){s.splice(0,0,a)}else if(o&&o.bottom<n.y)break;a--,o=t.levels[parseInt(a.toString(),10)]?t.levels[parseInt(a.toString(),10)].rBounds:null}while(a>=0);a=(void 0!==r?r:i)+1,o=t.levels[parseInt(a.toString(),10)]?t.levels[parseInt(a.toString(),10)].rBounds:null;do{if(o&&(n.y<o.y&&n.bottom>o.y||n.y<o.bottom&&o.bottom<n.bottom||n.y>=o.y&&n.bottom<=o.bottom||n.y<o.y&&n.bottom>o.bottom))s.push(a);else if(o&&o.y>n.bottom)break;a++,o=t.levels[parseInt(a.toString(),10)]?t.levels[parseInt(a.toString(),10)].rBounds:null}while(a<=t.levels.length);return s},t.prototype.findLevel=function(t,e,i){var r,n=e;r=0;var o;for(o=t.levels[parseInt(r.toString(),10)]?t.levels[parseInt(r.toString(),10)].rBounds:null;r<t.levels.length;){if(o&&n.bottom<o.y)return r;r++,o=t.levels[parseInt(r.toString(),10)]?t.levels[parseInt(r.toString(),10)].rBounds:null}return r},t.prototype.getParentNode=function(t,e){return t.nameTable[t.nameTable[e.inEdges[0]].sourceID]},t.prototype.updateEdges=function(t,e,n,o,a){var s,d=t.graphNodes[e.id];if(e.outEdges&&e.outEdges.length&&(e.isExpanded||o===r.p.Render))for(s=0;s<e.outEdges.length;s++){var l=t.nameTable[t.nameTable[e.outEdges[parseInt(s.toString(),10)]].targetID];l&&!l.excludeFromLayout&&(-1===d.tree.children.indexOf(l.id)&&d.tree.children.push(l.id),l.outEdges&&l.outEdges.length&&l.isExpanded&&(d.tree.hasSubTree=!0),this.updateEdges(t,l,n+1,o,a))}d.tree.level=n,d.tree.hasSubTree&&(d.tree.orientation="Horizontal",d.tree.type="Center"),(t.getLayoutInfo||t.layoutInfo)&&"OrganizationalChart"===t.type&&(t.getLayoutInfo?t.getLayoutInfo(e,d.tree):i.i(h._13)(d.tree,t.layoutInfo,a,e),"Balanced"===d.tree.type&&d.tree.hasSubTree&&(d.tree.type="Center",d.tree.orientation="Horizontal")),t.level&&"Alternate"!==d.tree.type&&n>=t.level&&(d.tree.hasSubTree=!1)},t.prototype.updateAnchor=function(t,e,i){var r,o,a=0,s=0,h=0,d=0,l=new n.a(0,0,i.x,i.y),c=t.bounds?t.bounds:l,p=t.orientation;if(t.fixedNode){o=t.nameTable[t.fixedNode],a=o.actualSize.width,s=o.actualSize.height,t.anchorX=o.offsetX,t.anchorY=o.offsetY;var g=o.pivot;for(t.anchorX+="RightToLeft"===t.orientation?a*g.x:-a*g.x,t.anchorY+="BottomToTop"===t.orientation?s*g.y:-s*g.y,r=o,h=0;r.inEdges.length;)r=this.getParentNode(t,r),h+=t.graphNodes[r.id].subTreeTranslation||0;-1!==t.orientation.indexOf("Left")?(d=t.graphNodes[o.id].y,"LeftToRight"===p?t.anchorX-=d:t.anchorX+=d,t.anchorY-=t.graphNodes[o.id].x+h):(d=t.graphNodes[o.id].y,t.anchorX-=t.graphNodes[o.id].x+h,"TopToBottom"===p?t.anchorY-=d:t.anchorY+=d)}else if("TopToBottom"===p||"BottomToTop"===p){switch(t.horizontalAlignment){case"Left":t.anchorX=c.x-e.x+t.margin.left;break;case"Right":t.anchorX=c.x+c.width-t.margin.right-e.right;break;case"Auto":case"Center":t.anchorX=c.x+c.width/2-(e.x+e.right)/2}switch(t.verticalAlignment){case"Auto":case"Top":var u;u=c.y+t.margin.top,t.anchorY="TopToBottom"===p?u:e.bottom+u;break;case"Bottom":var f=void 0;f=c.y+c.height-t.margin.bottom,t.anchorY="TopToBottom"===p?f-e.bottom:f;break;case"Center":var m=void 0;m=c.y+c.height/2,t.anchorY="TopToBottom"===t.orientation?m-(e.y+e.bottom)/2:m+(e.y+e.bottom)/2}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var y=void 0;y=c.x+t.margin.left,t.anchorX="LeftToRight"===p?y:e.bottom+y;break;case"Right":var v=void 0;v=c.x+c.width-t.margin.right,t.anchorX="LeftToRight"===p?v-e.bottom:v;break;case"Center":var m=void 0;m=c.width/2+c.x,t.anchorX="LeftToRight"===t.orientation?m-(e.y+e.bottom)/2:m+(e.y+e.bottom)/2}switch(t.verticalAlignment){case"Top":t.anchorY=c.y+t.margin.top-e.x;break;case"Auto":case"Center":t.anchorY=c.y+c.height/2-(e.right+e.x)/2;break;case"Bottom":t.anchorY=c.y+c.height-t.margin.bottom-e.right}}},t.prototype.updateConnectors=function(t,e,i){var r,n,a,s=t.graphNodes[e.id];if(e.outEdges.length)for(r=0;r<e.outEdges.length;r++)if(a=t.nameTable[e.outEdges[parseInt(r.toString(),10)]],a.points=[],n=t.nameTable[a.targetID],a.visible){if(a.visited=!0,t.getConnectorSegments){t.getConnectorSegments(a)}else s&&-1!==s.tree.children.indexOf(a.targetID)&&("Bezier"===a.type&&"SamePoint"==t.connectionPointOrigin&&(a.segments=[],a.segments.push(new o.e(a,"segments",{type:"Bezier"},!0))),"OrganizationalChart"===t.type&&"Orthogonal"===a.type&&(a.segments=[],this.updateSegments(t,a,e,n,r)));n&&(n.isExpanded||this.hasChild(t,n))&&this.updateConnectors(t,n,i+1)}if(s&&s.tree.assistants.length)for(r=0;r<s.tree.assistants.length;r++)n=t.nameTable[s.tree.assistants[parseInt(r.toString(),10)]],a=t.nameTable[n.inEdges[0]],this.get3Points(t,e,n,a),(n.isExpanded||this.hasChild(t,n))&&this.updateConnectors(t,n,i+1)},t.prototype.updateSegments=function(t,e,i,r,n){var o=t.graphNodes[i.id];o.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(t,i,r,e):"Horizontal"===o.tree.orientation&&"Balanced"===o.tree.type?this.updateSegmentsForBalancedTree(t,e,i,r,n):"Horizontal"===o.tree.orientation?this.updateSegmentsForHorizontalOrientation(t,i,r,e):o.tree.offset<5?this.get5Points(t,i,r,e):this.get3Points(t,i,r,e)},t.prototype.updateSegmentsForBalancedTree=function(t,e,i,r,n){var o,a=t.graphNodes[i.id];if(5===a.tree.children.length&&n>2){o=a.tree.children[1],isNaN(t.graphNodes[""+o].treeWidth)&&(t.graphNodes[""+o].treeWidth=t.nameTable[""+o].actualSize.width);var s=3!==n?1:-1;if(-1!==t.orientation.indexOf("Left"))t.nameTable[""+o].offsetY-t.graphNodes[""+o].treeWidth/2-t.verticalSpacing*s/2;else{t.nameTable[""+o].offsetX,t.graphNodes[""+o].treeWidth,t.horizontalSpacing}this.getSegmentsForMultipleRows(t,i,r,e)}else a.tree.children.length>5?n<4||n<a.tree.rows?this.getSegmentsForMultipleRows(t,i,r,e):this.updateSegmentsForHorizontalOrientation(t,i,r,e):4===a.tree.children.length?n<2||n<a.tree.rows?this.getSegmentsForMultipleRows(t,i,r,e):this.updateSegmentsForHorizontalOrientation(t,i,r,e):this.getSegmentsForMultipleRows(t,i,r,e)},t.prototype.get3Points=function(t,e,i,r){var n=[],o=this.getBounds(e),a=this.getBounds(i);if(-1!==t.orientation.indexOf("Top")){var s=0===t.orientation.indexOf("Top")?o.bottomCenter:o.topCenter,h=e.offsetX>i.offsetX?a.middleRight:a.middleLeft;n.push(s,{x:o.bottomCenter.x,y:h.y},h)}else{var s=0===t.orientation.indexOf("Left")?o.middleRight:o.middleLeft,h=e.offsetY>i.offsetY?a.bottomCenter:a.topCenter;n.push(s,{x:a.bottomCenter.x,y:o.middleRight.y},h)}this.getSegmentsFromPoints(n,r)},t.prototype.get5Points=function(t,e,i,r){var n,o,a,s,h=[],d=this.getBounds(e),l=this.getBounds(i);-1!==t.orientation.indexOf("Top")?(n=e.offsetY<i.offsetY?d.bottomCenter:d.topCenter,s=t.verticalSpacing/4*(e.offsetY<i.offsetY?1:-1),a=t.horizontalSpacing/2*(e.offsetX>i.offsetX?1:-1),o=e.offsetX>i.offsetX?l.middleRight:l.middleLeft,h.push(n,{x:n.x,y:n.y+s},{x:o.x+a,y:n.y+s},{x:o.x+a,y:o.y},o)):(n=e.offsetX>i.offsetX?d.middleLeft:d.middleRight,o=e.offsetY>i.offsetY?l.bottomCenter:l.topCenter,a=t.horizontalSpacing/4*(e.offsetX<i.offsetX?1:-1),s=t.verticalSpacing/2*(e.offsetY>i.offsetY?1:-1),h.push(n,{x:n.x+a,y:n.y},{x:n.x+a,y:n.y+s},{x:o.x,y:n.y+s},o)),this.getSegmentsFromPoints(h,r)},t.prototype.getSegmentsFromPoints=function(t,e){for(var i,r=[],n=0;n<t.length-2;n++)i=new o.f(e,"segments",{type:"Orthogonal"},!0),i.direction=s.a.direction(t[parseInt(n.toString(),10)],t[n+1]),i.length=s.a.distancePoints(t[parseInt(n.toString(),10)],t[n+1]),r.push(i);e.segments=r},t.prototype.getSegmentsForMultipleRows=function(t,e,i,r){var n,a,h=[],d=this.getBounds(i),l=this.getBounds(e);switch(t.orientation){case"TopToBottom":n={x:l.bottomCenter.x,y:l.bottomCenter.y+t.verticalSpacing/4},a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(l.bottomCenter,n),a.length=s.a.distancePoints(l.bottomCenter,n),h.push(a);break;case"BottomToTop":n={x:l.bottomCenter.x,y:l.topCenter.y-t.verticalSpacing/4},a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(l.topCenter,n),a.length=s.a.distancePoints(l.topCenter,n),h.push(a);break;case"LeftToRight":if(n={x:l.middleRight.x+t.verticalSpacing/4,y:l.middleRight.y},a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(l.middleRight,n),a.length=s.a.distancePoints(l.middleRight,n),h.push(a),d.center.y!==l.center.y){var c={x:l.middleRight.x+t.verticalSpacing/4,y:d.middleLeft.y};a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(n,c),a.length=s.a.distancePoints(n,c),h.push(a)}break;case"RightToLeft":if(n={x:l.middleLeft.x-t.verticalSpacing/4,y:l.middleRight.y},a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(l.middleLeft,n),a.length=s.a.distancePoints(l.middleLeft,n),h.push(a),d.center.y!==l.center.y){var p={x:l.middleLeft.x-t.verticalSpacing/4,y:d.middleLeft.y};a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(p,p),a.length=s.a.distancePoints(p,p),h.push(a)}}r.segments=h},t.prototype.updateSegmentsForHorizontalOrientation=function(t,e,i,r){var n,a,h=[],d=[],l=this.getBounds(e),c=this.getBounds(i);switch(t.orientation){case"TopToBottom":n={x:l.bottomCenter.x,y:c.topCenter.y-t.verticalSpacing/2},a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(l.bottomCenter,n),a.length=s.a.distancePoints(l.bottomCenter,n),d.push(a);break;case"BottomToTop":n={x:l.topCenter.x,y:c.bottomCenter.y+t.verticalSpacing/2},a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(l.topCenter,n),a.length=s.a.distancePoints(l.topCenter,n),d.push(a);break;case"LeftToRight":if(n={x:c.middleLeft.x-t.verticalSpacing/2,y:l.middleRight.y},a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(l.middleRight,n),a.length=s.a.distancePoints(l.middleRight,n),d.push(a),c.center.y!==l.center.y){var p={x:c.middleLeft.x-t.verticalSpacing/2,y:c.middleLeft.y};a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(n,p),a.length=s.a.distancePoints(n,p),d.push(a)}break;case"RightToLeft":if(n={x:c.middleRight.x+t.verticalSpacing/2,y:l.middleRight.y},a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(l.middleLeft,n),a.length=s.a.distancePoints(l.middleLeft,n),d.push(a),c.center.y!==l.center.y){var g={x:c.middleRight.x+t.verticalSpacing/2,y:c.middleLeft.y};a=new o.f(r,"segments",{type:"Orthogonal"},!0),a.direction=s.a.direction(n,g),a.length=s.a.distancePoints(n,g),d.push(a)}}return r.segments=d,h},t.prototype.updateNodes=function(t,e,i,r,n,o){var a,s,h,d,l,c;if(e&&!e.excludeFromLayout){h=e.actualSize.width,d=e.actualSize.height,l=t.anchorX,c=t.anchorY,"LeftToRight"===t.orientation?(l+=t.graphNodes[e.id].y+h/2,c+=t.graphNodes[e.id].x+i+d/2):"RightToLeft"===t.orientation?(l-=t.graphNodes[e.id].y+h/2,c+=t.graphNodes[e.id].x+i+d/2):"TopToBottom"===t.orientation?(l+=t.graphNodes[e.id].x+i+h/2,c+=t.graphNodes[e.id].y+d/2):(l+=t.graphNodes[e.id].x+i+h/2,c-=t.graphNodes[e.id].y+d/2),t.graphNodes&&(n=n||0,o=o||0,l+=n,c+=o,this.isAnimation||(e.offsetX=l,e.offsetY=c));var p={id:e.id,differenceX:l-e.offsetX,differenceY:c-e.offsetY};t.objects.push(p);var g=[];if(this.hasChild(t,e))for(a=0;a<t.graphNodes[e.id].tree.children.length;a++)s=t.nameTable[t.graphNodes[e.id].tree.children[parseInt(a.toString(),10)]],this.updateNodes(t,s,i+(t.graphNodes[e.id].subTreeTranslation||0),r,n,o),g.push(s);if(t.graphNodes[e.id].tree.assistants.length)for(a=0;a<t.graphNodes[e.id].tree.assistants.length;a++)s=t.nameTable[t.graphNodes[e.id].tree.assistants[parseInt(a.toString(),10)]],this.updateNodes(t,s,i+(t.graphNodes[e.id].subTreeTranslation||0),null,n,o)}},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(12),n=i(0),o=(i.n(n),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),a=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(n.Property)("")],e.prototype,"fixedNode",void 0),a([i.i(n.Property)(30)],e.prototype,"horizontalSpacing",void 0),a([i.i(n.Property)("SamePoint")],e.prototype,"connectionPointOrigin",void 0),a([i.i(n.Property)("Nonlinear")],e.prototype,"arrangement",void 0),a([i.i(n.Property)(30)],e.prototype,"verticalSpacing",void 0),a([i.i(n.Property)(30)],e.prototype,"maxIteration",void 0),a([i.i(n.Property)(40)],e.prototype,"springFactor",void 0),a([i.i(n.Property)(50)],e.prototype,"springLength",void 0),a([i.i(n.Complex)({left:50,top:50,right:0,bottom:0},r.a)],e.prototype,"margin",void 0),a([i.i(n.Property)("Auto")],e.prototype,"horizontalAlignment",void 0),a([i.i(n.Property)("Auto")],e.prototype,"verticalAlignment",void 0),a([i.i(n.Property)("TopToBottom")],e.prototype,"orientation",void 0),a([i.i(n.Property)("Auto")],e.prototype,"connectionDirection",void 0),a([i.i(n.Property)("Default")],e.prototype,"connectorSegments",void 0),a([i.i(n.Property)("None")],e.prototype,"type",void 0),a([i.i(n.Property)()],e.prototype,"getLayoutInfo",void 0),a([i.i(n.Property)()],e.prototype,"layoutInfo",void 0),a([i.i(n.Property)()],e.prototype,"getBranch",void 0),a([i.i(n.Property)()],e.prototype,"bounds",void 0),a([i.i(n.Property)(!0)],e.prototype,"enableAnimation",void 0),a([i.i(n.Property)(!1)],e.prototype,"enableRouting",void 0),a([i.i(n.Property)("")],e.prototype,"root",void 0),e}(n.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(0),n=(i.n(r),i(12)),o=i(8),a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),s=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),s([i.i(r.Property)("None")],e.prototype,"shape",void 0),s([i.i(r.Property)("white")],e.prototype,"fill",void 0),s([i.i(r.Property)("Auto")],e.prototype,"horizontalAlignment",void 0),s([i.i(r.Property)("Auto")],e.prototype,"verticalAlignment",void 0),s([i.i(r.Property)(10)],e.prototype,"width",void 0),s([i.i(r.Property)(10)],e.prototype,"height",void 0),s([i.i(r.Complex)({x:.5,y:1},o.a)],e.prototype,"offset",void 0),s([i.i(r.Property)("#1a1a1a")],e.prototype,"borderColor",void 0),s([i.i(r.Property)(1)],e.prototype,"borderWidth",void 0),s([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),s([i.i(r.Property)("")],e.prototype,"pathData",void 0),s([i.i(r.Property)("")],e.prototype,"content",void 0),s([i.i(r.Property)(0)],e.prototype,"cornerRadius",void 0),s([i.i(r.Complex)({left:2,right:2,top:2,bottom:2},n.a)],e.prototype,"padding",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return d});var r=i(0),n=(i.n(r),i(12)),o=i(30),a=i(37),s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),h=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),h([i.i(r.Property)("")],e.prototype,"id",void 0),h([i.i(r.Property)(-1)],e.prototype,"zIndex",void 0),h([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),h([i.i(r.Property)(!0)],e.prototype,"visible",void 0),h([i.i(r.Complex)({},o.a)],e.prototype,"tooltip",void 0),h([i.i(r.Property)(!1)],e.prototype,"excludeFromLayout",void 0),h([i.i(r.Property)()],e.prototype,"addInfo",void 0),h([i.i(r.Property)("None")],e.prototype,"flip",void 0),h([i.i(r.Property)("All")],e.prototype,"flipMode",void 0),h([i.i(r.Complex)({},a.b)],e.prototype,"symbolInfo",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(11),n=i(6),o=i(3),a=i(0),s=(i.n(a),function(){function t(){this.valueCreated="created",this.valueUpdated="updated",this.valueDeleted="deleted",this.valueUnchanged="unchanged",this.newNodeObject=[],this.newConnectorObject=[],this.diagramObject={}}return t.prototype.updateObjectCollection=function(t,e){for(var i=0;i<t.length;i++)t[i].objects?t[i].objects=e.layers[i].objects:(t[i].objects=[],t[i].objects=e.layers[i].objects)},t.prototype.getOldObject=function(t,e,i){for(var r=e?i.oldNodeObjects:i.oldConnectorObjects,n=0;n<r.length;n++)if(r[n].id===t)return r[n]},t.prototype.changeSegments=function(t,e){for(var i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];if("segments"===n){var o=this.removeNullValues(e[n]);t[n]=o}}return t},t.prototype.removeNullValues=function(t){for(var e=[],i={},r=0;r<t.length;r++)i=this.removeNullObjectValues(t[r]),e.push(i);return e},t.prototype.removeNullObjectValues=function(t){for(var e={},i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];void 0!==t[n]&&(e[n]=t[n]instanceof Object?this.removeNullObjectValues(t[n]):t[n])}return e},t.prototype.getDifferenceValues=function(t,e,r,a){var s,h,d,l,c=t instanceof n.a;if(t&&(l=c?this.getOldObject(t.id,!0,a):this.getOldObject(t.id,!1,a))){var p=i.i(o.e)(t);if(d=this.map(p,l),s=this.frameObject({},d),h=this.removeEmptyValues(s),h=this.changeSegments(h,p),h.children&&(h.children=i.i(o.e)(t).children),h.ports&&h.ports.length)for(var g=0;g<h.ports.length;g++)p.ports[g].outEdges&&(h.ports[g].outEdges=p.ports[g].outEdges),p.ports[g].inEdges&&(h.ports[g].inEdges=p.ports[g].inEdges);return this.getDiagramObjects(h,t.id,c,e,r,a)}},t.prototype.getLayerObject=function(t,e,r){if(i.i(a.isBlazor)()){var n={};n.layers=[];var s={};s.layers=[];for(var h=0;h<r.layers.length;h++)s.layers.push(i.i(o.e)(r.layers[h]));for(var d=void 0,h=0;h<s.layers.length;h++){d=e?this.map(t.layers[h],i.i(o.e)(s.layers[h])):this.map(i.i(o.e)(s.layers[h]),t.layers[h]);var l=this.frameObject({},d),c=this.removeEmptyValues(l);n.layers[h]=c}return this.updateObjectCollection(n.layers,r),n}},t.prototype.getDiagramObjects=function(t,e,n,a,s,h){var d=0;if(d=i.i(o.l)(h,e),t.sfIndex=d,n?this.newNodeObject.push(t):this.newConnectorObject.push(t),a&&(a.sourceWrapper instanceof r.a&&s||a.portId)){var l=void 0,c=void 0;c=n?a.portId?this.newNodeObject[0].ports:this.newNodeObject[0].annotations:this.newConnectorObject[0].annotations||[];for(var p=0;p<c.length;p++)if(Object.keys(c[p]).length>0){var g=h.nameTable[e];if(l=c[p],a.portId)this.newNodeObject[0].ports=[l];else{for(var u=0;u<g.annotations.length;u++)a.sourceWrapper.id===g.id+"_"+g.annotations[u].id&&(l.sfIndex=u);n?this.newNodeObject[0].annotations=[l]:this.newConnectorObject[0].annotations=[l]}}}this.diagramObject={nodes:this.newNodeObject,connectors:this.newConnectorObject}},t.prototype.removeArrayValues=function(t){var e=[];if(JSON.stringify(t)!==JSON.stringify({data:[]}))for(var i=0;i<t.length;i++)if(t[i]instanceof Object){var r=this.removeEmptyValues(t[i]);e.push(r)}else e.push(t[i]);return e},t.prototype.removeEmptyValues=function(t){for(var e={},i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];if("wrapper"!==n&&("data"!==n||"data"===n&&!(t[n]instanceof Array))){var o=t[n],a=JSON.stringify(o);if(o instanceof Array){var s=this.removeArrayValues(o);"[]"!==JSON.stringify(s)&&(e[n]=s)}else if(o instanceof Object){if(a!==JSON.stringify({data:[]})){var s=this.removeEmptyValues(o);"{}"!==JSON.stringify(s)&&(e[n]=s)}}else a!==JSON.stringify(["data"])&&a!==JSON.stringify("data")&&a!==JSON.stringify({data:[]})&&"version"!==n&&"ejsAction"!==n&&(e[n]=t[n])}}return e},t.prototype.map=function(t,e,i){if(this.isFunction(t)||this.isFunction(e))throw"Invalid argument. Function given, object expected.";if(this.isValue(t)||this.isValue(e))return{type:this.compareValues(t,e),data:void 0===t?e:t};var r={};if(this.isArray(t))for(var n=0;n<t.length;n++){r[i]||(r[i]=[]);var o=this.map(t[n],e[n]);r[i].push(o)}else for(var a in t)if(!this.isFunction(t[a])){var s=void 0;void 0!==e[a]&&(s=e[a]);var h=this.map(t[a],s,this.isArray(s)?a:void 0);this.isArray(s)?r[a]=h[a]:r[a]=h}if(this.isArray(e))for(var d=e.length-1;d>=0;d--)if(r[i]||(r[i]=[]),this.isFunction(e[d])||void 0!==r[i][d])r[i][d].type&&r[i][d].type!==this.valueUpdated&&delete r[i];else{var o=this.map(void 0,e[d]);r[i][d]=o}else for(var a in e)if(this.isFunction(e[a])||void 0!==r[a])r[a].type&&r[a].type!==this.valueUpdated&&r[a].type!==this.valueDeleted&&delete r[a];else{var h=this.map(void 0,e[a]);r[a]=h}return r},t.prototype.compareValues=function(t,e){return t===e?this.valueUnchanged:this.isDate(t)&&this.isDate(e)&&t.getTime()===e.getTime()?this.valueUnchanged:void 0===t?this.valueCreated:void 0===e?this.valueDeleted:this.valueUpdated},t.prototype.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},t.prototype.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.prototype.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)},t.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.prototype.isValue=function(t){return!this.isObject(t)&&!this.isArray(t)},t.prototype.frameObject=function(t,e){for(var i in e)if(this.isArray(e[i])){t[i]||(t[i]=[]);for(var r=0;r<e[i].length;r++){var n=this.frameObject({},e[i][r]);t[i].push(n)}}else if("type"!=i||"type"==i&&e[i]!==this.valueUpdated&&e[i]!==this.valueUnchanged&&e[i]!==this.valueDeleted&&e[i]!==this.valueCreated){if(this.isFunction(e[i]))continue;if(this.isValue(e[i]))return e.data;var n=this.frameObject({},e[i]);(this.isValue(n)||Object.keys(n).length>0)&&(t[i]=n)}return t},t}())},function(t,i){t.exports=e},function(t,e,i){"use strict";var r=i(91);i.d(e,"a",function(){return r.a})},function(t,e,i){"use strict";var r=i(93);i.d(e,"a",function(){return r.a}),i.d(e,"b",function(){return r.b}),i.d(e,"c",function(){return r.c}),i.d(e,"d",function(){return r.d})},function(t,e,i){"use strict";function r(t,e,r,n){if(void 0===e&&(e=null),void 0===r&&(r={X:!1,Y:!1}),!r.Y&&!r.X)return{left:0,top:0};var o=t.getBoundingClientRect();if(S=e,b=t.ownerDocument,n||(n=i.i(w.a)(t,"left","top")),r.X){var a=S?s():v(),d=p(),l=g(),f=d-n.left,m=n.left+o.width-l;o.width>a?n.left=f>0&&m<=0?l-o.width:m>0&&f<=0?d:f>m?l-o.width:d:f>0?n.left+=f:m>0&&(n.left-=m)}if(r.Y){var x=S?h():y(),I=c(),P=u(),C=I-n.top,z=n.top+o.height-P;o.height>x?n.top=C>0&&z<=0?P-o.height:z>0&&C<=0?I:C>z?P-o.height:I:C>0?n.top+=C:z>0&&(n.top-=z)}return n}function n(t,e,r,n){void 0===e&&(e=null);var s=i.i(w.a)(t,"left","top");r&&(s.left=r),n&&(s.top=n);var h=[];S=e,b=t.ownerDocument;var d=t.getBoundingClientRect(),l=s.top,c=s.left,p=s.left+d.width,g=s.top+d.height,u=a(l,g),f=o(c,p);return u.topSide&&h.push("top"),f.rightSide&&h.push("right"),f.leftSide&&h.push("left"),u.bottomSide&&h.push("bottom"),h}function o(t,e){var i=!1,r=!1;return t-m()<p()&&(i=!0),e>g()&&(r=!0),{leftSide:i,rightSide:r}}function a(t,e){var i=!1,r=!1;return t-f()<c()&&(i=!0),e>u()&&(r=!0),{topSide:i,bottomSide:r}}function s(){return S.getBoundingClientRect().width}function h(){return S.getBoundingClientRect().height}function d(){return S.getBoundingClientRect().left}function l(){return S.getBoundingClientRect().top}function c(){return S?l():0}function p(){return S?d():0}function g(){return S?m()+d()+s():m()+v()}function u(){return S?f()+l()+h():f()+y()}function f(){return b.documentElement.scrollTop||b.body.scrollTop}function m(){return b.documentElement.scrollLeft||b.body.scrollLeft}function y(){return window.innerHeight}function v(){var t=window.innerWidth;return t-(t-(i.i(x.isNullOrUndefined)(document.documentElement)?0:document.documentElement.offsetWidth))}e.b=r,e.a=n;var b,S,w=i(47),x=i(0);i.n(x)},function(t,e,i){"use strict";i.d(e,"a",function(){return d});var r=i(6),n=i(10),o=i(94),a=(i.n(o),i(3)),s=i(2),h=i(0),d=(i.n(h),function(){function t(){this.dataTable={}}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"DataBinding"},t.prototype.initData=function(t,e){var r,n=t.dataManager||t.dataSource||{};r=n.data||n.json||(n.dataSource?n.dataSource.json:void 0),r&&0===r.length&&n.dataSource.data&&(r=n.dataSource.data),r&&r.length&&(this.applyDataSource(t,r,e),e.trigger("dataLoaded",{diagram:i.i(h.isBlazor)()?null:i.i(s.b)(e)}))},t.prototype.initSource=function(t,e){var r,n=this,a=t,d=t;if(a.dataManager instanceof o.DataManager||a.dataSource instanceof o.DataManager){var l=d.dataManager||d.dataSource,c=l.defaultQuery||new o.Query;(t.dataManager||t.dataSource).executeQuery(c).then(function(o){r=o.result,e.isDestroyed||(e.protectPropertyChange(!0),n.applyDataSource(t,r,e),e.refreshDiagram(),e.protectPropertyChange(!1),e.trigger("dataLoaded",{diagram:i.i(h.isBlazor)()?null:i.i(s.b)(e)}))})}},t.prototype.applyDataSource=function(t,e,i){this.dataTable={};var r,n,o,a,s,h=[],d=[];if(void 0!==e){for(var l=0;l<e.length;l++)r=e[parseInt(l.toString(),10)],void 0===r[t.parentId]||null===r[t.parentId]||"object"!=typeof r[t.parentId]?void 0!==h[r[t.parentId]]?h[r[t.parentId]].items.push(r):h[r[t.parentId]]={items:[r]}:h=this.updateMultipleRootNodes(r,h,t,e),t.root===r[t.id]&&(n={items:[r]});if(n)d.push(n);else for(var c=0,p=Object.keys(h);c<p.length;c++){var g=p[c];g&&"undefined"!==g&&"''"!==g&&"null"!==g||d.push(h[""+g])}for(var u=0;u<d.length;u++)for(var f=0;f<d[parseInt(u.toString(),10)].items.length;f++)a=d[parseInt(u.toString(),10)].items[parseInt(f.toString(),10)],o=this.applyNodeTemplate(t,a,i),i.nodes.push(o),this.dataTable[a[t.id]]=o,void 0!==(s=h[o.data[t.id]])&&this.renderChildNodes(t,s,o.id,h,i)}this.dataTable=null},t.prototype.updateMultipleRootNodes=function(t,e,i,r){for(var n,o=t[i.parentId],a=0;a<o.length;a++)n=o[parseInt(a.toString(),10)],e[""+n]?e[""+n].items.push(t):e[""+n]={items:[t]};return e},t.prototype.applyNodeTemplate=function(t,e,n){var o=i.i(a.g)(),h={id:o,data:e},d=i.i(a.h)(t.doBinding);d&&d(h,e,n);var l=new r.a(n,"nodes",h,!0);if(i.i(s.B)(l,h,n.nodeDefaults),t.dataMapSettings)for(var c=void 0,p=[],g=[],u=0;u<t.dataMapSettings.length;u++){if(-1!==t.dataMapSettings[parseInt(u.toString(),10)].property.indexOf(".")){g=this.splitString(t.dataMapSettings[parseInt(u.toString(),10)].property);for(var f=0;f<g.length;f++)-1!==g[parseInt(f.toString(),10)].indexOf("[")&&(c=g[parseInt(f.toString(),10)].indexOf("["),p=g[parseInt(f.toString(),10)].split("["));if(c)if(g[2])l[p[0]][g[0].charAt(c+1)][g[1]][g[2]]=e[t.dataMapSettings[parseInt(u.toString(),10)].field];else{var m=e[t.dataMapSettings[parseInt(u.toString(),10)].field];l[p[0]][g[0].charAt(c+1)][g[1]]=m}else g[2]?l[g[0]][g[1]][g[2]]=e[t.dataMapSettings[parseInt(u.toString(),10)].field]:l[g[0]][g[1]]=e[t.dataMapSettings[parseInt(u.toString(),10)].field]}else{var y=t.dataMapSettings[parseInt(u.toString(),10)].property;y=y.charAt(0).toLowerCase()+y.slice(1),l[""+y]=e[t.dataMapSettings[parseInt(u.toString(),10)].field]}c=0,p=[],g=[]}return this.collectionContains(l,n,t.id,t.parentId)?this.dataTable[e[t.id]]:l},t.prototype.splitString=function(t){var e=[];e=t.split(".");for(var i=0;i<e.length;i++)e[parseInt(i.toString(),10)]=e[parseInt(i.toString(),10)].charAt(0).toLowerCase()+e[parseInt(i.toString(),10)].slice(1);return e},t.prototype.renderChildNodes=function(t,e,i,r,n){for(var o,a,s,h=0;h<e.items.length;h++){o=e.items[parseInt(h.toString(),10)],s=this.applyNodeTemplate(t,o,n);var d=!1;this.collectionContains(s,n,t.id,t.parentId)?d=!0:(this.dataTable[o[t.id]]=s,n.nodes.push(s)),this.containsConnector(n,i,s.id)||n.connectors.push(this.applyConnectorTemplate(i,s.id,n)),d||void 0!==(a=r[s.data[t.id]])&&this.renderChildNodes(t,a,s.id,r,n)}},t.prototype.containsConnector=function(t,e,i){if(""!==e&&""!==i)for(var r=0;r<t.connectors.length;r++){var n=t.connectors[parseInt(r.toString(),10)];if(void 0!==n&&n.sourceID===e&&n.targetID===i)return!0}return!1},t.prototype.collectionContains=function(t,e,i,r){var n=this.dataTable[t.data[""+i]];return void 0!==n&&n.data[""+i]===t.data[""+i]&&n.data[""+r]===t.data[""+r]},t.prototype.applyConnectorTemplate=function(t,e,r){var o={id:i.i(a.g)(),sourceID:t,targetID:e},h=new n.a(r,"connectors",o,!0);return i.i(s.B)(h,o,r.connectorDefaults),h},t}())},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(!0)],e.prototype,"inversedAlignment",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)("Horizontal")],e.prototype,"orientation",void 0),o([i.i(r.Property)("Center")],e.prototype,"type",void 0),o([i.i(r.Property)(void 0)],e.prototype,"offset",void 0),o([i.i(r.Property)(!1)],e.prototype,"enableRouting",void 0),o([i.i(r.Property)([])],e.prototype,"children",void 0),o([i.i(r.Property)("")],e.prototype,"assistants",void 0),o([i.i(r.Property)("")],e.prototype,"level",void 0),o([i.i(r.Property)("")],e.prototype,"hasSubTree",void 0),o([i.i(r.Property)("")],e.prototype,"rows",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return d}),i.d(e,"b",function(){return l});var r=i(0),n=(i.n(r),i(12)),o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Property)("")],e.prototype,"source",void 0),a([i.i(r.Property)("transparent")],e.prototype,"color",void 0),a([i.i(r.Property)("None")],e.prototype,"scale",void 0),a([i.i(r.Property)("None")],e.prototype,"align",void 0),e}(r.ChildProperty),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Property)("Page")],e.prototype,"mode",void 0),a([i.i(r.Property)("PageSettings")],e.prototype,"region",void 0),a([i.i(r.Complex)({top:25,bottom:25,left:25,right:25},n.a)],e.prototype,"margin",void 0),a([i.i(r.Property)(!1)],e.prototype,"canZoomIn",void 0),a([i.i(r.Property)(void 0)],e.prototype,"customBounds",void 0),a([i.i(r.Property)(!1)],e.prototype,"canFit",void 0),e}(r.ChildProperty),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Property)(null)],e.prototype,"width",void 0),a([i.i(r.Property)(null)],e.prototype,"height",void 0),a([i.i(r.Complex)({},n.a)],e.prototype,"margin",void 0),a([i.i(r.Property)("Landscape")],e.prototype,"orientation",void 0),a([i.i(r.Property)("Infinity")],e.prototype,"boundaryConstraints",void 0),a([i.i(r.Complex)({},s)],e.prototype,"background",void 0),a([i.i(r.Property)(!1)],e.prototype,"multiplePage",void 0),a([i.i(r.Property)(!1)],e.prototype,"showPageBreaks",void 0),a([i.i(r.Complex)({},h)],e.prototype,"fitOptions",void 0),e}(r.ChildProperty),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),a([i.i(r.Property)(0)],e.prototype,"horizontalOffset",void 0),a([i.i(r.Property)(0)],e.prototype,"verticalOffset",void 0),a([i.i(r.Property)(1)],e.prototype,"currentZoom",void 0),a([i.i(r.Property)(0)],e.prototype,"viewPortWidth",void 0),a([i.i(r.Property)(0)],e.prototype,"viewPortHeight",void 0),a([i.i(r.Property)(.2)],e.prototype,"minZoom",void 0),a([i.i(r.Property)(30)],e.prototype,"maxZoom",void 0),a([i.i(r.Property)("Diagram")],e.prototype,"scrollLimit",void 0),a([i.i(r.Property)()],e.prototype,"scrollableArea",void 0),a([i.i(r.Property)(!1)],e.prototype,"canAutoScroll",void 0),a([i.i(r.Complex)({left:15,right:15,top:15,bottom:15},n.a)],e.prototype,"autoScrollBorder",void 0),a([i.i(r.Complex)({left:0,right:0,top:0,bottom:0},n.a)],e.prototype,"padding",void 0),a([i.i(r.Property)(.2)],e.prototype,"zoomFactor",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(5)],e.prototype,"interval",void 0),o([i.i(r.Property)(100)],e.prototype,"segmentWidth",void 0),o([i.i(r.Property)("Horizontal")],e.prototype,"orientation",void 0),o([i.i(r.Property)("RightOrBottom")],e.prototype,"tickAlignment",void 0),o([i.i(r.Property)("red")],e.prototype,"markerColor",void 0),o([i.i(r.Property)(25)],e.prototype,"thickness",void 0),o([i.i(r.Property)(null)],e.prototype,"arrangeTick",void 0),e}(r.ChildProperty),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(!1)],e.prototype,"showRulers",void 0),o([i.i(r.Property)(!0)],e.prototype,"dynamicGrid",void 0),o([i.i(r.Complex)({orientation:"Horizontal"},a)],e.prototype,"horizontalRuler",void 0),o([i.i(r.Complex)({orientation:"Vertical"},a)],e.prototype,"verticalRuler",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(0),n=(i.n(r),this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),o=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([i.i(r.Property)(!1)],e.prototype,"preventDefaults",void 0),e}(r.ChildProperty)},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(10),n=i(5),o=i(2),a=i(3),s=i(8),h=i(21),d=i(7),l=function(){function t(){}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LineDistribution"},t.prototype.initLineDistribution=function(t,e){var i="Bottom";if(this.diagram=e,"DifferentPoint"===e.layout.connectionPointOrigin||e.layout.enableRouting){var r="Top";"BottomToTop"===t.orientation?(i="Top",r="Bottom"):"RightToLeft"===t.orientation?(i="Left",r="Right"):"LeftToRight"===t.orientation&&(i="Right",r="Left");var n=e.nodes;if(n.length>0)for(var o=0;o<n.length;o++){var a=e.nameTable[n[parseInt(o.toString(),10)].id];this.addDynamicPortandDistrrbuteLine(t,a,i,r,e)}}},t.prototype.ObstacleSegment=function(t){return t.direction=i.i(o._23)(t.startpt,t.endpt),t.distance=s.a.findLength(t.startpt,t.endpt),t.orientation="Left"===t.direction||"Right"===t.direction?"horizontal":"vertical",t.id=t.id,"horizontal"===t.orientation?(t.coord=t.startpt.y,"Left"===t.direction?(t.start=t.endpt.x,t.end=t.startpt.x):(t.start=t.startpt.x,t.end=t.endpt.x)):(t.coord=t.startpt.x,"Top"===t.direction?(t.start=t.endpt.y,t.end=t.startpt.y):(t.start=t.startpt.y,t.end=t.endpt.y)),t},t.prototype.distributeLines=function(t,e){for(var i="LeftToRight"===t.orientation||"RightToLeft"===t.orientation,r=i?t.horizontalSpacing:t.verticalSpacing,n=r-8-10,o=[],a=[],h=e.connectors,d=0;d<h.length;d++){for(var l=h[parseInt(d.toString(),10)],c=[],p=0;p<l.segments.length;p++)for(var g=l.segments[parseInt(p.toString(),10)],u=0;u<g.points.length;u++){var f=g.points[parseInt(u.toString(),10)];0!==c.length&&s.a.equals(f,c[c.length-1])||c.push(f)}for(var m=[],y=1;y<c.length;y++){var v=this.ObstacleSegment({startpt:c[y-1],endpt:c[parseInt(y.toString(),10)],id:l.id});m.push(v)}var b={wrapper:l,segments:m},S=[];if(i)for(var p=0;p<b.segments.length;p++){var v=b.segments[parseInt(p.toString(),10)];"vertical"===v.orientation&&S.push(v)}else for(var p=0;p<b.segments.length;p++){var v=b.segments[parseInt(p.toString(),10)];"horizontal"===v.orientation&&S.push(v)}for(var y=0;y<S.length;y++){var w=S[parseInt(y.toString(),10)];this.containsValue(o,w.coord)||o.push({key:w.coord,value:[]});for(var x=void 0,u=0;u<o.length;u++){var p=o[parseInt(u.toString(),10)].key;if(Number(p)===w.coord){x=u;break}}o[parseInt(x.toString(),10)].value.push(w)}a.push(b)}for(var I=[],P=0;P<o.length;P++){var C=o[parseInt(P.toString(),10)],z=C.value;z.sort();var O=void 0;O=[];var x=0,T=Number.MIN_VALUE;O.push([]);for(var A=0;A<z.length;A++){var w=z[parseInt(A.toString(),10)];!(O[parseInt(x.toString(),10)].length>0)||T>=w.start?(O[parseInt(x.toString(),10)].push(w),T=Math.max(T,O[parseInt(x.toString(),10)][O[parseInt(x.toString(),10)].length-1].end)):(x++,O.push([]),O[parseInt(x.toString(),10)].push(w),T=O[parseInt(x.toString(),10)][O[parseInt(x.toString(),10)].length-1].end)}for(var A=0;A<O.length;A++){for(var L=O[parseInt(A.toString(),10)],E=[],y=0;y<L.length;y++){var B=L[parseInt(y.toString(),10)];B.start&&E.push(B)}for(var M=i?"Bottom":"Right",D=[],y=0;y<E.length;y++){var B=E[parseInt(y.toString(),10)];B.direction===M&&D.push(B)}for(var k=[],y=0;y<E.length;y++){var B=E[parseInt(y.toString(),10)];B.direction!==M&&k.push(B)}var R=[];if(D.length>0)for(var _=D[0].start,y=0;y<k.length;)k[parseInt(y.toString(),10)].end>_?(R.push(k[parseInt(y.toString(),10)]),k.splice(y,1)):y++;var j=[];j=this.updateSegmentRow(R,j);var N=[];N=[],N=this.updateSegmentRow(k,N),D.reverse(),N=this.updateSegmentRow(D,N),j[j.length-1].length>0||j.splice(j.length-1,1),N[N.length-1].length>0||N.splice(N.length-1,1);var H=[];if(R.length>0&&(E[0].direction===R[0].direction||E[E.length-1].direction===R[R.length-1].direction)){H=N;for(var W=0;W<j.length;W++){var V=j[parseInt(W.toString(),10)];H[H.length]=V}}else{H=j;for(var W=0;W<N.length;W++){var V=N[parseInt(W.toString(),10)];H[H.length]=V}}if(H.length>1){var X=1;"BottomToTop"!==t.orientation&&"RightToLeft"!==t.orientation||(X=-1);for(var Y=C.key-X*n/2,U=n/H.length,d=0;d<H.length;d++)for(var G=Y+d*U*X,W=0;W<H[parseInt(d.toString(),10)].length;W++){var w=H[parseInt(d.toString(),10)][parseInt(W.toString(),10)];w.coord=G,this.containsValue(I,w.coord)||I.push({key:w.coord,value:[]});for(var F=void 0,u=0;u<I.length;u++){var Z=I[parseInt(u.toString(),10)].key;if(Z===w.coord){F=u;break}}I[parseInt(F.toString(),10)].value.push(w)}}}}for(var P=0;P<a.length;P++){for(var b=a[parseInt(P.toString(),10)],c=[],d=0;d<b.segments.length;d++)0===d?c.push(this.getObstacleStartPoint(b.segments[parseInt(d.toString(),10)])):i?"vertical"===b.segments[parseInt(d.toString(),10)].orientation&&(c[c.length-1]=this.getObstacleStartPoint(b.segments[parseInt(d.toString(),10)])):i||"horizontal"===b.segments[parseInt(d.toString(),10)].orientation&&(c[c.length-1]=this.getObstacleStartPoint(b.segments[parseInt(d.toString(),10)])),c.push(this.getObstacleEndPoint(b.segments[parseInt(d.toString(),10)]));b.wrapper.obstaclePointCollection=[];for(var y=0;y<c.length;y++){var q=c[parseInt(y.toString(),10)];(0===y||y>0&&!s.a.equals(q,c[y-1]))&&b.wrapper.obstaclePointCollection.push(this.getPointvalue(q.x,q.y))}"Orthogonal"===b.wrapper&&this.resetConnectorPoints(b.wrapper,e)}},t.prototype.inflate=function(t,e,i){return t.x-=e,t.y-=i,t.width+=2*e,t.height+=2*i,t},t.prototype.updateConnectorPoints=function(t,e,r,n,a){var h=n,d="LeftToRight"===a||"RightToLeft"===a,l=t;if(l.length>2){var c=s.a.transform(l[0],s.a.findAngle(l[0],l[1]),e),p=s.a.transform(c,s.a.findAngle(l[1],l[2]),s.a.findLength(l[1],l[2]));if(l.splice(1,2,c,p),null!=r){var g=l.length,u=s.a.transform(l[g-1],s.a.findAngle(l[g-1],l[g-2]),e);for(l.splice(g-1,0,u);2<l.length-2;)l.splice(2,1);var f=r;this.inflate(h,h.width,h.height);var m=[];m[0]=this.getPointvalue(f.x,h.y),m[1]=this.getPointvalue(f.x,h.y+h.height);var y=[];y[0]=this.getPointvalue(h.x,l[1].y),y[1]=this.getPointvalue(h.x+h.width,l[1].y);var v=[];v[0]=this.getPointvalue(h.x,u.y),v[1]=this.getPointvalue(h.x+h.width,u.y),d&&(m[0]=this.getPointvalue(h.x,f.y),m[1]=this.getPointvalue(h.x+h.width,f.y),y[0]=this.getPointvalue(l[1].x,h.y),y[1]=this.getPointvalue(l[1].x,h.y+h.height),v[0]=this.getPointvalue(u.x,h.y),y[1]=this.getPointvalue(u.x,h.y+h.height));var b=[i.i(o._5)(m[0],m[1],y[0],y[1])],S=[i.i(o._5)(m[0],m[1],v[0],v[1])];S.length>0&&l.splice(2,0,S[0]),b.length>0&&l.splice(2,0,b[0])}}for(var w=1;w<l.length-1;)s.a.equals(l[w-1],l[parseInt(w.toString(),10)])?l.splice(w,1):s.a.findAngle(l[w-1],l[parseInt(w.toString(),10)])===s.a.findAngle(l[parseInt(w.toString(),10)],l[w+1])?l.splice(w,1):w++;return l},t.prototype.resetConnectorPoints=function(t,e){var n="obstaclePointCollection";if(t.segments[0].points&&t.segments[0].points.length>0&&t[""+n]){var a=t;a.sourcePoint=t[""+n][0],a.targetPoint=t[""+n][t[""+n].length-1];var s=void 0;s=[];for(var h=0;h<t[""+n].length-1;h++){var d=t[""+n][parseInt(h.toString(),10)],l=t[""+n][h+1],c=i.i(o.o)(d,l),p=i.i(o._23)(d,l);h===t[""+n].length-2&&("RightToLeft"===e.layout.orientation&&"Left"===p||"LeftToRight"===e.layout.orientation&&"Right"===p||"TopToBottom"===e.layout.orientation&&"Bottom"===p||"BottomToTop"===e.layout.orientation&&"Top"===p)&&(c/=2);var g=new r.f(t,"segments",{type:"Orthogonal"},!0);g.length=c,g.direction=p,s.push(g)}a.segments=s,a.type="Orthogonal",e.connectorPropertyChange(a,{},{type:"Orthogonal",segments:a.segments})}},t.prototype.getObstacleEndPoint=function(t){return"horizontal"===t.orientation?"Left"===t.direction?this.getPointvalue(t.start,t.coord):this.getPointvalue(t.end,t.coord):"Top"===t.direction?this.getPointvalue(t.coord,t.start):this.getPointvalue(t.coord,t.end)},t.prototype.getObstacleStartPoint=function(t){return"horizontal"===t.orientation?"Left"===t.direction?this.getPointvalue(t.end,t.coord):this.getPointvalue(t.start,t.coord):"Top"===t.direction?this.getPointvalue(t.coord,t.end):this.getPointvalue(t.coord,t.start)},t.prototype.updateSegmentRow=function(t,e){var i=0;e.length>0||(e[0]=[]);for(var r=0;r<t.length;r++)for(var n=t[parseInt(r.toString(),10)];i<e.length;){if(i===e.length-1&&(e[i+1]=[]),!(e[parseInt(i.toString(),10)].length>0)||e[parseInt(i.toString(),10)][e[parseInt(i.toString(),10)].length-1].end<n.start){e[parseInt(i.toString(),10)].push(n);break}i++}return e},t.prototype.portOffsetCalculation=function(t,e,i,r){"Top"===i&&(t.offset={x:(r+1)*(1/(e+1)),y:0}),"Bottom"===i&&(t.offset={x:(r+1)*(1/(e+1)),y:1}),"Left"===i&&(t.offset={x:0,y:(r+1)*(1/(e+1))}),"Right"===i&&(t.offset={x:1,y:(r+1)*(1/(e+1))})},t.prototype.addDynamicPortandDistrrbuteLine=function(t,e,i,r,n){if(e.ports&&e.ports.length>0){var o=e.ports;n.removePorts(e,o)}var a=(e.ports,e.outEdges),s=e.inEdges;this.initPort(a,n,e,i,!1),this.initPort(s,n,e,r,!0)},t.prototype.initPort=function(t,e,r,n,s){var l=t;t.length>1&&s&&(t=this.sortObjects(l,s,e));for(var c=0;c<=t.length-1;c++){var p=e.nameTable[t[parseInt(c.toString(),10)]];p.obstaclePointCollection=[];var g=i.i(o._22)(r,s?p.targetPortID:p.sourcePortID),u=n;void 0===g&&(g=new h.b(r,"ports","",!0),g.id=i.i(a.g)()+"_LineDistribution",s?p.targetPortID=g.id:p.sourcePortID=g.id),this.portOffsetCalculation(g,t.length,u,c),r.ports.push(g);var f=r.initPortWrapper(r.ports[r.ports.length-1]);r.wrapper.children.push(f),r.wrapper.measure(new d.a(r.width,r.height),r.id),r.wrapper.arrange(r.wrapper.desiredSize),e.connectorPropertyChange(p,s?{targetPortID:""}:{sourcePortID:""},s?{targetPortID:g.id}:{sourcePortID:g.id})}},t.prototype.sortObjects=function(t,e,i){for(var r,n=0;n<t.length;n++)for(var o=n+1;o<t.length;o++){var a=i.nameTable[t[parseInt(n.toString(),10)]],s=i.nameTable[t[parseInt(o.toString(),10)]];if(e){var h=i.nameTable[a.sourceID],d=i.nameTable[s.sourceID];"LeftToRight"===i.layout.orientation||"RightToLeft"===i.layout.orientation?h.offsetY>d.offsetY&&(r=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)]=r):h.offsetX>d.offsetX&&(r=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)]=r)}}return t},t.prototype.shiftMatrixCells=function(t,e,i,r,n){if(0!==t){for(var o=n.matrix,a=o[e.level].value,s=a.indexOf(e),h=s;h<a.length;h++)a[parseInt(h.toString(),10)].offset+=t;if(i)if(e.visitedChildren.length>0)this.shiftMatrixCells(t,e.visitedChildren[0],!0,e,n);else{for(var h=1,d=null;s+h<a.length;){var l=a[s+h];if(null!=r&&this.containsValue(l.visitedParents,r)){if(!(l.visitedChildren.length>0)){h++;continue}d=l}break}null!=d&&this.shiftMatrixCells(t,d.visitedChildren[0],!0,d,n)}}},t.prototype.arrangeMatrix=function(t,e,i){var r=i.model.layout,n="LeftToRight"===r.orientation||"RightToLeft"===r.orientation,o=n?r.verticalSpacing:r.horizontalSpacing,a=i.matrix,s=a[t.level].value,h=s.indexOf(t);if(t.visitedParents.length>0&&(1===t.visitedParents.length&&(t.initialOffset=t.offset),h+1<s.length)){if(s[h+1].visitedParents.length>0&&!this.containsValue(t.visitedParents,e))return t.visitedParents.push(e),void e.ignoredChildren.push(t)}if(t.children.length>0){for(var d=0;d<t.children.length;d++){var l=t.children[parseInt(d.toString(),10)];this.containsValue(t.visitedChildren,l)||(this.arrangeMatrix(l,t,i),t.visitedChildren.push(l))}if(t.visitedChildren.length>0){for(var c=t.visitedChildren.slice(),d=0;d<t.ignoredChildren.length;d++)c.splice(0,1),t.visitedChildren.splice(0,1);if(c.length>0){var p=t.visitedChildren[0],g=t.visitedChildren[t.visitedChildren.length-1],u=p.offset-p.size/2,f=g.offset+g.size/2,m=(u+f)/2;m<t.offset?this.shiftMatrixCells(t.offset-m,p,!0,t,i):m>t.offset&&this.shiftMatrixCells(m-t.offset,t,!1,null,i)}}}else{var y=t.offset;if(h>0){var v=s[h-1];y=v.offset+v.size/2+o+t.size/2}this.shiftMatrixCells(y-t.offset,t,!1,null,i)}this.containsValue(t.visitedParents,e)||t.visitedParents.push(e)},t.prototype.getFixedTerminalPoint=function(){return null},t.prototype.setAbsoluteTerminalPoint=function(t,e,i){e?(null==i.absolutePoints&&(i.absolutePoints=[]),0===i.absolutePoints.length?i.absolutePoints.push(t):i.absolutePoints[0]=t):null==i.absolutePoints?(i.absolutePoints=[],i.absolutePoints.push(null),i.absolutePoints.push(t)):1===i.absolutePoints.length?i.absolutePoints.push(t):i.absolutePoints[i.absolutePoints.length-1]=t},t.prototype.updateFixedTerminalPoint=function(t,e){this.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(),e,t)},t.prototype.updateFixedTerminalPoints=function(t,e){this.updateFixedTerminalPoint(t,!0),this.updateFixedTerminalPoint(t,!1)},t.prototype.updatePoints=function(t,e){if(null!=t){var i=[];i.push(t.absolutePoints[0]);for(var r=0;r<e.length;r++)if(null!=e[parseInt(r.toString(),10)]){var n=e[parseInt(r.toString(),10)];i.push(n)}var o=t.absolutePoints;i.push(o[o.length-1]),t.absolutePoints=i}},t.prototype.updateFloatingTerminalPoint=function(t,e,i,r){this.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(t,e,i,r),r,t)},t.prototype.getNextPoint=function(t,e,i){var r=t.absolutePoints,n=null;if(null!=r&&r.length>=2){var o=r.length;n=r[i?Math.min(1,o-1):Math.max(0,o-2)]}return n},t.prototype.getCenterX=function(t){return t.offsetX?t.offsetX+t.width:t.x+t.width},t.prototype.getCenterY=function(t){return t.offsetY?t.offsetY+t.height:t.y+t.height},t.prototype.getPerimeterBounds=function(t){return t.wrapper.outerBounds},t.prototype.getPerimeterFunction=function(t,e,i){var r=this.getCenterX(t),n=this.getCenterY(t),o=e.x-r,a=e.y-n,s=Math.atan2(a,o),h=this.getPointvalue(0,0),d=Math.PI,l=Math.PI/2,c=l-s,p=Math.atan2(t.height,t.width);return s<-d+p||s>d-p?(h.x=t.x,h.y=n-t.width*Math.tan(s)/2):s<-p?(h.y=t.y,h.x=r-t.height*Math.tan(c)/2):s<p?(h.x=t.x+t.width,h.y=n+t.width*Math.tan(s)/2):(h.y=t.y+t.height,h.x=r+t.height*Math.tan(c)/2),i&&(e.x>=t.x&&e.x<=t.x+t.width?h.x=e.x:e.y>=t.y&&e.y<=t.y+t.height&&(h.y=e.y),e.x<t.x?h.x=t.x:e.x>t.x+t.width&&(h.x=t.x+t.width),e.y<t.y?h.y=t.y:e.y>t.y+t.height&&(h.y=t.y+t.height)),h},t.prototype.getPerimeterPoint=function(t,e,i){var r=null;if(null!=t&&null!=e){var n=this.getPerimeterBounds(t);(n.width>0||n.height>0)&&(r=this.getPointvalue(e.x,e.y),r=this.getPerimeterFunction(n,r,i))}return r},t.prototype.getFloatingTerminalPoint=function(t,e,i,r){e=e;var n=this.getNextPoint(t,i,r);return this.getPerimeterPoint(e,n,1)},t.prototype.updateFloatingTerminalPoints=function(t,e,i){var r=t.absolutePoints,n=r[0];null==r[r.length-1]&&null!=i&&this.updateFloatingTerminalPoint(t,i,e,!1),null==n&&null!=e&&this.updateFloatingTerminalPoint(t,e,i,!0)},t.prototype.getConnectorPoints=function(t,e){this.updateFixedTerminalPoints(t,e),this.updatePoints(t,t.geometry.points),this.updateFloatingTerminalPoints(t,e.nameTable[t.sourceID],e.nameTable[t.targetID]),t.absolutePoints[0].y=t.sourcePoint.y,t.absolutePoints[t.absolutePoints.length-1].y=t.targetPoint.y},t.prototype.adjustSegmentPoints=function(t,e,i){"TopToBottom"!==i.layout.orientation&&"BottomToTop"!==i.layout.orientation||(t[0].x=e[0].x,t[1].x=e[1].x,t[t.length-1].x=e[e.length-1].x,t[t.length-2].x=e[e.length-2].x,"TopToBottom"===i.layout.orientation?(t[t.length-2].y=t[t.length-1].y-i.layout.verticalSpacing/2,t[1].y=t[0].y+i.layout.verticalSpacing/2):(t[1].y=t[0].y-i.layout.verticalSpacing/2,t[t.length-2].y=t[t.length-1].y+i.layout.verticalSpacing/2),t[2].y=t[1].y,t[t.length-3].y=t[t.length-2].y),"RightToLeft"!==i.layout.orientation&&"LeftToRight"!==i.layout.orientation||(t[0]=e[0],t[1]=e[1],t[t.length-1]=e[e.length-1],t[t.length-2]=e[e.length-2],"RightToLeft"===i.layout.orientation&&(t[1].x=t[0].x-i.layout.verticalSpacing/2),"LeftToRight"===i.layout.orientation&&(t[1].x=t[0].x+i.layout.verticalSpacing/2),t[2].x=t[1].x,"RightToLeft"===i.layout.orientation&&(t[t.length-2].x=t[t.length-1].x+i.layout.verticalSpacing/2),"LeftToRight"===i.layout.orientation&&(t[t.length-2].x=t[t.length-1].x-i.layout.verticalSpacing/2),t[t.length-3].x=t[t.length-2].x)},t.prototype.updateConnectorSegmentPoints=function(t,e){if(t.length>1)if("TopToBottom"===e.layout.orientation||"BottomToTop"===e.layout.orientation)for(var i=1;i<t.length-1;i+=2)t[parseInt(i.toString(),10)].y===t[i+1].y||"TopToBottom"!==e.layout.orientation&&"BottomToTop"!==e.layout.orientation||(t[i+1].y=t[parseInt(i.toString(),10)].y);else for(var r=!1,i=t.length-1;i>1;i=i-=2)"RightToLeft"===e.layout.orientation||"LeftToRight"===e.layout.orientation?r?(t[i-2].x=t[i-1].x,r=!1):(t[i-1].x=t[i-2].x,r=!0):t[i+1].x=t[parseInt(i.toString(),10)].x},t.prototype.updateConnectorSegmentPoint=function(t,e){for(var n=[],a=0;a<t.absolutePoints.length-1;a++){var s=t.absolutePoints[parseInt(a.toString(),10)],h=t.absolutePoints[a+1],d=i.i(o.o)(s,h),l=i.i(o._23)(s,h);a===t.absolutePoints.length-2&&("TopToBottom"===e.layout.orientation&&"Bottom"===l||"RightToLeft"===e.layout.orientation&&"Left"===l||"LeftToRight"===e.layout.orientation&&"Right"===l||"BottomToTop"===e.layout.orientation&&"Top"===l)&&(d/=2);var c=new r.f(t,"segments",{type:"Orthogonal"},!0);c.length=d,c.direction=l,n.push(c)}t.segments=n,t.type="Orthogonal",e.connectorPropertyChange(t,{},{type:"Orthogonal",segments:t.segments})},t.prototype.resetConnectorSegments=function(t){for(var e=t.segments,i=e.length;i>1;i--)e.splice(i-1,1)},t.prototype.resetRoutingSegments=function(t,e,i){if(t.levelSkip){this.getConnectorPoints(t,e);var r=t.absolutePoints;this.updateConnectorSegmentPoints(r,e),this.adjustSegmentPoints(r,i,e),this.updateConnectorSegmentPoint(t,e)}},t.prototype.arrangeElements=function(t,e){var i,r=t.model.layout;i="LeftToRight"===e.orientation||"RightToLeft"===e.orientation;var n=i?r.verticalSpacing:r.horizontalSpacing;this.groupLayoutCells(t),this.createMatrixCells(t);for(var o=0;o<t.matrix.length;o++)for(var a=t.matrix[parseInt(o.toString(),10)].key,s=t.matrix[parseInt(a.toString(),10)].value,h=1;h<s.length;h++){var d=s[parseInt(h.toString(),10)],l=s[h-1];d.offset+=l.offset+l.size/2+n+d.size/2}for(var o=0;o<t.matrix[0].value.length;o++){var c=t.matrix[0].value[parseInt(o.toString(),10)];this.arrangeMatrix(c,null,t)}for(var p=0;p<t.matrix.length;p++)for(var g=t.matrix[parseInt(p.toString(),10)].value,h=0;h<g.length;h++){var d=g[parseInt(h.toString(),10)];if(d.visitedParents.length>1){var u=d.visitedParents[0],f=d.visitedParents[d.visitedParents.length-1],m=this.findParentVertexCellGroup(u),y=this.findParentVertexCellGroup(f);u!==m&&m.offset<u.offset&&(u=m),f!==y&&y.offset>f.offset&&(f=m);var v=(u.offset+f.offset)/2,b=d.initialOffset,S=d.offset;S!==b&&(v>=b&&v<=S?this.translateMatrixCells(v-d.offset,d):v<b&&this.translateMatrixCells(b-d.offset,d))}}this.setXYforMatrixCell(t)},t.prototype.findParentVertexCellGroup=function(t){return t.cells[0]?t:t.parents.length>0?this.findParentVertexCellGroup(t.parents[0]):t},t.prototype.setXYforMatrixCell=function(t){for(var e=t.model.layout,i="LeftToRight"===e.orientation||"RightToLeft"===e.orientation,r=i?e.verticalSpacing:e.horizontalSpacing,o=0;o<t.matrix.length;o++)for(var a=t.matrix[parseInt(o.toString(),10)].value,s=0;s<a.length;s++)for(var h=a[parseInt(s.toString(),10)],d=h.offset-h.size/2,l=0;l<h.cells.length;l++){var c=h.cells[parseInt(l.toString(),10)],p=this.getType(c.type);if("internalVertex"===p){var g=c,u=g.cell.geometry.width,f=g.cell.geometry.height;g.cell.geometry=i?new n.a(t.rowOffset[h.level]-u/2,d,u,f):new n.a(d,t.rowOffset[h.level]-f/2,u,f),d+=(i?f:u)+r}else if("internalEdge"===p){var m=c,y=h.visitedParents[0];if(y)for(var v=0;v<y.visitedChildren.length;v++){for(var b=y.visitedChildren[parseInt(v.toString(),10)],S=[],w=0;w<b.cells.length;w++){var x=b.cells[parseInt(w.toString(),10)],I=this.getType(x.type);"internalVertex"===I&&S.push(x)}if(S.length>0){!0;break}}for(var w=0;w<m.edges.length;w++){var P=m.edges[parseInt(w.toString(),10)],C=this.getPointvalue(d+.5,t.rowOffset[h.level]);if(i&&(C=this.getPointvalue(t.rowOffset[h.level],d+.5)),this.containsValue(this.getEdgeMapper(),P)){for(var z=void 0,v=0;v<this.getEdgeMapper().length;v++)if(this.getEdgeMapper()[parseInt(v.toString(),10)].key===P){z=v;break}this.getEdgeMapper()[parseInt(z.toString(),10)].value.push(C)}d+=6}d+=r}}},t.prototype.getEdgeMapper=function(){return this.edgeMapper},t.prototype.setEdgeMapper=function(t){this.edgeMapper.push(t)},t.prototype.translateMatrixCells=function(t,e){if(0!==t&&(e.offset+=t,e.visitedChildren.length>0))for(var i=0;i<e.visitedChildren.length;i++){var r=e.visitedChildren[parseInt(i.toString(),10)];this.translateMatrixCells(t,r)}},t.prototype.groupLayoutCells=function(t){for(var e=t.model.ranks,i=e.length-1;i>=0;i--){for(var r=[],n=0;n<e[parseInt(i.toString(),10)].length;n++){var o=e[parseInt(i.toString(),10)][parseInt(n.toString(),10)],a=this.getType(o.type);"internalVertex"===a&&r.push(e[parseInt(i.toString(),10)][parseInt(n.toString(),10)])}for(var s=[],h=0;h<e[parseInt(i.toString(),10)].length;h++){var o=e[parseInt(i.toString(),10)][parseInt(h.toString(),10)],a=this.getType(o.type);"internalEdge"===a&&s.push(o)}for(;r.length>1;){for(var d=r[0],l=this.selectIds(d.connectsAsTarget,!0),c=this.selectIds(d.connectsAsSource,!1);r.length>1;){var p=r[1],g=this.selectIds(p.connectsAsTarget,!0),u=this.selectIds(p.connectsAsSource,!1),f=this.compareLists(l,g),m=this.compareLists(c,u);if(!f||!m)break;this.updateMutualSharing(r[0],p.id),this.updateMutualSharing(r[1],d.id),r.splice(1,1)}r.splice(0,1)}for(;s.length>1;){var y=s[0],v=y.source,b=y.target;if(null!=v.identicalSibiling){for(var S=[],w=0;w<s.length;w++){var x=s[parseInt(w.toString(),10)];x.target===b&&S.push(x)}for(var w=0;w<S.length;w++){var I=S[parseInt(w.toString(),10)];this.containsValue(v.identicalSibiling,I.source.id)&&(I.source.identicalSibiling=null)}y.source.identicalSibiling=null}s.splice(0,1)}}},t.prototype.getType=function(t){return"internalVertex"===t?"internalVertex":"internalEdge"},t.prototype.selectIds=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[parseInt(r.toString(),10)];e?i.push(n.source.id):i.push(n.target.id)}return i},t.prototype.compareLists=function(t,e){var i=t.slice(),r=e.slice();if(i.length===r.length){if(0===i.length)return!0;for(var n=!0,o=0;o<r.length;o++){var a=r[parseInt(o.toString(),10)];if(-1===i.indexOf(a)){n=!1;break}}return n}return!1},t.prototype.updateMutualSharing=function(t,e){null!=t.identicalSibiling?t.identicalSibiling.push(e):(t.identicalSibiling=[],t.identicalSibiling.push(e))},t.prototype.matrixCellGroup=function(t){return t.level=t.level,t.parents=t.parents,t.children=t.children,t.visitedChildren=t.visitedChildren,t.visitedParents=t.visitedParents,t.ignoredChildren=t.ignoredChildren,t.cells=t.cells,t.offset=t.offset,t.initialOffset=t.initialOffset,t},t.prototype.getPointvalue=function(t,e){return{x:Number(t)||0,y:Number(e)||0}},t.prototype.containsValue=function(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].key===e||t[parseInt(i.toString(),10)]===e)return!0;return!1},t.prototype.createMatrixCells=function(t){for(var e=t.model.layout,i="LeftToRight"===e.orientation||"RightToLeft"===e.orientation,r=i?e.verticalSpacing:e.horizontalSpacing,n=i?e.horizontalSpacing:e.verticalSpacing,o=t.model.ranks,a=[],s=-n,h=o.length-1;h>=0;h--){var d=0,l=o.length-1-h,c=o[parseInt(h.toString(),10)].slice(),p=[];t.matrix.push({key:l,value:p});var g=[];for(a.push({index:l,value:g});c.length>0;){var u=c[0],f=this.matrixCellGroup({level:l,parents:[],children:[],visitedParents:[],visitedChildren:[],ignoredChildren:[],cells:[],size:0,offset:0,initialOffset:0});p.push(f);var m=this.getType(u.type);if("internalVertex"===m){if(f.cells.push(u),null!=u.identicalSibiling)for(var y=0;y<c.length;y++){var v=c[parseInt(y.toString(),10)],b=this.getType(v.type);if("internalVertex"===b&&this.containsValue(u.identicalSibiling,v.id)&&(f.cells.push(v),f.cells.length>u.identicalSibiling.length))break}for(var y=0;y<f.cells.length;y++){var v=f.cells[parseInt(y.toString(),10)];if("internalVertex"===this.getType(v.type)){var S=v.cell.geometry;if(f.size+=i?S.height:S.width,d=Math.max(d,i?S.width:S.height),g.push({key:v.id,value:f}),v.connectsAsTarget.length>0)for(var w=0;w<v.connectsAsTarget.length;w++){var x=v.connectsAsTarget[parseInt(w.toString(),10)],I=null;if(this.containsValue(a[l-1].value,x.ids)?I=x.ids:this.containsValue(a[l-1].value,x.source.id)&&(I=x.source.id),null!=I){for(var P=a[l-1].value,C=void 0,z=0;z<P.length;z++)if(P[parseInt(z.toString(),10)].key===I){C=P[parseInt(z.toString(),10)].value;break}this.containsValue(f.parents,C)||f.parents.push(C),this.containsValue(C.children,f)||C.children.push(f)}}c.reverse(),c.pop(),c.reverse()}}f.size+=(f.cells.length-1)*r}else if("internalEdge"===m){f.cells.push(u);for(var y=0;y<f.cells.length;y++){var O=f.cells[parseInt(y.toString(),10)],T=this.getType(O.type);if("internalEdge"===T&&null!=O.edges){for(var A=-5,w=0;w<O.edges.length;w++)A+=6;f.size+=A}g.push({key:O.ids,value:f});var I=null;if(this.containsValue(a[l-1].value,O.ids)?I=O.ids:this.containsValue(a[l-1].value,O.source.id)&&(I=O.source.id),null!=I){for(var L=a[l-1].value,C=void 0,z=0;z<L.length;z++)if(L[parseInt(z.toString(),10)].key===I){C=L[parseInt(z.toString(),10)].value;break}this.containsValue(f.parents,C)||f.parents.push(C),this.containsValue(C.children,f)||C.children.push(f)}c.reverse(),c.pop(),c.reverse()}f.size+=(f.cells.length-1)*r}}t.rowOffset.push(s+d/2+n),s+=d+n}},t.prototype.updateLayout=function(t,e,i,r,o,a){var s=(t.x-e.width)/2-e.x,h=(t.y-e.height)/2-e.y;s=Math.round(s),h=Math.round(h);for(var d=[],l=new n.a(e.x+s,e.y+h,e.width,e.height),c=i.margin,p="RightToLeft"===r.orientation||"LeftToRight"===r.orientation,g=p?r.horizontalSpacing:r.verticalSpacing,u=0;u<o.length;u++){var f=o[u];if(null!=f.outEdges&&f.outEdges.length>0)for(var m=f.outEdges.length,y=0;y<m;y++){var v=a[f.outEdges[y]];if(v.pointCollection=[],m>1){for(var b=g/2,S=null,w=void 0,x=this.getEdgeMapper(),I=0;I<x.length;I++)if(x[I].key===v){w=I;break}if(x[w].value.length>0){var P=x[w].value[0],C=P.x+c.left,z=P.y+c.top,O=C,T=z;"BottomToTop"===r.orientation?T=e.height-z:"RightToLeft"===r.orientation&&(O=e.width-C),O+=s,T+=h,S=this.getPointvalue(O,T)}for(var A=[],L=0;L<v.segments.length;L++){var E=v.segments[L].points;for(var B in E)A.push(E[B])}A=this.updateConnectorPoints(A,b,S,l,r.orientation);for(var M=0;M<A.length;M++){var E=A[M];v.pointCollection.push(this.getPointvalue(E.x,E.y))}this.resetConnectorPoints(v,this.diagram)}d.push(v)}if(null!=f.inEdges&&f.inEdges.length>1)for(var m=f.inEdges.length,x=this.getEdgeMapper(),y=0;y<m;y++){var v=a[f.inEdges[y]];if(this.containsValue(d,v)||(v.pointCollection=[]),m>1){var b=g/2,S=null,w=void 0,I=void 0;for(I=0;I<x.length;I++)if(x[I].key===v){w=I;break}if(x[w].value.length>0&&!this.containsValue(d,v)){var D=x[I].value[0],k=D.x+c.left,R=D.y+c.top,O=k,T=R;"BottomToTop"===r.orientation?T=e.height-R:"RightToLeft"===r.orientation&&(O=e.width-k),O+=s,T+=h,S=this.getPointvalue(O,T)}for(var A=[],M=0;M<v.segments.length;M++){var E=v.segments[M].points;for(var B in E)A.push(E[B])}A.reverse(),A=this.updateConnectorPoints(A,b,S,l,i.orientation),A.reverse(),v.pointCollection=[];for(var M=0;M<A.length;M++){var E=A[M];v.pointCollection.push(this.getPointvalue(E.x,E.y))}this.resetConnectorPoints(v,this.diagram)}}}},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(5),n=i(18),o=i(9),a=function(){function t(){this.size=20,this.intermediatePoints=[],this.gridCollection=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.considerWalkable=[]}return t.prototype.lineRouting=function(t){var e=t.connectors.length;if(this.renderVirtualRegion(t),e>0)for(var i=0;i<e;i++){var r=t.connectors[parseInt(i.toString(),10)];"Orthogonal"===r.type&&r.visible&&this.refreshConnectorSegments(t,r,!0)}},t.prototype.renderVirtualRegion=function(t,e){var i=this.size;(t.spatialSearch.pageTop<0||t.spatialSearch.pageLeft<0)&&(i=this.size+this.size/2);var r=t.spatialSearch.pageRight+i,n=t.spatialSearch.pageBottom+i,o=t.spatialSearch.pageLeft-i,a=t.spatialSearch.pageTop-i;if(o=o<0?o-20:0,a=a<0?a-20:0,e&&(this.width!==r-o||this.height!==n-a||this.diagramStartX!==o||this.diagramStartY!==a)||void 0===e){this.width=r-o,this.height=n-a,this.diagramStartX=o,this.diagramStartY=a,this.gridCollection=[],this.noOfRows=this.width/this.size,this.noOfCols=this.height/this.size;for(var s=this.size,h=this.diagramStartX<0?this.diagramStartX:0,d=this.diagramStartY<0?this.diagramStartY:0,l=0;l<this.noOfCols;l++){for(var c=0;c<this.noOfRows;c++){0===l&&this.gridCollection.push([0]);var p={x:h,y:d,width:s,height:s,gridX:c,gridY:l,walkable:!0,tested:void 0,nodeId:[]};this.gridCollection[parseInt(c.toString(),10)][parseInt(l.toString(),10)]=p,h+=s}h=this.diagramStartX<0?this.diagramStartX:0,d+=s}}var g=this.findNodes(t.nodes);this.updateNodesInVirtualRegion(g)},t.prototype.findNodes=function(t){for(var e,i=[],r=0;r<t.length;r++)e=t[parseInt(r.toString(),10)],"SwimLane"===e.shape.type||e.isLane||e.isPhase||e.isHeader||!e.visible||i.push(e);return i},t.prototype.updateNodesInVirtualRegion=function(t){for(var e=this.size,i=this.diagramStartX<0?this.diagramStartX:0,n=this.diagramStartY<0?this.diagramStartY:0,o=0;o<this.noOfCols;o++){for(var a=0;a<this.noOfRows;a++){var s=this.gridCollection[parseInt(a.toString(),10)][parseInt(o.toString(),10)],h=new r.a(i,n,this.size,this.size),d=void 0,l=void 0;for(s.walkable=!0,s.tested=void 0,s.nodeId=[],l=0;l<t.length;l++)t[parseInt(l.toString(),10)].wrapper.bounds&&(d=this.intersectRect(h,t[parseInt(l.toString(),10)].wrapper.bounds)),d&&(s.nodeId.push(t[parseInt(l.toString(),10)].id),s.walkable=!1,""!==t[parseInt(l.toString(),10)].parentId&&(s.parentNodeId=t[parseInt(l.toString(),10)].parentId));i+=e}i=this.diagramStartX<0?this.diagramStartX:0,n+=e}},t.prototype.intersectRect=function(t,e){return!(e.left>=t.right||e.right<=t.left||e.top>=t.bottom||e.bottom<=t.top)},t.prototype.findEndPoint=function(t,e,r){var o,a;if(e&&""!==t.sourcePortID&&t.sourcePortWrapper||!e&&""!==t.targetPortID&&t.targetPortWrapper){o=e?{x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY}:{x:t.targetPortWrapper.offsetX,y:t.targetPortWrapper.offsetY},a=i.i(n.i)(o,void 0,e?t.sourceWrapper.bounds:t.targetWrapper.bounds,!1);var s=e?t.sourcePortWrapper.bounds:t.targetPortWrapper.bounds;o=r?"Top"===a?{x:s.topCenter.x,y:s.topCenter.y}:"Left"===a?{x:s.middleLeft.x,y:s.middleLeft.y}:"Right"===a?{x:s.middleRight.x,y:s.middleRight.y}:{x:s.bottomCenter.x,y:s.bottomCenter.y}:{x:s.center.x,y:s.center.y}}else o=e&&this.startNode||!e&&this.targetNode?e?{x:this.startNode.wrapper.offsetX,y:this.startNode.wrapper.offsetY}:{x:this.targetNode.wrapper.offsetX,y:this.targetNode.wrapper.offsetY}:e?{x:t.sourcePoint.x,y:t.sourcePoint.y}:{x:t.targetPoint.x,y:t.targetPoint.y};return o},t.prototype.refreshConnectorSegments=function(t,e,n){var a,s,h,d,l,c,p,g,u,f,m,y=e.sourceID,v=e.targetID,b=e.sourcePortID,S=e.targetPortID;if(i.i(o.K)(e,t)){this.startNode=t.nameTable[""+y],this.targetNode=t.nameTable[""+v],this.intermediatePoints=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.startGrid=void 0,this.targetGrid=void 0;for(var w=0;w<this.noOfCols;w++)for(var x=0;x<this.noOfRows;x++)this.gridCollection[parseInt(x.toString(),10)][parseInt(w.toString(),10)].tested=this.gridCollection[parseInt(x.toString(),10)][parseInt(w.toString(),10)].parent=void 0,this.gridCollection[parseInt(x.toString(),10)][parseInt(w.toString(),10)].previousDistance=this.gridCollection[parseInt(x.toString(),10)][parseInt(w.toString(),10)].afterDistance=void 0,this.gridCollection[parseInt(x.toString(),10)][parseInt(w.toString(),10)].totalDistance=void 0;a=this.findEndPoint(e,!0),s=this.findEndPoint(e,!1);for(var w=0;w<this.noOfRows;w++)for(var x=0;x<this.noOfCols;x++){h=this.gridCollection[parseInt(w.toString(),10)][parseInt(x.toString(),10)];var I=new r.a(h.x,h.y,h.width,h.height);if(!I.containsPoint(a)||this.startGrid||-1===h.nodeId.indexOf(y)&&""!==y||(this.startGrid=(b&&this.startGrid,h)),!I.containsPoint(s)||this.targetGrid||-1===h.nodeId.indexOf(v)&&""!==v||(this.targetGrid=(S&&this.targetGrid,h)),!b&&this.startNode){var P=this.startNode.wrapper.bounds;I.containsPoint(P.topCenter)&&!d&&(d=h),I.containsPoint(P.middleLeft)&&!c&&(c=h),I.containsPoint(P.middleRight)&&!p&&(p=h),I.containsPoint(P.bottomCenter)&&!l&&(l=h)}if(!S&&this.targetNode){var P=this.targetNode.wrapper.bounds;I.containsPoint(P.topCenter)&&!u&&(u=h),I.containsPoint(P.middleLeft)&&!m&&(m=h),I.containsPoint(P.middleRight)&&!g&&(g=h),I.containsPoint({x:P.bottomCenter.x,y:P.bottomCenter.y})&&!f&&(f=h)}}this.findEdgeBoundary(b,c,p,d,l,!0),this.findEdgeBoundary(S,m,g,u,f,!1),this.startGrid.totalDistance=0,this.startGrid.previousDistance=0,this.intermediatePoints.push({x:this.startGrid.gridX,y:this.startGrid.gridY}),this.startArray.push(this.startGrid),e&&m&&g&&u&&f&&this.checkObstacles(e,t,m,g,u,f);t:for(;this.startArray.length>0;){for(var C=this.startArray.pop(),w=0;w<this.targetGridCollection.length;w++){var z=this.targetGridCollection[parseInt(w.toString(),10)];if(C.gridX===z.gridX&&C.gridY===z.gridY){if(this.getIntermediatePoints(C),this.updateConnectorSegments(t,this.intermediatePoints,this.gridCollection,e,n)){this.considerWalkable=[];break t}this.targetGridCollection.splice(this.targetGridCollection.indexOf(z),1),C=this.startArray.pop()}}this.findPath(C)}}},t.prototype.checkChildNodes=function(t,e){var i=!1,r=!1;if(t.nodeId.length>=1&&!e)for(var n=0;n<t.nodeId.length;n++){for(var o=t.nodeId[parseInt(n.toString(),10)],a=0;a<t.nodeId.length;a++)this.targetNode.parentId===t.nodeId[parseInt(a.toString(),10)]&&(r=!0);i=!r&&this.targetNode.id===o}else 1===t.nodeId.length&&(i=!0);return i},t.prototype.findEdgeBoundary=function(t,e,i,r,n,o){var a,s=o?this.sourceGridCollection:this.targetGridCollection;if(!t&&(o?this.startNode:this.targetNode)){for(var h=e.gridX;h<=i.gridX;h++)a=this.gridCollection[parseInt(h.toString(),10)][e.gridY],(this.checkChildNodes(a,o)&&(h===e.gridX||h===i.gridX)||h!==e.gridX&&h!==i.gridX)&&s.push(a);for(var h=r.gridY;h<=n.gridY;h++)a=this.gridCollection[r.gridX][parseInt(h.toString(),10)],(this.checkChildNodes(a,o)&&(h===r.gridY||h===n.gridY)||h!==r.gridY&&h!==n.gridY)&&-1===s.indexOf(a)&&s.push(a)}else s.push(o?this.startGrid:this.targetGrid)},t.prototype.checkObstacles=function(t,e,r,o,a,s){var h=this.findNearestNeigbours(this.startGrid,this.gridCollection,!0);if(0===h.length)if(""!==t.sourcePortID){var d={x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},l=i.i(n.i)(d,void 0,t.sourceWrapper.bounds,!1);"Top"===l?this.resetGridColl(this.startGrid,"top",!0):"Right"===l?this.resetGridColl(this.startGrid,"right",!0):"Bottom"===l?this.resetGridColl(this.startGrid,"bottom",!0):this.resetGridColl(this.startGrid,"left",!0)}else this.resetGridColl(this.startGrid,"top",!0),this.resetGridColl(this.startGrid,"right",!0),this.resetGridColl(this.startGrid,"bottom",!0),this.resetGridColl(this.startGrid,"left",!0);if(h=this.findNearestNeigbours(this.targetGrid,this.gridCollection,!1),0===h.length)if(""!==t.targetPortID){var d={x:t.targetPortWrapper.offsetX,y:t.targetPortWrapper.offsetY},l=i.i(n.i)(d,void 0,t.targetWrapper.bounds,!1);"Top"===l?this.resetGridColl(this.targetGrid,"top",!0):"Right"===l?this.resetGridColl(this.targetGrid,"right",!0):"Bottom"===l?this.resetGridColl(this.targetGrid,"bottom",!0):this.resetGridColl(this.targetGrid,"left",!0)}else this.resetGridColl(this.targetGrid,"top",!1),this.resetGridColl(this.targetGrid,"right",!1),this.resetGridColl(this.targetGrid,"bottom",!1),this.resetGridColl(this.targetGrid,"left",!1);if(this.targetGridCollection.length>0&&this.targetGridCollection[0].nodeId.length>1)for(var c=0;c<=1;c++){for(var p=this.targetGridCollection[parseInt(c.toString(),10)].gridX,g=this.targetGridCollection[parseInt(c.toString(),10)].gridY,u=this.targetGridCollection[parseInt(c.toString(),10)].nodeId,f=void 0,m=0;m<u.length;m++)if(this.targetNode.id!=u[parseInt(m.toString(),10)]){f=u[parseInt(m.toString(),10)];break}var y=void 0,v=void 0,b=void 0;e.nameTable[this.targetNode.id]&&(y=e.nameTable[this.targetNode.id].wrapper),e.nameTable[""+f]&&(v=e.nameTable[""+f].wrapper),y&&v&&(b=this.contains(v.bounds,y.bounds));for(var S=void 0,w=0;w<u.length;w++)this.targetNode.parentId===u[parseInt(w.toString(),10)]&&(S=!0);if(!this.gridCollection[parseInt(p.toString(),10)][parseInt(g.toString(),10)].walkable&&b&&!S){var x=void 0,I=void 0;x=this.getEndvalue(r,"left"),I=r.gridX-x.gridX,this.changeValue(r,I,"left"),x=this.getEndvalue(o,"right"),I=x.gridX-o.gridX,this.changeValue(o,I,"right"),x=this.getEndvalue(a,"top"),I=a.gridY-x.gridY,this.changeValue(a,I,"top"),x=this.getEndvalue(s,"bottom"),I=s.gridY-x.gridY,this.changeValue(s,I,"top")}}},t.prototype.contains=function(t,e){return t.left<=e.left&&t.right>=e.right&&t.top<=e.top&&t.bottom>=e.bottom},t.prototype.getEndvalue=function(t,e){return this.gridCollection[t.gridX][t.gridY].walkable?t:"left"===e?this.getEndvalue(this.gridCollection[t.gridX-1][t.gridY],e):"right"===e?this.getEndvalue(this.gridCollection[t.gridX+1][t.gridY],e):"top"===e?this.getEndvalue(this.gridCollection[t.gridX][t.gridY-1],e):"bottom"===e?this.getEndvalue(this.gridCollection[t.gridX][t.gridY+1],e):t},t.prototype.changeValue=function(t,e,i){t.walkable||this.considerWalkable.push(t);for(var r,n=0;n<=e;n++)"left"===i?r=this.gridCollection[t.gridX-n][t.gridY]:"right"===i?r=this.gridCollection[t.gridX+n][t.gridY]:"top"===i?r=this.gridCollection[t.gridX][t.gridY-n]:"bottom"===i&&(r=this.gridCollection[t.gridX][t.gridY+n]),r.walkable||this.considerWalkable.push(r)},t.prototype.getIntermediatePoints=function(t){var e;for(this.intermediatePoints=[];t;)this.intermediatePoints.push({x:t.gridX,y:t.gridY}),t=t.parent;this.intermediatePoints.reverse(),this.intermediatePoints.length>=1&&(this.intermediatePoints[0].x===this.intermediatePoints[1].x?this.intermediatePoints[0].y<this.intermediatePoints[1].y?(e=this.neigbour(this.startGrid,"bottom",void 0,!0),this.intermediatePoints[0].y+=e-1):(e=this.neigbour(this.startGrid,"top",void 0,!0),this.intermediatePoints[0].y-=e-1):this.intermediatePoints[0].x<this.intermediatePoints[1].x?(e=this.neigbour(this.startGrid,"right",void 0,!0),this.intermediatePoints[0].x+=e-1):(e=this.neigbour(this.startGrid,"left",void 0,!0),this.intermediatePoints[0].x-=e-1))},t.prototype.updateConnectorSegments=function(t,e,i,r,n){var o,a,s,h,d,l,c,p,g,u=[],f=[],m=r.targetWrapper,y=r.sourceWrapper,v=this.findEndPoint(r,!0);""===r.targetPortID&&r.targetWrapper||(a=this.findEndPoint(r,!1,!0));for(var b=0;b<e.length;b++)d=i[e[parseInt(b.toString(),10)].x][e[parseInt(b.toString(),10)].y],s=d.x+d.width/2,h=d.y+d.height/2,f.push({x:s,y:h}),b>=1&&(p=f[f.length-2].x!==f[f.length-1].x?f[f.length-2].x>f[f.length-1].x?"Left":"Right":f[f.length-2].y>f[f.length-1].y?"Top":"Bottom"),b>=2&&g===p&&f.splice(f.length-2,1),g=p;for(var S=0;S<f.length-1;S++)f[parseInt(S.toString(),10)].x!==f[S+1].x?(0===S&&""===r.sourcePortID&&y&&(v=f[parseInt(S.toString(),10)].x>f[S+1].x?y.bounds.middleLeft:y.bounds.middleRight),S===f.length-2&&""===r.targetPortID&&m&&(a=f[parseInt(S.toString(),10)].x>f[S+1].x?m.bounds.middleRight:m.bounds.middleLeft),0===S&&v&&(f[parseInt(S.toString(),10)].x=v.x,f[parseInt(S.toString(),10)].y=f[S+1].y=v.y),S===f.length-2&&a&&(a.x-f[S+1].x<0&&Math.abs(a.x-f[parseInt(S.toString(),10)].x)<r.targetDecorator.width+1&&(f[parseInt(S.toString(),10)].x=f[S-1].x-=this.size/2),a.x-f[S+1].x>0&&Math.abs(a.x-f[parseInt(S.toString(),10)].x)<r.targetDecorator.width+1&&(f[parseInt(S.toString(),10)].x=f[S-1].x+=this.size/2),f[S+1].x=a.x,f[parseInt(S.toString(),10)].y=f[S+1].y=a.y)):(0===S&&y&&(v=f[parseInt(S.toString(),10)].y>f[S+1].y?y.bounds.topCenter:y.bounds.bottomCenter),S===f.length-2&&""===r.targetPortID&&m&&(a=f[parseInt(S.toString(),10)].y>f[S+1].y?m.bounds.bottomCenter:m.bounds.topCenter),0===S&&v&&(f[parseInt(S.toString(),10)].y=v.y,f[parseInt(S.toString(),10)].x=f[S+1].x=v.x),S===f.length-2&&a&&(a.y-f[S+1].y<0&&Math.abs(a.y-f[parseInt(S.toString(),10)].y)<r.targetDecorator.height+1&&(f[parseInt(S.toString(),10)].y=f[S-1].y-=this.size/2),a.y-f[S+1].y>0&&Math.abs(a.y-f[parseInt(S.toString(),10)].y)<r.targetDecorator.width+1&&(f[parseInt(S.toString(),10)].y=f[S-1].y+=this.size/2),f[S+1].y=a.y,f[parseInt(S.toString(),10)].x=f[S+1].x=a.x));for(var S=0;S<f.length-1;S++)f[parseInt(S.toString(),10)].x!==f[S+1].x?f[parseInt(S.toString(),10)].x>f[S+1].x?(l="Left",c=f[parseInt(S.toString(),10)].x-f[S+1].x):(l="Right",c=f[S+1].x-f[parseInt(S.toString(),10)].x):f[parseInt(S.toString(),10)].y>f[S+1].y?(l="Top",c=f[parseInt(S.toString(),10)].y-f[S+1].y):(l="Bottom",c=f[S+1].y-f[parseInt(S.toString(),10)].y),o={type:"Orthogonal",length:c,direction:l},u.push(o);var w=u[u.length-1];return 1===u.length&&(w.length-=20),w.length<10&&2===u.length&&(u.pop(),u[0].length-=20,w=u[0]),(("Top"===w.direction||"Bottom"===w.direction)&&w.length>r.targetDecorator.height+1||("Right"===w.direction||"Left"===w.direction)&&w.length>r.targetDecorator.width+1)&&(r.segments=u,n&&t.connectorPropertyChange(r,{},{type:"Orthogonal",segments:u}),!0)},t.prototype.findPath=function(t){for(var e,i=[],r=this.findNearestNeigbours(t,this.gridCollection,!0),n=0;n<r.length;n++)if(null!==(e=this.findIntermediatePoints(r[parseInt(n.toString(),10)].gridX,r[parseInt(n.toString(),10)].gridY,t.gridX,t.gridY,this.targetGrid.gridX,this.targetGrid.gridY))){var o=this.gridCollection[e.x][e.y],a=this.octile(Math.abs(e.x-t.gridX),Math.abs(e.y-t.gridY)),s=t.previousDistance+a;o.previousDistance&&!(o.previousDistance>s)||e.x===t.gridX&&e.y===t.gridY||(i.push(e),o.previousDistance=s,o.afterDistance=o.afterDistance||this.manhattan(Math.abs(e.x-this.targetGrid.gridX),Math.abs(e.y-this.targetGrid.gridY)),o.totalDistance=o.previousDistance+o.afterDistance,o.parent=t)}if(i.length>0)for(var n=0;n<i.length;n++){var o=this.gridCollection[i[parseInt(n.toString(),10)].x][i[parseInt(n.toString(),10)].y];-1===this.startArray.indexOf(o)&&this.startArray.push(o)}this.sorting(this.startArray)},t.prototype.sorting=function(t){for(var e=!1;!e;){e=!0;for(var i=1;i<t.length;i+=1)if(t[i-1].totalDistance<t[parseInt(i.toString(),10)].totalDistance){e=!1;var r=t[i-1];t[i-1]=t[parseInt(i.toString(),10)],t[parseInt(i.toString(),10)]=r}}return t},t.prototype.octile=function(t,e){var i=Math.SQRT2-1;return e>t?i*t+e:i*e+t},t.prototype.manhattan=function(t,e){return t+e},t.prototype.findNearestNeigbours=function(t,e,i){var r=[],n=t.parent;if(n){var o=(t.gridX-n.gridX)/Math.max(Math.abs(t.gridX-n.gridX),1),a=(t.gridY-n.gridY)/Math.max(Math.abs(t.gridY-n.gridY),1);0!==o?(this.isWalkable(t.gridX,t.gridY-1,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX][t.gridY-1])&&r.push(e[t.gridX][t.gridY-1]),this.isWalkable(t.gridX,t.gridY+1,!0)&&this.sourceGridCollection.indexOf(e[t.gridX][t.gridY+1])&&r.push(e[t.gridX][t.gridY+1]),this.isWalkable(t.gridX+o,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX+o][t.gridY])&&r.push(e[t.gridX+o][t.gridY])):0!==a&&(this.isWalkable(t.gridX-1,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX-1][t.gridY])&&r.push(e[t.gridX-1][t.gridY]),this.isWalkable(t.gridX+1,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX+1][t.gridY])&&r.push(e[t.gridX+1][t.gridY]),this.isWalkable(t.gridX,t.gridY+a,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX][t.gridY+a])&&r.push(e[t.gridX][t.gridY+a]))}else this.neigbour(t,"top",r,i),this.neigbour(t,"right",r,i),this.neigbour(t,"bottom",r,i),this.neigbour(t,"left",r,i);return r},t.prototype.neigbour=function(t,e,i,r){for(var n,o=1;o>0;){var a="top"===e||"bottom"===e?t.gridX:"left"===e?t.gridX-o:t.gridX+o,s="right"===e||"left"===e?t.gridY:"top"===e?t.gridY-o:t.gridY+o;if((n=this.gridCollection[parseInt(a.toString(),10)][parseInt(s.toString(),10)])&&(r&&-1===this.sourceGridCollection.indexOf(n)||!r&&-1===this.targetGridCollection.indexOf(n)))return i&&this.isWalkable(a,s)&&i.push(n),o;if(!(a>0&&s>0))break;o++}return null},t.prototype.resetGridColl=function(t,e,i){for(var r,n=1;n>0;){var o="top"===e||"bottom"===e?t.gridX:"left"===e?t.gridX-n:t.gridX+n,a="right"===e||"left"===e?t.gridY:"top"===e?t.gridY-n:t.gridY+n;if((r=this.gridCollection[parseInt(o.toString(),10)][parseInt(a.toString(),10)])&&(i&&-1===this.sourceGridCollection.indexOf(r)||!i&&-1===this.targetGridCollection.indexOf(r))){if(this.isWalkable(o,a))break;var s=this.gridCollection[parseInt(o.toString(),10)][parseInt(a.toString(),10)];this.considerWalkable.push(s)}if(!(o>0&&a>0))break;"top"===e||"left"===e?n--:n++}return null},t.prototype.isWalkable=function(t,e,i){if(t>=0&&t<this.noOfRows&&e>=0&&e<this.noOfCols){var r=this.gridCollection[parseInt(t.toString(),10)][parseInt(e.toString(),10)];if(r&&(r.walkable||(1===r.nodeId.length||2===r.nodeId.length&&r.parentNodeId||-1!==this.considerWalkable.indexOf(r))&&(-1!==this.sourceGridCollection.indexOf(r)||-1!==this.targetGridCollection.indexOf(r)||-1!==this.considerWalkable.indexOf(r)))&&(i&&!r.parent||!i))return!0}return!1},t.prototype.findIntermediatePoints=function(t,e,i,r,n,o){for(var a=t-i,s=e-r,h=t,d=e,l=0;l<this.targetGridCollection.length;l++)if(t===this.targetGridCollection[parseInt(l.toString(),10)].gridX&&e===this.targetGridCollection[parseInt(l.toString(),10)].gridY)return{x:t,y:e};if(!this.isWalkable(t,e))return null;var c=this.gridCollection[parseInt(t.toString(),10)][parseInt(e.toString(),10)];if(c.tested)return{x:t,y:e};if(c.tested=!0,0!==a&&(a=a>0?1:-1,this.isWalkable(h,d-1)&&!this.isWalkable(h-a,d-1)||this.isWalkable(h,d+1)&&!this.isWalkable(h-a,d+1)))return{x:t,y:e};if(0!==s){if(s=s>0?1:-1,this.isWalkable(h-1,d)&&!this.isWalkable(h-1,d-s)||this.isWalkable(h+1,d)&&!this.isWalkable(h+1,d-s))return{x:t,y:e};if(this.findIntermediatePoints(h+1,d,h,d,n,o)||this.findIntermediatePoints(h-1,d,h,d,n,o))return{x:t,y:e}}return this.findIntermediatePoints(h+a,d+s,h,d,n,o)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LineRouting"},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(5),n=i(1),o=i(16),a=i(35),s=i(9),h=function(){function t(t){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=t,this.objects=[],this.transform=t.scroller?t.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=t.scrollSettings.viewPortWidth,this.vPortHeight=t.scrollSettings.viewPortHeight,this.currentZoomFActor=t.scrollSettings.currentZoom,this.hOffset=t.scrollSettings.horizontalOffset,this.vOffset=t.scrollSettings.verticalOffset}return Object.defineProperty(t.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(t){this.vPortHeight=t,this.diagram.scrollSettings.viewPortHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(t){this.currentZoomFActor=t,this.diagram.scrollSettings.currentZoom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(t){this.vPortWidth=t,this.diagram.scrollSettings.viewPortWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(t){this.hOffset=t,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|n.a.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(t){this.vOffset=t,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|n.a.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=t},enumerable:!0,configurable:!0}),t.prototype.getBounds=function(){var t=this.diagram.spatialSearch.getPageBounds(0,0);return(t.x<0||t.y<0)&&!this.diagram.pageSettings.multiplePage?this.getPageBounds(void 0,void 0,!0,!0):this.getPageBounds(void 0,void 0,!0)},t.prototype.updateScrollOffsets=function(t,e){var i=0,r=0,n=this.getBounds();n.x*=this.currentZoom,n.y*=this.currentZoom,n.width*=this.currentZoom,n.height*=this.currentZoom,i=Math.max(0,t-n.left),r=Math.max(0,e-n.top),void 0!==t&&void 0!==e?(this.horizontalOffset=i,this.verticalOffset=r,this.diagram.setOffset(i,r)):this.diagram.setOffset(-this.horizontalOffset-n.x,-this.verticalOffset-n.y),this.transform={tx:Math.max(this.horizontalOffset,-n.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-n.top)/this.currentZoom,scale:this.currentZoom}},t.prototype.setScrollOffset=function(t,e){this.scrolled=!1;var i=this.getBounds();i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom;var r=-i.left,n=-i.top,o=!1,a=this.viewPortWidth*this.currentZoom,s=this.viewPortHeight*this.currentZoom,h=r-t;if(h!==this.horizontalOffset){r<this.horizontalOffset&&(this.horizontalOffset>h?this.horizontalOffset-=t:this.horizontalOffset=h,o=!0);var d=Math.max(i.right+this.vScrollSize,a);if(!o&&d<-h+this.viewPortWidth){var l=-h+a-this.vScrollSize,c=-this.horizontalOffset+a-this.vScrollSize;l<c?this.horizontalOffset=h:l-i.right>l-c?this.horizontalOffset=h:this.horizontalOffset=-(i.right+this.vScrollSize-a),o=!0}o||(this.horizontalOffset=r-t)}o=!1;var p=n-e;if(p!==this.verticalOffset){n<this.verticalOffset&&(this.verticalOffset>p?this.verticalOffset-=e:this.verticalOffset=p,o=!0);var g=Math.max(i.bottom+this.hScrollSize,s);if(!o&&g<-p+s){var u=-p+s-this.hScrollSize,f=-this.verticalOffset+s-this.hScrollSize;u<f?this.verticalOffset=p:u-i.bottom>u-f?this.verticalOffset=p:this.verticalOffset=-(i.bottom+this.hScrollSize-s),o=!0}o||(this.verticalOffset=n-e)}this.transform={tx:Math.max(this.horizontalOffset,-i.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-i.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},t.prototype.getObjects=function(t,e){for(var i=[],r=0;r<t.length;r++){for(var n=!1,o=0;o<e.length;o++)if(t[parseInt(r.toString(),10)]===e[parseInt(o.toString(),10)]){n=!0;break}n||i.push(t[parseInt(r.toString(),10)])}return i},t.prototype.virtualizeElements=function(){for(var t=this.viewPortWidth/this.currentZoom,e=this.viewPortHeight/this.currentZoom,i=this.diagram.spatialSearch.findObjects(new r.a(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,t,e)),n=[],o=[],a=0;a<i.length;a++){var s=i[parseInt(a.toString(),10)].shape;if("Bpmn"===s.type&&s&&s.activity&&s.activity.subProcess&&s.activity.subProcess.processes&&s.activity.subProcess.processes.length>0){for(var h=0;h<s.activity.subProcess.processes.length;h++)o.push(s.activity.subProcess.processes[parseInt(h.toString(),10)]);o.push(i[parseInt(a.toString(),10)].id)}else""!==i[parseInt(a.toString(),10)].processId&&void 0!==i[parseInt(a.toString(),10)].processId||o.push(i[parseInt(a.toString(),10)].id)}n=o;for(var d=[],a=0;a<i.length;a++){var l=i[parseInt(a.toString(),10)].shape;if("Bpmn"===l.type&&l&&l.activity&&l.activity.subProcess&&l.activity.subProcess.processes&&l.activity.subProcess.processes.length>0){d.push(i[parseInt(a.toString(),10)].id);for(var c=0;c<l.activity.subProcess.processes.length;c++)d.push(l.activity.subProcess.processes[parseInt(c.toString(),10)])}else""!==i[parseInt(a.toString(),10)].processId&&void 0!==i[parseInt(a.toString(),10)].processId||d.push(i[parseInt(a.toString(),10)].id)}for(var a=0;a<i.length;a++)for(var p=0;p<d.length;p++)if(i[parseInt(a.toString(),10)].id===d[parseInt(p.toString(),10)]){i[parseInt(a.toString(),10)].zIndex=p;break}var g=this.getObjects(n,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=n);var u=this.getObjects(this.oldCollectionObjects,n);this.diagram.updateVirtualObjects(g,!1,u),this.oldCollectionObjects=n},t.prototype.setSize=function(t){var e=this.getPageBounds(void 0,void 0,!0);e.x*=this.currentZoom,e.y*=this.currentZoom,e.width*=this.currentZoom,e.height*=this.currentZoom;var i=Math.min(e.x,-this.horizontalOffset),r=Math.min(e.y,-this.verticalOffset),o=(this.horizontalOffset,this.viewPortWidth,e.right,this.verticalOffset,this.viewPortHeight,e.bottom,this.scrollerWidth),a=this.scrollerWidth;-this.verticalOffset<=e.y&&-this.verticalOffset+this.viewPortHeight>=e.bottom&&(a=0),-this.horizontalOffset<=e.x&&-this.horizontalOffset+this.viewPortWidth>=e.right&&(o=0),this.hScrollSize=o,this.vScrollSize=a;var s=this.diagramWidth,h=this.diagramHeight;this.diagramWidth=Math.max(e.right,-this.horizontalOffset+this.viewPortWidth-a)-i,this.diagramHeight=Math.max(e.bottom,-this.verticalOffset+this.viewPortHeight-o)-r,s===this.diagramWidth&&h===this.diagramHeight||"Diagram"===this.diagram.scrollSettings.scrollLimit||this.diagram.setSize(this.diagramWidth,this.diagramHeight),"Diagram"===this.diagram.scrollSettings.scrollLimit&&(s===this.diagramWidth&&h===this.diagramHeight&&1===this.currentZoom||this.diagram.diagramActions&&t&&(!this.diagram.diagramActions||!t||0===this.verticalOffset&&this.verticalOffset!==t.y||0===this.horizontalOffset&&this.horizontalOffset!==t.x)?t&&s===this.diagramWidth&&h===this.diagramHeight&&(this.diagram.diagramCanvas.scrollHeight>this.viewPortHeight&&t.y<0&&this.horizontalOffset===t.x&&0===this.verticalOffset||this.diagram.diagramCanvas.scrollWidth>this.viewPortWidth&&t.x<0&&this.verticalOffset===t.y&&0===this.horizontalOffset)&&(this.verticalOffset=t.y,this.horizontalOffset=t.x,this.transform={tx:Math.max(t.x,-e.left)/this.currentZoom,ty:Math.max(t.y,-e.top)/this.currentZoom,scale:this.currentZoom}):(this.diagram.scrollActions&n.t.Interaction&&t&&(this.transform={tx:Math.max(t.x,-e.left/this.currentZoom)/this.currentZoom,ty:Math.max(t.y,-e.top/this.currentZoom)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=t.x,this.verticalOffset=t.y),this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.scrollActions&n.t.PropertyChange||!t||(this.horizontalOffset=t.x,this.verticalOffset=t.y,this.transform={tx:Math.max(t.x,-e.left)/this.currentZoom,ty:Math.max(t.y,-e.top)/this.currentZoom,scale:this.currentZoom}))),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},t.prototype.setViewPortSize=function(t,e){this.viewPortWidth=t,this.viewPortHeight=e},t.prototype.getPageBounds=function(t,e,i,n){var o,a=new r.a;if("Content"===e||n||null===this.diagram.pageSettings.width||null===this.diagram.pageSettings.height){var s=t?void 0:0;o=this.diagram.spatialSearch.getPageBounds(s,s)}else{var h=this.diagram.pageSettings.width,d=this.diagram.pageSettings.height,l=0,c=0;if(this.diagram.pageSettings.multiplePage){if(a=this.diagram.spatialSearch.getPageBounds(0,0),a.right>h){var p=Math.ceil(a.right/h);h*=p}if(a.bottom>d){var p=Math.ceil(a.bottom/d);d*=p}if(a.left<0&&Math.abs(a.left)>l){var p=Math.ceil(Math.abs(a.left)/this.diagram.pageSettings.width);l=this.diagram.pageSettings.width*p}if(a.top<0&&Math.abs(a.top)>c){var p=Math.ceil(Math.abs(a.top)/this.diagram.pageSettings.height);c=this.diagram.pageSettings.height*p}}o=new r.a(-l,-c,h+l,d+c)}if(i){var g=this.diagram.scrollSettings.padding;o.x-=g.left,o.y-=g.top,o.width+=g.left+g.right,o.height+=g.top+g.bottom}return o},t.prototype.getPageBreak=function(t){for(var e=0,i=0,r=-1,n=[],o=0,a=0,s=0,h=0,d=this.diagram.pageSettings.margin.left,l=this.diagram.pageSettings.margin.right,c=this.diagram.pageSettings.margin.top,p=this.diagram.pageSettings.margin.bottom,g=1,u=1,f={x1:o,y1:s,x2:a,y2:h};t.width>e;)e+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:t.width,e===this.diagram.pageSettings.width&&(f={x1:t.left+d,y1:t.top+c,x2:t.left+d,y2:t.bottom-p},n[++r]=f),e<t.width&&(o=t.topLeft.x+this.diagram.pageSettings.width*g,s=t.topLeft.y+c,a=t.bottomLeft.x+this.diagram.pageSettings.width*g,h=t.bottomLeft.y-p,f={x1:o,y1:s,x2:a,y2:h},n[++r]=f,g++),t.width===e&&(f={x1:t.right-l,y1:t.top+c,x2:t.right-l,y2:t.bottom-p},n[++r]=f);for(;t.height>i;)i+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:t.height,i===this.diagram.pageSettings.height&&(f={x1:t.left+d,y1:t.top+c,x2:t.right-l,y2:t.top+c},n[++r]=f),i<t.height&&(o=t.topLeft.x+d,s=t.topLeft.y+this.diagram.pageSettings.height*u,a=t.topRight.x-l,h=t.topRight.y+this.diagram.pageSettings.height*u,f={x1:o,y1:s,x2:a,y2:h},n[++r]=f,u++),t.height===i&&(f={x1:t.left+d,y1:t.bottom-p,x2:t.right-l,y2:t.bottom-p},n[++r]=f);return n},t.prototype.zoom=function(t,e,r,h,d,l){if(i.i(s.A)(this.diagram)&&1!==t||i.i(s.B)(this.diagram)&&1===t){var c=i.i(o.a)();if(i.i(o.d)(c,this.currentZoom,this.currentZoom),i.i(o.f)(c,this.horizontalOffset,this.verticalOffset),h=h||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom},h=i.i(o.c)(c,h),this.currentZoom*t>=this.diagram.scrollSettings.minZoom&&this.currentZoom*t<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=t;var p=this.getPageBounds(void 0,void 0,!0);p.x*=this.currentZoom,p.y*=this.currentZoom;var g=i.i(o.a)();i.i(o.d)(g,t,t,h.x,h.y),i.i(o.f)(g,e||0,r||0),i.i(o.g)(c,g);var u=i.i(o.c)(c,{x:0,y:0});1===t&&(u=this.applyScrollLimit(u.x,u.y,d,l)),!(this.diagram.scrollActions&n.t.PropertyChange)&&this.diagram.scrollActions&n.t.Interaction&&"Diagram"===this.diagram.scrollSettings.scrollLimit||(this.transform={tx:Math.max(u.x,-p.left)/this.currentZoom,ty:Math.max(u.y,-p.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=u.x,this.verticalOffset=u.y),this.setSize(u),"SVG"!==this.diagram.mode&&i.i(s.y)(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||i.i(s.y)(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-p.x,-this.verticalOffset-p.y),i.i(a.c)(this.diagram)}}},t.prototype.fitToPage=function(t){t=t||{};var e=t.mode,i=t.region,r=t.margin||{},n=t.canZoomIn,o=t.customBounds;r.bottom=r.bottom||25,r.top=r.top||25,r.left=r.left||25,r.right=r.right||25;var a,s=o,h=-this.horizontalOffset,d=-this.verticalOffset;if("PageSettings"===(i=i||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){e=e||"Page","CustomBounds"!==i&&(s=this.getPageBounds(!0,i,!0));var l={x:0,y:0};l.x=(this.viewPortWidth-(r.left+r.right))/s.width,l.y=(this.viewPortHeight-(r.top+r.bottom))/s.height,!n&&s.width-this.horizontalOffset<this.viewPortWidth&&s.height-this.verticalOffset<this.viewPortHeight&&(l.x=Math.min(this.currentZoom,l.x),l.y=Math.min(this.currentZoom,l.y));var c=void 0,p=void 0,g=void 0;switch(e){case"Width":c=l.x,a=c/this.currentZoom,p=(this.viewPortWidth-s.width*c)/2-s.x*c,h+=p+(r.left-r.right)/2*c,d-=-this.verticalOffset*a,d="CustomBounds"!==i?d:d-this.verticalOffset*a;break;case"Height":c=l.y,a=c/this.currentZoom,p=(this.viewPortWidth-s.width*c)/2-s.x*c,g=(this.viewPortHeight-s.height*c)/2-s.y*c,h+=p+(r.left-r.right)/2*c,d+=g+(r.top-r.bottom)/2*c;break;case"Page":c=Math.min(l.x,l.y),a=c/this.currentZoom,p=(this.viewPortWidth-s.width*c)/2-s.x*c,g=(this.viewPortHeight-s.height*c)/2-s.y*c,h+=p+(r.left-r.right)/2*c,d+=g+(r.top-r.bottom)/2*c}this.zoom(a,h,d,{x:0,y:0},!0)}else a=1/this.currentZoom,this.zoom(a,h,d,{x:0,y:0},!0)},t.prototype.bringIntoView=function(t,e){var i=0,n=0,o=this.currentZoom,a=t,s=-this.horizontalOffset,h=-this.verticalOffset;a=new r.a(a.x*o,a.y*o,a.width*o,a.height*o),new r.a(s,h,this.viewPortWidth,this.viewPortHeight).containsRect(a)||(a.right>-s+this.viewPortWidth&&(i=a.right-this.viewPortWidth),a.x<-s&&(i=a.x),a.bottom>-h+this.viewPortHeight&&(n=a.bottom-this.viewPortHeight),a.y<-h&&(n=a.y),this.zoom(1,-this.horizontalOffset-i,-this.verticalOffset-n,null,void 0,e))},t.prototype.bringToCenter=function(t){var e=this.currentZoom,i=new r.a(t.x*e,t.y*e,t.width*e,t.height*e),n=i.x+i.width/2-this.viewPortWidth/2,o=i.y+i.height/2-this.viewPortHeight/2;n*=-1,o*=-1,this.zoom(1,-this.horizontalOffset-n,-this.verticalOffset-o,null)},t.prototype.applyScrollLimit=function(t,e,i,n){if("Infinity"===this.diagram.scrollSettings.scrollLimit&&void 0===i&&(t=-t,e=-e),"Infinity"!==this.diagram.scrollSettings.scrollLimit){var o=void 0;if("Limited"===this.diagram.scrollSettings.scrollLimit){var a=this.diagram.scrollSettings.scrollableArea;o=new r.a(a.x,a.y,a.width,a.height)}o=o||this.getPageBounds(!0),o.x*=this.currentZoom,o.y*=this.currentZoom,o.width*=this.currentZoom,o.height*=this.currentZoom,void 0!==i&&(t*=-1,e*=-1),n&&(t*=-1,e*=-1);var s=Math.max(o.right,this.viewPortWidth);if(!n&&!(t<=o.x&&(t+this.viewPortWidth>=o.right||t>=o.right-this.viewPortWidth)||t>=o.x&&t+this.viewPortWidth<=s))if(t>=o.x)t=Math.max(o.x,Math.min(t,t-(t+this.viewPortWidth-this.vScrollSize-s)));else{var h=o.right-this.viewPortWidth;t=Math.min(h,o.x)}var d=Math.max(o.bottom,this.viewPortHeight);if(!n&&!(e<=o.y&&e+this.viewPortHeight>=o.bottom||e>=o.y&&e+this.viewPortHeight<=d))if(e>=o.y)e=Math.max(o.y,Math.min(e,e-(e+this.viewPortHeight-this.hScrollSize-d)));else{var h=o.bottom-this.viewPortHeight;e=Math.min(o.y,h)}t*=-1,e*=-1}return{x:t,y:e}},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r=function(){function t(t,e,i,r,n){this.objects=[],this.left=t,this.top=e,this.width=i,this.height=r,this.spatialSearch=n}return t.prototype.findQuads=function(t,e){null!=this.first&&this.first.isIntersect(t)&&this.first.findQuads(t,e),null!=this.second&&this.second.isIntersect(t)&&this.second.findQuads(t,e),null!=this.third&&this.third.isIntersect(t)&&this.third.findQuads(t,e),null!=this.fourth&&this.fourth.isIntersect(t)&&this.fourth.findQuads(t,e),this.objects.length>0&&e.push(this)},t.prototype.isIntersect=function(t){return!(this.left+this.width<t.left||this.top+this.height<t.top||this.left>t.right||this.top>t.bottom)},t.prototype.selectQuad=function(){for(var t,e=null,i=this;null!=i;)t=i.getQuad(e),i=t.source,e=t.target||e;return e},t.prototype.getQuad=function(e){var i=this.width/2,r=this.height/2;if(i>=1e3&&r>=1e3){var n=this.left+i,o=this.top+r;if(this.spatialSearch.childRight<=n){if(this.spatialSearch.childBottom<=o){if(!this.first){var a=new t(this.left,this.top,i,r,this.spatialSearch);a.parent=this,this.first=a}return{source:this.first}}if(this.spatialSearch.childTop>=o){if(!this.third){var a=new t(this.left,o,i,r,this.spatialSearch);a.parent=this,this.third=a}return{source:this.third}}}else if(this.spatialSearch.childLeft>=n){if(this.spatialSearch.childBottom<=o){if(!this.second){var a=new t(n,this.top,i,r,this.spatialSearch);a.parent=this,this.second=a}return{source:this.second}}if(this.spatialSearch.childTop>=o){if(!this.fourth){var a=new t(n,o,i,r,this.spatialSearch);a.parent=this,this.fourth=a}return{source:this.fourth}}}}return this,this.objects.push(this.spatialSearch.childNode),{target:this}},t.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},t.prototype.addIntoAQuad=function(t){var e={};this.spatialSearch.setCurrentNode(t);for(var i=null;!e.isAdded;)e=this.spatialSearch.parentQuad.add(i),i=e.quad;return i},t.prototype.add=function(e){if(e=null,this.isContained())return e=this.selectQuad(),{isAdded:!0,quad:e};var i=void 0,r=!(0!==this.objects.length||this.first||this.second||this.third||this.fourth),n=2*this.width,o=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(i=new t(this.left-this.width,this.top-this.height,n,o,this.spatialSearch),r||(i.fourth=this)):(i=new t(this.left-this.width,this.top,n,o,this.spatialSearch),r||(i.second=this)):this.spatialSearch.childTop<this.top?(i=new t(this.left,this.top-this.height,n,o,this.spatialSearch),r||(i.third=this)):(i=new t(this.left,this.top,n,o,this.spatialSearch),r||(i.first=this)),this.parent=i,this.spatialSearch.parentQuad=i,{isAdded:!1,quad:e}},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var r=i(5),n=i(74),o=function(){function t(t){this.quadSize=500,this.objectTable=t,this.parentQuad=new n.a(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return t.prototype.removeFromAQuad=function(t){if(this.quadTable[t.id]){var e=this.quadTable[t.id],i=this.objectIndex(e.objects,t);-1!==i&&(e.objects.splice(i,1),this.update(e),delete this.quadTable[t.id])}},t.prototype.update=function(t){if(!(t.parent&&0===t.objects.length&&t.first&&t.second&&t.third&&t.fourth))return void(t!==this.parentQuad||t.first||t.second||t.third||t.fourth||(t.left=0,t.width=1e3,t.top=0,t.height=1e3));var e=t.parent;e.first===t?e.first=null:e.second===t?e.second=null:e.third===t?e.third=null:e.fourth===t&&(e.fourth=null),this.update(t.parent)},t.prototype.addIntoAQuad=function(t){var e=this.parentQuad.addIntoAQuad(t);this.quadTable[t.id]=e},t.prototype.objectIndex=function(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].id===e.id)return i;return-1},t.prototype.updateQuad=function(t){this.setCurrentNode(t);var e=t.outerBounds;if(isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return!1;if(this.quadTable[t.id]){this.quadTable[t.id].isContained()||(this.removeFromAQuad(t),this.addIntoAQuad(t))}else this.addIntoAQuad(t);if(!this.isWithinPageBounds(e)||this.leftElement===t||this.topElement===t||this.rightElement===t||this.bottomElement===t){var i=!1;return this.pageLeft===this.childLeft&&t===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=t,i=!0):t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),i=!0)),this.pageTop===this.childTop&&t===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=t,i=!0):t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),i=!0)),this.pageBottom===this.childBottom&&t===this.bottomElement||(this.pageBottom<=this.childBottom?(i=!0,this.pageBottom=this.childBottom,this.bottomElement=t):t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),i=!0)),this.pageRight===this.childRight&&t===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=t,i=!0):t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),i=!0)),i}return this.setCurrentNode(null),!1},t.prototype.isWithinPageBounds=function(t){return t.left>=this.pageLeft&&t.right<=this.pageRight&&t.top>=this.pageTop&&t.bottom<=this.pageBottom},t.prototype.findQuads=function(t){var e=[];return this.parentQuad.findQuads(t,e),e},t.prototype.findObjects=function(t){for(var e=this.findQuads(t),i=[],r=0,n=e;r<n.length;r++)for(var o=n[r],a=0,s=o.objects;a<s.length;a++){var h=s[a];h.outerBounds.intersects(t)&&i.push(this.objectTable[h.id])}return i},t.prototype.updateBounds=function(t){var e=!1;return t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),e=!0),t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),e=!0),t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),e=!0),t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),e=!0),e},t.prototype.findBottom=function(t){t.third||t.fourth?(t.third&&this.findBottom(t.third),t.fourth&&this.findBottom(t.fourth)):(t.second&&this.findBottom(t.second),t.first&&this.findBottom(t.first));for(var e=0,i=t.objects;e<i.length;e++){var r=i[e];this.pageBottom<=r.outerBounds.bottom&&(this.pageBottom=r.outerBounds.bottom,this.bottomElement=r)}},t.prototype.findRight=function(t){(t.second||t.fourth)&&(t.second&&this.findRight(t.second),t.fourth&&this.findRight(t.fourth)),t.first&&this.findRight(t.first),t.third&&this.findRight(t.third);for(var e=0,i=t.objects;e<i.length;e++){var r=i[e];this.pageRight<=r.outerBounds.right&&(this.pageRight=r.outerBounds.right,this.rightElement=r)}},t.prototype.findLeft=function(t){t.first||t.third?(t.first&&this.findLeft(t.first),t.third&&this.findLeft(t.third)):(t.second&&this.findLeft(t.second),t.fourth&&this.findLeft(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var r=i[e];this.pageLeft>=r.outerBounds.left&&(this.pageLeft=r.outerBounds.left,this.leftElement=r)}},t.prototype.findTop=function(t){t.first||t.second?(t.first&&this.findTop(t.first),t.second&&this.findTop(t.second)):(t.third&&this.findTop(t.third),t.fourth&&this.findTop(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var r=i[e];this.pageTop>=r.outerBounds.top&&(this.pageTop=r.outerBounds.top,this.topElement=r)}},t.prototype.setCurrentNode=function(t){if(this.childNode=t,t){var e=t.outerBounds;this.childLeft=Number(e.left),this.childTop=Number(e.top),this.childRight=Number(e.right),this.childBottom=Number(e.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},t.prototype.getPageBounds=function(t,e){if(this.pageLeft===Number.MAX_VALUE)return new r.a(0,0,0,0);var i=void 0!==t?Math.min(this.pageLeft,0):this.pageLeft,n=void 0!==e?Math.min(this.pageTop,0):this.pageTop;return new r.a(Math.round(i),Math.round(n),Math.round(this.pageRight-i),Math.round(this.pageBottom-n))},t.prototype.getQuad=function(t){return this.quadTable[t.id]},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r=function(){function t(){}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ComplexHierarchicalTree"},t.prototype.doLayout=function(t,e,i,r,o){(new n).doLayout(t,e,i,r,o)},t.prototype.getLayoutNodesCollection=function(t){for(var e,i=[],r=0;r<t.length;r++)e=t[parseInt(r.toString(),10)],e.inEdges.length+e.outEdges.length>0&&!e.parentId&&!e.processId&&i.push(e);return i},t}(),n=function(){function t(){this.nameTable={},this.crossReduction=new a,this.previousEdgeOffset=6,this.previousEdgeDistance=5,this.jettyPositions={},this.rankBottomY=null,this.limitX=null,this.rankTopY=null,this.parallelEdgeSpacing=10,this.minEdgeJetty=12}return t.prototype.createVertex=function(t,e,i,r,n,o){return{value:e,geometry:{x:i,y:r,width:n,height:o},name:e,vertex:!0,inEdges:t.inEdges.slice(),outEdges:t.outEdges.slice()}},t.prototype.getEdges=function(t){var e=[];if(t){for(var i=0;t.inEdges.length>0&&i<t.inEdges.length;i++)e.push(this.nameTable[t.inEdges[parseInt(i.toString(),10)]]);for(var i=0;t.outEdges.length>0&&i<t.outEdges.length;i++)e.push(this.nameTable[t.outEdges[parseInt(i.toString(),10)]])}return e},t.prototype.findRoots=function(t){for(var e=[],i=null,r=-1e5,n=0,o=Object.keys(t);n<o.length;n++){for(var a=o[n],s=t[""+a],h=this.getEdges(s),d=0,l=0,c=0;c<h.length;c++){this.getVisibleTerminal(h[parseInt(c.toString(),10)],!0).name===s.name?d++:l++}0===l&&d>0&&e.push(s);var p=d-l;p>r&&(r=p,i=s)}return 0===e.length&&null!=i&&e.push(i),e},t.prototype.getVisibleTerminal=function(t,e){var i=this.nameTable[t.targetID];e&&(i=this.nameTable[t.sourceID]);for(var r=0;r<this.vertices.length;r++)if(this.vertices[parseInt(r.toString(),10)].name===i.id)return this.vertices[parseInt(r.toString(),10)];return null},t.prototype.traverse=function(t,e,i,r,n,o){if(null!=t){var a=t.name;if(null==o||null!=o[""+a]){null==r[""+a]&&(r[""+a]=t),null!=o&&delete o[""+a];for(var s=this.getEdges(t),h=[],d=0;d<s.length;d++)h[parseInt(d.toString(),10)]=this.getVisibleTerminal(s[parseInt(d.toString(),10)],!0)===t;for(var d=0;d<s.length;d++)if(!e||h[parseInt(d.toString(),10)]){for(var l=this.getVisibleTerminal(s[parseInt(d.toString(),10)],!h[parseInt(d.toString(),10)]),c=1,p=0;p<s.length;p++)if(p!==d){var g=h[parseInt(p.toString(),10)],u=this.getVisibleTerminal(s[parseInt(p.toString(),10)],!g);u===l&&(g?c++:c--)}c>=0&&(r=this.traverse(l,e,s[parseInt(d.toString(),10)],r,n,o))}}else if(null==r[""+a])for(var d=0;d<n.length;d++){var f=n[parseInt(d.toString(),10)];if(null!=f[""+a]){for(var m=0,y=Object.keys(f);m<y.length;m++){var v=y[m];r[""+v]=f[""+v]}return n.splice(d,1),r}}}return r},t.prototype.getModelBounds=function(t){t=t.slice();for(var e=null,i=null,r=0;r<t.length;r++)if(e=t[parseInt(r.toString(),10)].geometry,i){var n=Math.max(i.x+i.width,e.x+e.width),o=Math.max(i.y+i.height,e.y+e.height);i.x=Math.min(i.x,e.x),i.y=Math.min(i.y,e.y),i.width=n-i.x,i.height=o-i.y}else i={x:e.x,y:e.y,width:e.width,height:e.height};return i},t.prototype.doLayout=function(t,e,i,r,n){this.nameTable=e;var a,s=i.enableRouting,h={horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,orientation:i.orientation,marginX:i.margin.left,marginY:i.margin.top,enableLayoutRouting:s};n&&(n.edgeMapper=[]);var d=[];this.vertices=[];for(var l={},c=0;c<t.length;c++){var p=this.createVertex(t[parseInt(c.toString(),10)],t[parseInt(c.toString(),10)].id,0,0,t[parseInt(c.toString(),10)].actualSize.width,t[parseInt(c.toString(),10)].actualSize.height);if(this.vertices.push(p),(t[parseInt(c.toString(),10)].inEdges.length>0||t[parseInt(c.toString(),10)].outEdges.length>0)&&d.push(t[parseInt(c.toString(),10)]),l[p.name]=p,n)for(var g=t[parseInt(c.toString(),10)].outEdges.slice(),u=0;u<g.length;u++){var f=e[g[parseInt(u.toString(),10)]];n.setEdgeMapper({key:f,value:[]})}}for(var m=[],y=this.findRoots(l),c=0;c<y.length;c++){var v={};m.push(v),this.traverse(y[parseInt(c.toString(),10)],!0,null,v,m,l)}for(var b,S={marginX:0,marginY:0},w=[],x=!1,c=0;c<m.length;c++){for(var v=m[parseInt(c.toString(),10)],I=0,P=Object.keys(v);I<P.length;I++){var C=P[I];w.push(v[""+C])}("Linear"===i.arrangement&&c===m.length-1||s)&&(x=!0),a=new o(this,w,y,h),this.cycleStage(a),this.layeringStage(a),n&&"DifferentPoint"===i.connectionPointOrigin||x?(b=this.matrixModel({model:a,matrix:[],rowOffset:[]}),n.arrangeElements(b,i)):"Nonlinear"===i.arrangement&&(this.crossingStage(a),S=this.placementStage(a,S.marginX,S.marginY),w=[])}var z=this.getModelBounds(this.vertices);this.updateMargin(i,h,z,r);for(var c=0;c<this.vertices.length;c++){var O=this.vertices[parseInt(c.toString(),10)];if(O){var T=this.nameTable[O.name];T.offsetX=0,T.offsetY=0;var A=O.geometry.x-(T.offsetX-T.actualSize.width/2)+h.marginX,L=O.geometry.y-(T.offsetY-T.actualSize.height/2)+h.marginY,E=A,B=L;"BottomToTop"===h.orientation?(s&&(O.geometry.y=z.height-L-T.actualSize.height/2),B=z.height-L):"RightToLeft"===h.orientation&&(E=z.width-A),T.offsetX+=E-T.offsetX,T.offsetY+=B-T.offsetY}}if(!x)for(var c=0;c<this.vertices.length;c++)this.isNodeOverLap(this.nameTable[this.vertices[parseInt(c.toString(),10)].name],i);if((n&&"DifferentPoint"===i.connectionPointOrigin||s)&&n.updateLayout(r,z,i,h,d,e),s){for(var M={},D=void 0,k=0;k<b.matrix.length;k++){D=b.matrix[parseInt(k.toString(),10)].value;for(var R=0;R<D.length;R++)for(var _=D[parseInt(R.toString(),10)],j=0;j<_.cells.length;j++){var N=_.cells[parseInt(j.toString(),10)],H=this.getType(N.type);if("internalVertex"===H){var W=N;M[W.id]=W}}}this.updateRankValuess(a);for(var c=0,V=Object.keys(M);c<V.length;c++){var C=V[parseInt(c.toString(),10)];this.setVertexLocationValue(M[""+C],i.orientation,z)}this.localEdgeProcessing(a,M),this.assignRankOffset(a),this.updateEdgeSetXYValue(a);for(var X=this.getValues(a.edgeMapper),c=0;c<X.length;c++){if(X[parseInt(c.toString(),10)].x.length>0)for(var u=0;u<X[parseInt(c.toString(),10)].x.length;u++)"RightToLeft"!==i.orientation&&"LeftToRight"!==i.orientation?X[parseInt(c.toString(),10)].x[parseInt(u.toString(),10)]=X[parseInt(c.toString(),10)].x[parseInt(u.toString(),10)]+h.marginX:(i.orientation,X[parseInt(c.toString(),10)].x[parseInt(u.toString(),10)]=X[parseInt(c.toString(),10)].x[parseInt(u.toString(),10)]+i.verticalSpacing/2);this.setEdgePosition(X[parseInt(c.toString(),10)],a,h)}for(var k=0;k<this.vertices.length;k++){var O=this.vertices[parseInt(k.toString(),10)];O.outEdges.length>1&&this.updateMultiOutEdgesPoints(O)}}},t.prototype.setEdgeXY=function(t,e,i,r){if(t&&e.source.id){for(var n=void 0,o=void 0,a=0;a<t.length;a++)for(var s=0;s<t[parseInt(a.toString(),10)].length;s++)t[parseInt(a.toString(),10)][parseInt(s.toString(),10)].id!==e.target.id&&t[parseInt(a.toString(),10)][parseInt(s.toString(),10)].id!==e.source.id||(t[parseInt(a.toString(),10)][parseInt(s.toString(),10)].id===e.target.id&&void 0===n&&(n=a),t[parseInt(a.toString(),10)][parseInt(s.toString(),10)].id===e.source.id&&void 0===o&&(o=a));for(var h=void 0,d=n;d<=o;d++)void 0===h&&(h=this[d+"_RankOffset"]),void 0!==h&&h<this[d+"_RankOffset"]&&(h=this[d+"_RankOffset"]);void 0===this.edges&&(this.edges={}),this.edges[e.ids[0]]={x:e.x,y:0};var l=this.resetOffsetXValue(h,i/10);e.x[r-e.minRank-1]=l;for(var s=0;s<e.edges.length;s++)e.edges[parseInt(s.toString(),10)].levelSkip=!0}},t.prototype.resetOffsetXValue=function(t,e){for(var i=0,r=Object.keys(this.edges);i<r.length;i++)for(var n=r[parseInt(i.toString(),10)],o=this.edges[""+n].x,a=0;a<o.length;a++){var s=void 0;if(this.edges[""+n].x[parseInt(a.toString(),10)]===t)return s=t+e,s=this.resetOffsetXValue(s,e)}return t},t.prototype.setEdgePosition=function(t,e,i){var r=0;if(101207!==t.temp[0]){void 0===t.maxRank&&(t.maxRank=-1),void 0===t.minRank&&(t.minRank=-1);var n=t.maxRank,o=t.minRank;n===o&&(n=t.source.maxRank,o=t.target.minRank);var a=0,s=this.jettyPositions[t.ids[0]];void 0===t.isReversed?t.isReversed=!1:t.isReversed=!0;var h=t.isReversed?t.target.cell:t.source.cell,d=!1;"TopToBottom"===e.layout.orientation||"LeftToRight"===e.layout.orientation?("TopToBottom"===e.layout.orientation&&(d=!1),"LeftToRight"===e.layout.orientation&&(d=(t.isReversed,!1))):t.isReversed||(d=!0);for(var l=0;l<t.edges.length;l++){var c=t.edges[parseInt(l.toString(),10)],p=this.getVisibleTerminal(c,!0),g=[],u=t.isReversed;if(p!==h&&(u=!u),null!=s){var f=u?2:0,m=u?d?this.rankBottomY[parseInt(o.toString(),10)]:this.rankTopY[parseInt(o.toString(),10)]:d?this.rankTopY[parseInt(n.toString(),10)]:this.rankBottomY[parseInt(n.toString(),10)],y=s[4*a+1+f];u!==d&&(y=-y),"TopToBottom"!==i.orientation&&"BottomToTop"!==i.orientation||(m+=y);var v=s[4*a+f];"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?g.push(this.getPointvalue(v,m+i.marginY)):"LeftToRight"===i.orientation?g.push(this.getPointvalue(m+y,v+i.marginY)):g.push(this.getPointvalue(m,v+i.marginY))}var b=t.x.length-1,S=-1,w=-1,x=t.maxRank-1;u&&(b=0,S=t.x.length,w=1,x=t.minRank+1);for(var I=b;t.maxRank!==t.minRank&&I!==S;I+=w){var P=t.x[parseInt(I.toString(),10)]+r,C=(this.rankTopY[parseInt(x.toString(),10)]+this.rankBottomY[x+1])/2,z=(this.rankTopY[x-1]+this.rankBottomY[parseInt(x.toString(),10)])/2;if(u){var O=C;C=z,z=O}"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?(g.push(this.getPointvalue(P,C+i.marginY)),g.push(this.getPointvalue(P,z+i.marginY))):(g.push(this.getPointvalue(C,P+i.marginY)),g.push(this.getPointvalue(z,P+i.marginY))),this.limitX=Math.max(this.limitX,P),x+=w}if(null!=s){var f=u?2:0,T=u?d?this.rankTopY[parseInt(n.toString(),10)]:this.rankBottomY[parseInt(n.toString(),10)]:d?this.rankBottomY[parseInt(o.toString(),10)]:this.rankTopY[parseInt(o.toString(),10)],y=s[4*a+3-f];u!==d&&(y=-y);var m=T-y,v=s[4*a+2-f];"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?g.push(this.getPointvalue(v,m+i.marginY)):g.push(this.getPointvalue(m,v+i.marginY))}this.setEdgePoints(c,g,e),r=0===r?this.parallelEdgeSpacing:r>0?-r:-r+this.parallelEdgeSpacing,a++}t.temp[0]=101207}},t.prototype.getPointvalue=function(t,e){return{x:Number(t)||0,y:Number(e)||0}},t.prototype.updateEdgeSetXYValue=function(t){if(t.layout.enableLayoutRouting){var e=!1;"LeftToRight"!==t.layout.orientation&&"RightToLeft"!==t.layout.orientation||(e=!0);for(var i=0;i<t.ranks.length;i++)for(var r=t.ranks[parseInt(i.toString(),10)],n=0;n<r.length;n++){var o=r[parseInt(n.toString(),10)];if(o.edges&&o.edges.length>0){var a=t.layout.horizontalSpacing>0?t.layout.horizontalSpacing/2:15,s=!0;o.minRank!==i-1&&o.maxRank!==i-1&&(s=!1),s&&this.setXY(o,i,void 0,!!e,t.ranks,a)}}}},t.prototype.getPreviousLayerConnectedCells=function(t,e){if(null==e.previousLayerConnectedCells){e.previousLayerConnectedCells=[],e.previousLayerConnectedCells[0]=[];for(var i=0;i<e.connectsAsSource.length;i++){var r=e.connectsAsSource[parseInt(i.toString(),10)];-1===r.minRank||r.minRank===t-1?e.previousLayerConnectedCells[0].push(r.target):e.previousLayerConnectedCells[0].push(r)}}return e.previousLayerConnectedCells[0]},t.prototype.compare=function(t,e){if(null!=t&&null!=e){if(e.weightedValue>t.weightedValue)return-1;if(e.weightedValue<t.weightedValue)return 1}return 0},t.prototype.localEdgeProcessing=function(t,e){for(var i=0;i<t.ranks.length;i++)for(var r=t.ranks[parseInt(i.toString(),10)],n=0;n<r.length;n++){var o=r[parseInt(n.toString(),10)];if(this.crossReduction.isVertex(o))for(var a=this.getPreviousLayerConnectedCells(i,o),s=i-1,h=0;h<2;h++){if(s>-1&&s<t.ranks.length&&null!=a&&a.length>0){for(var d=[],l=0;l<a.length;l++){var c=this.weightedCellSorter(a[parseInt(l.toString(),10)],this.getX(s,a[parseInt(l.toString(),10)]));d.push(c)}d.sort(this.compare),o.width=e[o.id].cell.geometry.width,o.height=e[o.id].cell.geometry.height;var p=void 0;"TopToBottom"===t.layout.orientation||"BottomToTop"===t.layout.orientation?(o.x[0]=e[o.id].cell.geometry.x+e[o.id].cell.geometry.width/2,p=o.x[0]-o.width/2+e[o.id].cell.geometry.height/2):(o.x[0]=e[o.id].cell.geometry.y,p=o.x[0]);for(var g=p+o.width,u=0,f=0,m=[],l=0;l<d.length;l++){var y=d[parseInt(l.toString(),10)].cell,v=void 0;if(this.crossReduction.isVertex(y)){v=0===h?o.connectsAsSource:o.connectsAsTarget;for(var b=0;b<v.length;b++)v[parseInt(b.toString(),10)].source!==y&&v[parseInt(b.toString(),10)].target!==y||(u+=v[parseInt(b.toString(),10)].edges.length,f++,m.push(v[parseInt(b.toString(),10)]))}else u+=y.edges.length,f++,m.push(y)}var S=(u+1)*this.previousEdgeDistance;o.width>S+2*this.previousEdgeDistance&&(p+=this.previousEdgeDistance,g-=this.previousEdgeDistance);for(var w=g-p,x=w/u,I=p+x/2,P=this.minEdgeJetty-this.previousEdgeOffset,C=0,l=0;l<m.length;l++){var z=m[parseInt(l.toString(),10)].edges.length;void 0===this.jettyPositions&&(this.jettyPositions={});var O=this.jettyPositions[m[parseInt(l.toString(),10)].ids[0]];null==O&&(O=[],this.jettyPositions[m[parseInt(l.toString(),10)].ids[0]]=O),l<u/2?P+=this.previousEdgeOffset:l>u/2&&(P-=this.previousEdgeOffset);for(var T=0;T<z;T++)O[4*T+2*h]=I,I+=x,O[4*T+2*h+1]=P;C=Math.max(C,P)}}a=this.getNextLayerConnectedCells(i,o),s=i+1}}},t.prototype.updateMultiOutEdgesPoints=function(t){for(var e=0;e<t.outEdges.length/2;e++){var i=this.nameTable[t.outEdges[parseInt(e.toString(),10)]],r=this.nameTable[t.outEdges[t.outEdges.length-(e+1)]];r.geometry.points[0].y=i.geometry.points[0].y}},t.prototype.getNextLayerConnectedCells=function(t,e){if(null==e.nextLayerConnectedCells){e.nextLayerConnectedCells=[],e.nextLayerConnectedCells[0]=[];for(var i=0;i<e.connectsAsTarget.length;i++){var r=e.connectsAsTarget[parseInt(i.toString(),10)];-1===r.maxRank||r.maxRank===t+1?e.nextLayerConnectedCells[0].push(r.source):e.nextLayerConnectedCells[0].push(r)}}return e.nextLayerConnectedCells[0]},t.prototype.getX=function(t,e){return this.crossReduction.isVertex(e)?e.x[0]:this.crossReduction.isVertex(e)?0:e.x[t-e.minRank-1]||e.temp[t-e.minRank-1]},t.prototype.getGeometry=function(t){return t.geometry},t.prototype.setEdgePoints=function(t,e,i){if(null!=t){var r=this.getGeometry(t);if(null!=e)for(var n=0;n<e.length;n++)e[n].x=e[n].x,e[n].y=e[n].y;r.points=e,t.geometry=r}},t.prototype.assignRankOffset=function(t){if(t)for(var e=0;e<t.ranks.length;e++)this.rankCoordinatesAssigment(e,t)},t.prototype.rankCoordinatesAssigment=function(t,e){for(var i,r=e.ranks[parseInt(t.toString(),10)],n=e.layout.horizontalSpacing,o=0;o<r.length;o++)void 0===this[t+"_RankOffset"]&&(this[t+"_RankOffset"]=0),i=r[parseInt(o.toString(),10)].x[0],this[t+"_RankOffset"]<i&&(this[t+"_RankOffset"]=i+r[parseInt(o.toString(),10)].width/2+n)},t.prototype.getType=function(t){return"internalVertex"===t?"internalVertex":"internalEdge"},t.prototype.updateRankValuess=function(t){this.rankTopY=[],this.rankBottomY=[];for(var e=0;e<t.ranks.length;e++)this.rankTopY[parseInt(e.toString(),10)]=Number.MAX_VALUE,this.rankBottomY[parseInt(e.toString(),10)]=-Number.MAX_VALUE},t.prototype.setVertexLocationValue=function(t,e,i){var r,n=t.cell.geometry;"TopToBottom"===e||"BottomToTop"===e?(n.x,r=n.y):(n.y,r=n.x),"RightToLeft"===e?(n.y,r=i.width-n.x-n.height,this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],r),this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],r+n.height)):(this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],r),this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],r+n.height))},t.prototype.matrixModel=function(t){return t.model=t.model,t.matrix=t.matrix||[],t.rowOffset=t.rowOffset||[],t},t.prototype.calculateRectValue=function(t){var e={x:0,y:0,right:0,bottom:0,height:0,width:0};return e.x=t.offsetX-t.actualSize.width/2,e.right=t.offsetX+t.actualSize.width/2,e.y=t.offsetY-t.actualSize.height/2,e.bottom=t.offsetY+t.actualSize.height/2,e},t.prototype.isNodeOverLap=function(t,e){for(var i={x:0,y:0,right:0,bottom:0,height:0,width:0},r=0;r<this.vertices.length;r++){var n={x:0,y:0,width:0,height:0},o=this.nameTable[this.vertices[parseInt(r.toString(),10)].value];t.id!==o.id&&0!==o.offsetX&&0!==o.offsetY&&(i=this.calculateRectValue(t),n=this.calculateRectValue(o),this.isIntersect(n,i,e)&&("TopToBottom"===e.orientation||"BottomToTop"===e.orientation?t.offsetX+=e.horizontalSpacing:t.offsetY+=e.verticalSpacing,this.isNodeOverLap(t,e)))}},t.prototype.isIntersect=function(t,e,i){return!(Math.floor(t.right+i.horizontalSpacing)<=Math.floor(e.x)||Math.floor(t.x-i.horizontalSpacing)>=Math.floor(e.right)||Math.floor(t.y-i.verticalSpacing)>=Math.floor(e.bottom)||Math.floor(t.bottom+i.verticalSpacing)<=Math.floor(e.y))},t.prototype.updateMargin=function(t,e,i,r){var n={x:0,y:0,width:r.x,height:r.y},o={x:i.x,y:i.y,right:i.x+i.width,bottom:i.y+i.height},a=t.bounds?t.bounds:n;if("TopToBottom"===e.orientation||"BottomToTop"===e.orientation){switch(t.horizontalAlignment){case"Auto":case"Left":e.marginX=a.x-o.x+t.margin.left;break;case"Right":e.marginX=a.x+a.width-t.margin.right-o.right;break;case"Center":e.marginX=a.x+a.width/2-(o.x+o.right)/2}switch(t.verticalAlignment){case"Top":var s=a.y+t.margin.top;e.marginY="TopToBottom"===e.orientation?s:-s;break;case"Bottom":var h=a.y+a.height-t.margin.bottom;e.marginY="TopToBottom"===e.orientation?h-o.bottom:-(h-o.bottom);break;case"Auto":case"Center":var d=a.y+a.height/2;e.marginY="TopToBottom"===e.orientation?d-(o.y+o.bottom)/2:(o.y+o.bottom)/2-d}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var l=a.x+t.margin.left;e.marginX="LeftToRight"===e.orientation?l:-l;break;case"Right":var c=void 0;c=a.x+a.width-t.margin.right,e.marginX="LeftToRight"===e.orientation?c-o.right:o.right-c;break;case"Center":var d=void 0;d=a.width/2+a.x,e.marginX="LeftToRight"===e.orientation?d-(o.y+o.bottom)/2:(o.x+o.right)/2-d}switch(t.verticalAlignment){case"Top":e.marginY=a.y+t.margin.top-o.x;break;case"Auto":case"Center":e.marginY=a.y+a.height/2-(o.y+o.bottom)/2;break;case"Bottom":e.marginY=a.y+a.height-t.margin.bottom-o.bottom}}},t.prototype.placementStage=function(t,e,i){var r=this.coordinateAssignment(e,i,parent,t);return r.model=t,r.widestRankValue=null,this.placementStageExecute(r),{marginX:r.marginX+t.layout.horizontalSpacing,marginY:r.marginY+t.layout.verticalSpacing}},t.prototype.coordinateAssignment=function(t,e,i,r){var n={};return"TopToBottom"===r.layout.orientation||"BottomToTop"===r.layout.orientation?(n.horizontalSpacing=r.layout.horizontalSpacing,n.verticalSpacing=r.layout.verticalSpacing):(n.horizontalSpacing=r.layout.verticalSpacing,n.verticalSpacing=r.layout.horizontalSpacing),n.orientation="north",n.marginX=n.marginX=t,n.marginY=n.marginY=e,n},t.prototype.calculateWidestRank=function(t,e,i){var r=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(r=!0);var n=-t.verticalSpacing,o=0;t.rankSizes=[],t.rankOffset=[];for(var a=i.maxRank;a>=0;a--){for(var s=0,h=i.ranks[parseInt(a.toString(),10)],d=r?t.marginY:t.marginX,l=0;l<h.length;l++){var c=h[parseInt(l.toString(),10)];if(this.crossReduction.isVertex(c)){var p=c;if(p.cell&&(p.cell.inEdges||p.cell.outEdges)){var g=this.nameTable[p.cell.name];p.width=g.actualSize.width,p.height=g.actualSize.height,s=Math.max(s,r?p.width:p.height)}}else if(c){var u=c,f=1;null!=u.edges&&(f=u.edges.length),c.width=10*(f-1)}r&&(c.height||(c.height=0)),d+=(r?c.height:c.width)/2,this.setXY(c,a,d,!!r),this.setTempVariable(c,a,d),d+=(r?c.height:c.width)/2+t.horizontalSpacing,d>t.widestRankValue&&(t.widestRankValue=d,t.widestRank=a),t.rankSizes[parseInt(a.toString(),10)]=d}t.rankOffset[parseInt(a.toString(),10)]=n;var m=s/2+o/2+t.verticalSpacing;o=s,"north"===t.orientation||"west"===t.orientation?n+=m:n-=m;for(var l=0;l<h.length;l++){var y=h[parseInt(l.toString(),10)];this.setXY(y,a,n,!r)}}},t.prototype.setTempVariable=function(t,e,i){this.crossReduction.isVertex(t)?t.temp[0]=i:t.temp[e-t.minRank-1]=i},t.prototype.setXY=function(t,e,i,r,n,o){t&&t.cell?t.cell.inEdges||t.cell.outEdges?r?t.y[0]=i:t.x[0]=i:r?t.y[e-t.minRank-1]=i:t.x[e-t.minRank-1]=i:this.setEdgeXY(n,t,o,e)},t.prototype.rankCoordinates=function(t,e,i,r){var n=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(n=!0);for(var o=r.ranks[parseInt(e.toString(),10)],a=0,s=(n?t.marginY:t.marginX)+(t.widestRankValue-t.rankSizes[parseInt(e.toString(),10)])/2,h=0;h<o.length;h++){var d=o[parseInt(h.toString(),10)];if(this.crossReduction.isVertex(d)){var l=this.nameTable[d.cell.name];d.width=l.actualSize.width,d.height=l.actualSize.height,a=Math.max(a,d.height)}else{var c=d,p=1;null!=c.edges&&(p=c.edges.length),n?d.height=10*(p-1):d.width=10*(p-1)}var g=(n?d.height:d.width)/2;s+=g,this.setXY(d,e,s,!!n),this.setTempVariable(d,e,s),s+=g+t.horizontalSpacing}},t.prototype.initialCoords=function(t,e,i){this.calculateWidestRank(t,e,i);for(var r=t.widestRank;r>=0;r--)r<i.maxRank&&this.rankCoordinates(t,r,e,i);for(var r=t.widestRank+1;r<=i.maxRank;r++)r>0&&this.rankCoordinates(t,r,e,i)},t.prototype.isAncestor=function(t,e){if(null!=e&&null!=t.hashCode&&null!=e.hashCode&&t.hashCode.length<e.hashCode.length){if(t.hashCode===e.hashCode)return!0;if(null==t.hashCode||null==t.hashCode)return!1;for(var i=0;i<t.hashCode.length;i++)if(t.hashCode[parseInt(i.toString(),10)]!==e.hashCode[parseInt(i.toString(),10)])return!1;return!0}return!1},t.prototype.weightedCellSorter=function(t,e){var i={};return i.cell=t||null,i.weightedValue=e||0,i.visited=!1,i.rankIndex=null,i},t.prototype.minNode=function(t,e){for(var i=[],r={map:{}},n=[],o=0;o<=e.maxRank;o++){n[parseInt(o.toString(),10)]=e.ranks[parseInt(o.toString(),10)];for(var a=0;a<n[parseInt(o.toString(),10)].length;a++){var s=n[parseInt(o.toString(),10)][parseInt(a.toString(),10)],h=this.weightedCellSorter(s,o);h.rankIndex=a,h.visited=!0,i.push(h),e.setDictionaryForSorter(r,s,h,!0)}}for(var d=10*i.length,l=0;i.length>0&&l<=d;){var c=i.shift(),p=c.cell,g=c.weightedValue,u=c.rankIndex,f=this.crossReduction.getConnectedCellsOnLayer(p,g),m=this.crossReduction.getConnectedCellsOnLayer(p,g,!0),y=f.length,v=m.length,b=this.medianXValue(t,f,g+1),S=this.medianXValue(t,m,g-1),w=y+v,x=this.crossReduction.getTempVariable(p,g),I=x;w>0&&(I=(b*y+S*v)/w),1===y&&1===v?I=S*v/v:1===y&&(I=b*y/y);var P=!1,C=void 0;if(I<x-1)if(0===u)C=I,P=!0;else{var z=n[parseInt(g.toString(),10)][u-1],O=this.crossReduction.getTempVariable(z,g);O=O+z.width/2+t.intraCellSpacing+p.width/2,O<I?(C=I,P=!0):O<this.crossReduction.getTempVariable(p,g)-1&&(C=O,P=!0)}else if(I>x+1){var T=n[parseInt(g.toString(),10)].length;if(u===T-1)C=I,P=!0;else{var A=n[parseInt(g.toString(),10)][u+1],L=this.crossReduction.getTempVariable(A,g);L=L-A.width/2-t.intraCellSpacing-p.width/2,L>I?(C=I,P=!0):L>this.crossReduction.getTempVariable(p,g)+1&&(C=L,P=!0)}}P&&(this.setTempVariable(p,g,C),this.updateNodeList(i,r,f,e),this.updateNodeList(i,r,m,e)),this.crossReduction.isVertex(c.cell)&&(c.visited=!1),l++}},t.prototype.updateNodeList=function(t,e,i,r){for(var n=0;n<i.length;n++){var o=i[parseInt(n.toString(),10)],a=r.getDictionaryForSorter(e,o);null!=a&&!1===a.visited&&(a.visited=!0,t.push(a))}},t.prototype.medianXValue=function(t,e,i){if(0===e.length)return 0;for(var r=[],n=0;n<e.length;n++)r[parseInt(n.toString(),10)]=this.crossReduction.getTempVariable(e[parseInt(n.toString(),10)],i);if(r.sort(function(t,e){return t-e}),e.length%2==1)return r[Math.floor(e.length/2)];var o=e.length/2;return(r[o-1]+r[parseInt(o.toString(),10)])/2},t.prototype.placementStageExecute=function(t){var e=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(e=!0),t.jettyPositions={};var i=t.model;e?t.currentYDelta=0:t.currentXDelta=0,this.initialCoords(t,{model:i},i),this.minNode(t,i);var r=1e8;t.maxIterations||(t.maxIterations=8);for(var n=0;n<t.maxIterations;n++){if((e?t.currentYDelta:t.currentXDelta)<r){for(var o=0;o<i.ranks.length;o++)for(var a=i.ranks[parseInt(o.toString(),10)],s=0;s<a.length;s++){var h=a[parseInt(s.toString(),10)];this.setXY(h,o,this.crossReduction.getTempVariable(h,o),!!e)}r=e?t.currentYDelta:t.currentXDelta}e?t.currentYDelta=0:t.currentXDelta=0}this.setCellLocations(t,i)},t.prototype.setCellLocations=function(t,e){for(var i=this.getValues(e.vertexMapper),r=0;r<i.length;r++)this.setVertexLocation(t,i[parseInt(r.toString(),10)])},t.prototype.garphModelsetVertexLocation=function(t,e,i,r){var n=e.geometry,o=null;return null!=n&&(o={x:i,y:r,width:n.width,height:n.height},n.x===i&&n.y===r||(e.geometry=o)),o},t.prototype.setVertexLocation=function(t,e){var i=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(i=!0);var r=e.cell,n=e.x[0]-e.width/2,o=e.y[0]-e.height/2;this.garphModelsetVertexLocation(t,r,n,o),i?(t.marginY||(t.marginY=0),t.marginY=Math.max(t.marginY,o+e.height)):(t.marginX||(t.marginX=0),t.marginX=Math.max(t.marginX,n+e.width))},t.prototype.getValues=function(t){var e=[];if(t.map)for(var i=0,r=Object.keys(t.map);i<r.length;i++){var n=r[i];e.push(t.map[""+n])}return e},t.prototype.crossingStage=function(t){this.crossReduction.execute(t)},t.prototype.layeringStage=function(t){this.initialRank(t),this.fixRanks(t)},t.prototype.initialRank=function(t){for(var e=t.startNodes,i=t.getDictionaryValues(t.vertexMapper),r=e.slice();e.length>0;){for(var n=e[0],o=n.connectsAsTarget,a=n.connectsAsSource,s=!0,h=1e8,d=0;d<o.length;d++){var l=o[parseInt(d.toString(),10)];if(5270620!==l.temp[0]){s=!1;break}var c=l.source;h=Math.min(h,c.temp[0]-1)}if(s){if(n.temp[0]=h,t.maxRank||(t.maxRank=1e8),t.maxRank=Math.min(t.maxRank,h),null!=a)for(var d=0;d<a.length;d++){var l=a[parseInt(d.toString(),10)];l.temp[0]=5270620;var c=l.target;-1===c.temp[0]&&(e.push(c),c.temp[0]=-2)}e.shift()}else{var p=e.shift();if(e.push(n),p===n&&1===e.length)break}}for(var d=0;d<i.length;d++)i[parseInt(d.toString(),10)].temp[0]-=t.maxRank;for(var d=0;d<r.length;d++)for(var n=r[parseInt(d.toString(),10)],g=0,o=n.connectsAsSource,u=0;u<o.length;u++){var l=o[parseInt(u.toString(),10)],c=l.target;n.temp[0]=Math.max(g,c.temp[0]+1),g=n.temp[0]}t.maxRank=1e8-t.maxRank},t.prototype.fixRanks=function(t){t.fixRanks()},t.prototype.cycleStage=function(t){var e={};t.startNodes=[];for(var i=t.getDictionaryValues(t.vertexMapper),r=[],n=0;n<i.length;n++)i[parseInt(n.toString(),10)].temp[0]=-1,r[i[parseInt(n.toString(),10)].id]=i[parseInt(n.toString(),10)];var o=null;if(null!=t.roots){var a=t.roots;o=[];for(var n=0;n<a.length;n++)o[parseInt(n.toString(),10)]=t.getDictionary(t.vertexMapper,a[parseInt(n.toString(),10)]),null!=o[parseInt(n.toString(),10)]&&t.startNodes.push(o[parseInt(n.toString(),10)])}t.visit("removeParentConnection",o,!0,null,{seenNodes:e,unseenNodes:r});var s=t.clone(e,null,!0);t.visit("removeNodeConnection",r,!0,s,{seenNodes:e,unseenNodes:r})},t.prototype.remove=function(t,e){var i=e.indexOf(t);return-1!==i&&e.splice(i,1),t},t.prototype.invert=function(t,e){var i=t.source;t.source=t.target,t.target=i,t.isReversed=!t.isReversed},t.prototype.getEdgesBetween=function(t,e,i){i=null!=i&&i;for(var r=this.getEdges(t),n=[],o=0;o<r.length;o++){var a=this.getVisibleTerminal(r[parseInt(o.toString(),10)],!0),s=this.getVisibleTerminal(r[parseInt(o.toString(),10)],!1);(a===t&&s===e||!i&&a===e&&s===t)&&n.push(r[parseInt(o.toString(),10)])}return n},t}(),o=function(){function t(t,e,i,r){this.multiObjectIdentityCounter=0,this.dfsCount=0,this.hierarchicalUtil=new n,this.roots=i,this.vertexMapper={map:{}};var o=[];this.layout=r,this.maxRank=1e8,this.edgeMapper={map:{}},this.hierarchicalLayout=t,this.createInternalCells(t,e,o,r);for(var a=0;a<e.length;a++){for(var s=o[parseInt(a.toString(),10)].connectsAsSource,h=0;h<s.length;h++){var d=s[parseInt(h.toString(),10)],l=d.edges;if(null!=l&&l.length>0){var c=l[0],p=t.getVisibleTerminal(c,!1),g=this.getDictionary(this.vertexMapper,p);o[parseInt(a.toString(),10)]===g&&(p=t.getVisibleTerminal(c,!0),g=this.getDictionary(this.vertexMapper,p)),null!=g&&o[parseInt(a.toString(),10)]!==g&&(d.target=g,0===g.connectsAsTarget.length&&(g.connectsAsTarget=[]),g.connectsAsTarget.indexOf(d)<0&&g.connectsAsTarget.push(d))}}o[parseInt(a.toString(),10)].temp[0]=1}}return t.prototype.resetEdge=function(t){var e={x:0,y:0,width:0,height:0,relative:!0},i=e;return t.geometry=i,t},t.prototype.createInternalCells=function(t,e,i,r){for(var n=0;n<e.length;n++){i[parseInt(n.toString(),10)]={x:[],y:[],temp:[],cell:e[parseInt(n.toString(),10)],id:e[parseInt(n.toString(),10)].name,connectsAsTarget:[],connectsAsSource:[],type:"internalVertex"},this.setDictionary(this.vertexMapper,e[parseInt(n.toString(),10)],i[parseInt(n.toString(),10)]);var o=t.getEdges(e[parseInt(n.toString(),10)]);i[parseInt(n.toString(),10)].connectsAsSource=[];for(var a=0;a<o.length;a++){var s=t.getVisibleTerminal(o[parseInt(a.toString(),10)],!1);if(s!==e[parseInt(n.toString(),10)]){var h=t.getEdgesBetween(e[parseInt(n.toString(),10)],s,!1),d=t.getEdgesBetween(e[parseInt(n.toString(),10)],s,!0);if(null!=h&&h.length>0&&2*d.length>=h.length){var l={x:[],y:[],temp:[],edges:h,ids:[]};if(r.enableLayoutRouting)for(var c=0;c<h.length;c++){var p=h[parseInt(c.toString(),10)];this.setDictionary(this.edgeMapper,void 0,l,p.id),this.resetEdge(p)}l.source=i[parseInt(n.toString(),10)];for(var g=0;g<h.length;g++)l.ids.push(h[parseInt(g.toString(),10)].id);l.source=i[parseInt(n.toString(),10)],i[parseInt(n.toString(),10)].connectsAsSource||(i[parseInt(n.toString(),10)].connectsAsSource=[]),i[parseInt(n.toString(),10)].connectsAsSource.indexOf(l)<0&&i[parseInt(n.toString(),10)].connectsAsSource.push(l)}}}i[parseInt(n.toString(),10)].temp[0]=0}},t.prototype.fixRanks=function(){var t=[];this.ranks=[];for(var e=0;e<this.maxRank+1;e++)t[parseInt(e.toString(),10)]=[],this.ranks[parseInt(e.toString(),10)]=t[parseInt(e.toString(),10)];var i=null;if(null!=this.roots){var r=this.roots;i=[];for(var e=0;e<r.length;e++){var n=r[parseInt(e.toString(),10)],o=this.getDictionary(this.vertexMapper,n);i[parseInt(e.toString(),10)]=o}}this.visit("updateMinMaxRank",i,!1,null,{seenNodes:null,unseenNodes:null,rankList:t})},t.prototype.updateMinMaxRank=function(t,e,i){var r=i.parent,n=i.root,o=i.edge,a=i.rankList;if(n.maxRank||0===n.maxRank||(n.maxRank=-1),n.minRank||0===n.minRank||(n.minRank=-1),0===e&&n.maxRank<0&&n.minRank<0&&(a[n.temp[0]].push(n),n.maxRank=n.temp[0],n.minRank=n.temp[0],n.temp[0]=a[n.maxRank].length-1),null!=r&&null!=o){if(r.maxRank-n.maxRank>1){o.maxRank=r.maxRank,o.minRank=n.maxRank,o.temp=[],o.x=[],o.y=[];for(var s=o.minRank+1;s<o.maxRank;s++)a[parseInt(s.toString(),10)].push(o),this.hierarchicalUtil.setTempVariable(o,s,a[parseInt(s.toString(),10)].length-1)}}},t.prototype.setDictionary=function(t,e,i,r){if(r){var n=t.map[""+r];return t.map[""+r]=i,n}var o=e.name,n=t.map[""+o];return t.map[""+o]=i,n},t.prototype.setDictionaryForSorter=function(t,e,i,r){var n=e.id,o=t.map[""+n];return t.map[""+n]=i,o},t.prototype.getDictionary=function(t,e){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=e.name;return i?t.map[""+i]:e.layoutObjectId?t.map[e.layoutObjectId]:(e.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,e.layoutObjectId)},t.prototype.getDictionaryForSorter=function(t,e){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=e.id;return i?t.map[""+i]:e.layoutObjectId?t.map[e.layoutObjectId]:(e.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,e.layoutObjectId)},t.prototype.getDictionaryValues=function(t){for(var e=[],i=0,r=Object.keys(t.map);i<r.length;i++){var n=r[i];e.push(t.map[""+n])}return e},t.prototype.visit=function(t,e,i,r,n){if(null!=e){for(var o=0;o<e.length;o++){var a=e[parseInt(o.toString(),10)];null!=a&&(null==r&&(r=new Object),n.parent=null,n.root=a,n.edge=null,i?(a.hashCode=[],a.hashCode[0]=this.dfsCount,a.hashCode[1]=o,this.extendedDfs(t,r,o,0,n)):this.depthFirstSearch(t,r,0,n))}this.dfsCount++}},t.prototype.depthFirstSearch=function(t,e,i,r){var n=r.root;if(null!=n){var o=n.id;if(null==e[""+o]){e[""+o]=n,this.updateConnectionRank(t,i,0,r);for(var a=n.connectsAsSource.slice(),s=0;s<a.length;s++){var h=a[parseInt(s.toString(),10)],d=h.target;r.parent=n,r.root=d,r.edge=h,this.depthFirstSearch(t,e,i+1,r)}}else this.updateConnectionRank(t,i,1,r)}},t.prototype.updateConnectionRank=function(t,e,i,r){var n=r.parent,o=r.root,a=r.edge;if("removeParentConnection"===t||"removeNodeConnection"===t){var s="removeNodeConnection"===t;this.removeConnectionEdge(n,o,a,e,r,s)}"updateMinMaxRank"===t&&this.updateMinMaxRank(e,i,r)},t.prototype.removeConnectionEdge=function(t,e,i,r,n,o){var a=n.seenNodes,s=n.unseenNodes;this.hierarchicalUtil.isAncestor(e,t)&&(this.hierarchicalUtil.invert(i,0),this.hierarchicalUtil.remove(i,t.connectsAsSource),o?(e.connectsAsSource.push(i),t.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,e.connectsAsTarget)):(t.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,e.connectsAsTarget),e.connectsAsSource.push(i))),a[e.id]=e,delete s[e.id]},t.prototype.extendedDfs=function(t,e,i,r,n){var o=n.parent,a=n.root;n.edge;if(null!=a){if(null!=o&&(null==a.hashCode||a.hashCode[0]!==o.hashCode[0])){var s=o.hashCode.length+1;a.hashCode=o.hashCode.slice(),a.hashCode[s-1]=i}var h=a.id;if(null==e[""+h]){e[""+h]=a,this.updateConnectionRank(t,r,0,n);for(var d=a.connectsAsSource.slice(),l=0;l<d.length;l++){var c=d[parseInt(l.toString(),10)],p=c.target;n.parent=a,n.root=p,n.edge=c,this.extendedDfs(t,e,l,r+1,n)}}else this.updateConnectionRank(t,r,1,n)}},t.prototype.clone=function(t,e,i){if(i=null!=i&&i,null!=t&&"function"==typeof t.constructor){for(var r=t.constructor(),n=0,o=Object.keys(t);n<o.length;n++){var a=o[n];"layoutObjectId"!==a&&(null==e||e.indexOf(a)<0)&&(i||"object"!=typeof t[""+a])&&(r[""+a]=t[""+a])}return r}return null},t}(),a=function(){function t(){}return t.prototype.calculateCrossings=function(t){for(var e=t.ranks.length,i=0,r=1;r<e;r++)i+=this.calculateRankCrossing(r,t);return i},t.prototype.getTempVariable=function(t,e){return t?this.isVertex(t)?t.temp[0]:t.temp[e-t.minRank-1]:0},t.prototype.calculateRankCrossing=function(t,e){for(var i=0,r=e.ranks[parseInt(t.toString(),10)],n=e.ranks[t-1],o=[],a=0;a<r.length;a++){for(var s=r[parseInt(a.toString(),10)],h=this.getTempVariable(s,t),d=this.getConnectedCellsOnLayer(s,t,!0),l=[],c=0;c<d.length;c++){var p=d[parseInt(c.toString(),10)],g=this.getTempVariable(p,t-1);l.push(g)}l.sort(function(t,e){return t-e}),o[parseInt(h.toString(),10)]=l}for(var u=[],a=0;a<o.length;a++)u=u.concat(o[parseInt(a.toString(),10)]);for(var f=1;f<n.length;)f<<=1;var m=2*f-1;f-=1;for(var y=[],a=0;a<m;++a)y[parseInt(a.toString(),10)]=0;for(var a=0;a<u.length;a++){var v=u[parseInt(a.toString(),10)],b=v+f;for(++y[parseInt(b.toString(),10)];b>0;)b%2&&(i+=y[b+1]),b=b-1>>1,++y[parseInt(b.toString(),10)]}return i},t.prototype.execute=function(t){this.nestedBestRanks=[];for(var e=0;e<t.ranks.length;e++)this.nestedBestRanks[parseInt(e.toString(),10)]=t.ranks[parseInt(e.toString(),10)].slice();for(var i=0,r=this.calculateCrossings(t),e=0;e<24&&i<2;e++){this.weightedMedian(e,t);var n=this.calculateCrossings(t);if(n<r){r=n,i=0;for(var o=0;o<this.nestedBestRanks.length;o++)for(var a=t.ranks[parseInt(o.toString(),10)],s=0;s<a.length;s++){var h=a[parseInt(s.toString(),10)],d=this.nestedBestRanks[parseInt(o.toString(),10)][h.temp[0]],l=!0;h.edges&&d&&!d.edges&&(l=!1),d&&l&&(this.nestedBestRanks[parseInt(o.toString(),10)][h.temp[0]]=h)}}else{i++;for(var o=0;o<this.nestedBestRanks.length;o++)for(var a=t.ranks[parseInt(o.toString(),10)],s=0;s<a.length;s++){var h=a[parseInt(s.toString(),10)];this.setTempVariable(h,o,s)}}if(0===r)break}for(var c=[],p=[],e=0;e<t.maxRank+1;e++)p[parseInt(e.toString(),10)]=[],c[parseInt(e.toString(),10)]=p[parseInt(e.toString(),10)];for(var e=0;e<this.nestedBestRanks.length;e++)for(var o=0;o<this.nestedBestRanks[parseInt(e.toString(),10)].length;o++)p[parseInt(e.toString(),10)].push(this.nestedBestRanks[parseInt(e.toString(),10)][parseInt(o.toString(),10)]);t.ranks=c},t.prototype.isVertex=function(t){return!(!t||!t.cell||!t.cell.inEdges&&!t.cell.outEdges)},t.prototype.weightedMedian=function(t,e){var i=t%2==0;if(i)for(var r=e.maxRank-1;r>=0;r--)this.medianRank(r,i);else for(var r=1;r<e.maxRank;r++)this.medianRank(r,i)},t.prototype.getConnectedCellsOnLayer=function(t,e,i){void 0===i&&(i=!1);var r="nextLayerConnectedCells",n="connectsAsTarget";if(i&&(r="previousLayerConnectedCells",n="connectsAsSource"),t){if(this.isVertex(t)){if(null==t[""+r]){t[""+r]=[],t[""+r][0]=[];for(var o=0;o<t[""+n].length;o++){var a=t[""+n][parseInt(o.toString(),10)];void 0===a.maxRank&&(a.maxRank=-1),-1===a.maxRank||(i?a.minRank===e-1:a.maxRank===e+1)?t[""+r][0].push(i?a.target:a.source):t[""+r][0].push(a)}}return t[""+r][0]}if(null==t[""+r]){t[""+r]=[];for(var o=0;o<t.temp.length;o++)t[""+r][parseInt(o.toString(),10)]=[],o===(i?0:t.temp.length-1)?t[""+r][parseInt(o.toString(),10)].push(i?t.target:t.source):t[""+r][parseInt(o.toString(),10)].push(t)}return t[""+r][e-t.minRank-1]}return null},t.prototype.medianValue=function(t,e){for(var i=[],r=0,n=0;n<t.length;n++){var o=t[parseInt(n.toString(),10)];i[r++]=this.getTempVariable(o,e)}if(i.sort(function(t,e){return t-e}),r%2==1)return i[Math.floor(r/2)];if(2===r)return(i[0]+i[1])/2;var a=r/2,s=i[a-1]-i[0],h=i[r-1]-i[parseInt(a.toString(),10)];return(i[a-1]*h+i[parseInt(a.toString(),10)]*s)/(s+h)},t.prototype.setTempVariable=function(t,e,i){t&&(t.temp[0]=i)},t.prototype.medianRank=function(t,e){for(var i=this.nestedBestRanks[parseInt(t.toString(),10)].length,r=[],n=[],o=0;o<i;o++){var a=this.nestedBestRanks[parseInt(t.toString(),10)][parseInt(o.toString(),10)],s={medianValue:0};s.cell=a;var h=void 0;h=e?this.getConnectedCellsOnLayer(a,t):this.getConnectedCellsOnLayer(a,t,!0);var d=void 0;d=e?t+1:t-1,null!=h&&0!==h.length?(s.medianValue=this.medianValue(h,d),r.push(s)):n[this.getTempVariable(a,t)]=!0}r.sort(this.compare);for(var o=0;o<i;o++)if(null==n[parseInt(o.toString(),10)]&&r.length>0){var a=r.shift().cell;this.setTempVariable(a,t,o)}},t.prototype.compare=function(t,e){if(null!=t&&null!=e){if(e.medianValue>t.medianValue)return-1;if(e.medianValue<t.medianValue)return 1}return 0},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(5),n=i(3),o=i(56),a=function(){function t(){this.isAnimation=!1}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"MindMapChart"},t.prototype.updateLayout=function(t,e,o,a,s,h){var d=this.checkRoot(t,o,s,h,e);if(d)o.fixedNode=d;else for(var l=0,c=t;l<c.length;l++){var p=c[l];if(!(p.excludeFromLayout||p.inEdges&&p.inEdges.length)){o.fixedNode=p.id;break}}var g=e[o.fixedNode],u=this.findFirstLevelNodes(g,o,e),f=[],m=[],y=i.i(n.h)(o.getBranch);y=y||i.i(n.h)(this.getBranch);for(var v=0,b=u;v<b.length;v++){var p=b[v],S=y(p,u);S=p&&p.branch?p.branch:S,"Left"===S?f.push(p):m.push(p)}var w=new r.a(0,0,a.x,a.y);e[o.fixedNode].offsetX=w.x+w.width/2,e[o.fixedNode].offsetY=w.y+w.height/2,f.length&&this.updateMindMapBranch(t,m,e,o,a,s,"Left"),m.length&&this.updateMindMapBranch(t,f,e,o,a,s,"Right")},t.prototype.checkRoot=function(t,e,i,r,n){for(var o=0,a=t;o<a.length;o++){var s=a[o];if(!s.excludeFromLayout){if(s.data&&(s.data[""+i].toString()===r||s.data[""+i].toString()===e.root))return s.id;if(!s.data&&s.id===e.root)return s.id}}return""},t.prototype.updateMindMapBranch=function(t,e,r,a,s,h,d){var l={type:"HierarchicalTree",horizontalSpacing:a.verticalSpacing,verticalSpacing:a.horizontalSpacing,verticalAlignment:a.verticalAlignment,horizontalAlignment:a.horizontalAlignment,fixedNode:a.fixedNode,getLayoutInfo:i.i(n.h)(a.getLayoutInfo),layoutInfo:a.layoutInfo,margin:a.margin,orientation:a.orientation,root:a.fixedNode};l.orientation="Left"===d?"LeftToRight":"RightToLeft",this.excludeFromLayout(e,r,!0),(new o.a).updateLayout(t,r,l,s,h),this.excludeFromLayout(e,r,!1)},t.prototype.getBranch=function(t,e){return e.indexOf(t)%2==0?"Left":"Right"},t.prototype.excludeFromLayout=function(t,e,i){for(var r=0,n=t;r<n.length;r++){e[n[r].id].excludeFromLayout=i}},t.prototype.findFirstLevelNodes=function(t,e,i){var r=[];if(t&&t.outEdges.length)for(var n=0,o=t.outEdges;n<o.length;n++){var a=o[n];r.push(i[i[""+a].targetID])}return r},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r=function(){function t(){}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"RadialTree"},t.prototype.updateLayout=function(t,e,i,r){var n={type:i.type,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},layoutNodes:[],orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};this.doLayout(n,t,e,r)},t.prototype.doLayout=function(t,e,i,r){for(var n,o=0;o<e.length;o++)n=e[parseInt(o.toString(),10)],n.excludeFromLayout||(t.graphNodes[n.id]=this.setUpLayoutInfo(t,n),n.inEdges&&n.inEdges.length||t.firstLevelNodes.push(n));t.root&&i[t.root]?t.centerNode=i[t.root]:t.firstLevelNodes.length&&(t.centerNode=t.firstLevelNodes[0],t.root=t.centerNode.id),t.centerNode&&(this.updateEdges(t,t.centerNode,0,i),this.depthFirstAllignment(t,t.centerNode,0,0),this.populateLevels(t),this.transformToCircleLayout(t),this.updateAnchor(t,r),this.updateNodes(t,t.centerNode,i))},t.prototype.updateEdges=function(t,e,i,r){var n=t.graphNodes[e.id];t.layoutNodes.push(n),n.level=i,n.visited=!0,t.maxLevel=Math.max(t.maxLevel,i);for(var o=0;o<e.outEdges.length;o++){var a=r[r[e.outEdges[parseInt(o.toString(),10)]].targetID];a.excludeFromLayout||a.visited||(n.children.push(a),this.updateEdges(t,a,i+1,r))}},t.prototype.depthFirstAllignment=function(t,e,i,r){var n,o=t.graphNodes[e.id];if(o.children.length){r+=300;for(var a=0;a<o.children.length;a++)n=this.depthFirstAllignment(t,o.children[parseInt(a.toString(),10)],i,r),i=n.x,r=n.y;o.children=o.children.sort(function(e,i){return t.graphNodes[e.id].x-t.graphNodes[i.id].x});var s=t.graphNodes[o.children[0].id].min,h=t.graphNodes[o.children[o.children.length-1].id].max;if(o.x=s+(h-s)/2,i=h+t.horizontalSpacing,o.segmentOffset=h+t.horizontalSpacing,o.x-=o.width/2,o.y-=o.height/2,o.min=s,o.max=h,o.x<s&&o.visited){o.x=s,i=o.x+o.width/2-(h-s)/2,o.visited=!1;for(var a=0;a<o.children.length;a++)n=this.depthFirstAllignment(t,o.children[parseInt(a.toString(),10)],i,r);o.visited=!0,i=o.x+o.width+t.horizontalSpacing}h=t.graphNodes[o.children[o.children.length-1].id].segmentOffset,i=i<h?h:i,r-=300,o.y=r}else o.x=i,o.y=r,o.min=i,o.max=i+o.width,i+=o.width+t.horizontalSpacing;return{x:i,y:r}},t.prototype.populateLevels=function(t){var e=[],i=Math.min.apply(Math,t.layoutNodes.map(function(t){return t.x})),r=Math.max.apply(Math,t.layoutNodes.map(function(e){return e.x+e.width+t.horizontalSpacing})),n=r-i;t.levels=[];for(var o=0;o<=t.maxLevel;o++)!function(r){e=t.layoutNodes.filter(function(t){return t.level===r?t:null});var o={};e=e.sort(function(t,e){return t.x-e.x}),o.min=e[0].x,o.max=e[e.length-1].x+e[e.length-1].width+t.horizontalSpacing,o.actualCircumference=0,o.height=0;for(var a=0;a<e.length;a++)e[parseInt(a.toString(),10)].height>o.height&&(o.height=e[parseInt(a.toString(),10)].height),o.actualCircumference+=Math.max(e[parseInt(a.toString(),10)].width,e[parseInt(a.toString(),10)].height),a!==e.length-1&&(o.actualCircumference+=t.horizontalSpacing);o.circumference=o.max-o.min,o.actualCircumference<o.circumference&&(o.circumference=(o.circumference+o.actualCircumference)/2),o.radius=o.circumference/(2*Math.PI)+o.height,o.nodes=[],r>1&&t.levels[r-1].radius+t.levels[r-1].height>=o.radius&&(o.radius=t.levels[r-1].radius+t.levels[r-1].height);for(var s=0;s<e.length;s++)e[parseInt(s.toString(),10)].ratio=Math.abs(e[parseInt(s.toString(),10)].x+e[parseInt(s.toString(),10)].width/2-i)/n,o.nodes.push(e[parseInt(s.toString(),10)]);t.levels.push(o)}(o)},t.prototype.transformToCircleLayout=function(t){var e=t.graphNodes[t.centerNode.id];e.x=0,e.y=0;for(var i=1;i<t.levels.length;i++)for(var r=0;r<t.levels[parseInt(i.toString(),10)].nodes.length;r++){var n=t.levels[parseInt(i.toString(),10)].nodes[parseInt(r.toString(),10)];n.x=Math.cos(360*n.ratio*Math.PI/180)*(t.levels[parseInt(i.toString(),10)].radius+t.verticalSpacing*i),n.y=Math.sin(360*n.ratio*Math.PI/180)*(t.levels[parseInt(i.toString(),10)].radius+t.verticalSpacing*i),t.anchorX=Math.min(t.anchorX,n.x),t.anchorY=Math.min(t.anchorY,n.y)}},t.prototype.updateAnchor=function(t,e){t.anchorX=t.centerNode.offsetX||e.x/2,t.anchorY=t.centerNode.offsetY||e.y/2},t.prototype.updateNodes=function(t,e,i){var r=t.graphNodes[e.id],n=r.x+t.anchorX,o=r.y+t.anchorY;e.offsetX=n,e.offsetY=o;for(var a=0;a<r.children.length;a++){var s=r.children[parseInt(a.toString(),10)];this.updateNodes(t,i[s.id],i)}},t.prototype.setUpLayoutInfo=function(t,e){var i={};return i.name=e.id,i.x=0,i.y=0,i.min=0,i.max=0,i.width=e.actualSize.width,i.height=e.actualSize.height,i.children=[],i.level=0,i.ratio=0,i.visited=!1,i},t}()},function(t,e,i){"use strict";function r(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new o.a(e,i,t.actualSize.width,t.actualSize.height)}function n(t,e){for(var i=0;i<e.length;i++)if(e[parseInt(i.toString(),10)].id===t)return!0;return!1}i.d(e,"a",function(){return s}),i.d(e,"b",function(){return h}),i.d(e,"c",function(){return d});var o=i(5),a=i(3),s=function(){function t(t){this.velocityX=0,this.velocityY=0,this.nodes=[],this.graphNode=t;var e=this.graphNode,i=r(e);this.location=i.center,this.nodes=[],t.treeInfo.parents||(t.treeInfo.parents=[]),t.treeInfo.children||(t.treeInfo.children=[]),this.nodes=t.treeInfo.parents.concat(t.treeInfo.children)}return t.prototype.applyChanges=function(){this.graphNode.treeInfo.center=this.location},t}(),h=function(){function t(){this.cdCOEF=.442,this.cfMAXVELOCITY=50,this.cnMAXITERACTION=1e3,this.cnSPRINGLENGTH=100,this.mszMaxForceVelocity={width:this.cfMAXVELOCITY,height:this.cfMAXVELOCITY},this.springLength=0,this.springFactor=this.cdCOEF,this.maxIteration=this.cnMAXITERACTION,this.springLength=this.cnSPRINGLENGTH}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"SymmetricalLayout"},t.prototype.doGraphLayout=function(t){var e=this.selectedNode;e.treeInfo.Bounds=t.getModelBounds(t.nodes);var i=e.treeInfo.GraphNodes,r=this.convertGraphNodes(i),n=r.length;n=Math.min(this.maxIteration,n*n*n),this.preLayoutNodes(r,e.treeInfo.Bounds);for(var o=0,a=n;o<a;o++)this.makeSymmetricLayout(r),this.appendForces(r);this.resetGraphPosition(r,e)},t.prototype.preLayoutNodes=function(t,e){for(var i=Math.max(e?e.width:25,e?e.height:25),r={x:i/2,y:i/2},n=2*Math.PI/t.length,o=n,a=0;a<t.length;a++){var s=t[parseInt(a.toString(),10)];this.getForceNode(s).location={x:r.x+i*Number(Math.cos(o).toFixed(2)),y:r.y+i*Number(Math.sin(o).toFixed(2))},o-=n}},t.prototype.doLayout=function(t){this.selectedNode=t.selectedNode,this.doGraphLayout(t)},t.prototype.makeSymmetricLayout=function(t){for(var e,i,r=0;r<t.length;r++){var o=t[parseInt(r.toString(),10)];e=this.getForceNode(o);for(var a=e.nodes,s=0;s<a.length;s++){var h=a[parseInt(s.toString(),10)];n(h.id,t)&&this.calcNodesForce(e,this.getForceNode(h))}for(var d=0,l=a.length;d<l&&!(l<2);d++){var c=this.getForceNode(a[parseInt(d.toString(),10)]),p=d+1>=l?this.getForceNode(a[0]):this.getForceNode(a[d+1]),g=360/a.length/2*Math.PI/180,u=2*this.springLength*Math.sin(g);this.calcRelatesForce(c,p,u)}for(var f=0;f<t.length;f++){var h=t[parseInt(f.toString(),10)];n(h.id,a)||h.id===o.id||(i=this.getForceNode(h),this.updateNeigbour(e,i))}}},t.prototype.appendForces=function(t){for(var e=null,i=0;i<t.length;i++){var r=t[parseInt(i.toString(),10)];e=this.getForceNode(r);var n=e.location;n.x+=Math.min(e.velocityX,this.mszMaxForceVelocity.width),n.y+=Math.min(e.velocityY,this.mszMaxForceVelocity.height),e.velocityX=0,e.velocityY=0,e.location=n}},t.prototype.resetGraphPosition=function(t,e){for(var i,r={width:Number.MAX_VALUE,height:Number.MAX_VALUE},n=null,o=0;o<t.length;o++){i=t[parseInt(o.toString(),10)],n=this.getForceNode(i);var a={x:n.location.x-i.actualSize.width/2,y:n.location.y-i.actualSize.height/2};r.width=Math.min(r.width,a.x),r.height=Math.min(r.height,a.y)}for(var o=0;o<t.length;o++){i=t[parseInt(o.toString(),10)],n=this.getForceNode(i);var a=n.location;a.x-=r.width-(e.treeInfo.location?e.treeInfo.location.x:0),a.y-=r.height-(e.treeInfo.location?e.treeInfo.location.y:0),n.location=a,n.applyChanges()}},t.prototype.convertGraphNodes=function(t){for(var e=[],i=Object.keys(t),r=0,n=i;r<n.length;r++){var o=n[r];if(t[""+o]){var a=t[""+o],h=new s(a);a.treeInfo.tag=h,e.push(a)}}return e},t.prototype.getForceNode=function(t){return t.treeInfo.tag},t.prototype.updateNeigbour=function(t,e){if(null!=e&&null!=t){var i=this.pointDistance(t.location,e.location),r=this.lineAngle(t.location,e.location),n=.9*this.springLength;i<n&&this.calcForce(i,n,r,e)}},t.prototype.lineAngle=function(t,e){var i=0,r=e.x-t.x,n=e.y-t.y;return 0===r?i=n<=0?3*Math.PI/2:Math.PI/2:0===n?i=r<0?Math.PI:0:(i=Math.atan(n/r),r<0&&n>0?i=Math.PI+i:r<0&&n<0?i=Math.PI+i:r>0&&n<0&&(i=2*Math.PI+i)),i},t.prototype.pointDistance=function(t,e){var i=0,r=e.x-t.x,n=e.y-t.y,o=r*r+n*n;return o>0&&(i=Math.sqrt(o)),i},t.prototype.calcRelatesForce=function(t,e,i){var r=this.pointDistance(t.location,e.location),n=this.lineAngle(t.location,e.location);r<i&&this.calcForce(r,i,n,e)},t.prototype.updateLayout=function(t,e,i,r,n,o){(new d).updateLayout(t,e,i,r,n,o)},t.prototype.calcNodesForce=function(t,e){var i=this.pointDistance(t.location,e.location),r=this.lineAngle(t.location,e.location);(i>this.springLength||i<this.springLength)&&this.calcForce(i,this.springLength,r,e)},t.prototype.calcForce=function(t,e,i,r){var n=r.nodes.length,o=t-e,a=this.springFactor/(n*n)*Math.sqrt(n);if(0!==o){var s=o*a,h=s,d=Math.cos(i)*h,l=Math.sin(i)*h;r.velocityX-=d,r.velocityY-=l}},t}(),d=function(){function t(){this.visitedStack=[],this.cycleEdgesCollection=[],this.graphObjects=[],this.passedNodes=[]}return t.prototype.updateLayout=function(t,e,r,n,o,s){this.nameTable=n,this.nodes=t,this.connectors=e;var h=t;h.length>0&&(this.mhelperSelectedNode=i.i(a.e)(h[0]));for(var d=0,l=t;d<l.length;d++){var c=l[d],p=c;p.treeInfo={},p.treeInfo.graphType="Node",this.graphObjects.push(p)}for(var g=0,u=e;g<u.length;g++){var f=u[g],m=f;m.treeInfo={},m.treeInfo.graphType="Connector",this.graphObjects.push(m)}this.updateLayout1(this.graphObjects,r);for(var y=this.getModelBounds(h),v=0;v<h.length;v++){var c=h[parseInt(v.toString(),10)],b=(s.x-y.width)/2,S=o.margin||{};S.left=S.left||0,S.right=S.right||0,S.top=S.top||0,S.bottom=S.bottom||0,o.margin.left&&(S.left=o.margin.left),o.margin.top&&(S.top=o.margin.top);var w=c.treeInfo.tag.location.x-(c.offsetX-c.actualSize.width/2)-y.x+b+S.left,x=c.treeInfo.tag.location.y-(c.offsetY-c.actualSize.height/2)-y.y+S.top;c.offsetX+=w,c.offsetY+=x,delete c.treeInfo}return!0},t.prototype.getModelBounds=function(t){t=t.slice();for(var e,i=null,n=null,a=0;a<t.length;a++){e=t[parseInt(a.toString(),10)];var s=r(e);i=new o.a(e.treeInfo.tag?e.treeInfo.tag.location.x:s.x,e.treeInfo.tag?e.treeInfo.tag.location.y:s.y,e.actualSize.width,e.actualSize.height),n=n?n.uniteRect(i):i}return n},t.prototype.updateLayout1=function(t,e){this.detectCyclesInGraph(t);var i=t.length;if(i>0){for(var r=[],n=[],o=[],a=0;a<t.length;a++){var s=t[parseInt(a.toString(),10)];void 0===s.treeInfo.isCycleEdge&&(s.treeInfo.isCycleEdge=!1),"Connector"!==s.treeInfo.graphType||s.treeInfo.isCycleEdge?"Connector"===s.treeInfo.graphType?r.push(s):o.push(s):n.push(s)}for(n=n.concat(o),n=r.concat(n);i>this.dictionaryLength(this.passedNodes);)if(this.getNodesToPosition(n),null!=this.selectedNode){e.doLayout(this),this.selectedNode=null,this.visitedStack=[];for(var h=0,d=this.cycleEdgesCollection;h<d.length;h++){var l=d[h];l.treeInfo.isCycleEdge=!1}}this.passedNodes=null,this.selectedNode=null}return!1},t.prototype.getNodesToPosition=function(t){for(var e=0;e<t.length;e++){var i=t[parseInt(e.toString(),10)];if(!n(i.id,this.passedNodes)){i&&this.selectNodes(i);break}}},t.prototype.selectNodes=function(t){var e=t;"Connector"===t.treeInfo.graphType?this.exploreGraphEdge(t):null!=e&&this.addNode(t,"passed")&&(this.addNode(t,"selected"),this.isConnectedToAnotherNode(e)?(this.selectedNode={treeInfo:{}},this.selectedNode.treeInfo.LeftMargin=10,this.selectedNode.treeInfo.TopMargin=10,this.selectConnectedNodes(e)):this.selectedNode=t)},t.prototype.selectConnectedNodes=function(t){var e=this.selectedNode;e.treeInfo.GraphNodes||(e.treeInfo.GraphNodes={});var i=t;if(null!=i&&this.addNode(i,"passed")){var r=i.id;if(this.dictionaryContains(e.treeInfo.GraphNodes,i)){var n=e.treeInfo.GraphNodes[""+r];n.treeInfo.Added&&(n.treeInfo.Added=!1,this.getConnectedRelatives(n),this.exploreRelatives(t))}else{var o=this.addGraphNode(i);this.getConnectedRelatives(o),this.exploreRelatives(t)}}},t.prototype.exploreRelatives=function(t){this.exploreRelatives1(t,"Parents"),this.exploreRelatives1(t,"Children")},t.prototype.exploreRelatives1=function(t,e){var i=[];"Parents"===e?i=t.inEdges:"Children"===e&&(i=t.outEdges);for(var r=0;r<i.length;r++){var o=this.nameTable[i[parseInt(r.toString(),10)]];if(this.addNode(o,"passed")){var a=this.nameTable[o.sourceID],s=this.nameTable[o.targetID];"Parents"===e&&null!=a&&n(a.id,this.nodes)?this.selectConnectedNodes(this.nameTable[o.sourceID]):"Children"===e&&null!=s&&n(s.id,this.nodes)&&this.selectConnectedNodes(this.nameTable[o.targetID])}}},t.prototype.getConnectedRelatives=function(t){this.getConnectedParents(t),this.getConnectedChildren(t)},t.prototype.dictionaryContains=function(t,e){for(var i=Object.keys(t),r=0;r<i.length;r++)if(i[parseInt(r.toString(),10)]===e.id)return!0;return!1},t.prototype.dictionaryLength=function(t){return Object.keys(t).length},t.prototype.getConnectedChildren=function(t){for(var e=this.selectedNode,i=t,r=0;r<i.outEdges.length;r++){var o=this.nameTable[i.outEdges[parseInt(r.toString(),10)]];if(!o.treeInfo.isCycleEdge){var a=this.nameTable[o.targetID];if(n(a.id,this.nodes)&&null!=a&&a.visible){var s=void 0;this.dictionaryContains(e.treeInfo.GraphNodes,a)?s=e.treeInfo.GraphNodes[a.id]:(s=this.addGraphNode(a),s.treeInfo.Added=!0),t.treeInfo.children||(t.treeInfo.children=[]),s.treeInfo.parents||(s.treeInfo.parents=[]),this.setNode(s.treeInfo.parents,t),this.findNode(t.treeInfo.children,s.id)<0&&t.treeInfo.children.push(s)}}}},t.prototype.getConnectedParents=function(t){for(var e=this.selectedNode,i=t,r=0;r<i.inEdges.length;r++){var o=this.nameTable[i.inEdges[parseInt(r.toString(),10)]];if(!o.treeInfo.isCycleEdge){var a=this.nameTable[o.sourceID];if(n(a.id,this.nodes)&&null!=a&&a.visible){var s=void 0;this.dictionaryContains(e.treeInfo.GraphNodes,a)?s=e.treeInfo.GraphNodes[a.id]:(s=this.addGraphNode(a),s.treeInfo.Added=!0),t.treeInfo.parents||(t.treeInfo.parents=[]),s.treeInfo.children||(s.treeInfo.children=[]),this.setNode(s.treeInfo.children,t),this.findNode(t.treeInfo.parents,s.id)<0&&t.treeInfo.parents.push(s)}}}},t.prototype.setNode=function(t,e){var i=this.findNode(t,e.id);i>=0&&i<t.length?t[parseInt(i.toString(),10)]=e:t.push(e)},t.prototype.findNode=function(t,e){var i=-1;if(null!=t&&""!==e)for(var r=0,n=t.length;r<n;r++){var o=t[parseInt(r.toString(),10)];if("string"==typeof o&&o===e){i=r;break}if(null!=o&&o.id===e){i=r;break}}return i},t.prototype.addGraphNode=function(t){var e=this.selectedNode;e.treeInfo.GraphNodes||(e.treeInfo.GraphNodes={});var i=t;if(null!=e){e.treeInfo.GraphNodes[i.id]=i;var r=this.mhelperSelectedNode;null!=r&&t.id===r.id&&(this.mhelperSelectedNode=i)}return i},t.prototype.isConnectedToAnotherNode=function(t){var e=!1;return t.inEdges.concat(t.outEdges).length>0&&(null!=t.inEdges&&t.inEdges.length>0&&(e=this.searchEdgeCollection(t.inEdges,"FromNode")),!e&&null!=t.outEdges&&t.outEdges.length>0&&(e=this.searchEdgeCollection(t.outEdges,"ToNode"))),e},t.prototype.searchEdgeCollection=function(t,e){for(var i=!1,r=0;r<t.length-1;r++){var n=this.nameTable[t[parseInt(r.toString(),10)]];if(this.addNode(n,"passed")&&(!n.treeInfo.isCycleEdge&&("FromNode"===e&&null!=this.nameTable[n.sourceID]||"ToNode"===e&&null!=this.nameTable[n.targetID]))){i=!0;break}}return i},t.prototype.exploreGraphEdge=function(t){var e=t;if(null!=e&&!e.treeInfo.isCycleEdge&&this.addNode(t,"passed")){this.addNode(t,"selected");var i=this.nameTable[e.sourceID],r=this.nameTable[e.targetID];null!=i?this.selectNodes(i):null!=r?this.selectNodes(r):this.selectedNode=t}},t.prototype.addNode=function(t,e){var i=t;return"passed"!==e&&i.visible||this.dictionaryContains(this.passedNodes,i)||(this.passedNodes[i.id]=i),!!i.visible},t.prototype.detectCyclesInGraph=function(t){for(var e=[],i=[],r=0;r<t.length;r++)"Connector"!==t[parseInt(r.toString(),10)].treeInfo.graphType&&e.push(t[parseInt(r.toString(),10)]);if(e.length>0)for(i.push(e[0]),this.visitedStack.push(e[0]);i.length>0;){var o=i[i.length-1],a=this.getUnVisitedChildNodes(o);if(a.length>0){var s=a[0],h=a[a.length-1];n(s.id,this.visitedStack)?(h.treeInfo.isCycleEdge=!0,this.cycleEdgesCollection.push(h)):(i.push(s),this.visitedStack.splice(0,0,s))}else i.pop()}},t.prototype.getUnVisitedChildNodes=function(t){var e=[];if(t.outEdges.length>0){for(var i=0;i<t.outEdges.length;i++){var r=this.nameTable[t.outEdges[parseInt(i.toString(),10)]];if(!n(r.id,this.visitedStack)){var o=this.nameTable[r.targetID];return null!=o&&e.push(o),e.push(r),this.visitedStack.splice(0,0,r),e}}return e}return e},t}()},function(t,e,i){"use strict";function r(t){return C[t.toString()]}function n(t){return z[t.toString()]}function o(t){return O[t.toString()]}function a(t){return T[t.toString()]}function s(t){return A[t.toString()]}i.d(e,"a",function(){return P}),e.b=r,e.c=n,e.d=o,e.e=a,e.f=s;var h=i(6),d=i(14),l=i(23),c=i(15),p=i(17),g=i(11),u=i(2),f=i(3),m=i(10),y=i(1),v=i(18),b=i(8),S=i(5),w=i(7),x=i(4),I=i(0),P=(i.n(I),function(){function t(){this.annotationObjects={}}return Object.defineProperty(t.prototype,"textAnnotationConnectors",{get:function(){for(var t=[],e=0,i=Object.keys(this.annotationObjects);e<i.length;e++)for(var r=i[e],n=this.annotationObjects[""+r],o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];t.push(n[""+s].connector)}return t},enumerable:!0,configurable:!0}),t.prototype.getTextAnnotationConn=function(t){var e=[];if("Bpmn"===t.shape.type&&0!==t.shape.annotations.length)for(var i=this.annotationObjects[t.id],r=0,n=Object.keys(i);r<n.length;r++){var o=n[r];e.push(i[""+o].connector)}return e},t.prototype.getSize=function(t,e){var i=new w.a(t.width,t.height);if(void 0===i.width||void 0===i.height){if(e instanceof p.a||(i.width=i.width||50,i.height=i.height||50),e.actualSize.width&&e.actualSize.height)return e.actualSize;e.measure(new w.a),i.width=i.width||e.desiredSize.width,i.height=i.height||e.desiredSize.height,void 0!==t.maxWidth&&(i.width=Math.min(i.width,t.maxWidth)),void 0!==t.maxHeight&&(i.height=Math.min(i.height,t.maxHeight)),void 0!==t.minWidth&&(i.width=Math.max(i.width,t.minWidth)),void 0!==t.minHeight&&(i.height=Math.max(i.height,t.minHeight))}return i},t.prototype.initBPMNContent=function(t,e,r){var n=(i.i(I.isBlazor)(),e.shape),o=i.i(I.isBlazor)()?e.shape.bpmnShape:e.shape.shape;"Event"===o&&(t=this.getBPMNEventShape(e,n.event)),"Gateway"===o&&(t=this.getBPMNGatewayShape(e)),"DataObject"===o&&(t=this.getBPMNDataObjectShape(e)),"Message"!==o&&"DataSource"!==o||(t=this.getBPMNShapes(e)),"Activity"===o&&(t=this.getBPMNActivityShape(e)),"TextAnnotation"===o&&(t=this.renderBPMNTextAnnotation(r,e,t));if(n.annotations.length>0){for(var a=0;a<n.annotations.length&&n.annotations[parseInt(a.toString(),10)].text;a++)t.children.push(this.getBPMNTextAnnotation(e,r,n.annotations[parseInt(a.toString(),10)],t));t.style.strokeDashArray="2 2 6 2"}return t},t.prototype.getBPMNShapes=function(t){var e=new p.a;this.setStyle(e,t),0!=(t.constraints&y.f.Shadow)&&(e.shadow=t.shadow);var n=r(i.i(I.isBlazor)()?t.shape.bpmnShape:t.shape.shape);return e.data=n,e.id=t.id+"_"+(i.i(I.isBlazor)()?t.shape.bpmnShape:t.shape.shape),void 0!==t.width&&void 0!==t.height&&(e.width=t.width,e.height=t.height),e},t.prototype.getBPMNGatewayShape=function(t){var e=new l.a,i=new p.a;i.id=t.id+"_0_gateway",i.offsetX=t.offsetX,i.offsetY=t.offsetY,i.data="M 40 20 L 20 40 L 0 20 L 20 0 L 40 20 Z",this.setStyle(i,t);var r=new p.a;r.id=t.id+"_1_gatewayType",r.style.opacity=t.style.opacity,r.style.strokeColor=t.style.strokeColor,r.horizontalAlignment="Center",r.verticalAlignment="Center",r.relativeMode="Object";var n=t.shape.gateway,a=o(n.type);"EventBased"===n.type||"ExclusiveEventBased"===n.type||"ParallelEventBased"===n.type?r.style.fill="white":r.style.fill="black",r.data=a,e.style.fill="transparent",e.style.strokeColor="transparent",e.style.strokeWidth=0,e.children=[i,r];var s=this.getSize(t,i);return this.setSizeForBPMNGateway(t.shape.gateway,e,s.width,s.height),e},t.prototype.getBPMNDataObjectShape=function(t){var e=new l.a,i=t.shape.dataObject,r=new p.a;r.id=t.id+"_0_dataobj",r.data="M29.904,5 L7.853,5 L7.853,45 L42.147,45 L42.147,17.242,L29.932,5,L29.932,17.242,L42.147,17.242";var n=this.getSize(t,r);r.width=n.width,r.height=n.height,this.setStyle(r,t);var o=new p.a;o.id=t.id+"_1_type",o.width=25,o.height=20,o.margin.left=5,o.margin.top=5,o.data="M 3 9.4 l 6 0 v 2.4 l 3.6 -4 L 9 4 v 2.5 H 3 V 9.4 Z",o.style.opacity=t.style.opacity;var a=new p.a;switch(a.id=t.id+"_2_collection",a.width=7.5,a.height=15,a.style.fill="black",a.visible=!0,a.horizontalAlignment="Center",a.verticalAlignment="Bottom",a.relativeMode="Object",a.style.opacity=t.style.opacity,a.data="M 0 0 L 0.1 0 L 0.1 2 L 0 2 Z M 0.4 0 L 0.6 0 L 0.6 2 L0.4 2 Z M 0.9 0 L 1 0 L 1 2 L 0.9 2 Z",i.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}return!1===i.collection&&(a.visible=!1),e.style.fill="transparent",e.style.strokeColor="transparent",e.style.strokeWidth=0,e.children=[r,o,a],e},t.prototype.getBPMNTaskShape=function(t){var e=t.shape.activity,i=e.task,r=new l.a,n=new d.a;n.cornerRadius=10;var o=this.getSize(t,n);n.id=t.id+"_0_task",n.width=o.width,n.height=o.height,this.setStyle(n,t),void 0!==i.call&&!0===i.call&&(n.style.strokeWidth=4),r.width=o.width,r.height=o.height;var h,c=this.getTaskChildCount(t),g=12*c,u=o.width/2-g;h=1===c?u+8:u+8*(c-1);var f=new p.a;"Receive"===i.type||"Send"===i.type?(f.width=18,f.height=16):"Manual"===i.type?(f.width=16,f.height=11):(f.width=20,f.height=20),f.id=t.id+"_1_tasktType",f.margin.left=5,f.margin.top=5;var m=a(i.type);if(f.data=m,f.style.fill="transparent",f.style.opacity=t.style.opacity,"Send"===i.type&&(f.style.fill="black"),r.style.fill="transparent",r.style.strokeColor="transparent",r.style.strokeWidth=0,r.children=[n,f],"Service"===i.type){var y=new p.a;y.id=t.id+"_1_taskTypeService",y.data=m,y.margin.left=f.margin.left+9,y.margin.top=f.margin.top+9,y.style.fill="white",y.style.opacity=t.style.opacity,r.children.push(y)}var v=i.loop,b=new p.a,S=s(v);b.data=S,b.style.fill="black",b.visible="None"!==v,1===c&&(h=u+9),b.margin.left=h,!0===b.visible&&(h+=20),b.width=12,b.height=12,b.margin.bottom=5,b.id=t.id+"_2_loop",b.horizontalAlignment="Left",b.verticalAlignment="Bottom",b.setOffsetWithRespectToBounds(0,1,"Fraction"),b.relativeMode="Point",b.style.fill="transparent",f.style.opacity=t.style.opacity,r.children.push(b);var w=new p.a;return w=this.getBPMNCompensationShape(t,w),!0===i.compensation?w.visible=!0:w.visible=!1,1===c&&(h=u+9),w.margin.left=h-3,h+=18,r.children.push(w),r},t.prototype.getBPMNEventShape=function(t,e,r,o){var a,s,h,d,c=new l.a;o=o||t.id;var g="M164.1884,84.6909000000001C156.2414,84.6909000000001,149.7764,78.2259000000001,149.7764,70.2769000000001C149.7764,62.3279000000001,156.2414,55.8629000000001,164.1884,55.8629000000001C172.1354,55.8629000000001,178.6024,62.3279000000001,178.6024,70.2769000000001C178.6024,78.2259000000001,172.1354,84.6909000000001,164.1884,84.6909000000001",u=t.shape.event;if((!i.i(I.isBlazor)()&&"Event"===t.shape.shape||i.i(I.isBlazor)()&&"Event"===t.shape.bpmnShape)&&(a=u.event,s=u.trigger),h=e.width,d=e.height,r)h=h||20,d=d||20;else if(void 0===e.width||void 0===e.height){var f=new p.a;f.data=g;var m=this.getSize(t,f);h=m.width,d=m.height}var y=t.shape.activity;if(!i.i(I.isBlazor)()&&"Activity"===t.shape.shape||i.i(I.isBlazor)()&&"Activity"===t.shape.bpmnShape){y.subProcess;a=e.event,s=e.trigger}var v=new p.a;v.data=g,v.id=o+"_0_event",v.width=h,v.height=d,v.horizontalAlignment="Center",v.verticalAlignment="Center",v.relativeMode="Object",this.setStyle(v,t);var b=new p.a;b.data=g,b.id=o+"_1_event",b.style.gradient=t.style.gradient,b.horizontalAlignment="Center",b.verticalAlignment="Center",b.relativeMode="Object",b.style.strokeColor=t.style.strokeColor,b.style.opacity=t.style.opacity;var S=new p.a,w=n(s);switch(S.data=w,S.id=o+"_2_trigger",S.horizontalAlignment="Center",S.verticalAlignment="Center",S.relativeMode="Object",S.style.strokeColor=t.style.strokeColor,S.style.opacity=t.style.opacity,a){case"Start":b.visible=!1;break;case"NonInterruptingStart":v.style.strokeDashArray="2 3",b.visible=!1;break;case"Intermediate":v.style.fill=t.style.fill,v.style.gradient=null;break;case"NonInterruptingIntermediate":v.style.fill=t.style.fill,v.style.gradient=null,v.style.strokeDashArray="2 3",b.style.strokeDashArray="2 3";break;case"ThrowingIntermediate":case"End":v.style.fill="End"!==a?t.style.fill:"white"!==t.style.fill?t.style.fill:"black",v.style.gradient=null,S.style.fill="black",S.style.strokeColor="white"}return c.style.fill="transparent",c.style.strokeColor="transparent",c.style.strokeWidth=0,c.children=[v,b,S],this.setSizeForBPMNEvents(u,c,h,d),c},t.prototype.setEventVisibility=function(t,e){var i=t.shape.event.event,r=e[0],n=e[1];e[2];switch(i){case"Start":n.visible=!1;break;case"NonInterruptingStart":r.style.strokeDashArray="2 3",n.visible=!1}},t.prototype.setSubProcessVisibility=function(t){var e=t.shape.activity.subProcess,i=e.events.length,r="Transaction"===t.shape.activity.subProcess.type?2:0,n=t.wrapper.children[0].children[0];if(!1===e.adhoc&&(n.children[3+r+i].visible=!1),!1===e.compensation&&(n.children[4+r+i].visible=!1),i>0)for(var o=0;o<i;o++)this.setEventVisibility(t,n.children[2+o].children)},t.prototype.getBPMNSubProcessShape=function(t){var e,i,n,o=new l.a,a=new p.a,s=(new l.a,new p.a),h=t.shape.activity,c=h.subProcess,g=this.getSubprocessChildCount(t),u=new d.a;u.id=t.id+"_0_Subprocess",u.style.fill="transparent",u.cornerRadius=10;var f=this.getSize(t,u);u.width=f.width,u.height=f.height,o.children=[u],"Transaction"===h.subProcess.type&&this.getBPMNSubProcessTransaction(t,t.shape,o);var m=12*g,v=f.width/2;n=1===g?v-6:v-m/2-4*(g-1)/2,this.setStyle(u,t),0!=(t.constraints&y.f.Shadow)&&(o.shadow=t.shadow);var b=new p.a;if(b.id=t.id+"_0_collapsed",b.width=12,b.height=12,b.style.fill="black",b.style.strokeColor=t.style.strokeColor,b.margin.bottom=5,b.horizontalAlignment="Left",b.verticalAlignment="Bottom",b.setOffsetWithRespectToBounds(0,1,"Fraction"),b.relativeMode="Point",b.data=r("collapsedShape"),b.margin.left=n,!0!==c.collapsed||c.processes?b.visible=!1:b.visible=!0,!0===b.visible&&(n+=18),o.children.push(b),"Event"===c.type){u.style.strokeWidth=1,u.style.strokeDashArray="2 2",e=c.events;for(var S=0;S<e.length;S++)i=e[parseInt(S.toString(),10)],this.getBPMNSubEvent(i,t,o)}s=this.getBPMNSubProcessLoopShape(t),1===g&&(n=v+8),s.margin.left=n,!0===s.visible&&(n+=16),o.children.push(s),u.id=t.id+"_boundary","Default"===c.boundary&&(u.style.strokeWidth=1,u.style.strokeDashArray="1 0"),"Call"===c.boundary&&(u.style.strokeWidth=4,u.style.strokeDashArray="1 0"),"Event"===c.boundary&&(u.style.strokeWidth=1,u.style.strokeDashArray="2 2"),a=this.getBPMNAdhocShape(t,a,c),1===g&&(n=v+8),a.margin.left=n,!0===a.visible&&(n+=16),o.children.push(a);var w=new p.a;return!0===c.compensation?w.visible=!0:w.visible=!1,w=this.getBPMNCompensationShape(t,w),1===g&&(n=v+8),w.margin.left=n,!0===w.visible&&(n+=16),o.children.push(w),o.style.strokeColor="transparent",o.style.strokeWidth=0,o.style.fill="transparent",o},t.prototype.getBPMNSubEvent=function(t,e,i,r){i.children=i.children||[];var n=this.getBPMNEventShape(e,t,!0,r);this.getBPMNSubprocessEvent(e,n,t),n.id=r||e.id+"_subprocessEvents",n.width=t.width||20,n.height=t.height||20,n.setOffsetWithRespectToBounds(t.offset.x,t.offset.y,"Fraction"),n.relativeMode="Point",n.margin=t.margin,n.horizontalAlignment=t.horizontalAlignment,n.verticalAlignment=t.verticalAlignment,n.style.fill="transparent",n.style.strokeColor="transparent",n.style.strokeWidth=0,i.children.push(n)},t.prototype.getBPMNSubProcessTransaction=function(t,e,i){var r=i.children[0].width,n=i.children[0].height,o=new d.a;o.margin={left:3,right:0,top:3,bottom:0},o.id=t.id+"_0_Subprocess_innnerRect",o.cornerRadius=10,o.width=r-6,o.style.fill="transparent",o.height=n-6,i.children.push(o);var a=new l.a;a.id=t.id+"_transaction_events",a.style.gradient=t.style.gradient;var s=e.activity.subProcess.transaction;this.getBPMNSubEvent(s.success,t,a,t.id+"_success"),this.getBPMNSubEvent(s.cancel,t,a,t.id+"_cancel"),this.getBPMNSubEvent(s.failure,t,a,t.id+"_failure"),this.updateDiagramContainerVisibility(a.children[0],s.success.visible),this.updateDiagramContainerVisibility(a.children[1],s.cancel.visible),this.updateDiagramContainerVisibility(a.children[2],s.failure.visible),a.float=!0,a.width=r,a.height=n,a.style.fill=a.style.strokeColor="transparent",i.children.push(a)},t.prototype.getBPMNSubProcessLoopShape=function(t){var e,i,r=t.shape.activity,n=new p.a;return e=r.subProcess.loop,i=s(e),n.visible="None"!==e,n.id=t.id+"_loop",n.data=i,n.style.fill="black",n.width=12,n.height=12,n.horizontalAlignment="Left",n.verticalAlignment="Bottom",n.setOffsetWithRespectToBounds(0,1,"Fraction"),n.relativeMode="Point",n.margin.bottom=5,n.style.fill="transparent",n.style.strokeColor=t.style.strokeColor,n},t.prototype.drag=function(t,e,i,r){var n=r.nameTable[t.processId];t.margin.top+i>=0&&r.nodePropertyChange(t,{},{margin:{top:t.margin.top+i}}),t.margin.left+e>=0&&r.nodePropertyChange(t,{},{margin:{left:t.margin.left+e}});var o=this.getChildrenBound(n,t.id,r);this.updateSubProcessess(o,t,r),n.wrapper.measure(new w.a(void 0,void 0)),n.wrapper.arrange(n.wrapper.desiredSize),r.refreshCanvasLayers(),r.updateSelector(),this.updateDocks(t,r)},t.prototype.dropBPMNchild=function(t,e,r){if(e&&"Bpmn"===e.shape.type&&"Bpmn"===t.shape.type&&(!i.i(I.isBlazor)()&&"TextAnnotation"!==e.shape.shape||i.i(I.isBlazor)()&&"TextAnnotation"!==e.shape.bpmnShape)){var n=r.nameTable[t.id].shape.activity.subProcess;if(r.currentSymbol&&"Bpmn"===t.shape.type&&!n.collapsed)return void(e.processId=t.id);if(n.processes=n.processes||[],n.processes&&-1===n.processes.indexOf(e.id)&&!n.collapsed){n.processes.push(e.id);var o=i.i(f.e)(e),a=r.nameTable[e.id].wrapper,s=r.nameTable[t.id].wrapper;a.margin.top=a.offsetY-a.actualSize.height/2-(t.offsetY-t.actualSize.height/2),a.margin.left=a.offsetX-a.actualSize.width/2-(t.offsetX-t.actualSize.width/2),a.margin.top=a.margin.top<0?0:a.margin.top,a.margin.left=a.margin.left<0?0:a.margin.left,r.nameTable[e.id].processId=t.id,s.children.push(r.nameTable[e.id].wrapper);var h=this.getChildrenBound(t,e.id,r);this.updateSubProcessess(h,e,r),s.measure(new w.a(void 0,void 0)),s.arrange(s.desiredSize),r.refreshCanvasLayers(),r.updateSelector();var d=[];d=d.concat(e.outEdges,e.inEdges);for(var l=d.length-1;l>=0;l--)-1===r.bpmnModule.textAnnotationConnectors.indexOf(r.nameTable[d[parseInt(l.toString(),10)]])&&r.remove(r.nameTable[d[parseInt(l.toString(),10)]]);var c=i.i(f.e)(e),p={type:"PositionChanged",undoObject:{nodes:[o]},redoObject:{nodes:[c]},category:"Internal"};r.addHistoryEntry(p),"SVG"===r.mode&&e.zIndex<t.zIndex&&(r.updateProcesses(e),this.updateSubprocessNodeIndex(e,r,t)),this.updateDocks(e,r)}}},t.prototype.updateIndex=function(t,e){var i=e,r=t.getIndex(i,i.id);t.nodes.splice(Number(r),1),i.zIndex=t.nodes[t.nodes.length-1].zIndex+1,t.nodes.push(i)},t.prototype.updateSubprocessNodeIndex=function(t,e,i){if(t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var r=0;r<t.shape.activity.subProcess.processes.length;r++){this.updateIndex(e,t);var n=t.shape.activity.subProcess.processes[parseInt(r.toString(),10)];if(e.nameTable[""+n].shape.activity.subProcess.processes.length>0)this.updateSubprocessNodeIndex(e.nameTable[""+n],e,i);else{var o=e.nameTable[t.shape.activity.subProcess.processes[parseInt(r.toString(),10)]];this.updateIndex(e,o)}}else this.updateIndex(e,t)},t.prototype.updateDocks=function(t,e){if("Bpmn"===t.shape.type&&t.shape.activity.subProcess.processes&&!t.shape.activity.subProcess.collapsed)for(var i=t.shape.activity.subProcess.processes,r=0,n=i;r<n.length;r++){var o=n[r],a=e.nameTable[""+o];a&&(e.updateConnectorEdges(a),a.wrapper.measure(new w.a(a.wrapper.width,a.wrapper.height)),a.wrapper.arrange(a.wrapper.desiredSize),a.shape.activity.subProcess.processes&&a.shape.activity.subProcess.processes.length&&this.updateDocks(a,e))}},t.prototype.removeBpmnProcesses=function(t,e){var i=e.nameTable[t.processId];if("Bpmn"===t.shape.type&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var r=t.shape.activity.subProcess.processes,n=r.length-1;n>=0;n--)e.remove(e.nameTable[r[parseInt(n.toString(),10)]]);if(i){e.removeDependentConnector(t);var r=i.shape.activity.subProcess.processes;this.removeChildFromBPMN(i.wrapper,t.id);var o=r.indexOf(t.id);r.splice(o,1)}},t.prototype.removeChildFromBPMN=function(t,e){for(var i=0,r=t.children;i<r.length;i++){var n=r[i];n.id===e?t.children.splice(t.children.indexOf(n),1):n.children&&this.removeChildFromBPMN(n,e)}},t.prototype.removeProcess=function(t,e){var i=e.nameTable[""+t];if(i){var r=e.nameTable[i.processId];if(r&&"Bpmn"===r.shape.type){var n=r.shape.activity.subProcess.processes;e.removeDependentConnector(i),this.removeChildFromBPMN(r.wrapper,t);var o=n.indexOf(t);n.splice(o,1),i.processId="",e.refreshDiagramLayer(),e.updateSelector()}}},t.prototype.addProcess=function(t,e,r){t.id=t.id||i.i(f.g)();var n=t.id,o=r.nameTable[""+n];o||r.add(t),t.processId=e;var a=r.nameTable[""+e],s=a.shape.activity.subProcess;if(o&&a&&"Bpmn"===a.shape.type&&"Bpmn"===o.shape.type&&s.processes){o.processId=e;var h=a.shape.activity.subProcess.processes;if(h.indexOf(n)<0&&h.push(n),a.wrapper.children.push(o.wrapper),a.wrapper.measure(new w.a),a.wrapper.arrange(a.wrapper.desiredSize),r.bpmnModule.updateDocks(a,r),r.refreshDiagramLayer(),"SVG"===r.mode&&o.shape&&o.shape.activity&&!o.shape.activity.subProcess.processes){i.i(x.n)(e+"_groupElement").appendChild(i.i(x.n)(t.id+"_groupElement"))}}},t.prototype.getChildrenBound=function(t,e,i){var r,n=t.shape.activity.subProcess.processes;if(n&&n.length)for(var o=0,a=n;o<a.length;o++){var s=a[o];e!==s&&(r=r?i.nameTable[""+s].wrapper.bounds.uniteRect(r):i.nameTable[""+s].wrapper.bounds)}return r||i.nameTable[""+e].wrapper.bounds},t.prototype.updateSubProcessess=function(t,e,i){var r,n,o,a,s=i.nameTable[e.processId],h={x:.5,y:.5};s.wrapper.bounds.left+e.margin.left+e.width>s.wrapper.bounds.right&&(o=!0),s.wrapper.bounds.top+e.margin.top+e.height>s.wrapper.bounds.bottom&&(a=!0),o&&(h.x=0),a&&(h.y=0);var d=s.wrapper.actualSize;o&&(r=(e.wrapper.margin.left+e.wrapper.bounds.width)/d.width),a&&(n=(e.wrapper.margin.top+e.wrapper.bounds.height)/d.height),(r>0||n>0)&&i.commandHandler.scale(i.nameTable[e.processId],r||1,n||1,h)},t.prototype.getBPMNCompensationShape=function(t,e){return e.id=t.id+"_0_compensation",e.width=12,e.height=12,e.margin.bottom=5,e.style.fill="transparent",e.style.strokeColor=t.style.strokeColor,e.horizontalAlignment="Left",e.verticalAlignment="Bottom",e.relativeMode="Object",e.data="M 22.462 18.754 l -6.79 3.92 l 6.79 3.92 V 22.89 l 6.415 3.705 v -7.841 l -6.415 3.705 V 18.754 Z M 28.331 19.701 v 5.947 l -5.149 -2.973 L 28.331 19.701 Z M 21.916 25.647 l -5.15 -2.973 l 5.15 -2.973 V 25.647 Z M 22.275 12.674 c -5.513 0 -9.999 4.486 -9.999 9.999 c 0 5.514 4.486 10.001 9.999 10.001 c 5.514 0 9.999 -4.486 9.999 -10.001 C 32.274 17.16 27.789 12.674 22.275 12.674 Z M 22.275 32.127  c -5.212 0 -9.453 -4.241 -9.453 -9.454 c 0 -5.212 4.241 -9.453 9.453 -9.453 c 5.212 0 9.453 4.241 9.453 9.453 C 31.728 27.887 27.487 32.127 22.275 32.127 Z",e},t.prototype.getBPMNActivityShape=function(t){var e,i=new l.a,r=t.shape.activity,n=r.activity,o=r.subProcess;r.activity;return"Task"===n&&(e=this.getBPMNTaskShape(t)),"SubProcess"===n&&o&&(e=this.getBPMNSubProcessShape(t)),e.id=n+t.id,i.children=[e],i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i},t.prototype.getBPMNSubprocessEvent=function(t,e,i){var r,n;if(0!==i.annotations.length)for(var o=0;o<i.annotations.length;o++){var a=i.annotations[parseInt(o.toString(),10)];r=t.initAnnotationWrapper(a),r.width=i.width,r.height=i.height,e.children.push(r)}if(0!==i.ports.length)for(var o=0;o<i.ports.length;o++){var s=i.ports[parseInt(o.toString(),10)];n=t.initPortWrapper(s),e.children.push(n)}},t.prototype.getBPMNAdhocShape=function(t,e,i){return e.id=t.id+"_0_adhoc",e.width=12,e.height=8,e.style.fill="black",e.style.strokeColor=t.style.strokeColor,e.margin.bottom=5,e.horizontalAlignment="Left",e.verticalAlignment="Bottom",e.relativeMode="Object",e.data="M 49.832 76.811 v -2.906 c 0 0 0.466 -1.469 1.931 -1.5 c 1.465 -0.031 2.331 1.219 2.897 1.688 s 1.06 0.75 1.526 0.75 c 0.466 0 1.548 -0.521 1.682 -1.208 s 0.083 3.083 0.083 3.083 s -0.76 0.969 -1.859 0.969 c -1.066 0 -1.865 -0.625 -2.464 -1.438 s -1.359 -0.998 -2.064 -0.906 C 50.598 75.467 49.832 76.811 49.832 76.811 Z",i&&!0===i.adhoc?e.visible=!0:e.visible=!1,e},t.prototype.getBPMNTextAnnotation=function(t,e,r,n){r.id=r.id||i.i(f.g)(),r.nodeId=t.id;var o=new l.a,a=new p.a,s=new g.a;a.id=t.id+"_"+r.id+"_path",a.width=r.width,a.height=r.height,a.relativeMode="Object",s.id=t.id+"_"+r.id+"_text",s.content=r.text;var d=t.style;s.style={fontSize:d.fontSize,italic:d.italic,gradient:null,opacity:d.opacity,bold:d.bold,textWrapping:d.textWrapping,color:d.color,fill:"white",fontFamily:d.fontFamily,whiteSpace:d.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:d.strokeDashArray,textAlign:d.textAlign,textDecoration:d.textDecoration},s.horizontalAlignment="Center",s.verticalAlignment="Center",s.relativeMode="Object",s.margin={left:5,right:5,top:5,bottom:5},o.offsetX=t.offsetX+r.length*Math.cos(r.angle*(Math.PI/180)),o.offsetY=t.offsetY+r.length*Math.sin(r.angle*(Math.PI/180)),o.float=!0,o.transform=y.n.Self,o.id=t.id+"_textannotation_"+r.id,o.style.strokeColor="transparent",o.margin={left:10,right:10,top:10,bottom:10},o.relativeMode="Object",o.rotateAngle=0,o.children=[a,s];var c=new h.a(t.shape,"annotations",{id:o.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);c.ports=[{id:a.id+"_port",shape:"Square",offset:{x:0,y:.5}}],c.offsetX=o.offsetX,c.offsetY=o.offsetY,c.text=r.text,c.angle=r.angle,c.length=r.length,c.width=r.width,c.height=r.height,c.wrapper=o,o.children.push(c.initPortWrapper(c.ports[0]));var u=new S.a(0,0,0,0),v=t.width||t.minWidth||0,b=t.height||t.minHeight||0;void 0!==v&&void 0!==b&&(u=new S.a(t.offsetX-v/2,t.offsetY-b/2,v,b)),this.setAnnotationPath(u,o,{x:c.offsetX,y:c.offsetY},c,r.length,r.angle);var w={id:t.id+"_"+r.id+"_connector",constraints:y.h.Default&~(y.h.DragTargetEnd|y.h.Drag),sourceID:t.id,targetID:o.id,targetDecorator:{shape:"None"}},x=new m.a(t.shape,"annotations",w,!0);x.targetPortID=c.ports[0].id,x.init(e),x.wrapper.float=!1,x.wrapper.transform=y.n.Self,n.children.push(x.wrapper),x.zIndex=1e4;var I=this.annotationObjects[t.id];I||(I={}),I[r.id]||(I[r.id]={});return I[r.id].node=c,I[r.id].connector=x,this.annotationObjects[t.id]=I,e.initObject(c,void 0,!1),c.zIndex=1e4,o},t.prototype.renderBPMNTextAnnotation=function(t,e,r){e.id=e.id||i.i(f.g)();var n=new l.a,o=new p.a,a=new g.a;o.id="_"+e.id+"_path",o.width=e.width,o.height=e.height,o.relativeMode="Object",a.id=e.id+"_text",a.content=e.shape.annotation.text;var s=e.style;a.style={fontSize:s.fontSize,italic:s.italic,gradient:null,opacity:s.opacity,bold:s.bold,textWrapping:s.textWrapping,color:s.color,fill:"white",fontFamily:s.fontFamily,whiteSpace:s.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:s.strokeDashArray,textAlign:s.textAlign,textDecoration:s.textDecoration},a.horizontalAlignment="Left",a.verticalAlignment="Center",a.relativeMode="Object",a.margin={left:5,right:5,top:5,bottom:5},n.offsetX=e.offsetX+e.shape.annotation.length*Math.cos(e.shape.annotation.angle*(Math.PI/180)),n.offsetY=e.offsetY+e.shape.annotation.length*Math.sin(e.shape.annotation.angle*(Math.PI/180)),n.float=!0,n.id=e.id+"_textannotation_"+e.id,n.style.strokeColor="transparent",n.margin={left:10,right:10,top:10,bottom:10},n.relativeMode="Object",n.rotateAngle=0,n.children=[o,a];var d=new h.a(e.shape,"annotations",{id:n.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);d.ports=[{id:o.id+"_port",shape:"Square",offset:{x:0,y:.5}}],d.offsetX=n.offsetX,d.offsetY=n.offsetY,d.shape&&d.shape.annotation&&(d.text=e.shape.annotation.text,d.angle=e.shape.annotation.angle,d.length=e.shape.annotation.length),d.width=e.width,d.height=e.height,d.wrapper=n,n.children.push(d.initPortWrapper(d.ports[0]));var c=new S.a(0,0,0,0),u=e.width||0,m=e.height||0;return void 0!==u&&void 0!==m&&(c=new S.a(e.offsetX-u/2,e.offsetY-m/2,u,m)),this.setAnnotationPath(c,n,{x:d.offsetX,y:d.offsetY},d,e.length,e.angle),n},t.prototype.getTextAnnotationWrapper=function(t,e){if(t&&"Bpmn"===t.shape.type){if("TextAnnotation"===(i.i(I.isBlazor)()?t.shape.bpmnShape:t.shape.shape))return t.wrapper.children[1];if(this.annotationObjects[t.id]&&this.annotationObjects[t.id][""+e]){var r=this.annotationObjects[t.id][""+e].node;return this.getTextAnnotationWrapper(r,e)}}return null},t.prototype.addAnnotation=function(t,e,i){var r=t.wrapper.children[0],n=t.shape;e.nodeId=t.id;var o=new h.v(n,"annotations",e,!0);return n.annotations.push(o),r.children.push(this.getBPMNTextAnnotation(t,i,e,r)),t.wrapper.measure(new w.a),t.wrapper.arrange(t.wrapper.desiredSize),this.annotationObjects[t.id][e.id].connector},t.prototype.clearAnnotations=function(t,e){var i=t.shape;if(i.annotations.length)for(var r=i.annotations.length-1;r>=0;r--){var n=i.annotations[parseInt(r.toString(),10)];this.removeAnnotationObjects(t,n,e)}delete this.annotationObjects[t.id]},t.prototype.checkAndRemoveAnnotations=function(t,e){if("Bpmn"===t.shape.type)if(!i.i(I.isBlazor)()&&"TextAnnotation"===t.shape.shape||i.i(I.isBlazor)()&&"TextAnnotation"===t.shape.bpmnShape)for(var r=t.id.split("_"),n=r[r.length-1],o=r[r.length-3]||r[0],a=e.nameTable[""+o],s=a.shape,h=0,d=s.annotations;h<d.length;h++){var l=d[h];if(l.id===n){var c=s.annotations.indexOf(l);if(-1!==c)return e.removeDependentConnector(t),this.removeAnnotationObjects(a,l,e),!0}}else t.shape.annotations&&t.shape.annotations.length&&this.clearAnnotations(t,e);return!1},t.prototype.removeAnnotationObjects=function(t,e,r){var n=t.shape,o=n.annotations.indexOf(e);if(-1!==o){if(!(r.diagramActions&y.p.UndoRedo||r.diagramActions&y.p.Group)){var a={type:"CollectionChanged",changeType:"Remove",undoObject:i.i(f.e)(e),redoObject:i.i(f.e)(e),category:"Internal"};r.addHistoryEntry(a)}n.annotations.splice(o,1);var s=this.annotationObjects[t.id];if(s&&s[e.id]){var h=s[e.id].node,d=s[e.id].connector;r.removeElements(h),r.removeElements(d);var l=t.wrapper.children[0];o=l.children.indexOf(h.wrapper),l.children.splice(o,1),o=l.children.indexOf(d.wrapper),l.children.splice(o,1),r.removeFromAQuad(h),r.removeFromAQuad(d),delete r.nameTable[h.id],delete r.nameTable[d.id],delete s[e.id]}}},t.prototype.setAnnotationPath=function(t,e,r,n,o,a){var s=this.getAnnotationPathAngle(r,t),h="",d=e.children[0],l=e.children[2],c=e.children[1];d.horizontalAlignment="Stretch",d.verticalAlignment="Stretch",c.margin.left=c.margin.right=5,c.margin.top=c.margin.bottom=5;var p,g;0===s?(h="M10,20 L0,20 L0,0 L10,0",d.width=10,d.horizontalAlignment="Left",l.setOffsetWithRespectToBounds(0,.5,"Fraction"),c.margin.top=c.margin.bottom=10,p=t.middleRight,g={x1:t.right,y1:t.top,x2:t.right,y2:t.bottom}):180===s?(h="M0,0 L10,0 L10,20 L0,20",d.width=10,d.horizontalAlignment="Right",l.setOffsetWithRespectToBounds(1,.5,"Fraction"),c.margin.top=c.margin.bottom=10,p=t.middleLeft,g={x1:t.left,y1:t.top,x2:t.left,y2:t.bottom}):90===s?(h="M20,10 L20,0 L0,0 L0,10",d.height=10,d.verticalAlignment="Top",l.setOffsetWithRespectToBounds(.5,0,"Fraction"),c.margin.left=c.margin.right=10,p=t.bottomCenter,g={x1:t.right,y1:t.bottom,x2:t.left,y2:t.bottom}):(h="M0,0 L0,10 L20,10 L20,0",d.height=10,d.verticalAlignment="Bottom",l.setOffsetWithRespectToBounds(.5,1,"Fraction"),c.margin.left=c.margin.right=10,p=t.topCenter,g={x1:t.right,y1:t.top,x2:t.left,y2:t.top});var u=t.center,f=b.a.transform(r,a,Math.max(t.width,t.height));p=i.i(v.k)(g,[u,f],!1,u),d.data=h,void 0!==o&&void 0!==a&&(p=b.a.transform(p,a,o),e.offsetX=n.offsetX=p.x,e.offsetY=n.offsetY=p.y)},t.prototype.isBpmnTextAnnotation=function(t,e){if(this.annotationObjects){var i=t.parentId,r=t.id,n=e.nameTable[""+i];return n&&"Bpmn"===n.shape.type&&this.annotationObjects[""+i]&&this.annotationObjects[""+i][""+r]?n:null}return null},t.prototype.updateTextAnnotationContent=function(t,e,i,r){var n=e.parentId,o=e.id;if(this.annotationObjects[""+n]&&this.annotationObjects[""+n][""+o])for(var a=0,s=t.shape.annotations;a<s.length;a++){var h=s[a];if(h.id===o){h.text=i;var d=this.annotationObjects[""+n][""+o].node.wrapper.children[1];d.content=i,d.visible=!0,t.wrapper.measure(new w.a),t.wrapper.arrange(t.wrapper.desiredSize)}}},t.prototype.updateQuad=function(t,e){var i,r=t.shape.annotations;if(r&&r.length>0)for(var n=0;n<r.length;n++)i=this.annotationObjects[t.id][r[parseInt(n.toString(),10)].id].node,e.updateQuad(i)},t.prototype.updateTextAnnotationProp=function(t,e,r,n){if("Bpmn"===t.shape.type){var o=t.shape.annotations;if(o&&o.length>0)for(var a=0;a<t.wrapper.children[0].children.length;a++)for(var s=0;s<o.length;s++){var h=t.wrapper.children[0].children[parseInt(a.toString(),10)].id.split("_"),d=h[h.length-1];if(d===o[parseInt(s.toString(),10)].id){var l=this.annotationObjects[t.id][o[parseInt(s.toString(),10)].id].node,c=this.annotationObjects[t.id][o[parseInt(s.toString(),10)].id].connector,p=(i.i(v.i)(c.targetPoint,t.wrapper.bounds,t.wrapper.bounds,!1),c.sourcePoint);p={x:c.sourcePoint.x+(n?t.wrapper.offsetX:t.offsetX)-e.offsetX,y:c.sourcePoint.y+(n?t.wrapper.offsetY:t.offsetY)-e.offsetY},p=b.a.transform(p,o[parseInt(s.toString(),10)].angle,o[parseInt(s.toString(),10)].length),t.wrapper.children[0].children[parseInt(a.toString(),10)].offsetX=l.offsetX=p.x,t.wrapper.children[0].children[parseInt(a.toString(),10)].offsetY=l.offsetY=p.y,r.updateQuad(l)}}}},t.prototype.getSubprocessChildCount=function(t){var e=0,i=t.shape.activity,r=i.subProcess,n=r.loop;return void 0!==n&&"None"!==n&&e++,void 0!==r.compensation&&!0===r.compensation&&e++,void 0!==r.collapsed&&!0===r.collapsed&&e++,void 0!==r.adhoc&&!0===r.adhoc&&e++,e},t.prototype.getTaskChildCount=function(t){var e=0,i=t.shape.activity,r=i.task;return void 0!==r.compensation&&!0===r.compensation&&e++,void 0!==r.loop&&"None"!==r.loop&&e++,e},t.prototype.setStyle=function(t,e){t.style.fill=e.style.fill,t.style.strokeColor=e.style.strokeColor,t.style.strokeWidth=e.style.strokeWidth,t.style.strokeDashArray=e.style.strokeDashArray,t.style.opacity=e.style.opacity,t.style.gradient=e.style.gradient,0!=(e.constraints&y.f.Shadow)&&(t.shadow=e.shadow)},t.prototype.updateBPMN=function(t,e,r,n){var o=t.shape||{},a=r.wrapper.children[0],s=r.shape.shape||r.shape.bpmnShape,h=void 0!==t.width||void 0!==t.height;if((i.i(I.isBlazor)()&&"Gateway"===o.bpmnShape||"Gateway"===o.shape)&&o.gateway)this.removeBPMNElementFromDOM(r,n),r.wrapper.children[0]=this.getBPMNGatewayShape(r);else if((i.i(I.isBlazor)()&&"DataObject"===o.bpmnShape||"DataObject"===o.shape)&&o.dataObject)this.removeBPMNElementFromDOM(r,n),r.wrapper.children[0]=this.getBPMNDataObjectShape(r);else if((i.i(I.isBlazor)()&&"Activity"===o.bpmnShape||"Activity"===o.shape)&&o.activity)this.removeBPMNElementFromDOM(r,n),r.wrapper.children[0]=this.getBPMNActivityShape(r);else if((i.i(I.isBlazor)()&&"Event"===o.bpmnShape||"Event"===r.shape.bpmnShape||"Event"===r.shape.shape||"Event"===o.shape)&&o.event){this.removeBPMNElementFromDOM(r,n);var d=o.event;r.wrapper.children[0]=this.getBPMNEventShape(r,d)}else i.i(I.isBlazor)()&&"Message"===o.bpmnShape||"Message"===o.shape||i.i(I.isBlazor)()&&"DataSource"===o.bpmnShape||"DataSource"===o.shape?(this.removeBPMNElementFromDOM(r,n),r.wrapper.children[0]=this.getBPMNShapes(r)):void 0!==o.gateway||"Gateway"===s&&h?this.updateBPMNGateway(r,t):void 0!==o.dataObject||"DataObject"===s&&h?this.updateBPMNDataObject(r,t,e):void 0!==o.activity||"Activity"===s&&h?this.updateBPMNActivity(r,t,e,n):(void 0!==o.event||"Event"===s&&h)&&this.updateBPMNEvent(r,t,e);if(r.wrapper.children[0].id=r.wrapper.children[0].id||a.id,t.style&&(i.i(u.O)(t.style,a instanceof c.a?!i.i(I.isBlazor)()&&"Activity"===r.shape.shape||i.i(I.isBlazor)()&&"Activity"===r.shape.bpmnShape?a.children[0].children[0]:a.children[0]:a),t.style&&t.style.strokeColor&&a.children.length>0))if((!i.i(I.isBlazor)()&&"Activity"===r.shape.shape||i.i(I.isBlazor)()&&"Activity"===r.shape.bpmnShape)&&"SubProcess"===r.shape.activity.activity){var l=a.children[0];this.updateBPMNStyle(l,t.style.strokeColor)}else(!i.i(I.isBlazor)()&&"Gateway"===r.shape.shape||i.i(I.isBlazor)()&&"Gateway"===r.shape.bpmnShape||!i.i(I.isBlazor)()&&"Event"===r.shape.shape||i.i(I.isBlazor)()&&"Event"===r.shape.bpmnShape)&&this.updateBPMNStyle(a,t.style.strokeColor)},t.prototype.removeBPMNElementFromDOM=function(t,e){for(var r=0,n=e.views;r<n.length;r++){var o=n[r];i.i(x.m)(t.id+"_groupElement",o)}},t.prototype.updateBPMNStyle=function(t,e){for(var r=0;r<t.children.length;r++){var n=t.children[parseInt(r.toString(),10)];i.i(u.O)({strokeColor:e},n)}},t.prototype.updateBPMNGateway=function(t,e){var r=t.shape,n=t.wrapper.children[0];if(r){i.i(u.O)(t.style,n.children[0]);var a=o(r.gateway.type),s=this.updateGatewaySubType(n,t,a);i.i(x.m)(n.children[1].id),n.children.splice(1,1),n.children.push(s)}void 0===e.width&&void 0===e.height||this.setSizeForBPMNGateway(t.shape.gateway,n,e.width||t.width,e.height||t.height)},t.prototype.updateGatewaySubType=function(t,e,i){var r=new p.a;return r.id=e.id+"_1_gatewayType",r.width=t.children[1].width,r.height=t.children[1].height,r.margin.left=t.children[1].margin.left,r.margin.top=t.children[1].margin.top,r.data=i,r.offsetX=t.children[1].offsetX,r.offsetY=t.children[1].offsetY,r.style=t.children[1].style,r.horizontalAlignment=t.children[1].horizontalAlignment,r.verticalAlignment=t.children[1].verticalAlignment,r.relativeMode=t.children[1].relativeMode,r.transform=t.children[1].transform,r},t.prototype.updateBPMNDataObject=function(t,e,r){var n=e.shape,o=t.wrapper.children[0];if(n){var a=o.children[1],s=o.children[2];if(void 0!==e.style&&(i.i(u.O)(e.style,o.children[0]),a.style.opacity=t.style.opacity,s.style.opacity=t.style.opacity),n.dataObject){switch(n.dataObject.type){case"None":a.visible=!1;break;case"Input":a.style.fill="white";break;case"Output":a.style.fill="black"}"None"===r.shape.dataObject.type&&(a.visible=!0),void 0!==e.shape.dataObject.collection&&(s.visible=n.dataObject.collection)}}void 0===e.width&&void 0===e.height||this.setSizeForBPMNDataObjects(t.shape.dataObject,o,e.width||t.width,e.height||t.height)},t.prototype.getEvent=function(t,e,i,r,n,o){switch(i){case"Start":n.visible=!1,r.style.strokeDashArray="",o.style.fill="white",o.style.strokeColor="black",r.style.fill="white";break;case"NonInterruptingStart":r.style.strokeDashArray="2 3",o.style.fill="white",r.style.fill="white",o.style.strokeColor="black",n.visible=!1;break;case"Intermediate":r.style.strokeDashArray="",r.style.fill="white",n.style.strokeDashArray="",r.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",this.updateEventVisibility(e,n);break;case"NonInterruptingIntermediate":r.style.fill="white",r.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",r.style.strokeDashArray="2 3",n.style.strokeDashArray="2 3",this.updateEventVisibility(e,n);break;case"ThrowingIntermediate":case"End":r.style.fill="End"!==i?"white":"black",r.style.strokeDashArray="",n.style.strokeDashArray="",r.style.gradient=null,o.style.fill="black",this.updateEventVisibility(e,n),o.style.strokeColor=t.style.fill}},t.prototype.updateEventVisibility=function(t,e){t.shape.activity&&t.shape.activity.subProcess&&t.shape.activity.subProcess.events&&void 0!==t.shape.activity.subProcess.events[0]&&void 0!==t.shape.activity.subProcess.events[0].event?"NonInterruptingStart"!==t.shape.activity.subProcess.events[0].event&&"Start"!==t.shape.activity.subProcess.events[0].event||(e.visible=!0):void 0!==t.shape.event&&("NonInterruptingStart"!==t.shape.event.event&&"Start"!==t.shape.event.event||(e.visible=!0))},t.prototype.updateBPMNEvent=function(t,e,r){var n,o=e.shape,a=t.wrapper.children[0];if(o){var s=a.children[0],h=a.children[1],d=a.children[2];void 0!==e.style&&(i.i(u.O)(t.style,a.children[0]),void 0===e.style.opacity&&void 0===e.style.strokeColor||(h.style.opacity=t.style.opacity,h.style.strokeColor=t.style.strokeColor));var l=o.event.event;n=o.event.trigger,void 0!==l&&this.getEvent(t,r,l,s,h,d),void 0!==n&&this.updateBPMNEventTrigger(t,e)}void 0===e.width&&void 0===e.height&&void 0===n||this.setSizeForBPMNEvents(t.shape.event,a,e.width||t.width,e.height||t.height)},t.prototype.updateBPMNEventTrigger=function(t,e){var r=t.shape,o=t.wrapper.children[0].children[2];o.canMeasurePath=!0,!e.style||void 0===e.style.strokeColor&&void 0===e.style.opacity||i.i(u.O)(t.style,o);var a=n(r.event.trigger);o.data=a},t.prototype.updateBPMNActivity=function(t,e,i,r){var n=e.shape,o=t.wrapper.children[0],a=this.getSize(t,o.children[0].children[0]);if(n){var s=i.shape.activity.activity,h=t.shape.activity.activity;if("SubProcess"!==s&&"Task"!==s||"SubProcess"!==h&&"Task"!==h){if("Task"===h&&void 0!==n.activity.task){this.updateBPMNActivityTask(t,e);var d=this.getTaskChildCount(t),l=void 0,c=12*d,p=a.width/2-c;l=1===d?p+8:p+8*(d-1),void 0!==n.activity.task.loop&&this.updateBPMNActivityTaskLoop(t,e,l,d,p,2)}"SubProcess"===h&&void 0!==n.activity.subProcess&&this.updateBPMNActivitySubProcess(t,e,i,r)}else r.removeElements(t),t.wrapper.children[0]=this.getBPMNActivityShape(t);this.setSizeForBPMNActivity(t.shape.activity,o,e.width||a.width,e.height||a.height,t)}void 0===e.width&&void 0===e.height||this.setSizeForBPMNActivity(t.shape.activity,o,e.width||a.width,e.height||a.height,t)},t.prototype.updateBPMNActivityTask=function(t,e){for(var i=e.shape,r=t.wrapper.children[0].children[0],n=i.activity.task,o=0;o<r.children.length;o++)if(r.children[parseInt(o.toString(),10)].id===t.id+"_1_taskTypeService"){r.children.splice(o,1);var s=document.getElementById(t.id+"_1_taskTypeService");s.parentNode.removeChild(s)}if("Receive"===n.type||"Send"===n.type?r.children[1].height=14:r.children[1].height=20,void 0!==n.type){var h=a(n.type);r.children[1].data=h;for(var o=0;o<r.children.length;o++)if(r.children[parseInt(o.toString(),10)].id===t.id+"_1_tasktType"){r.children.splice(o,1);var s=document.getElementById(t.id+"_1_tasktType");s.parentNode.removeChild(s)}var d=new p.a;if(d.id=t.id+"_1_tasktType",d.margin.left=5,d.margin.top=5,d.data=h,d.style.fill="transparent",d.style.opacity=t.style.opacity,"Receive"===n.type||"Send"===n.type)d.width=18,d.height=16,"Send"===n.type&&(d.style.fill="black"),r.children.splice(1,0,d);else if("Manual"===n.type)d.width=16,d.height=11,r.children.splice(1,0,d);else if("Service"!==n.type)d.width=20,d.height=20,r.children.splice(1,0,d);else{d.width=20,d.height=20,r.children.splice(1,0,d);var l=new p.a;l.id=t.id+"_1_taskTypeService",l.data=h,l.margin.left=r.children[1].margin.left+9,l.margin.top=r.children[1].margin.top+9,l.style.fill="white",l.style.opacity=t.style.opacity,r.children.splice(2,0,l)}}void 0!==i.activity.task.call&&(!1!==i.activity.task.call?r.children[0].style.strokeWidth=4:r.children[0].style.strokeWidth=1),void 0!==i.activity.task.compensation&&(!0===i.activity.task.compensation?r.children[3].visible=!0:r.children[3].visible=!1)},t.prototype.updateBPMNActivityTaskLoop=function(t,e,i,r,n,o){var a,h,d=e.shape,l=t.wrapper.children[0].children[0],c=d.activity,p=0;if(void 0!==c.subProcess){var g=c.subProcess;p="Transaction"===c.subProcess.type?2:0,a=g.loop,h=s(a),l.children[2+p].data=h,l.children[2+p].visible="None"!==a}else void 0!==c.task&&void 0!==c.task.loop&&(h=s(c.task.loop),l.children[2].data=h,l.children[2].visible="None"!==c.task.loop);this.updateChildMargin(l,r,n,i,o+p)},t.prototype.updateChildMargin=function(t,e,i,r,n){if(1===e)for(var o=n;o<t.children.length;o++)2!==o&&!0===t.children[parseInt(o.toString(),10)].visible&&(t.children[parseInt(o.toString(),10)].margin.left=r,r=i+8);else{r=i+8*(e-1);for(var o=n;o<t.children.length;o++)2!==o&&!0===t.children[parseInt(o.toString(),10)].visible&&(t.children[parseInt(o.toString(),10)].margin.left=r,r+=20)}},t.prototype.updateBPMNActivitySubProcess=function(t,e,r,n){var o,a=e.shape,s=t.wrapper.children[0],h=this.getSize(t,s.children[0].children[0]),d=a.activity.subProcess,l=this.getSubprocessChildCount(t),c=12*l,p=h.width/2-c;o=1===l?p+8:p+8*(l-1),i.i(u.O)(t.style,s.children[0].children[0]),void 0!==d.events&&this.updateBPMNSubProcessEvent(t,e,r,n),void 0!==d.adhoc&&this.updateBPMNSubProcessAdhoc(t,r,d,o,l,p),void 0!==d.boundary&&this.updateBPMNSubProcessBoundary(t,d),void 0!==d.collapsed&&this.updateBPMNSubProcessCollapsed(t,r,d,o,l,p,n),void 0!==d.compensation&&this.updateBPMNSubProcessCompensation(t,r,d,o,l,p),void 0!==d.loop&&this.updateBPMNSubProcessLoop(t,r,d,o,l,p),void 0!==d.transaction&&this.updateBPMNSubProcessTransaction(t,e,r,n)},t.prototype.updateBPMNSubProcessEvent=function(t,e,i,r){for(var n=e.shape,o=t.wrapper.children[0],a=o.children[0],s=(o.children[0].children.length,n.activity.subProcess),h=0,d=Object.keys(s.events);h<d.length;h++){var l=d[h],c=Number(l),p=a.children[c+2],g=t.shape.activity.subProcess.events[parseInt(c.toString(),10)];this.updateBPMNSubEvent(t,s.events[parseInt(c.toString(),10)],g,p,e,i,r)}},t.prototype.updateBPMNSubEvent=function(t,e,r,o,a,s,h){var d,l,c=t.wrapper.children[0],p=a.shape,g=o.children[0],f=o.children[1],m=o.children[2];if(a.style&&(void 0===a.style.strokeColor&&void 0===a.style.opacity||(c.children[0].children[1].style.strokeColor=a.style.strokeColor,c.children[0].children[1].style.opacity=a.style.opacity)),void 0!==p.activity.subProcess&&(d=e.event,l=e.trigger),void 0!==d&&this.getEvent(a,s,d,g,f,m),void 0!==l){a.style&&i.i(u.O)(a.style,c.children[0]);var y=n(l);o.children[2].data=y}if(void 0===e.height&&void 0===e.width||this.getEventSize(e,o),void 0!==e.id&&(o.id=e.id),void 0!==e.margin&&(o.margin=e.margin),void 0!==e.horizontalAlignment&&(o.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(o.verticalAlignment=e.verticalAlignment),void 0!==e.offset&&(o.setOffsetWithRespectToBounds(r.offset.x,r.offset.y,"Fraction"),o.relativeMode="Point"),void 0!==e.annotations){var v=void 0,b=c.children[0].children[2];o.children[3]&&o.children.length>3&&(v=o.children[3],h.updateAnnotation(e.annotations[0],v,b))}if(void 0!==e.ports){var S=void 0,w=c.children[0].children[2];o.children[4]&&o.children.length>4&&(S=o.children[4],h.updatePort(e.ports[0],S,w))}void 0!==e.visible&&this.updateDiagramContainerVisibility(o,e.visible)},t.prototype.updateBPMNSubProcessTransaction=function(t,e,i,r){var n,o=e.shape.activity.subProcess.transaction,a=t.wrapper.children[0].children[0].children[2];void 0!==o.success&&(n=t.shape.activity.subProcess.transaction.success,this.updateBPMNSubEvent(t,o.success,n,a.children[0],e,i,r)),void 0!==o.cancel&&(n=t.shape.activity.subProcess.transaction.cancel,this.updateBPMNSubEvent(t,o.cancel,n,a.children[1],e,i,r)),void 0!==o.failure&&(n=t.shape.activity.subProcess.transaction.failure,this.updateBPMNSubEvent(t,o.failure,n,a.children[2],e,i,r));for(var s=0,h=t.outEdges;s<h.length;s++){var d=h[s],l=r.nameTable[""+d];switch(l.sourcePortID){case"success":o.success&&void 0!==o.success.visible&&r.connectorPropertyChange(l,{},{sourcePortID:"success"});break;case"cancel":o.cancel&&void 0!==o.cancel.visible&&r.connectorPropertyChange(l,{},{sourcePortID:"cancel"});break;case"failure":o.failure&&void 0!==o.failure.visible&&r.connectorPropertyChange(l,{},{sourcePortID:"failure"})}}},t.prototype.getEventSize=function(t,e){void 0!==t.height&&(e.height=t.height,e.children[0].height=t.height,e.children[1].height=.85*t.height,e.children[2].height=.54*t.height),void 0!==t.width&&(e.width=t.width,e.children[0].width=t.width,e.children[1].width=.85*t.width,e.children[2].width=.54*t.width)},t.prototype.updateBPMNSubProcessAdhoc=function(t,e,i,r,n,o){var a=(t.shape,t.wrapper.children[0].children[0]),s="Transaction"===t.shape.activity.subProcess.type?2:0;!1===i.adhoc?a.children[3+s].visible=!1:a.children[3+s].visible=!0,this.updateChildMargin(a,n,o,r,3+s)},t.prototype.updateBPMNSubProcessBoundary=function(t,e){var i=(t.shape,t.wrapper.children[0].children[0].children[0]);"Default"===e.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="1 0"),"Call"===e.boundary&&(i.style.strokeWidth=4,i.style.strokeDashArray="1 0"),"Event"===e.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="2 2")},t.prototype.updateElementVisibility=function(t,e,r){if(t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=t.shape.activity.subProcess.processes,o=n.length-1;o>=0;o--){var a=r.nameTable[n[parseInt(o.toString(),10)]];a.visible=e,r.updateElementVisibility(a.wrapper,a,e),e&&((!i.i(I.isBlazor)()&&"Event"===a.shape.shape||i.i(I.isBlazor)()&&"Event"===a.shape.bpmnShape)&&this.setEventVisibility(a,a.wrapper.children[0].children),"SubProcess"===a.shape.activity.activity&&this.setSubProcessVisibility(a));for(var s=a.inEdges.concat(a.outEdges),h=s.length-1;h>=0;h--){var d=r.nameTable[s[parseInt(h.toString(),10)]];d.visible=e,r.updateElementVisibility(d.wrapper,d,e)}}e&&((!i.i(I.isBlazor)()&&"Event"===t.shape.shape||i.i(I.isBlazor)()&&"Event"===t.shape.bpmnShape)&&this.setEventVisibility(t,t.wrapper.children[0].children),"SubProcess"===t.shape.activity.activity&&this.setSubProcessVisibility(t),"Task"===t.shape.activity.activity&&(!i.i(I.isBlazor)()&&"Activity"===t.shape.shape||i.i(I.isBlazor)()&&"Activity"===t.shape.bpmnShape)&&"None"===t.shape.activity.subProcess.loop&&(t.wrapper.children[0].children[0].children[3].visible=!1))},t.prototype.updateBPMNSubProcessCollapsed=function(t,e,i,r,n,o,a){var s=t.shape.activity.subProcess.events.length,h=t.wrapper.children[0].children[0],d="Transaction"===t.shape.activity.subProcess.type?3:1;!1===i.collapsed?(this.updateElementVisibility(t,!0,a),h.children[d+s].visible=!1):(this.updateElementVisibility(t,!1,a),h.children[d+s].visible=!0),this.updateChildMargin(h,n,o,r,3+s)},t.prototype.updateBPMNSubProcessCompensation=function(t,e,i,r,n,o){var a=t.wrapper.children[0].children[0],s="Transaction"===t.shape.activity.subProcess.type?2:0;!1===i.compensation?a.children[4+s].visible=!1:a.children[4+s].visible=!0,this.updateChildMargin(a,n,o,r,4+s)},t.prototype.updateBPMNSubProcessLoop=function(t,e,i,r,n,o){this.updateBPMNActivityTaskLoop(t,t,r,n,o,1)},t.prototype.updateBPMNConnector=function(t,e,i,r){var n=i.shape,o=t.shape.flow;return"Sequence"!==n.flow&&!n.sequence||"Sequence"!==o||(t=this.getSequence(t,e,i,r)),"Association"!==n.flow&&!n.association||"Association"!==o||(t=this.getAssociation(t,e,i,r)),"Message"!==n.flow&&!n.message||"Message"!==o||(t=this.getMessage(t,e,i,r)),t},t.prototype.getSequence=function(t,e,i,r){if("Normal"!==i.shape.sequence&&"Normal"!==t.shape.sequence||(t.targetDecorator.shape="Arrow",t.sourceDecorator.shape="None",t.style.strokeDashArray="None",t.targetDecorator.style.fill="black",t.targetDecorator.width=10,t.targetDecorator.height=10,r.connectorPropertyChange(t,e,{targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"None"},style:{strokeDashArray:"None"}}),t.wrapper.children[3].visible=!1),"Default"===i.shape.sequence||"Default"===t.shape.sequence){t.targetDecorator.shape="Arrow",t.sourceDecorator.shape="None",t.style.strokeDashArray="None",t.targetDecorator.style.fill="black",t.targetDecorator.width=10,t.targetDecorator.height=10,r.connectorPropertyChange(t,e,{style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"None"}});var n=new p.a,o=(new p.a,void 0);n=t.getSegmentElement(t,n);for(var a=t.intermediatePoints,s=0;s<a.length-1;s++)length+=t.distance(a[parseInt(s.toString(),10)],a[s+1]),o=t.findPath(a[parseInt(s.toString(),10)],a[s+1]);var h=new p.a;h.data=o[0],h.id=t.id+"_"+i.shape.sequence||t.shape.sequence,h.offsetX=o[1].x,h.offsetY=o[1].y,h.rotateAngle=45,h.transform=y.n.Self,this.removeDomElement(t,r,h)}return"Conditional"!==i.shape.sequence&&"Conditional"!==t.shape.sequence||(t.sourceDecorator.shape="Diamond",t.sourceDecorator.width=20,t.sourceDecorator.height=10,t.sourceDecorator.style.fill="white",t.targetDecorator.style.fill="black",t.style.strokeDashArray="None",t.targetDecorator.shape="Arrow",r.connectorPropertyChange(t,e,{style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"Diamond",width:20,height:10,style:{fill:"white"}}}),t.wrapper.children[3].visible=!1),t},t.prototype.getAssociation=function(t,e,i,r){return"Default"!==i.shape.association&&"Default"!==t.shape.association||(t.sourceDecorator.shape="None",t.targetDecorator.shape="None",t.style.strokeDashArray="2 2",r.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"None"},sourceDecorator:{shape:"None"}}),t.wrapper.children[3].visible=!1),"Directional"!==i.shape.association&&"Directional"!==t.shape.association||(t.sourceDecorator.shape="None",t.style.strokeDashArray="2 2",t.targetDecorator.shape="OpenArrow",t.targetDecorator.width=10,t.targetDecorator.height=10,r.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"OpenArrow",width:10,height:10},sourceDecorator:{shape:"None"}}),t.wrapper.children[3].visible=!1),"BiDirectional"!==i.shape.association&&"BiDirectional"!==t.shape.association||(t.sourceDecorator.shape="OpenArrow",t.targetDecorator.shape="OpenArrow",t.sourceDecorator.width=10,t.sourceDecorator.height=10,t.sourceDecorator.style.fill="black",r.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"OpenArrow",width:10,height:10},sourceDecorator:{shape:"OpenArrow",width:10,height:10,style:{fill:"black"}}}),t.wrapper.children[3].visible=!1),t},t.prototype.getMessage=function(t,e,r,n){var o,a;t.sourceDecorator.shape="Circle",t.sourceDecorator.width=10,t.targetDecorator.shape="Arrow",t.sourceDecorator.height=10,t.sourceDecorator.style.fill="White",t.targetDecorator.style.fill="White",n.connectorPropertyChange(t,e,{sourceDecorator:{shape:"Circle",style:{fill:"White"},width:10,height:10},targetDecorator:{shape:"Arrow",style:{fill:"white"}}});for(var s=t.intermediatePoints,h=0,d=0;d<s.length-1;d++){h+=t.distance(s[d],s[d+1]);var l=.5*h;h>=l&&(o=i.i(v.a)(s[parseInt(d.toString(),10)],s[d+1]),a=b.a.transform(s[parseInt(d.toString(),10)],o,l))}var c=new p.a;return t.wrapper.children[0].style.strokeDashArray=" 4 4",t.style.strokeDashArray="4 4",c.id=t.id+"_"+r.shape.message||t.shape.message,c.width=25,c.height=15,c.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",c.horizontalAlignment="Center",c.verticalAlignment="Center",c.transform=y.n.Self,c.style.fill="NonInitiatingMessage"===r.shape.message?"lightgrey":"white",c.offsetX=a.x,c.offsetY=a.y,"Default"!==r.shape.message&&void 0!==r.shape.message||"Default"!==t.shape.message?c.style.fill="NonInitiatingMessage"===(r.shape.message||t.shape.message)?"lightgrey":"white":c.visible=!1,this.removeDomElement(t,n,c),t},t.prototype.removeDomElement=function(t,e,r){for(var n=0,o=e.views;n<o.length;n++){var a=o[n];i.i(x.m)(t.id+"_groupElement",a),i.i(x.m)(t.id+"_content_groupElement",a),i.i(x.m)(t.id+"_html_element",a)}t.wrapper.children.splice(3,1),t.wrapper.children.splice(3,0,r)},t.prototype.setSizeForBPMNEvents=function(t,e,i,r){e.children[0].width=i,e.children[0].height=r;var n=e.children[1];n.width=.85*i,n.height=.85*r;var o=e.children[2];"Message"===t.trigger?(o.width=.54*i,o.height=.4*r):(o.width=.5*i,o.height=.5*r)},t.prototype.updateAnnotationDrag=function(t,e,i,r){var n=t.id.split("_");if("textannotation"===n[1])for(var o=void 0,a=0;a<t.inEdges.length;a++){var s=e.nameTable[t.inEdges[parseInt(a.toString(),10)]];s&&(o=e.nameTable[s.sourceID]);var h={x:t.offsetX+i,y:t.offsetY+r},d=s.sourcePoint,l=b.a.findLength(h,d),c=b.a.findAngle(d,h);if(o.shape.annotations)for(var p=0;p<o.shape.annotations.length;p++)if(o.shape.annotations[parseInt(p.toString(),10)].id===n[n.length-1])return o.shape.annotations[parseInt(p.toString(),10)].length=l,o.shape.annotations[parseInt(p.toString(),10)].angle=c,this.setAnnotationPath(o.wrapper.bounds,t.wrapper,h,t),!1}return!!t.processId&&(this.drag(t,i,r,e),!0)},t.prototype.getAnnotationPathAngle=function(t,e){var r=i.i(v.i)(t,e,e,!1),n=0;switch(r){case"Right":n=0;break;case"Left":n=180;break;case"Bottom":n=90;break;case"Top":n=270}return n},t.prototype.setSizeForBPMNGateway=function(t,e,i,r){e.children[0].width=i,e.children[0].height=r,e.children[1].width=.45*i,e.children[1].height=.45*r},t.prototype.setSizeForBPMNDataObjects=function(t,e,i,r){e.children[0].width=i,e.children[0].height=r},t.prototype.setSizeForBPMNActivity=function(t,e,i,r,n){e.children[0].width=i,e.children[0].height=r,e.children[0].children[0].width=i,e.children[0].children[0].height=r,"Transaction"===t.subProcess.type&&(e.children[0].children[1].width=Math.max(i-6,1),e.children[0].children[1].height=Math.max(r-6,1),e.children[0].children[2].width=i,e.children[0].children[2].height=r);var o,a,s=new d.a,h=this.getSize(n,s);a="Task"===t.activity?this.getTaskChildCount(n):this.getSubprocessChildCount(n);var l=12*a,c=(i||h.width)/2;o=1===a?c-6:c-l/2-4*(a-1)/2;for(var p=0;p<e.children[0].children.length;p++)e.children[0].children[parseInt(p.toString(),10)].visible&&(e.children[0].children[parseInt(p.toString(),10)].id.indexOf("_loop")>-1||e.children[0].children[parseInt(p.toString(),10)].id.indexOf("_0_compensation")>-1||e.children[0].children[parseInt(p.toString(),10)].id.indexOf("_0_adhoc")>-1||e.children[0].children[parseInt(p.toString(),10)].id.indexOf("_0_collapsed")>-1)&&(e.children[0].children[parseInt(p.toString(),10)].margin.left=o,o+=e.children[0].children[parseInt(p.toString(),10)].actualSize.width+4)},t.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof c.a)for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[parseInt(i.toString(),10)],e);t.visible=e},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Bpmn"},t}()),C={Event:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Message:"M0,0L19.8,12.8L40,0L0,0L0,25.5L40,25.5L40,0z",DataSource:"M 0 10.6 c 0 5.9 16.8 10.6 37.5 10.6 S 75 16.4 75 10.6 v 0 v 68.9 v -0.1 C 75 85.3 58.2 90 37.5 90 S 0 85.3 0 79.4 l 0 0.1 V 56 V 40.6 L 0 10.6 C 0 4.7 16.8 0 37.5 0 S 75 4.7 75 10.6 S 58.2 21.2 37.5 21.2S 0 16.5 0 10.6 l 0 6.7 v -0.2 c 0 5.9 16.8 10.6 37.5 10.6 S 75 22.9 75 17.1 v 6.8 v -0.1 c 0 5.9 -16.8 10.6 -37.5 10.6 S 0 29.6 0 23.8",SubProcess:"M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z",collapsedShape:"M 8.13789 15 H 0 V 0 H 8.13789 V 15 Z M 0.625991 13.75 H 7.51189 V 1.25 H 0.625991 V 13.75 Z M 2.18095 7.03125 L 5.95631 7.03125 L 5.95631 7.46875 L 2.18095 7.46875 Z M 3.8342 3.73 L 4.30369 3.73 L 4.30369 11.2687 L 3.8342 11.2687 Z"},z={Message:"M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",Timer:"M40,20c0,8.654-5.496,16.024-13.189,18.81C24.685,39.58,22.392,40,20,40C8.954,40,0,31.046,0,20S8.954,0,20,0S40,8.954,40,20z M20,0 L20,2.583 L20,5.283 M10.027,2.681L11.659,5.507 L12.669,7.257 M2.731,9.989 L6.014,11.885 L7.307,12.631 M0.067,19.967 L2.667,19.967 L5.35,19.967M2.748,29.939 L5.731,28.217 L7.323,27.298 M10.056,37.236 L11.292,35.095 L12.698,32.66 M20.033,39.9 L20.033,36.417 L20.033,34.617M30.006,37.219 L28.893,35.292 L27.364,32.643 M37.302,29.911 L34.608,28.355 L32.727,27.269M39.967,19.933 L37.417,19.933 L34.683,19.933 M37.286,9.961 L34.583,11.521 L32.71,12.602 M29.977,2.664 L28.653,4.957 L27.336,7.24 M22.104,8.5 L19.688,20 L24.75,20 L31.604,20 L24.75,20 L19.688,20z",Error:"M 23.77 18.527 l -7.107 27.396 l 8.507 -17.247 L 36.94 40.073 l 6.394 -25.997 l -8.497 15.754 L 23.77 18.527 Z",Escalation:"M 30.001 8.098 L 11.842 43.543 l 18.159 -18.882 l 18.162 18.882 L 30.001 8.098 Z ",Cancel:"M 3.5 16 L 0 12.6 L 4.6 8 L 0 3.5 L 3.4 0 L 8 4.6 l 4.5 -4.5 L 16 3.5 L 11.5 8 l 4.5 4.5 l -3.4 3.5 L 8 11.4 L 3.5 16 Z",Compensation:"M 25.7086 0 L 0 25 L 25.7086 50 V 26.3752 L 50 50 V 0 L 25.7086 23.6248 V 0 Z ",Conditional:"M 0 0 H 16 V 16 H 0 z M 1.14 3.2 H 14.85 M 1.14 6.4 H 14.85 M 1.14 9.6 H 14.85 M 1.14 12.8 H 14.85",Link:"M 32.014 19.258 v 5.992 H 9.373 v 9.504 h 22.641 v 5.988 L 50.622 30 L 32.014 19.258 Z",Signal:"M 50 50 H 0 L 25.0025 0 L 50 50 Z",Terminate:"M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",Multiple:"M 17.784 48.889 H 42.21 l 7.548 -23.23 L 29.997 11.303 L 10.236 25.658 L 17.784 48.889 Z",Parallel:"M 27.276 49.986 h 5.58 v -17.15 h 17.146 V 27.17 h -17.15 l 0.004 -17.15 h -5.58 l -0.004 17.15 H 9.994 v 5.666 h 17.278 L 27.276 49.986 Z"},O={None:"",Exclusive:"M 11.196 29.009 l 6.36 -9.712 l -5.764 -8.899 h 4.393 l 3.732 5.979 l 3.656 -5.979 h 4.354 l -5.789 9.039l 6.36 9.572 h -4.532 l -4.126 -6.437 l -4.139 6.437 H 11.196 Z",Inclusive:"M 20.323 31.333 c -6.625 0 -12.015 -5.39 -12.015 -12.015 s 5.39 -12.015 12.015 -12.015 s 12.016 5.39 12.016 12.015 S 26.948 31.333 20.323 31.333 Z M 20.323 9.303 c -5.522 0 -10.015 4.493 -10.015 10.015 s 4.492 10.015 10.015 10.015 s 10.016 -4.493 10.016 -10.015 S 25.846 9.303 20.323 9.303 Z",Parallel:"M 18.394 29.542 v -8.833 H 9.626 v -3.691 h 8.768 V 8.251 h 3.734 v 8.767 h 8.768 v 3.691 h -8.768 v 8.833 H 18.394 Z",Complex:"M29.198,19.063L23.089,19.063L27.794,14.358L26.38,12.944L21.223,18.101L21.223,10.443L19.223,10.443L19.223,17.976L14.022,12.776L12.608,14.19L17.48,19.063L10.365,19.063L10.365,21.063L18.261,21.063L12.392,26.932L13.806,28.346L19.223,22.929L19.223,30.225L21.223,30.225L21.223,22.805L25.925,27.507L27.339,26.093L22.309,21.063L29.198,21.063z",EventBased:"M 20.322 29.874 c -5.444 0 -9.873 -4.43 -9.873 -9.874 s 4.429 -9.874 9.873 -9.874 s 9.874 4.429 9.874 9.874 S 25.767 29.874 20.322 29.874 Z M 20.322 32.891 c -7.107 0 -12.89 -5.783 -12.89 -12.891 c 0 -7.107 5.782 -12.89 12.89 -12.89 c 7.108 0 12.891 5.783 12.891 12.89 C 33.213 27.108 27.431 32.891 20.322 32.891 Z M 24.191 25.386 h -7.984 l -2.469 -7.595 l 6.461 -4.693 l 6.461 4.693 L 24.191 25.386 Z",ExclusiveEventBased:"M 30 15 C 30 23.28 23.28 30 15 30 S 0 23.28 0 15 S 6.72 0 15 0 S 30 6.72 30 15 z M 15 5 L 5 12.5 L 8 22.5 H 22 L 25 12.5 z",ParallelEventBased:"M 35 17.5 C 35 27.16 27.16 35 17.5 35 S 0 27.16 0 17.5 S 7.84 0 17.5 0 S 35 7.84 35 17.5 z M 14.58 5.83 V 14.58 H 5.83 V 20.42 H 14.58 V 29.17 H 20.42 V 20.42 H 29.17 V 14.58 H 20.42 V 5.83 z"},T={None:"",Service:"M 32.699 20.187 v -4.005 h -3.32 c -0.125 -0.43 -0.292 -0.83 -0.488 -1.21 l 2.373 -2.375 l -2.833 -2.83 l -2.333 2.333 c -0.44 -0.253 -0.9 -0.448 -1.387 -0.595 v -3.32 h -4.003 v 3.32 c -0.46 0.137 -0.890.322 -1.3 0.537 l -2.285 -2.275 l -2.833 2.83 l 2.285 2.278 c -0.235 0.42 -0.41 0.847 -0.547 1.307 h -3.33 v 4.005 h 3.33 c 0.148 0.488 0.343 0.955 0.588 1.395 l -2.325 2.325 l 2.822 2.832 l 2.373 -2.382 c 0.392 0.205 0.792 0.37 1.212 0.497 v 3.33 h 4.003 v -3.33 c 0.46 -0.138 0.89 -0.323 1.3 -0.547 l 2.43 2.432 l 2.822 -2.832 l -2.42 -2.422 c 0.222 -0.41 0.4 -0.85 0.535-1.297 H 32.699 Z M 22.699 21.987 c -2.1 0 -3.803 -1.703 -3.803 -3.803 c 0 -2.1 1.703 -3.803 3.803 -3.803 c 2.1 0 3.803 1.703 3.803 3.803 C 26.502 20.285 24.8 21.987 22.699 21.987 Z",Receive:"M 12.217 12.134 v 13.334 h 20 V 12.134 H 12.217 Z M 30.44 13.007 l -8.223 5.35 l -8.223 -5.35 H 30.44 Z M 13.09 24.594 V 13.459 l 9.127 5.94 l 9.127 -5.94 v 11.135 H 13.09 Z",Send:"M0,1.2260086 L8.0000002,8.3380068 16,1.2260086 16,12.000007 0,12.000007 z M1.6300015,0 L14.371001,0 8.0000055,5.662 z",InstantiatingReceive:"M 16.306 17.39 v 8.79 h 13.198 v -8.79 H 16.306 Z M 28.375 17.946 l -5.47 3.558 l -5.47 -3.558 H 28.375 Z M 28.948 25.625 H 16.861 v -7.389 l 6.043 3.931 l 6.043 -3.931 V 25.625 Z M 22.905 11.785c -5.514 0 -9.999 4.486 -9.999 10 c 0 5.514 4.485 10 9.999 10 s 9.999 -4.486 9.999 -10 C 32.904 16.272 28.419 11.785 22.905 11.785 Z M 22.905 31.239 c -5.212 0 -9.453 -4.241 -9.453 -9.454c 0 -5.212 4.241 -9.453 9.453 -9.453 s 9.452 4.241 9.452 9.453 C 32.357 26.998 28.117 31.239 22.905 31.239 Z",Manual:"M9.21 612 L5.82 612 L1.07 612 a1.07317 1 -180 0 1 -1.07317 -1 L0 604.75 A3.42007 1.59344 -180 0 0 1.61 604 L2.6 604 L5.99 604 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L2.6 605.34 a0.48818 0.183302 -90 0 0 0.0837073 0.342385 L5.63 605.69 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L10.28 605.66 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 607.01 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 607.35 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L10.01 607.33 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 608.67 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 609.01 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L9.47 608.99 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 610.34 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 610.68 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L9.21 610.66 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672",BusinessRule:"M 32.844 13.245 h -0.089 v 0 H 13.764 v -0.015 h -1.009 v 16.989 h 0.095 v 0.011 h 19.716 v -0.011 h 0.278 V 13.245 Z M 31.844 14.229 v 4.185 h -18.08 v -4.185 H 31.844 Z M 18.168 25.306 v 3.938 h -4.404 v -3.938 H 18.168 Z M 13.764 24.322 v -4.923 h 4.404 v 4.923 H 13.764 Z M 19.177 25.306 h 12.667 v 3.938 H 19.177 V 25.306 Z M 19.177 24.322v -4.923 h 12.667 v 4.923 H 19.177 Z",User:"M8.6751149,13.75 L10.79009,18.703003 11.664047,18.696991 13.792084,13.75 13.824066,13.75 C18.177001,13.75 21.709022,17.259003 21.748998,21.60199 21.748998,21.649994 21.743993,21.700012 21.735021,21.747009 21.137981,24.774994 18.775997,27.144989 15.74904,27.75 L6.7491024,27.75 C3.7231224,27.144989 1.3601628,24.774994 0.76312089,21.747009 0.75414884,21.700012 0.74914402,21.649994 0.75012076,21.60199 0.78912175,17.259003 4.3221171,13.75 8.6751149,13.75 z M11.249014,0.75 C14.287014,0.75 16.749015,3.2119999 16.749015,6.25 16.749015,9.2880001 14.287014,11.75 11.249014,11.75 8.211015,11.75 5.7490147,9.2880001 5.7490147,6.25 5.7490147,3.2119999 8.211015,0.75 11.249014,0.75 z",Script:"M22.3,80.4 A82.9529,77.0159,-180,0,0,10.3,46.7 A69.8467,64.8477,0,0,1,0,19.7 A27.6207,25.6439,0,0,1,12.1,0 L84.7,0 A37.4124,34.7347,-180,0,0,77.7,19.6 A82.8871,76.9547,-180,0,0,89.7,53.3 A69.8146,64.81790000000001,0,0,1,100,80.3 A27.603399999999997,25.6278,0,0,1,87.9,100 L15.3,100 A37.4265,34.7479,-180,0,0,22.3,80.4 M12.5,28.6 L67.3,28.6 M18.3,42.9 L72.1,42.9 M80.8,57.1 L26,57.1 M85.6,71.4 L32.6,71.4"},A={None:"",Standard:"M 52.002 73.379 c -2.494 -2.536 -6.55 -2.534 -9.043 0 c -1.208 1.228 -1.874 2.861 -1.874 4.598 c 0 1.225 0.337 2.395 0.957 3.411 l -1.167 1.186 l 2.071 0.458 l 2.071 0.458 l -0.45 -2.106 l -0.45 -2.106 l -1.292 1.314c -1.119 -2.065 -0.842 -4.709 0.877 -6.458 c 2.084 -2.119 5.475 -2.117 7.557 0 c 2.083 2.119 2.083 5.565 0 7.685c -0.976 0.992 -2.272 1.557 -3.65 1.59 l 0.025 1.068 c 1.65 -0.041 3.2 -0.716 4.368 -1.903 c 1.208 -1.228 1.874 -2.861 1.874 -4.597 C 53.875 76.24 53.209 74.607 52.002 73.379 Z",ParallelMultiInstance:"M 51.5,69.5 L52.5,69.5 L52.5,84.5 L51.5 84.5 Z M 46.5,69.5 L47.5,69.5 L47.5,84.5 L46.5 84.5 Z M 41.5,69.5 L42.5,69.5 L42.5,84.5 L41.5 84.5 Z  ",SequenceMultiInstance:"M 40.375,71.5 L 55.375,71.5 L 55.375,72.5 L 40.375,72.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,81.5 L 55.375,81.5L 55.375,82.5 L 40.375,82.5 Z"}},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(8),n=i(5),o=i(2),a=i(9),s=function(){function t(){}return t.prototype.updateBridging=function(t,e){var r,o=[];if(t.bridges=[],i.i(a.L)(t,e)){var s=this.getPoints(t);r=n.a.toBounds(s);for(var h=t.bridgeSpace,d=e.bridgeDirection,l=-1,c=e.connectors,p=0;p<c.length;p++){var g=c[parseInt(p.toString(),10)];if(t&&g&&t.id!==g.id){var u=this.getPoints(g),f=n.a.toBounds(u);if(this.intersectsRect(r,f)){var m=this.intersect(s,u,!1,d,!0);if(m.length>0)for(var y=0;y<m.length;y++){var v=0,b=0,S=0,w=0,x=this.getLengthAtFractionPoint(t,m[parseInt(y.toString(),10)]);if(-1!==x.pointIndex){b=x.lengthFractionIndex,v=x.fullLength,S=x.segmentIndex,w=x.pointIndex;var I=this.getPointAtLength(b-h/2,s),P=this.getPointAtLength(b+h/2,s);(b+h/2)/v,this.isEmptyPoint(P)&&(P=I);var C=void 0,z=t.sourcePoint;C="Straight"===t.type?t.targetPoint:t.intermediatePoints[parseInt(w.toString(),10)];var O=this.angleCalculation(z,C);if(o.length){var T=t.sourcePoint,A=Math.abs(this.lengthCalculation(T,P)),L=0,E=-1;l=-1;for(var B=0;B<o[parseInt(S.toString(),10)].bridges.length;B++){l++;var M=o[parseInt(S.toString(),10)].bridges[parseInt(B.toString(),10)];if(L=Math.abs(this.lengthCalculation(T,M.endPoint)),A<L){E=l;break}}if(E>=0){var D=this.createSegment(I,P,O,d,w,t,e);D.target=g.id,o[parseInt(S.toString(),10)].bridges.splice(E,0,D),o[parseInt(S.toString(),10)].bridges.join(),o[parseInt(S.toString(),10)].bridgeStartPoint.splice(E,0,I),o[parseInt(S.toString(),10)].bridgeStartPoint.join(),o[parseInt(S.toString(),10)].segmentIndex=S}else{var D=this.createSegment(I,P,O,d,w,t,e);D.target=g.id,o[parseInt(S.toString(),10)].bridges.push(D),o[parseInt(S.toString(),10)].bridgeStartPoint.push(I),o[parseInt(S.toString(),10)].segmentIndex=S}}else if(!isNaN(I.x)&&!isNaN(I.y)&&!this.isEmptyPoint(P)){var k=[],R=[],_=this.createSegment(I,P,O,d,w,t,e),j={bridges:k,bridgeStartPoint:R,segmentIndex:S};_.target=g.id;var N=[],H=[];N.push(I),H.push(P),o[parseInt(S.toString(),10)]=j,o[parseInt(S.toString(),10)].bridges.push(_),o[parseInt(S.toString(),10)].bridgeStartPoint=N,o[parseInt(S.toString(),10)].segmentIndex=S}}}}}}0!==o.length&&this.firstBridge(o,t,h)}},t.prototype.firstBridge=function(t,e,i){for(var n=0;n<t.length;n++){for(var o=t[parseInt(n.toString(),10)],a=1;a<o.bridges.length;a++)if(r.a.findLength(o.bridges[parseInt(a.toString(),10)].endPoint,o.bridges[a-1].endPoint)<i){o.bridges[a-1].endPoint=o.bridges[parseInt(a.toString(),10)].endPoint;var s=o.bridges[a-1],h=this.createBridgeSegment(s.startPoint,s.endPoint,s.angle,i,s.sweep);o.bridges[a-1].path=h,o.bridges.splice(a,1),o.bridgeStartPoint.splice(a,1),a--}for(var d=(e.sourcePoint,0);d<o.bridges.length;d++){var s=o.bridges[parseInt(d.toString(),10)];s.endPoint,e.bridges.push(s)}}},t.prototype.createSegment=function(t,e,i,r,n,o,a){var s={angle:0,endPoint:{x:0,y:0},target:"",path:"",segmentPointIndex:-1,startPoint:{x:0,y:0},sweep:1,rendered:!1},h=this.sweepDirection(i,r,o,a),d=this.createBridgeSegment(t,e,i,o.bridgeSpace,h);return s.path=d,s.startPoint=t,s.endPoint=e,s.angle=i,s.segmentPointIndex=n,s.sweep=h,s},t.prototype.createBridgeSegment=function(t,e,i,r,n){return"A "+r/2+" "+r/2+" "+i+" , 1 "+n+" "+e.x+","+e.y},t.prototype.sweepDirection=function(t,e,i,r){var n,o=Math.abs(t);switch(e){case"Top":case"Bottom":n=1,o>=0&&o<=90&&(n=0);break;case"Left":case"Right":n=1,t<0&&t>=-180&&(n=0)}return"Right"!==e&&"Bottom"!==e||(n=0===n?1:0),n},t.prototype.getPointAtLength=function(t,e){for(var i,n=0,o={x:0,y:0},a=0;a<e.length;a++){var s=e[parseInt(a.toString(),10)];if(i){var h=this.lengthCalculation(i,s);if(n+h>t){var d=t-n,l=r.a.findAngle(i,s),c=d*Math.cos(l*Math.PI/180),p=d*Math.sin(l*Math.PI/180);o={x:i.x+c,y:i.y+p};break}n+=h,i=s}else i=s}return o},t.prototype.getPoints=function(t){var e=[];if(t.intermediatePoints&&("Straight"===t.type||"Orthogonal"===t.type))for(var i=0;i<t.intermediatePoints.length;i++)e.push(t.intermediatePoints[parseInt(i.toString(),10)]);return e},t.prototype.intersectsRect=function(t,e){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height},t.prototype.intersect=function(t,e,i,r,n){i&&e.length>=2&&(e.splice(0,1),e.splice(0,1));for(var o=[],a=0;a<t.length-1;a++){var s=this.inter1(t[parseInt(a.toString(),10)],t[a+1],e,n,r);if(s.length>0)for(var h=0;h<s.length;h++)o.push(s[parseInt(h.toString(),10)]);i&&e.length>=1&&e.splice(0,1)}return o},t.prototype.inter1=function(t,e,r,n,a){for(var s=[],h=0;h<r.length-1;h++){var d=i.i(o._5)(t,e,r[parseInt(h.toString(),10)],r[h+1]);if(!this.isEmptyPoint(d)){var l=this.angleCalculation(t,e),c=this.angleCalculation(r[parseInt(h.toString(),10)],r[h+1]);switch(l=this.checkForHorizontalLine(l),c=this.checkForHorizontalLine(c),a){case"Left":case"Right":l>c&&s.push(d);break;case"Top":case"Bottom":l<c&&s.push(d)}l===c&&n&&s.push(d)}}return s},t.prototype.checkForHorizontalLine=function(t){var e=Math.abs(t);return e>90?180-e:e},t.prototype.isEmptyPoint=function(t){return 0===t.x&&0===t.y},t.prototype.getLengthAtFractionPoint=function(t,e){for(var i=100,n=-1,o=0,a=-1,s=0,h=0,d=t.sourcePoint,l=d,c=[],p=0;p<t.intermediatePoints.length;p++){var g=t.intermediatePoints[parseInt(p.toString(),10)];c.push(g)}for(var u=0;u<c.length;u++){var f=c[parseInt(u.toString(),10)],m=this.getSlope(f,d,e,t);m<i&&(i=m,h=o+this.lengthCalculation(e,l),a=s,n=u),o+=r.a.findLength(f,d),d=f,l=f}return s++,{lengthFractionIndex:h,fullLength:o,segmentIndex:a,pointIndex:n}},t.prototype.getSlope=function(t,e,i,r){var n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),a=(i.y-t.y)/(e.y-t.y),s=(i.x-t.x)/(e.x-t.x);if(!isFinite(a)||!isFinite(s)||isNaN(a)||isNaN(s)){if(t.x===e.x){if(t.y===e.y)return 1e4;if(t.y>i.y&&i.y>e.y||t.y<i.y&&i.y<e.y)return Math.abs(t.x-i.x)}else if(t.y===e.y&&(t.x>i.x&&i.x>e.x||t.x<i.x&&i.x<e.x))return Math.abs(t.y-i.y)}else if((t.x>=i.x&&i.x>=e.x||t.x<=i.x&&i.x<=e.x||n<3)&&(t.y>=i.y&&i.y>=e.y||t.y<=i.y&&i.y<=e.y||o<3))return Math.abs(a-s);return 1e4},t.prototype.angleCalculation=function(t,e){var i=t.x-e.x,r=t.y-e.y;return Math.atan2(r,i)*(180/Math.PI)},t.prototype.lengthCalculation=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Bridging"},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return d}),i.d(e,"b",function(){return l});var r=i(0),n=(i.n(r),i(61)),o=(i.n(n),i(1)),a=i(4),s=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function a(t){try{h(r.next(t))}catch(t){o(t)}}function s(t){try{h(r.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}h((r=r.apply(t,e||[])).next())})},h=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,o=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(t){i=[6,t],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,o,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d={content:".e-diagramcontent",copy:"e-copy",paste:"e-paste",undo:"e-undo",redo:"e-redo",cut:"e-cut",selectAll:"e-selectall",grouping:"e-grouping",group:"e-group",unGroup:"e-ungroup",bringToFront:"e-bringfront",sendToBack:"e-sendback",moveForward:"e-bringforward",sendBackward:"e-sendbackward",order:"e-order"},l=function(){function t(t,e){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=t,this.serviceLocator=e,this.addEventListener()}return t.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},t.prototype.render=function(){if(this.l10n=this.serviceLocator.getService("localization"),!i.i(r.isBlazor)()){this.element=i.i(a.a)("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var t="#"+this.parent.element.id;this.contextMenu=new n.ContextMenu({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:t,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu",animationSettings:{effect:"None"}}),this.contextMenu.appendTo(this.element)}},t.prototype.getMenuItems=function(){var t=[],e=[],i=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var r=0,n=this.getDefaultItems();r<n.length;r++){var o=n[r];-1!==o.toLocaleLowerCase().indexOf("group")?"grouping"!==o.toLocaleLowerCase()&&i.push(this.buildDefaultItems(o)):-1!==o.toLocaleLowerCase().indexOf("order")?"order"!==o.toLocaleLowerCase()&&e.push(this.buildDefaultItems(o)):t.push(this.buildDefaultItems(o))}if(i.length>0){var a=this.buildDefaultItems("grouping");a.items=i,t.push(a)}if(e.length>0){var a=this.buildDefaultItems("order");a.items=e,t.push(a)}}if(this.parent.contextMenuSettings.items)for(var s=0,h=this.parent.contextMenuSettings.items;s<h.length;s++){var d=h[s];t.push(d)}return t},t.prototype.contextMenuOpen=function(){this.isOpen=!0},t.prototype.BeforeItemRender=function(t){this.parent.trigger(o.C,t)},t.prototype.contextMenuItemClick=function(t){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger(o.A,t);var e=this.getKeyFromId(t.item.id);if(!t.cancel)switch(e){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},t.prototype.contextMenuOnClose=function(t){t.items.length>0&&t.items[0].parentObj instanceof n.ContextMenu&&this.updateItemStatus()},t.prototype.getLocaleText=function(t){return this.l10n.getConstant(this.localeText[""+t])},t.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},t.prototype.ensureItems=function(t,e){var i=this.getKeyFromId(t.id);this.defaultItems[""+i];-1!==this.getDefaultItems().indexOf(i)&&t.target&&(e||this.parent.checkMenu)&&!this.ensureTarget(t)&&this.hiddenItems.push(t.id)},t.prototype.refreshItems=function(){this.updateItems(),this.contextMenu.refresh()},t.prototype.updateItems=function(){for(var t=!0,e=0;e<this.parent.contextMenuSettings.items.length;e++){for(var i=this.parent.contextMenuSettings.items[parseInt(e.toString(),10)],r=0;r<this.contextMenu.items.length;r++)this.contextMenu.items[parseInt(r.toString(),10)].text===this.parent.contextMenuSettings.items[parseInt(e.toString(),10)].text&&(t=!1);t&&this.contextMenu.insertAfter([i],this.contextMenu.items[this.contextMenu.items.length-1].text)}},t.prototype.contextMenuBeforeOpen=function(t){return s(this,void 0,void 0,function(){var e,n,a,s,d,l,c,p,g,u,s,u,s;return h(this,function(h){switch(h.label){case 0:for(this.parent.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.parent.checkMenu=t.cancel=!0),this.parent.checkMenu&&(this.hiddenItems=[]),e=t,e.hiddenItems=[],n=0,a=t.items;n<a.length;n++)if(s=a[n],this.ensureItems(s,t.event),s.items.length)for(d=0,l=s.items;d<l.length;d++)c=l[d],this.ensureItems(c,t.event);return this.eventArgs=t.event,i.i(r.isBlazor)()?[4,this.parent.trigger(o.B,e)]:[3,2];case 1:return e=h.sent()||e,"string"==typeof e&&(e=JSON.parse(e)),[3,3];case 2:this.parent.trigger(o.B,e),h.label=3;case 3:for(p=!0,this.hiddenItems=this.hiddenItems.concat(e.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0),g=this,u=0;u<t.items.length;u++)s=t.items[parseInt(u.toString(),10)],g.hiddenItems.indexOf(s.id)>-1&&g.contextMenu.hideItems([s.id],!0);for(u=0;u<g.contextMenu.items.length;u++)s=g.contextMenu.items[parseInt(u.toString(),10)],-1===g.hiddenItems.indexOf(s.id)&&(p=!1,g.contextMenu.showItems([s.id],!0));return p&&(e.cancel=p,this.hiddenItems=[]),this.parent.selectedItems.nodes.length&&this.parent.selectedItems.nodes[0].isPhase&&!this.parent.contextMenuSettings.showCustomMenuOnly&&(t.cancel=!0),[2]}})})},t.prototype.ensureTarget=function(t){var e=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,i=this.getKeyFromId(t.id),r=!1;switch(i){case"undo":r=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":r=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":r=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":r=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":r=!!(e>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":r=e>1;break;case"unGroup":r=!!(this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":r=!!e}return r},t.prototype.destroy=function(){i.i(r.isBlazor)()||(this.contextMenu.destroy(),i.i(r.remove)(this.element)),this.removeEventListener()},t.prototype.getModuleName=function(){return"contextMenu"},t.prototype.generateID=function(t){return this.parent.element.id+"_contextMenu_"+t},t.prototype.getKeyFromId=function(t){return t.replace(this.parent.element.id+"_contextMenu_","")},t.prototype.buildDefaultItems=function(t){var e;switch(t){case"copy":e={target:d.content,iconCss:d.copy};break;case"cut":e={target:d.content,iconCss:d.cut};break;case"paste":e={target:d.content,iconCss:d.paste};break;case"undo":e={target:d.content,iconCss:d.undo};break;case"redo":e={target:d.content,iconCss:d.redo};break;case"grouping":e={target:d.content};break;case"group":e={target:d.content,iconCss:d.group};break;case"unGroup":e={target:d.content,iconCss:d.unGroup};break;case"order":e={target:d.content,iconCss:d.order};break;case"bringToFrontOrder":e={target:d.content,iconCss:d.bringToFront};break;case"moveForwardOrder":e={target:d.content,iconCss:d.moveForward};break;case"sendToBackOrder":e={target:d.content,iconCss:d.sendToBack};break;case"sendBackwardOrder":e={target:d.content,iconCss:d.sendBackward};break;case"selectAll":e={target:d.content}}return this.defaultItems[""+t]={text:this.getLocaleText(t),id:this.generateID(t),target:e.target,iconCss:e.iconCss?"e-icons "+e.iconCss:""},this.defaultItems[""+t]},t.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},t.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}},t}()},function(t,e,i){"use strict";function r(t){return n[t.toString()]}e.a=r;var n={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"}},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(15),n=i(1),o=i(3),a=i(2),s=function(){function t(){this.protectChange=!1}return t.prototype.expand=function(t,e,i,r){var o=this,a={},s=0;if(r.realActions=r.realActions|n.a.AnimationClick,a[parseInt((0).toString(),10)]=setInterval(function(){return s++,o.layoutAnimation(e,a,6===s,r,i)},20),i.isExpanded){var h=.2;this.protectChange=r.isProtectedOnChange,r.protectPropertyChange(!1);var d={};t&&(this.updateOpacity(i,h,r),d[parseInt((0).toString(),10)]=setInterval(function(){r.allowServerDataBinding=!1,h<=1?o.updateOpacity(i,h,r):clearInterval(d[0]),h+=.2,r.allowServerDataBinding=!0},20))}},t.prototype.layoutAnimation=function(t,e,r,s,h){if(!r)for(var d=0;d<t.objects.length;d++){var l=s.nameTable[t.objects[parseInt(d.toString(),10)].id];l.offsetX+=t.objects[parseInt(d.toString(),10)].differenceX/5,l.offsetY+=t.objects[parseInt(d.toString(),10)].differenceY/5}if(r){clearInterval(e[0]),s.realActions=s.realActions&~n.a.AnimationClick,s.refreshCanvasLayers(),s.protectPropertyChange(!0),s.triggerEvent(n.r.animationComplete,void 0),s.organizationalChartModule.isAnimation=!1,s.layout.fixedNode="",s.protectPropertyChange(this.protectChange);var c={element:i.i(a.b)(i.i(o.e)(h)),state:!!h.isExpanded};s.triggerEvent(n.r.expandStateChange,c),s.lineRoutingModule&&s.constraints&n.j.LineRouting&&s.resetSegments()}},t.prototype.updateOpacity=function(t,e,i){for(var n=0;n<t.outEdges.length;n++){var o=i.nameTable[t.outEdges[parseInt(n.toString(),10)]],a=i.nameTable[o.targetID];o.style.opacity=e;for(var s=0;s<o.wrapper.children.length;s++)o.wrapper.children[parseInt(s.toString(),10)].style.opacity=e,a.style.opacity=e,a.wrapper instanceof r.a&&i.updateNodeProperty(a.wrapper,void 0,e);this.updateOpacity(a,e,i)}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LayoutAnimate"},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r=function(){function t(){this.services={}}return t.prototype.register=function(t,e){this.services[""+t]=e},t.prototype.getService=function(t){return this.services[""+t]},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return p});var r=i(5),n=i(17),o=i(1),a=i(10),s=i(6),h=i(3),d=i(26),l=i(11),c=i(24),p=function(){function t(t){this.line=[],this.diagram=t}return t.prototype.canSnap=function(){return 0!=(this.diagram.snapSettings.constraints&(o.w.SnapToObject|o.w.SnapToLines))},t.prototype.getWrapperObject=function(t,e){if(t.nodes&&t.nodes.length>0&&(this.diagram.snapSettings.constraints&o.w.SnapToLines||this.diagram.snapSettings.constraints&o.w.SnapToObject))for(var i=0;i<t.nodes.length;i++)return("SwimLane"===t.nodes[parseInt(i.toString(),10)].shape.type||t.nodes[parseInt(i.toString(),10)].isLane||""!==t.nodes[parseInt(i.toString(),10)].parentId&&e[t.nodes[parseInt(i.toString(),10)].parentId]&&e[t.nodes[parseInt(i.toString(),10)].parentId].isLane)&&e.helper?e.helper.wrapper:t.wrapper;return t.wrapper},t.prototype.setSnapLineColor=function(){return this.diagram.snapSettings.snapLineColor},t.prototype.snapPoint=function(t,e,r,n,a,s,d){var l,c=this.diagram.snapSettings,p=this.diagram.scroller.currentZoom,g={x:0,y:0};l=this.getWrapperObject(e,t.nameTable);var u=i.i(h.i)(l),f={snapped:!1,offset:0},m={snapped:!1,offset:0};if(this.diagram.snapSettings.constraints&o.w.SnapToObject){var y=document.createElementNS("http://www.w3.org/2000/svg","g");y.setAttribute("id","_SnappingLines"),y.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(y),this.snapObject(t,e,y,f,m,a,s===d)}var v=u.x+a.x,b=u.y+a.y,S=u.x+u.width+a.x,w=u.y+u.height+a.y,x=c.verticalGridlines.scaledIntervals,I=this.round(S,x,p),P=this.round(v,x,p);x=c.horizontalGridlines.scaledIntervals;var C=this.round(b,x,p),z=this.round(w,x,p),O=u.x+u.width,T=u.y+u.height;return f.snapped?this.diagram.snapSettings.constraints&o.w.SnapToObject?g.x=f.offset:g.x=d.x-s.x:this.diagram.snapSettings.constraints&o.w.SnapToVerticalLines?Math.abs(a.x)>=1&&(r?Math.abs(I-O)>Math.abs(P-u.x)?g.x+=P-u.x:g.x+=I-O:Math.abs(I-O)<Math.abs(P-u.x)?g.x+=I-O:g.x+=P-u.x):g.x=d.x-s.x,m.snapped?g.y=m.offset:this.diagram.snapSettings.constraints&o.w.SnapToHorizontalLines?Math.abs(a.y)>=1&&(n?Math.abs(z-T)>Math.abs(C-u.y)?g.y+=C-u.y:g.y+=z-T:Math.abs(z-T)<Math.abs(C-u.y)?g.y+=z-T:g.y+=C-u.y):g.y=d.y-s.y,g},t.prototype.round=function(t,e,i){i=1===i?Math.pow(2,Math.floor(Math.log(i)/Math.log(2))):i;var r=0,n=0;for(n=0;n<e.length;n++)r+=e[parseInt(n.toString(),10)];r/=i;var o=Math.floor(Math.abs(t)/r),a=t%r,s=o*r;if(s!==t)if(t>=0)for(n=0;n<e.length;n++){if(a<=e[parseInt(n.toString(),10)]/i)return s+(a<e[parseInt(n.toString(),10)]/(2*i)?0:e[parseInt(n.toString(),10)]/i);s+=e[parseInt(n.toString(),10)]/i,a-=e[parseInt(n.toString(),10)]/i}else for(s*=-1,n=e.length-1;n>=0;n--){if(Math.abs(a)<=e[parseInt(n.toString(),10)]/i)return s-(Math.abs(a)<e[parseInt(n.toString(),10)]/(2*i)?0:e[parseInt(n.toString(),10)]/i);s-=e[parseInt(n.toString(),10)]/i,a+=e[parseInt(n.toString(),10)]/i}return t},t.prototype.snapObject=function(t,e,n,o,s,d,l){var c,p,g,u,f=null,m=this.diagram.scroller,y=this.diagram.snapSettings,v=[],b=[],S=[],w=[];u=this.getWrapperObject(e,t.nameTable);var x=i.i(h.i)(u),I=t.scroller.currentZoom,P=-m.horizontalOffset,C=-m.verticalOffset,z=y.snapObjectDistance/I,O=new r.a(0,0,m.viewPortWidth,m.viewPortHeight),T=new r.a(P/I,x.y-z-5,O.width/I,x.height+2*z+10),A=new r.a(x.x-z-5,C/I,x.width+2*z+10,O.height/I);O=new r.a(P/I,C/I,O.width/I,O.height/I);var L,E,B,M=this.findNodes(t.spatialSearch,e,A,O),D=t.nameTable;for(L=0;L<M.length;L++)E=M[parseInt(L.toString(),10)],this.canBeTarget(t,E)&&(this.diagram.nameTable[E.id]instanceof a.a||!this.canConsider(D,e,E)||(B=E.bounds,B.height+B.y<d.y+x.y?S.push({obj:E,distance:Math.abs(x.y+d.y-B.y-B.height)}):B.y>x.y+d.y+x.height&&w.push({obj:E,distance:Math.abs(x.y+d.y+x.height-B.y)}),(null==f||f>Math.abs(B.y-x.y-d.y))&&(Math.abs(B.x+B.width/2-(x.x+x.width/2+d.x))<=z?(p=this.createSnapObject(B,x,"centerX"),f=Math.abs(B.y-x.y)):Math.abs(B.x+B.width-(x.x+x.width+d.x))<=z?(p=this.createSnapObject(B,x,"right"),f=Math.abs(B.y-x.y)):Math.abs(B.x-(x.x+d.x))<=z?(p=this.createSnapObject(B,x,"left"),f=Math.abs(B.y-x.y)):Math.abs(B.x-(x.x+x.width+d.x))<=z?(p=this.createSnapObject(B,x,"rightLeft"),f=Math.abs(B.y-x.y)):Math.abs(B.x+B.width-(x.x+d.x))<=z&&(p=this.createSnapObject(B,x,"leftRight"),f=Math.abs(B.y-x.y)))));M=this.findNodes(t.spatialSearch,e,T,O);for(var k=0;k<M.length;k++)E=M[parseInt(k.toString(),10)],this.canBeTarget(t,E)&&(this.diagram.nameTable[E.id]instanceof a.a||!this.canConsider(D,e,E)||(B=E.bounds,B.x+B.width<x.x+d.x&&(v[v.length]={obj:E,distance:Math.abs(x.x+d.x-B.x-B.width)}),B.x>x.x+d.x+x.width&&(b[b.length]={obj:E,distance:Math.abs(x.x+d.x+x.width-B.x)}),(null==c||c>Math.abs(B.x-x.x-d.x))&&(Math.abs(B.y+B.height/2-(x.y+x.height/2+d.y))<=z?(g=this.createSnapObject(B,x,"centerY"),c=Math.abs(B.x-x.x)):Math.abs(B.y-x.y-d.y)<=z?(g=this.createSnapObject(B,x,"top"),c=Math.abs(B.x-x.x)):Math.abs(B.y+B.height-(x.y+x.height+d.y))<=z?(g=this.createSnapObject(B,x,"bottom"),c=Math.abs(B.x-x.x)):Math.abs(B.y+B.height-x.y-d.y)<=z?(g=this.createSnapObject(B,x,"topBottom"),c=Math.abs(B.x-x.x)):Math.abs(B.y-(x.y+x.height+d.y))<=z&&(g=this.createSnapObject(B,x,"bottomTop"),c=Math.abs(B.x-x.x)))));this.createGuidelines(t,p,g,n,o,s,l),o.snapped||this.createHSpacingLines(t,n,e,v,b,o,s,l,d,z),s.snapped||this.createVSpacingLines(t,n,e,S,w,o,s,l,d,z)},t.prototype.snapConnectorEnd=function(t){var e=this.diagram.snapSettings,i=this.diagram.scroller.currentZoom;return e.constraints&o.w.SnapToLines&&(t.x=this.round(t.x,e.verticalGridlines.scaledIntervals,i),t.y=this.round(t.y,e.horizontalGridlines.scaledIntervals,i)),t},t.prototype.canBeTarget=function(t,e){return e=this.diagram.nameTable[e.id],!i.i(d.b)(this.diagram,e,!1)},t.prototype.snapSize=function(t,e,n,o,s,d,l,c){var p,g,u,f,m=this.diagram.snapSettings,y=this.diagram.scroller,v=i.i(h.i)(l.wrapper),b=t.nameTable,S=[],w=[],x=t.scroller.currentZoom,I=-y.horizontalOffset,P=-y.verticalOffset,C=m.snapObjectDistance/x,z=new r.a(0,0,y.viewPortWidth,y.viewPortHeight),O=new r.a(I/x,(v.y-5)/x,z.width/x,(v.height+10)/x),T=new r.a((v.x-5)/x,P/x,(v.width+10)/x,z.height/x);z=new r.a(I/x,P/x,z.width/x,z.height/x);var A,L,E,B=[],M=this.findNodes(t.spatialSearch,l,T,z,B);for(A=0;A<M.length;A++)L=M[parseInt(A.toString(),10)],!this.canConsider(b,l,L)||this.diagram.nameTable[L.id]instanceof a.a||(E=L.bounds,(null==p||p>Math.abs(E.y-v.y))&&(e.left?Math.abs(v.x+s-E.x)<=C?(u=this.createSnapObject(E,v,"left"),p=Math.abs(E.y-v.y)):Math.abs(v.x+s-E.x-E.width)<=C&&(u=this.createSnapObject(E,v,"leftRight"),p=Math.abs(E.y-v.y)):e.right&&(Math.abs(v.x+s+v.width-E.x-E.width)<=C?(u=this.createSnapObject(E,v,"right"),p=Math.abs(E.y-v.y)):Math.abs(v.x+s+v.width-E.x)<=C&&(u=this.createSnapObject(E,v,"rightLeft"),p=Math.abs(E.y-v.y)))));M=this.findNodes(t.spatialSearch,l,O,z);for(var D=0;D<M.length;D++){var k=M[parseInt(D.toString(),10)];if(this.canConsider(b,l,k)&&!(this.diagram.nameTable[k.id]instanceof a.a)){var R=k.bounds;(null==g||g>Math.abs(R.x-v.x))&&(n.top?Math.abs(v.y+d-R.y)<=C?(f=this.createSnapObject(R,v,"top"),g=Math.abs(R.x-v.x)):Math.abs(v.y+d-R.y-R.height)<=C&&(f=this.createSnapObject(R,v,"topBottom"),g=Math.abs(R.x-v.x)):n.bottom&&(Math.abs(v.y+v.height+d-R.y-R.height)<=C?(f=this.createSnapObject(R,v,"bottom"),g=Math.abs(R.x-v.x)):Math.abs(v.y+v.height+d-R.y)<=C&&(f=this.createSnapObject(R,v,"bottomTop"),g=Math.abs(R.x-v.x))))}}for(A=0;A<B.length;A++)if(L=B[parseInt(A.toString(),10)],this.canConsider(b,l,L)){var _=L.bounds,j=e.left?-s:s,N=Math.abs(v.width+j-_.width),H=void 0;N<=C&&(H=e.left?-_.width+v.width:_.width-v.width,S[S.length]={source:L,difference:N,offset:H}),j=n.top?-d:d;var W=Math.abs(v.height+j-_.height);W<=C&&(H=n.top?-_.height+v.height:_.height-v.height,w[w.length]={source:L,difference:W,offset:H})}if(!t.getTool){this.createGuidelines(t,u,f,o,e,n,c)}!e.snapped&&S.length>0&&(e.left||e.right)&&this.addSameWidthLines(t,o,S,e,c,l),!n.snapped&&w.length>0&&(n.top||n.bottom)&&this.addSameHeightLines(t,o,w,n,c,l)},t.prototype.snapTop=function(t,e,i,r,n,a,s,h){var d=n;e.top=!0;var l;t.left=t.right=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&o.w.SnapToObject&&!a.rotateAngle&&(l=h.y-h.height*a.pivot.y+n-(a.offsetY-a.height*a.pivot.y),this.snapSize(this.diagram,t,e,i,r,l,this.diagram.selectedItems,s)),e.snapped)d=n-l+e.offset;else if(this.diagram.snapSettings.constraints&o.w.SnapToHorizontalLines){var p=h.y-h.height*a.pivot.y,g=p+n,u=this.round(g,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c);d=u-p}return d},t.prototype.snapRight=function(t,e,i,r,n,a,s,h){var d,l=r;t.right=!0,e.top=e.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&o.w.SnapToObject&&!a.rotateAngle&&(d=h.x+h.width*(1-a.pivot.x)+r-(a.offsetX+a.width*(1-a.pivot.x)),this.snapSize(this.diagram,t,e,i,d,n,this.diagram.selectedItems,s)),t.snapped)l=r-d+t.offset;else if(this.diagram.snapSettings.constraints&o.w.SnapToVerticalLines){var p=h.x+h.width*(1-a.pivot.x),g=p+r,u=this.round(g,this.diagram.snapSettings.verticalGridlines.scaledIntervals,c);l=u-p}return l},t.prototype.snapLeft=function(t,e,i,r,n,a,s,h){var d=r,l=0;t.left=!0,e.top=e.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&o.w.SnapToObject&&!a.rotateAngle&&(l=h.x-h.width*a.pivot.x+r-(a.offsetX-a.width*a.pivot.x),this.snapSize(this.diagram,t,e,i,l,n,this.diagram.selectedItems,s)),t.snapped)d=r-l+t.offset;else if(this.diagram.snapSettings.constraints&o.w.SnapToVerticalLines){var p=h.x-h.width*a.pivot.x,g=p+r,u=this.round(g,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c);d=u-p}return d},t.prototype.snapBottom=function(t,e,r,n,a,s,d,p){var g=a;e.bottom=!0,t.left=t.right=!1;var u=this.diagram.scroller.currentZoom,f=0;this.diagram.snapSettings.constraints&o.w.SnapToObject&&!s.rotateAngle&&(f=p.y+p.height*(1-s.pivot.y)+a-(s.offsetY+s.height*(1-s.pivot.y)),this.snapSize(this.diagram,t,e,r,n,f,this.diagram.selectedItems,d));s instanceof l.a||s instanceof c.a?i.i(h.i)(s):i.i(h.i)(s.wrapper);if(e.snapped)g=a-f+e.offset;else if(this.diagram.snapSettings.constraints&o.w.SnapToHorizontalLines){var m=p.y+p.height*(1-s.pivot.y),y=m+a,v=this.round(y,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,u);g=v-m}return g},t.prototype.createGuidelines=function(t,e,i,r,n,o,a){return e&&(n.offset=e.offsetX,n.snapped=!0,a||(e.type,this.renderAlignmentLines(e.start,e.end,r,t.scroller.transform))),i&&(o.offset=i.offsetY,o.snapped=!0,a||(i.type,this.renderAlignmentLines(i.start,i.end,r,t.scroller.transform))),r},t.prototype.renderAlignmentLines=function(t,e,r,n){t={x:(t.x+n.tx)*n.scale,y:(t.y+n.ty)*n.scale},e={x:(e.x+n.tx)*n.scale,y:(e.y+n.ty)*n.scale};var o={stroke:this.setSnapLineColor(),strokeWidth:1,startPoint:{x:t.x,y:t.y},endPoint:{x:e.x,y:e.y},fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:i.i(h.g)()},a=0;for(this.line.push(o),a=0;a<this.line.length;a++)this.diagram.diagramRenderer.drawLine(r,this.line.pop())},t.prototype.createHSpacingLines=function(t,e,r,n,o,a,s,d,l,c){var p=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(o,"distance",!0);var g,u=[];g=t.selectedObject.helperObject?i.i(h.i)(t.selectedObject.helperObject.wrapper):i.i(h.i)(r.wrapper);var f,m,y,v;if(n.length>0&&(u[u.length]=n[0],f=n[0].obj.bounds,p=f.y,n.length>1?(y=n[1].obj.bounds,v=f.x-y.x-y.width,Math.abs(v-n[0].distance)<=c?p=this.findEquallySpacedNodesAtLeft(n,v,p,u):v=n[0].distance):v=n[0].distance),this.sortByDistance(u,"distance"),u[u.length]={obj:r,distance:0},p=g.y<p||!p?g.y:p,o.length>0){var b=void 0;if(m=o[0].obj.bounds,p=m.y<p?m.y:p,o.length>1&&(y=o[1].obj.bounds,b=y.x-m.x-m.width),n.length>0)if(Math.abs(o[0].distance-n[0].distance)<=c){var S=Math.abs(o[0].distance-n[0].distance)/2;o[0].distance<n[0].distance?v-=S:v+=S,u[u.length]=o[0]}else 1===n.length&&(f=void 0,u.splice(0,1),u[u.length]=o[0],v=b);else v=b,u[u.length]=o[0];o.length>1&&m.x+m.width<y.x&&(p=this.findEquallySpacedNodesAtRight(o,b,p,u,c))}if(u.length>2){this.addHSpacingLines(t,e,u,d,p);var w=0;d&&(w=l.x),f?a.offset=v-Math.abs(g.x+w-f.x-f.width)+w:m&&(a.offset=Math.abs(g.x+g.width+w-m.x)-v+w),a.snapped=!0}},t.prototype.createVSpacingLines=function(t,e,r,n,o,a,s,d,l,c){var p=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(o,"distance",!0);var g,u=[];g=this.getWrapperObject(r,t.nameTable);var f,m,y,v,b=i.i(h.i)(g);n.length>0&&(u[u.length]=n[0],f=n[0].obj.bounds,p=f.x+f.width,n.length>1?(y=n[1].obj.bounds,v=f.y-y.y-y.height,Math.abs(v-n[0].distance)<=c?p=this.findEquallySpacedNodesAtTop(n,v,p,u):v=n[0].distance):v=n[0].distance),this.sortByDistance(u,"distance"),u[u.length]={obj:r,distance:0},p=b.x+b.width>p||!p?b.x+b.width:p;var S;if(o.length>0){if(m=o[0].obj.bounds,p=m.x+m.width>p?m.x+m.width:p,o.length>1&&(y=o[1].obj.bounds,S=y.y-m.y-m.height),n.length>0)if(Math.abs(o[0].distance-n[0].distance)<=c){var w=Math.abs(o[0].distance-n[0].distance)/2;o[0].distance<n[0].distance?v-=w:v+=w,u[u.length]=o[0]}else 1===n.length&&(f=void 0,u.splice(0,1),u[u.length]=o[0],v=S);else v=S,u[u.length]=o[0];o.length>1&&y.y>m.y+m.height&&(p=this.findEquallySpacedNodesAtBottom(o,S,p,u,c))}if(u.length>2){this.addVSpacingLines(t,e,u,d,p);var x=0;d&&(x=l.y),f?s.offset=v-Math.abs(b.y+x-f.y-f.height)+x:m&&(s.offset=Math.abs(b.y+b.height+x-m.y)-v+x),s.snapped=!0}},t.prototype.addHSpacingLines=function(t,e,r,n,o){var a,d,l;if(!n)for(a=0;a<r.length-1;a++){var c=r[parseInt(a.toString(),10)].obj instanceof s.G?i.i(h.i)(r[parseInt(a.toString(),10)].obj.wrapper):r[parseInt(a.toString(),10)].obj.bounds,p=r[a+1].obj instanceof s.G?i.i(h.i)(r[a+1].obj.wrapper):r[a+1].obj.bounds;d={x:c.x+c.width,y:o-15},l={x:p.x,y:o-15},this.renderSpacingLines(d,l,e,this.getAdornerLayerSvg(),t.scroller.transform)}},t.prototype.addVSpacingLines=function(t,e,r,n,o){var a,d;if(!n)for(var l=0;l<r.length-1;l++){var c=r[parseInt(l.toString(),10)].obj instanceof s.G?i.i(h.i)(r[parseInt(l.toString(),10)].obj.wrapper):r[parseInt(l.toString(),10)].obj.bounds,p=r[l+1].obj instanceof s.G?i.i(h.i)(r[l+1].obj.wrapper):r[l+1].obj.bounds;a={x:o+15,y:c.y+c.height},d={x:o+15,y:p.y},this.renderSpacingLines(a,d,e,this.getAdornerLayerSvg(),t.scroller.transform)}},t.prototype.addSameWidthLines=function(t,e,r,n,o,a){this.sortByDistance(r,"offset");var s,d,l=i.i(h.i)(a.wrapper),c=r[0],p=c.source.bounds,g=[];g.push(r[0]);var u,f;for(u=1;u<r.length;u++)f=r[parseInt(u.toString(),10)].source.bounds,f.width===p.width&&g.push(r[parseInt(u.toString(),10)]);if(!o)for(s={x:l.x+c.offset,y:l.y-15},d={x:l.x+l.width+c.offset,y:l.y-15},this.renderSpacingLines(s,d,e,this.getAdornerLayerSvg(),t.scroller.transform),u=0;u<g.length;u++)l=g[parseInt(u.toString(),10)].source.bounds,s={x:l.x,y:l.y-15},d={x:l.x+l.width,y:l.y-15},this.renderSpacingLines(s,d,e,this.getAdornerLayerSvg(),t.scroller.transform);n.offset=c.offset,n.snapped=!0},t.prototype.addSameHeightLines=function(t,e,r,n,o,a){this.sortByDistance(r,"offset");var s,d,l=i.i(h.i)(a.wrapper),c=r[0],p=c.source.bounds,g=[];g.push(r[0]);var u,f;for(u=0;u<r.length;u++)f=r[parseInt(u.toString(),10)].source.bounds,f.height===p.height&&g.push(r[parseInt(u.toString(),10)]);if(!o)for(s={x:l.x+l.width+15,y:l.y+c.offset},d={x:l.x+l.width+15,y:l.y+c.offset+l.height},this.renderSpacingLines(s,d,e,this.getAdornerLayerSvg(),t.scroller.transform),u=0;u<g.length;u++)l=g[parseInt(u.toString(),10)].source.bounds,s={x:l.x+l.width+15,y:l.y},d={x:l.x+l.width+15,y:l.y+l.height},this.renderSpacingLines(s,d,e,this.getAdornerLayerSvg(),t.scroller.transform);n.offset=c.offset,n.snapped=!0},t.prototype.renderSpacingLines=function(t,e,r,o,a){var s,d,l=new n.a,c={};t={x:(t.x+a.tx)*a.scale,y:(t.y+a.ty)*a.scale},e={x:(e.x+a.tx)*a.scale,y:(e.y+a.ty)*a.scale},t.x===e.x?(s="M"+(t.x-5)+" "+(t.y+5)+"L"+t.x+" "+t.y+"L"+(t.x+5)+" "+(t.y+5)+"zM"+(e.x-5)+" "+(e.y-5)+" L"+e.x+" "+e.y+" L"+(e.x+5)+" "+(e.y-5)+"z",d={startPoint:{x:t.x-8,y:t.y-1},endPoint:{x:t.x+8,y:t.y-1},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:i.i(h.g)()},l.data=s,c.data=l.data,c.angle=0,c.pivotX=0,c.pivotY=0,c.x=0,c.y=0,c.height=0,c.width=1,c.id=i.i(h.g)(),this.diagram.diagramRenderer.drawPath(r,c),this.line.push(d),this.diagram.diagramRenderer.drawLine(r,this.line.pop()),d={startPoint:{x:e.x-8,y:e.y+1},endPoint:{x:e.x+8,y:e.y+1},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:this.getAdornerLayerSvg().id+"spacing"},this.line.push(d),this.diagram.diagramRenderer.drawLine(r,this.line.pop())):(s="M"+(t.x+5)+" "+(t.y+5)+" L"+t.x+" "+t.y+" L"+(t.x+5)+" "+(t.y-5)+"zM"+(e.x-5)+" "+(e.y-5)+" L"+e.x+" "+e.y+" L"+(e.x-5)+" "+(e.y+5)+"z",l.data=s,c.data=s,c.angle=0,c.pivotX=0,c.pivotY=0,c.x=0,c.y=0,c.height=0,c.width=1,c.id=i.i(h.g)(),this.diagram.diagramRenderer.drawPath(r,c),d={visible:!0,opacity:1,id:i.i(h.g)(),startPoint:{x:t.x-1,y:t.y-8},endPoint:{x:t.x-1,y:t.y+8},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0},this.line.push(d),this.diagram.diagramRenderer.drawLine(r,this.line.pop()),d={width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:i.i(h.g)(),startPoint:{x:e.x+1,y:e.y-8},endPoint:{x:e.x+1,y:e.y+8},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0"},this.line.push(d),this.diagram.diagramRenderer.drawLine(r,this.line.pop())),d={startPoint:{x:t.x,y:t.y},endPoint:{x:e.x,y:e.y},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:i.i(h.g)()},this.line.push(d),this.diagram.diagramRenderer.drawLine(r,this.line.pop())},t.prototype.createSnapObject=function(t,e,i){var r;switch(i){case"left":r={start:{x:t.x,y:Math.min(t.y,e.y)},end:{x:t.x,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x-e.x,offsetY:0,type:"sideAlign"};break;case"right":r={type:"sideAlign",start:{x:t.x+t.width,y:Math.min(t.y,e.y)},offsetX:t.x+t.width-e.x-e.width,offsetY:0,end:{x:t.x+t.width,y:Math.max(t.y+t.height,e.y+e.height)}};break;case"top":r={offsetY:t.y-e.y,offsetX:0,type:"sideAlign",start:{x:Math.min(t.x,e.x),y:t.y},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y}};break;case"bottom":r={type:"sideAlign",offsetY:t.y+t.height-e.y-e.height,offsetX:0,end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height},start:{x:Math.min(t.x,e.x),y:t.y+t.height}};break;case"topBottom":r={start:{x:Math.min(t.x,e.x),y:t.y+t.height},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height},offsetY:t.y+t.height-e.y,offsetX:0,type:"sideAlign"};break;case"bottomTop":r={start:{x:Math.min(t.x,e.x),y:t.y},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y},offsetY:t.y-e.y-e.height,offsetX:0,type:"sideAlign"};break;case"leftRight":r={start:{x:t.x+t.width,y:Math.min(t.y,e.y)},end:{x:t.x+t.width,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x+t.width-e.x,offsetY:0,type:"sideAlign"};break;case"rightLeft":r={start:{x:t.x,y:Math.min(t.y,e.y)},end:{x:t.x,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x-e.x-e.width,offsetY:0,type:"sideAlign"};break;case"centerX":r={start:{x:t.x+t.width/2,y:Math.min(t.y,e.y)},end:{x:t.x+t.width/2,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x+t.width/2-(e.x+e.width/2),offsetY:0,type:"centerAlign"};break;case"centerY":r={start:{x:Math.min(t.x,e.x),y:t.y+t.height/2},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height/2},offsetY:t.y+t.height/2-(e.y+e.height/2),offsetX:0,type:"centerAlign"}}return r},t.prototype.snapAngle=function(t,e){var i=this.diagram.snapSettings,r=i.snapAngle,n=e%(r||0);return n>=r/2?e+r-n:e-n},t.prototype.canConsider=function(t,e,i){return!this.diagram.selectedItems.nodes.length||this.diagram.selectedItems.nodes[0].id!==i.id},t.prototype.findNodes=function(t,e,r,n,o){for(var s,d,l=[],c=t.findQuads(o?n:r),p=0;p<c.length;p++){var g=c[parseInt(p.toString(),10)];if(g.objects.length>0)for(var u=0;u<g.objects.length;u++)s=g.objects[parseInt(u.toString(),10)],this.diagram.nameTable[s.id]instanceof a.a||!s.visible||"SwimLane"===this.diagram.nameTable[s.id].shape.type||this.diagram.nameTable[s.id].isLane||this.diagram.nameTable[s.id].isPhase||this.diagram.nameTable[s.id].isHeader||"helper"==s.id||(d=i.i(h.i)(s),-1===l.indexOf(s)&&this.intersectsRect(r,d)&&l.push(s),o&&o.indexOf(s)&&this.intersectsRect(n,d)&&o.push(s))}return l},t.prototype.intersectsRect=function(t,e){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height},t.prototype.getAdornerLayerSvg=function(){return this.diagram.diagramRenderer.adornerSvgLayer},t.prototype.removeGuidelines=function(t){var e=this.getAdornerLayerSvg().getElementById("_SnappingLines"),i=this.getAdornerLayerSvg().getElementById("pivotLine");e&&e.parentNode.removeChild(e),i&&i.parentNode.removeChild(i)},t.prototype.sortByDistance=function(t,e,i){var r,n,o;if(i)for(r=0;r<t.length;r++)for(n=r+1;n<t.length;n++)t[parseInt(r.toString(),10)][""+e]>t[parseInt(n.toString(),10)][""+e]&&(o=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=o);else for(r=0;r<t.length;r++)for(n=r+1;n<t.length;n++)t[parseInt(r.toString(),10)][""+e]<t[parseInt(n.toString(),10)][""+e]&&(o=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=o)},t.prototype.findEquallySpacedNodesAtLeft=function(t,e,i,r){var n,o,a,s;for(s=1;s<t.length&&(n=t[s-1].obj.bounds,o=t[parseInt(s.toString(),10)].obj.bounds,a=n.x-o.x-o.width,Math.abs(a-e)<=1);s++)r[r.length]=t[parseInt(s.toString(),10)],o.y<i&&(i=o.y);return i},t.prototype.findEquallySpacedNodesAtRight=function(t,e,i,r,n){var o,a,s,h,d=t[0].distance;if(Math.abs(e-d)<=n)for(var l=0;l<t.length-1&&(o=t[parseInt(l.toString(),10)].obj,a=t[l+1].obj.bounds,s=o.bounds,h=a.x-s.x-s.width,Math.abs(h-e)<=1);l++)r[r.length]=t[l+1],s.y<i&&(i=s.y);return i},t.prototype.findEquallySpacedNodesAtTop=function(t,e,i,r){for(var n,o,a,s=1;s<t.length&&(n=t[s-1].obj.bounds,o=t[parseInt(s.toString(),10)].obj.bounds,a=n.y-o.y-o.height,Math.abs(a-e)<=1);s++)r[r.length]=t[parseInt(s.toString(),10)],o.x+o.width>i&&(i=o.x+o.width);return i},t.prototype.findEquallySpacedNodesAtBottom=function(t,e,i,r,n){var o,a,s,h,d=t[0].distance;if(Math.abs(e-d)<=n)for(var l=0;l<t.length-1&&(o=t[parseInt(l.toString(),10)].obj,a=t[l+1].obj.bounds,s=o.bounds,h=a.y-s.y-s.height,Math.abs(h-e)<=1);l++)r[r.length]=t[l+1],s.x+s.width>i&&(i=s.x+s.width);return i},t.prototype.getLayer=function(){var t;return this.diagram.snapSettings.constraints&o.w.SnapToObject&&(t=document.createElementNS("http://www.w3.org/2000/svg","g"),t.setAttribute("id","_SnappingLines"),t.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(t)),t},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Snapping"},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(6),n=i(1),o=i(2),a=i(3),s=i(25),h=i(13),d=i(0),l=(i.n(d),function(){function t(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0}return t.prototype.initHistory=function(t){t.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:t.addHistoryEntry.bind(t),undo:Function,redo:Function,startGroupAction:t.startGroupAction.bind(t),endGroupAction:t.endGroupAction.bind(t),canLog:null,undoStack:[],redoStack:[],stackLimit:t.historyManager?t.historyManager.stackLimit:void 0}},t.prototype.addHistoryEntry=function(t,e){var i=null,r=null;if(e.historyManager.canLog){if(!0===e.historyManager.canLog(t).cancel)return}if(e.historyManager&&e.historyManager.canUndo&&e.historyManager.currentEntry&&(i=e.historyManager.currentEntry,i.next?i.previous&&(r=i.next,r.previous=null,i.next=t,t.previous=i):(i.next=t,t.previous=i)),e.historyManager.currentEntry=t,e.historyManager.stackLimit){if("StartGroup"===t.type||"EndGroup"===t.type){var n="EndGroup"===t.type;this.setEntryLimit(n)}this.hasGroup||0!==this.groupCount||(this.historyCount<e.historyManager.stackLimit?this.historyCount++:this.applyLimit(e.historyManager.currentEntry,e.historyManager.stackLimit,e))}this.getHistoryList(e),e.historyManager.canUndo=!0,e.historyManager.canRedo=!1},t.prototype.applyLimit=function(t,e,i,r){if(t&&t.previous){if("StartGroup"===t.type||"EndGroup"===t.type){var n="StartGroup"===t.type;this.setEntryLimit(n)}this.hasGroup||0!==this.groupCount||e--,0===e?(r&&this.limitHistoryStack(t.previous,i),i.historyManager.stackLimit<this.historyCount&&(this.historyCount=i.historyManager.stackLimit),delete t.previous):t.previous&&this.applyLimit(t.previous,e,i,r)}this.groupCount=0},t.prototype.clearHistory=function(t){var e=t.historyManager;e.currentEntry=void 0,e.canUndo=!1,e.canRedo=!1,this.historyCount=0,this.groupCount=0,t.historyManager.undoStack=[],t.historyManager.redoStack=[]},t.prototype.setEntryLimit=function(t){t?this.groupCount--:this.groupCount++,this.hasGroup=t?!t:t},t.prototype.limitHistoryStack=function(t,e){"StartGroup"!==t.type&&"EndGroup"!==t.type&&(this.removeFromStack(e.historyManager.undoStack,t),this.removeFromStack(e.historyManager.redoStack,t)),t.previous&&this.limitHistoryStack(t.previous,e)},t.prototype.removeFromStack=function(t,e){if(t.length)for(var i=0;i<=t.length;i++)if(t[parseInt(i.toString(),10)].undoObject===e.undoObject&&t[parseInt(i.toString(),10)].redoObject===e.redoObject){t.splice(i,1);break}},t.prototype.undo=function(t){var e=this.getUndoEntry(t),r=0;if(e)if("Internal"===e.category)"EndGroup"===e.type?(r++,this.groupUndo=!0,i.i(d.isBlazor)()&&(t.blazorActions|=n.i.GroupingInProgress)):this.undoEntry(e,t),this.groupUndo&&(this.undoGroupAction(e,t,r),this.groupUndo=!1);else{i.i(d.isBlazor)()||t.historyManager.undo(e);var o={entryType:"undo",oldValue:e.undoObject,newValue:e.redoObject};i.i(d.isBlazor)()&&(o={entryType:"undo",oldValue:this.getHistoryChangeEvent(e.undoObject,e.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(e.redoObject,e.blazorHistoryEntryType)}),t.triggerEvent(n.r.historyStateChange,o)}},t.prototype.getHistoryChangeEvent=function(t,e){var i={};switch(e){case"Node":i.node=t;break;case"Connector":i.connector=t;break;case"Selector":i.selector=t;break;case"Diagram":i.diagram=t;break;case"ShapeAnnotation":i.shapeAnnotation=t;break;case"PathAnnotation":i.pathAnnotation=t;break;case"PortObject":i.pointPortModel=t;break;case"Object":i.object=t}return i},t.prototype.getHistoryList=function(t){var e,i,r=[],n=[],o=t.historyManager.currentEntry;for(o=t.historyManager.currentEntry,t.historyManager.canUndo||0===t.historyManager.undoStack.length?this.getHistroyObject(r,o):this.getHistroyObject(n,o);o&&o.previous;)e=o.previous,this.getHistroyObject(r,e),o=o.previous;for(o=t.historyManager.currentEntry;o&&o.next;)i=o.next,this.getHistroyObject(n,i),o=o.next;t.historyManager.undoStack=r,t.historyManager.redoStack=n},t.prototype.getHistroyObject=function(t,e){e&&"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.push({redoObject:e.redoObject?e.redoObject:null,undoObject:e.undoObject?e.undoObject:null,type:e.type?e.type:null,category:e.category?e.category:null})},t.prototype.undoGroupAction=function(t,e,i){for(;0!==i;)this.undoEntry(t,e),t=this.getUndoEntry(e),"StartGroup"===t.type?i--:"EndGroup"===t.type&&i++;i=0},t.prototype.undoEntry=function(t,e){var r,o;if("PropertyChanged"!==t.type&&"CollectionChanged"!==t.type&&"LabelCollectionChanged"!==t.type&&(r=t.undoObject,o=t.undoObject),"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.historyManager.undoStack.length>0){var h=e.historyManager.undoStack.splice(0,1);e.historyManager.redoStack.splice(0,0,h[0]),o=t.undoObject}switch(e.protectPropertyChange(!0),e.diagramActions|=n.p.UndoRedo,i.i(d.isBlazor)()&&t.previous&&"StartGroup"===t.previous.type&&(e.blazorActions&=~n.i.GroupingInProgress),t.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(r,e);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(r,e,t);break;case"RotationChanged":this.recordRotationChanged(r,e,t);break;case"ConnectionChanged":this.recordConnectionChanged(r,e);break;case"PropertyChanged":this.recordPropertyChanged(t,e,!1);break;case"CollectionChanged":if(t&&t.next&&"AddChildToGroupNode"===t.next.type&&"Insert"===t.next.changeType){var l=e.getObject(t.next.undoObject.id);e.insertValue(i.i(a.e)(l),!0)}if(t.isUndo=!0,this.recordCollectionChanged(t,e),t.isUndo=!1,t&&t.next&&"AddChildToGroupNode"===t.next.type&&"Insert"===t.next.changeType){var l=e.getObject(t.next.undoObject.id);l.wrapper.measure(new s.c),l.wrapper.arrange(l.wrapper.desiredSize),e.updateDiagramObject(l)}break;case"LabelCollectionChanged":t.isUndo=!0,this.recordLabelCollectionChanged(t,e),t.isUndo=!1;break;case"PortCollectionChanged":t.isUndo=!0,this.recordPortCollectionChanged(t,e),t.isUndo=!1;break;case"Group":this.unGroup(t,e);break;case"UnGroup":this.group(t,e);break;case"SegmentChanged":this.recordSegmentChanged(r,e);break;case"PortPositionChanged":this.recordPortChanged(t,e,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(t,e,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(t,e,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(t,e,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(t,e,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(t,e,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(t,e,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":t.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(t,e,!1),t.isUndo=!1;break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(t,e,!1);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(t,e,!1)}if(e.diagramActions&=~n.p.UndoRedo,e.protectPropertyChange(!1),e.historyChangeTrigger(t,"Undo"),o){var c=this.checkNodeObject(o,e);if(c){var p=i.i(a.h)(e.updateSelection);p&&p(c,e)}}},t.prototype.checkNodeObject=function(t,e){var i;if(t.id)i=e.nameTable[t.id];else if(t.nodes&&t.nodes.length>0||t.connectors&&t.connectors.length>0)for(var r=t.nodes.length>0?t.nodes:t.connectors,n=0,o=r;n<o.length;n++)i=o[n],i=e.nameTable[i.id];else{var a=t.nodes?t.nodes:t.connectors;if(a)for(var s=0,h=Object.keys(a);s<h.length;s++){var d=h[s],l=Number(d);i=t.nodes?e.nodes[parseInt(l.toString(),10)]:e.connectors[parseInt(l.toString(),10)]}}return i},t.prototype.group=function(t,e){e.add(t.undoObject)},t.prototype.unGroup=function(t,e){t.redoObject=i.i(a.e)(t.undoObject);var r=t.undoObject;e.commandHandler.unGroup(r)},t.prototype.ignoreProperty=function(t){return"zIndex"===t||"wrapper"===t||"parentObj"===t||"controlParent"===t},t.prototype.getProperty=function(t,e){for(var i=0,r=Object.keys(e);i<r.length;i++){var n=r[i];t&&(this.ignoreProperty(n)||(e[""+n]instanceof Object?this.getProperty(t[""+n],e[""+n]):t[""+n]=e[""+n]))}},t.prototype.recordLaneOrPhaseCollectionChanged=function(t,e,r){var n=t.redoObject,o=t.undoObject;if("Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType))e.remove(n);else if(n.isPhase){var a=e.nameTable[n.parentId];e.addPhases(a,[o])}else{var a=e.nameTable[n.parentId],s=i.i(h.y)(a,n);e.addLanes(a,[o],s)}e.clearSelection()},t.prototype.recordAnnotationChanged=function(t,e,n){var s=n?t.redoObject:t.undoObject;if(e.canEnableBlazorObject){var h=i.i(a.e)(e.nameTable[s.id]);e.insertValue(h,h instanceof r.a)}var d=i.i(o.F)(s,t.objectId),l=e.commandHandler.getAnnotationChanges(e.nameTable[s.id],d),c=e.nameTable[s.id],p=i.i(o.F)(c,t.objectId);p.offset=d.offset,p.margin=d.margin,p.width=d.width,p.height=d.height,p.rotateAngle=d.rotateAngle,p.margin=d.margin,c instanceof r.a?e.nodePropertyChange(c,{},l):e.connectorPropertyChange(c,{},l)},t.prototype.recordChildCollectionChanged=function(t,e,r){var n=r?t.redoObject:t.undoObject,o=e.nameTable[n.parentId],a=e.nameTable[n.id];o?i.i(s._264)(e,o,a,!r,"AddNodeToLane"===t.historyAction):(a.parentId&&(o=e.nameTable[a.parentId],o.children.splice(o.children.indexOf(a.id),1),o.wrapper.children.splice(o.wrapper.children.indexOf(a.wrapper),1)),n.parentId&&""!==n.parentId&&(o=e.nameTable[n.parentId],o.children.push(n.id),o.wrapper.children.push(a.wrapper)),a.parentId=n.parentId,e.removeElements(a),e.updateDiagramObject(a))},t.prototype.recordStackPositionChanged=function(t,e,i){var r=i?t.redoObject:t.undoObject;if(r.source){var n=e.nameTable[r.source.parentId];n&&(r.target?(n.wrapper.children.splice(r.targetIndex,1),n.wrapper.children.splice(r.sourceIndex,0,r.source.wrapper)):void 0!==r.sourceIndex?(e.nameTable[r.source.id]||e.add(r.source),n.wrapper.children.splice(r.sourceIndex,0,e.nameTable[r.source.id].wrapper),e.nameTable[r.source.id].parentId=n.id):(n.wrapper.children.splice(n.wrapper.children.indexOf(e.nameTable[r.source.id].wrapper),1),e.nameTable[r.source.id].parentId=""),i&&"UmlClassifier"===n.shape.type&&e.remove(r.source),n.wrapper.measure(new s.c),n.wrapper.arrange(n.wrapper.desiredSize),e.updateDiagramObject(n),e.updateSelector())}},t.prototype.recordGridSizeChanged=function(t,e,r,n){var o=r?t.redoObject:t.undoObject,a=r?t.undoObject:t.redoObject;if(o.parentId){var s=e.nameTable[o.parentId],d=e.nameTable[o.id],l=s.wrapper.bounds.x,c=s.wrapper.bounds.y;if("SwimLane"===s.shape.type){var p=s.wrapper.children[0],g=s.shape.padding;i.i(h.u)(e,a,s,o),n?(p.updateRowHeight(o.rowIndex,o.wrapper.actualSize.height,!0,g),s.height=s.wrapper.height=p.height):(p.updateColumnWidth(o.columnIndex,o.wrapper.actualSize.width,!0,g),s.width=s.wrapper.width=p.width,o.isPhase&&(d.maxWidth=d.wrapper.maxWidth=o.wrapper.actualSize.width)),i.i(h.g)(s);var u=l-s.wrapper.bounds.x,f=c-s.wrapper.bounds.y;e.drag(s,u,f),e.clearSelection(),e.updateDiagramObject(s)}}},t.prototype.recordLanePositionChanged=function(t,e,r){var n=r?t.redoObject:t.undoObject;if(n.source){var o=e.nameTable[n.source.parentId];o&&"SwimLane"===o.shape.type&&(i.i(h.t)(e,n.target,n.source),e.clearSelection())}},t.prototype.recordPortChanged=function(t,e,r){var n=r?t.redoObject.nodes[0]:t.undoObject.nodes[0];if(e.canEnableBlazorObject){var s=i.i(a.e)(e.nameTable[n.id]);e.insertValue(s,!0)}var h=i.i(o._22)(n,t.objectId),d=e.commandHandler.getPortChanges(e.nameTable[n.id],h),l=e.nameTable[n.id];i.i(o._22)(l,t.objectId).offset=h.offset,e.nodePropertyChange(l,{},d),l.parentId&&e.updateConnectorEdges(e.nameTable[l.parentId])},t.prototype.recordPropertyChanged=function(t,e,r){var o=t.redoObject,s=t.undoObject;if(i.i(d.isBlazor)())for(var h=0,l=Object.keys(s);h<l.length;h++){var c=l[h],p=void 0;switch(c){case"nodes":for(var g=0,u=Object.keys(s.nodes);g<u.length;g++){var f=u[g];e.canEnableBlazorObject&&(p=i.i(a.e)(e.nodes[Number(f)]),e.insertValue(p,!0))}break;case"connectors":for(var m=0,y=Object.keys(s.connectors);m<y.length;m++){var f=y[m];e.canEnableBlazorObject&&(p=i.i(a.e)(e.connectors[Number(f)]),e.insertValue(p,!1))}}}this.getProperty(e,r?o:s),r?e.onPropertyChanged(o,s):e.onPropertyChanged(s,o),e.diagramActions=e.diagramActions|n.p.UndoRedo},t.prototype.recordOrderCommandChanged=function(t,e,i){var r=t.redoObject,o=t.undoObject;e.commandHandler.orderCommands(i,i?r:o,t.type),e.diagramActions=e.diagramActions|n.p.UndoRedo},t.prototype.recordAddChildToGroupNode=function(t,e,i){var r=e.nameTable[t.undoObject.id],n=e.nameTable[t.objectId];i&&"Insert"===t.changeType&&e.addChildToGroup(r,n.id)},t.prototype.recordSegmentChanged=function(t,e){var i,r=0;if(t.connectors&&t.connectors.length>0)for(r=0;r<t.connectors.length;r++)i=t.connectors[parseInt(r.toString(),10)],this.segmentChanged(i,e)},t.prototype.segmentChanged=function(t,e){var i=e.nameTable[t.id];i.segments=t.segments,e.commandHandler.updateEndPoint(i)},t.prototype.recordPositionChanged=function(t,e){var i,r,n=0;if(t.nodes&&t.nodes.length>0)for(n=0;n<t.nodes.length;n++)i=t.nodes[parseInt(n.toString(),10)],this.positionChanged(i,e);if(t.connectors&&t.connectors.length>0)for(n=0;n<t.connectors.length;n++)r=t.connectors[parseInt(n.toString(),10)],this.connectionChanged(r,e)},t.prototype.positionChanged=function(t,e){var i=e.nameTable[t.id];if(t.processId&&!i.processId&&e.addProcess(t,t.processId),!t.processId&&i.processId&&e.removeProcess(t.id),i.processId){var r=t.margin.left-i.margin.left,n=t.margin.top-i.margin.top;e.drag(i,r,n)}else{if(i.parentId){var o=e.nameTable[i.parentId];o.isLane&&(t.wrapper.offsetX=t.width/2+(o.wrapper.bounds.x+t.margin.left),t.wrapper.offsetY=t.height/2+(o.wrapper.bounds.y+t.margin.top))}var r=t.wrapper.offsetX-i.offsetX,n=t.wrapper.offsetY-i.offsetY;e.drag(i,r,n)}e.bpmnModule&&e.bpmnModule.updateDocks(i,e)},t.prototype.recordSizeChanged=function(t,e,n){var a,s,h=0;if(t&&t.nodes&&t.nodes.length>0)for(h=0;h<t.nodes.length;h++)if(s=t.nodes[parseInt(h.toString(),10)],s.children&&!s.container)for(var d=[],l=e.commandHandler.getAllDescendants(s,d),c=0;c<l.length;c++){var p=n.childTable[l[parseInt(c.toString(),10)].id];i.i(o.l)(p)===r.a?(this.sizeChanged(p,e,n),this.positionChanged(p,e)):this.connectionChanged(p,e,n)}else this.sizeChanged(s,e),this.positionChanged(s,e);if(t&&t.connectors&&t.connectors.length>0){var g=t.connectors;for(h=0;h<g.length;h++)a=g[parseInt(h.toString(),10)],this.connectionChanged(a,e)}},t.prototype.sizeChanged=function(t,e,r){var n=e.nameTable[t.id],o=t.wrapper.actualSize.width/n.wrapper.actualSize.width,s=t.wrapper.actualSize.height/n.wrapper.actualSize.height;r&&r.childTable&&(r.childTable[t.id]=i.i(a.e)(n)),e.scale(n,o,s,{x:t.wrapper.offsetX/n.wrapper.offsetX,y:t.wrapper.offsetY/n.wrapper.offsetY})},t.prototype.recordRotationChanged=function(t,e,i){var r,n,o=0,a=e.selectedItems;if(a.rotateAngle=t.rotateAngle,a&&a.wrapper&&(a.wrapper.rotateAngle=t.rotateAngle),t&&t.nodes&&t.nodes.length>0)for(o=0;o<t.nodes.length;o++)r=t.nodes[parseInt(o.toString(),10)],this.rotationChanged(r,e),this.positionChanged(r,e);if(t&&t.connectors&&t.connectors.length>0)for(o=0;o<t.connectors.length;o++)n=t.connectors[parseInt(o.toString(),10)],this.connectionChanged(n,e)},t.prototype.rotationChanged=function(t,e){var i=e.nameTable[t.id];e.rotate(i,t.rotateAngle-i.rotateAngle)},t.prototype.recordConnectionChanged=function(t,e){var i;i=t&&t.connectors?t.connectors[0]:t,i.sourceID&&e.nameTable[i.sourceID]&&e.insertValue(e.nameTable[i.sourceID],!0),i.targetID&&e.nameTable[i.targetID]&&e.insertValue(e.nameTable[i.targetID],!0),this.connectionChanged(i,e)},t.prototype.connectionChanged=function(t,e,r){var n,s=e.nameTable[t.id];t.sourcePortID!==s.sourcePortID&&(e.removePortEdges(e.nameTable[s.sourceID],s.sourcePortID,s.id,!1),s.sourcePortID=t.sourcePortID,e.connectorPropertyChange(s,{},{sourcePortID:t.sourcePortID})),t.targetPortID!==s.targetPortID&&(e.removePortEdges(e.nameTable[s.targetID],s.targetPortID,s.id,!0),s.targetPortID=t.targetPortID,e.connectorPropertyChange(s,{},{targetPortID:t.targetPortID})),t.sourceID!==s.sourceID&&(""===t.sourceID?(n=e.nameTable[s.sourceID],i.i(o.Q)(n.outEdges,t.id)):(n=e.nameTable[t.sourceID],n.outEdges.push(t.id),e.updatePortEdges(n,t,!1)),s.sourceID=t.sourceID,e.connectorPropertyChange(s,{},{sourceID:t.sourceID})),t.targetID!==s.targetID&&(""===t.targetID?(n=e.nameTable[s.targetID],i.i(o.Q)(n.inEdges,t.id)):(n=e.nameTable[t.targetID],n.inEdges.push(t.id),e.updatePortEdges(n,t,!0)),s.targetID=t.targetID,e.connectorPropertyChange(s,{},{targetID:t.targetID})),r&&r.childTable&&(r.childTable[t.id]=i.i(a.e)(s));var h=t.sourcePoint.x-s.sourcePoint.x,d=t.sourcePoint.y-s.sourcePoint.y;0===h&&0===d||e.dragSourceEnd(s,h,d);var l=t.targetPoint.x-s.targetPoint.x,c=t.targetPoint.y-s.targetPoint.y;0===l&&0===c||e.dragTargetEnd(s,l,c),e.updateSelector(),"SVG"!==e.mode&&e.refreshDiagramLayer()},t.prototype.recordCollectionChanged=function(t,e){var r=t.undoObject;if(t&&t.changeType){if("Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType))r.nodeId?e.remove(e.nameTable[r.nodeId+"_textannotation_"+r.id]):(e.remove(r),e.clearSelectorLayer());else{if(e.clearSelectorLayer(),r.parentId){var n=e.nameTable[r.parentId];n?e.addChild(n,r):e.add(r)}else r.nodeId?e.addTextAnnotation(r,e.nameTable[r.nodeId]):e.nameTable[r.id]||(r&&r.shape&&"SwimLane"===r.shape.type&&t.isUndo&&i.i(h.b)(r,void 0,void 0,void 0,void 0,!0),e.add(r));r.processId&&e.nameTable[r.processId]&&e.addProcess(r,r.processId)}"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.recordLabelCollectionChanged=function(t,e){var i=t.undoObject,r=t.redoObject,n=e.nameTable[r.id];if(t&&t.changeType){var o=void 0;o=t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType,"Remove"===o?(e.removeLabels(n,[i]),e.clearSelectorLayer()):(e.clearSelectorLayer(),e.addLabels(n,[i])),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.recordPortCollectionChanged=function(t,e){var i=t.undoObject,r=t.redoObject,n=e.nameTable[r.id];if(t&&t.changeType){var o=void 0;o=t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType,"Remove"===o?(e.removePorts(n,[i]),e.clearSelectorLayer()):(e.clearSelectorLayer(),e.addPorts(n,[i])),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.redo=function(t){var e=this.getRedoEntry(t),r=0;if(e)if("Internal"===e.category)"StartGroup"===e.type?(r++,this.groupUndo=!0,i.i(d.isBlazor)()&&(t.blazorActions|=n.i.GroupingInProgress)):this.redoEntry(e,t),this.groupUndo&&(this.redoGroupAction(e,t,r),this.groupUndo=!1);else{i.i(d.isBlazor)()||t.historyManager.redo(e);var o={entryType:"redo",oldValue:e.redoObject,newValue:e.undoObject};i.i(d.isBlazor)()&&(o={entryType:"redo",oldValue:this.getHistoryChangeEvent(e.redoObject,e.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(e.undoObject,e.blazorHistoryEntryType)}),t.triggerEvent(n.r.historyStateChange,o)}},t.prototype.redoGroupAction=function(t,e,i){for(;0!==i;)this.redoEntry(t,e),t=this.getRedoEntry(e),"EndGroup"===t.type?i--:"StartGroup"===t.type&&i++;i=0},t.prototype.redoEntry=function(t,e){var r,o;if("PropertyChanged"!==t.type&&"CollectionChanged"!==t.type&&(r=t.redoObject,o=t.redoObject),e.diagramActions|=n.p.UndoRedo,"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.historyManager.redoStack.length>0){var s=e.historyManager.redoStack.splice(0,1);e.historyManager.undoStack.splice(0,0,s[0]),o=t.redoObject}switch(e.protectPropertyChange(!0),i.i(d.isBlazor)()&&t.next&&"EndGroup"===t.next.type&&(e.blazorActions&=~n.i.GroupingInProgress),t.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(r,e);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(r,e,t);break;case"RotationChanged":this.recordRotationChanged(r,e,t);break;case"ConnectionChanged":this.recordConnectionChanged(r,e);break;case"PropertyChanged":this.recordPropertyChanged(t,e,!0);break;case"CollectionChanged":this.recordCollectionChanged(t,e);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(t,e);break;case"PortCollectionChanged":this.recordPortCollectionChanged(t,e);break;case"Group":this.group(t,e);break;case"UnGroup":this.unGroup(t,e);break;case"SegmentChanged":this.recordSegmentChanged(r,e);break;case"PortPositionChanged":this.recordPortChanged(t,e,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(t,e,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(t,e,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(t,e,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(t,e,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(t,e,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(t,e,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(t,e,!0);break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(t,e,!0);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(t,e,!0)}if(e.protectPropertyChange(!1),e.diagramActions&=~n.p.UndoRedo,e.historyChangeTrigger(t,"Redo"),o){var h=this.checkNodeObject(o,e);if(h){var l=i.i(a.h)(e.updateSelection);l&&l(h,e)}}},t.prototype.getUndoEntry=function(t){var e,i=null,r=t.historyManager;return r.canUndo&&(i=r.currentEntry,e=r.currentEntry.previous,e?(r.currentEntry=e,r.canRedo||(r.canRedo=!0)):(r.canRedo=!0,r.canUndo=!1)),i},t.prototype.getRedoEntry=function(t){var e,i=null,r=t.historyManager;return r.canRedo&&(e=r.currentEntry.previous||r.canUndo?r.currentEntry.next:r.currentEntry,e&&(r.currentEntry=e,r.canUndo||(r.canUndo=!0),e.next||(r.canRedo=!1,r.canUndo=!0)),i=r.currentEntry),i},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"UndoRedo"},t}())},function(t,e,i){"use strict";i.d(e,"a",function(){return f});var r,n=i(0),o=(i.n(n),i(28)),a=i(38),s=i(7),h=i(1),d=i(4),l=i(5),c=i(2),p=i(24),g=i(29),u=i(12),f=function(){function t(t){this.diagram=t}return t.prototype.exportDiagram=function(t){var e,r,o,a="data",s=[],h=t.margin||{},l=t&&t.region?t.region:"Content";i.i(n.isBlazor)()&&(0===t.Mode?t.mode="Download":t.mode="Data");var c=t&&t.mode?t.mode:"Download",p=this.getDiagramBounds(l,t);t.bounds&&(r=!0,p.x=t.bounds.x?t.bounds.x:p.x,p.y=t.bounds.y?t.bounds.y:p.y,p.width=t.bounds.width||p.width,p.height=t.bounds.height||p.height),h={top:void 0!==h.top?h.top:25,bottom:void 0!==h.bottom?h.bottom:25,right:void 0!==h.right?h.right:25,left:void 0!==h.left?h.left:25};this.diagram.nodes;"PageSettings"!==l&&(p.x-=h.left,p.y-=h.top,p.width+=h.left+h.right,p.height+=h.top+h.bottom);var g=t.fileName||"diagram";if("SVG"!==t.format){if(null!==(a=this.setCanvas(t,p,h,c,r,l,g)))return a}else{e=t.format,t.bounds=p,t.margin=h;var u=o=this.diagramAsSvg(t,h);if("Data"===c){if(i.i(n.isBlazor)()&&"SVG"===t.format){return(new XMLSerializer).serializeToString(u)}return o}var f=(new XMLSerializer).serializeToString(u);s.push(f)}if("Download"===c&&null!==a)for(var m=0;m<s.length;m++){var y=new Blob([s[parseInt(m.toString(),10)]],{type:"application/octet-stream"});if("msie"===n.Browser.info.name)window.navigator.msSaveOrOpenBlob(y,g+"."+e);else{var v=i.i(d.a)("a",{download:g+"."+e}),b=URL.createObjectURL(y);v.href=b;var S=document.createEvent("MouseEvents");S.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),v.dispatchEvent(S)}}return null},t.prototype.setCanvas=function(t,e,i,n,o,a,s){var h;t.bounds=e,t.region=a;this.setScaleValueforCanvas(t,e);var d,l=this.diagramAsCanvas({bounds:e,margin:i,region:a,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},o);return d=h=r="JPG"===t.format?l.toDataURL("image/jpeg"):"BMP"===t.format?l.toDataURL("image/bmp"):l.toDataURL(),"Data"===n?h:(this.canvasMultiplePage(t,l,i,d,s),null)},t.prototype.canvasMultiplePage=function(t,e,r,n,o){var a=this,s=[],h=n.substring(n.indexOf(":")+1,n.indexOf(";")),l=h.substring(h.indexOf("/")+1);l="jpeg"===l?void 0:l.toUpperCase();var c=l||"JPG";if(t.multiplePage){if(t.pageHeight=t.pageHeight?t.pageHeight:this.diagram.pageSettings.height,t.pageWidth=t.pageWidth?t.pageWidth:this.diagram.pageSettings.width,t.pageHeight=t.pageHeight?t.pageHeight:e.width,t.pageWidth=t.pageWidth?t.pageWidth:e.height,r=t.margin||{},t.pageOrientation&&("Landscape"===t.pageOrientation&&t.pageHeight>t.pageWidth||"Portrait"===t.pageOrientation&&t.pageWidth>t.pageHeight)){var p=t.pageWidth;t.pageWidth=t.pageHeight,t.pageHeight=p}t.margin={top:isNaN(r.top)?0:r.top,bottom:isNaN(r.bottom)?0:r.bottom,left:isNaN(r.left)?0:r.left,right:isNaN(r.right)?0:r.right};var g={id:this.diagram.element.id+"_printImage",src:n},u=i.i(d.a)("img",g);u.onload=function(){s=a.getMultipleImage(u,t,!0),a.exportImage(s,o,c,n)}}else s=[n],this.exportImage(s,o,c,n)},t.prototype.exportImage=function(t,e,r,o){for(var a=[],s=t instanceof HTMLElement?0:t.length,h=0;h<s;h++){o=t[parseInt(h.toString(),10)],o=o.replace(/^data:[a-z]*;,/,"");for(var l=o.split(","),c=atob(l[1]),p=new ArrayBuffer(c.length),g=new Uint8Array(p),u=0;u<c.length;u++)g[parseInt(u.toString(),10)]=c.charCodeAt(u);a.push(p)}for(var f=0;f<a.length;f++)!function(t){var o=new Blob([a[parseInt(t.toString(),10)]],{type:"application/octet-stream"});if("msie"===n.Browser.info.name)window.navigator.msSaveOrOpenBlob(o,e+"."+r);else{var s=i.i(d.a)("a",{download:e+"."+r}),h=URL.createObjectURL(o);s.href=h;var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout(function(){s.dispatchEvent(l)},5*(t+1))}}(f)},t.prototype.getObjectsBound=function(t){for(var e,i=this.diagram.nodes,r=0,n=i;r<n.length;r++){var o=n[r];o.visible&&(("SVG"===t.format||o instanceof g.a||o instanceof p.a)&&("SVG"!==t.format||o instanceof p.a)||(e=e?e.uniteRect(o.wrapper.outerBounds):o.wrapper.outerBounds))}for(var a=this.diagram.connectors,s=0,h=a;s<h.length;s++){var d=h[s];d.visible&&(e=e?e.uniteRect(d.wrapper.outerBounds):d.wrapper.outerBounds)}return e||new l.a(0,0,0,0)},t.prototype.getDiagramBounds=function(t,e){var i=this.getObjectsBound(e),r=i.left,n=i.top,o=i.right-i.left,a=i.bottom-i.top;"Content"!==t&&(this.diagram.pageSettings&&this.diagram.pageSettings.multiplePage?(r=i.left,n=i.top,this.diagram.pageSettings.width&&(r=Math.floor(r/this.diagram.pageSettings.width)*this.diagram.pageSettings.width,o=Math.ceil(i.right/this.diagram.pageSettings.width)*this.diagram.pageSettings.width-r),this.diagram.pageSettings.height&&(n=Math.floor(n/this.diagram.pageSettings.height)*this.diagram.pageSettings.height,a=Math.ceil(i.bottom/this.diagram.pageSettings.height)*this.diagram.pageSettings.height-n),0===i.width&&null!==this.diagram.pageSettings.width&&(o=this.diagram.pageSettings.width),0===i.height&&null!==this.diagram.pageSettings.height&&(a=this.diagram.pageSettings.height)):(this.diagram.pageSettings.width&&(r=0,o=this.diagram.pageSettings.width),this.diagram.pageSettings.height&&(n=0,a=this.diagram.pageSettings.height)));var s=new l.a;return s.x=r,s.y=n,s.width=o,s.height=a,s},t.prototype.setScaleValueforCanvas=function(t,e){t.scaleX=1,t.scaleY=1,t.scaleOffsetX=0,t.scaleOffsetY=0,t.pageHeight=t.pageHeight||this.diagram.pageSettings.height,t.pageWidth=t.pageWidth||this.diagram.pageSettings.width;var i=t.pageOrientation||this.diagram.pageSettings.orientation;if(i||(i="Portrait"),"Portrait"===i){if(t.pageWidth>t.pageHeight){var r=t.pageHeight;t.pageHeight=t.pageWidth,t.pageWidth=r}}else if(t.pageHeight>t.pageWidth){var r=t.pageWidth;t.pageWidth=t.pageHeight,t.pageHeight=r}t.pageWidth&&t.pageHeight&&!t.multiplePage&&(t.stretch="Meet");var n=t.pageHeight||e.height,o=t.pageWidth||e.width;"Stretch"!==t.stretch&&"Meet"!==t.stretch&&"Slice"!==t.stretch||(t.scaleX=o/e.width,t.scaleY=n/e.height,"Meet"===t.stretch?(t.scaleX=t.scaleY=Math.min(t.scaleX,t.scaleY),t.scaleOffsetY=(t.pageHeight-e.height*t.scaleX)/2,t.scaleOffsetX=(t.pageWidth-e.width*t.scaleX)/2):"Slice"===t.stretch&&(t.scaleX=t.scaleY=Math.max(t.scaleX,t.scaleY)),e.width=o,e.height=n),e.x*=t.scaleX,e.y*=t.scaleY},t.prototype.diagramAsSvg=function(t,e){var r=this.diagram.createSvg(this.diagram.element.id+"_diagram_svg",t.bounds.width,t.bounds.height);document.body.appendChild(r);var n=i.i(d.d)("g",{id:this.diagram.element.id+"_pageBackground"}),o=t&&t.region?t.region:"Content",s=this.getDiagramBounds(o,t),h=s.x,l=s.y,c=s.width,p=s.height;r.appendChild(n);var g={x:String(h),y:String(l),width:String(c),height:String(p)};i.i(d.e)(n,g),this.setTransform(n,t.bounds,e);var u=document.getElementById(this.diagram.element.id+"gradient_pattern");u&&r.appendChild(u),g={x:String(h),y:String(l),width:String(c+e.left+e.right),height:String(p+e.top+e.bottom)};var f=document.getElementById(this.diagram.element.id+"_backgroundImageLayer").cloneNode(!0);i.i(d.e)(f,g),r.appendChild(f),this.setTransform(f,s,e);var m=document.getElementById(this.diagram.element.id+"_backgroundLayerrect").cloneNode(!0);if(i.i(d.e)(m,g),r.appendChild(m),this.setTransform(m,s,e),"SVG"===this.diagram.mode){var y=void 0,v=void 0,b=i.i(d.v)(this.diagram.element.id);for(r.appendChild(b.getElementById(this.diagram.diagramLayer.id).cloneNode(!0)),v=0;v<r.childNodes.length;v++)y=r.childNodes[parseInt(v.toString(),10)],y.id===this.diagram.element.id+"_diagramLayer"&&this.setTransform(y,s,e)}else{n=i.i(d.d)("g",{id:this.diagram.element.id+"_diagramLayer"}),r.appendChild(n),this.setTransform(n,t.bounds,e);var S=new a.a("",null,!0),w=i.i(d.f)(this.diagram.element.id);this.diagram.renderDiagramElements(r,S,w,!1)}return document.body.removeChild(r),r},t.prototype.setTransform=function(t,e,i){t.setAttribute("transform","translate("+(-e.x+i.left)+", "+(-e.y+i.top)+")")},t.prototype.diagramAsCanvas=function(t,e){var r=t.bounds,n=t.margin,s=t&&t.region?t.region:"Content",h=this.getDiagramBounds(s,t),l=this.diagram.pageSettings.background.color,c=o.a.createCanvas(this.diagram.element.id+"_diagram",t.bounds.width,t.bounds.height),p=c.getContext("2d");p.translate(-r.x,-r.y),p.save(),p.fillStyle="transparent"===this.diagram.pageSettings.background.color?"white":this.diagram.pageSettings.background.color,r="Content"===s?h:r,p.fillRect(r.x,r.y,r.width,r.height);var g=this.diagram.pageSettings.background;if(g&&g.source){h=this.getDiagramBounds(s,t);var u=new Image;u.src=g.source;var f=h.width/u.width,m=h.height/u.height,y=h.x,v=h.y,b=h.width,S=h.height,w=this.isImageExportable(g);if("None"!==g.scale&&"None"!==g.align){var x="Meet"===g.scale?Math.min(f,m):Math.max(f,m);b=x*u.width,S=x*u.height,g.align.indexOf("xmid")>-1?y+=(h.width-b)/2:g.align.indexOf("xmax")>-1&&(y=y+h.width-b),g.align.indexOf("ymid")>-1?v+=(h.height-S)/2:g.align.indexOf("ymax")>-1&&(v=v+h.height-S),"none"!==this.diagram.pageSettings.background.color&&"transparent"!==this.diagram.pageSettings.background.color||(p.fillStyle="white",p.fillRect(h.x*t.scaleX,h.y*t.scaleY,h.width*t.scaleX,h.height*t.scaleY)),w&&p.drawImage(u,y,v,x*u.width,x*u.height)}else w&&p.drawImage(u,y,v,h.width,h.height)}else p.fillStyle="transparent"===l?"white":l,p.fillRect(h.x*t.scaleX-n.left,h.y*t.scaleY-n.top,h.width*t.scaleX+n.left+n.right,t.scaleY*h.height+n.top+n.bottom);var I=this.diagram.pageSettings.background.color,P=this.diagram.pageSettings.width;P&&(p.strokeStyle="none"===I?"transparent":I,p.lineWidth=P,p.strokeRect(h.x*t.scaleX,h.y*t.scaleY,h.width*t.scaleX,h.height*t.scaleY)),p.restore();var C=i.i(d.f)(this.diagram.element.id),z=new a.a("",null,!1);return this.updateObjectValue(t.scaleX,t.scaleOffsetX,t.scaleOffsetY,!0),this.diagram.renderDiagramElements(c,z,C,!1,!0),this.updateObjectValue(t.scaleX,t.scaleOffsetX,t.scaleOffsetY,!1),c},t.prototype.updateWrapper=function(t,e,i,r,n){if(t&&t.length>0)for(var o=0;o<t.length;o++)t[parseInt(o.toString(),10)].children&&this.updateWrapper(t[parseInt(o.toString(),10)].children,e,i,r,n),t[parseInt(o.toString(),10)].exportScaleValue.x=e,t[parseInt(o.toString(),10)].exportScaleValue.y=e,t[parseInt(o.toString(),10)].exportScaleOffset.x=i,t[parseInt(o.toString(),10)].exportScaleOffset.y=r,t[parseInt(o.toString(),10)].isExport=n},t.prototype.scaleGradientValue=function(t,e,i){if(t.style.gradient.stops.length>0){var r=t.style.gradient;t.style.gradient instanceof u.j?(r.x1=i?r.x1*e:r.x1/e,r.y1=i?r.y1*e:r.y1/e,r.x2=i?r.x2*e:r.x2/e,r.y2=i?r.y2*e:r.y2/e):(r.fx=i?r.fx*e:r.fx/e,r.fy=i?r.fy*e:r.fy/e,r.cx=i?r.cx*e:r.cx/e,r.cy=i?r.cy*e:r.cy/e,r.r=i?r.r*e:r.r/e)}},t.prototype.updateObjectValue=function(t,e,i,r){for(var n,o=0;o<this.diagram.nodes.length;o++)n=this.diagram.nodes[parseInt(o.toString(),10)].wrapper,this.scaleGradientValue(this.diagram.nodes[parseInt(o.toString(),10)],t,r),this.updateWrapper(n.children,t,e,i,r),n.exportScaleValue.x=t,n.exportScaleValue.y=t,n.exportScaleOffset.x=e,n.exportScaleOffset.y=i,n.isExport=r;for(var a=0;a<this.diagram.connectors.length;a++){n=this.diagram.connectors[parseInt(a.toString(),10)].wrapper;for(var s=0;s<n.children.length;s++)n.children[parseInt(s.toString(),10)].isExport=r,r&&(n.children[parseInt(s.toString(),10)].exportScaleValue.x=t,n.children[parseInt(s.toString(),10)].exportScaleValue.y=t,n.children[parseInt(s.toString(),10)].exportScaleOffset.x=e,n.children[parseInt(s.toString(),10)].exportScaleOffset.y=i)}},t.prototype.isImageExportable=function(t){var e,i=!0;if(t.source)try{e=o.a.createCanvas(this.diagram.element.id+"temp_canvas",100,100);var r=e.getContext("2d");r.save();var n=new Image;n.src=t.source,r.drawImage(n,0,0,100,100),r.restore(),e.toDataURL()}catch(t){i=!1}return i},t.prototype.getPrintCanvasStyle=function(t,e){var i=0,r=0,n=new s.a;if(i=t.width,r=t.height,(e.pageHeight||e.pageWidth)&&(r=e.pageHeight?e.pageHeight:r,i=e.pageWidth?e.pageWidth:i),e.pageOrientation&&("Landscape"===e.pageOrientation&&r>i||"Portrait"===e.pageOrientation&&i>r)){var o=i;i=r,r=o}return n.height=r,n.width=i,n},t.prototype.getMultipleImage=function(t,e,r){var n=[],a=i.i(d.a)("div",{}),s=this.getPrintCanvasStyle(t,e),h=e.margin,l=h.left,c=h.top,p=h.right,g=h.bottom,u=0,f=s.width+u,m=s.height+0,y=0,v=0;if(e&&e.multiplePage){a.style.height="auto",a.style.width="auto";var b=t.height,S=t.width,w=0,x=0,I=void 0,P=0,C=0,z=void 0,O=void 0;do{do{P=s.width,C=s.height,y+s.width>=S&&(P=S-y),v+s.height>=b&&(C=b-v),O=o.a.createCanvas(this.diagram.element.id+"_multiplePrint",s.width,s.height),z=O.getContext("2d"),z.drawImage(t,u+y+l,0+v+c,P-p-l,C-g-c,0+l,0+c,P-p-l,C-g-c),y+s.width>=S&&(y-=y-S),I=O.toDataURL(),z.restore(),y+=f,r?n.push(I):this.printImage(a,I,w+""+x,f+"px;",m+"px;"),w++}while(y<S);x++,w=u=y=0,v+s.height>=b&&(v-=v-b),v+=m}while(v<b)}else{var T=this.getPrintCanvasStyle(t,e),A=T.width,L=T.height,O=o.a.createCanvas(this.diagram.element.id+"_diagram",A,L),z=O.getContext("2d");z.drawImage(t,0+l,0+c,t.width-(p+l),t.height-(c+g),0+l,0+c,A-(p+l),L-(c+g));var I=O.toDataURL();z.restore(),r?n.push(I):this.printImage(a,I,0)}return r?n:a},t.prototype.printImage=function(t,e,r,n,o){var a={class:"e-diagram-print-page",style:"width:"+n+"height:"+o},s=i.i(d.a)("img",a),h=i.i(d.a)("div",a);a={id:this.diagram.element.id+"_multiplePrint_img"+r,style:"float:left",src:e},i.i(d.b)(s,a),h.appendChild(s),t.appendChild(h)},t.prototype.print=function(t){t.mode="Data";var e=this.exportDiagram(t);this.printImages(e,t)},t.prototype.printImages=function(t,e){var r=this,n={id:this.diagram.element.id+"_printImage",src:t};e.margin={top:0,bottom:0,right:0,left:0};var o=i.i(d.a)("img",n);o.onload=function(){var t=r.getMultipleImage(o,e),i=window.open("");null!=i&&t instanceof HTMLElement&&(i.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),i.addEventListener("load",function(t){setTimeout(function(){i.window.print()},3e3)}),i.document.write("<center>"+t.innerHTML+"</center>"),i.document.close())}},t.prototype.getContent=function(t){var e=this.diagram.snapSettings.constraints;this.diagram.snapSettings.constraints=this.diagram.snapSettings.constraints&~h.w.ShowLines,this.diagram.dataBind(),this.diagram.clearSelection(),t=t||document.styleSheets;for(var i="",r=0;r<t.length;r++)(t[parseInt(r.toString(),10)].href||"string"==typeof t[parseInt(r.toString(),10)])&&(i+="<link href='"+(t[parseInt(r.toString(),10)].href||t[parseInt(r.toString(),10)])+"' rel='stylesheet' />");var n=document.getElementById(this.diagram.element.id+"content").innerHTML;return n=i+"<body style=\"margin: 0px; padding: 0px\"><div style='margin-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;'>"+n+"</div></body>",n=n.replace(/ transform: t/g," -webkit-transform: t"),this.diagram.snapSettings.constraints=e,this.diagram.dataBind(),n},t.prototype.getDiagramContent=function(t){if(1===this.diagram.scroller.currentZoom){var e=this.getContent(t);return i.i(c.K)()?e.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):e}var r=document.getElementById(this.diagram.element.id+"content"),n=r.scrollLeft,o=r.scrollTop,a=this.diagram.scrollSettings.currentZoom,s=this.diagram.scroller.horizontalOffset,h=this.diagram.scroller.verticalOffset,d=Number(String(this.diagram.width).split("%")[0])?r.clientWidth:Number(String(this.diagram.width).split("px")[0]),l=Number(String(this.diagram.height).split("%")[0])?r.clientHeight:Number(String(this.diagram.height).split("px")[0]),p=this.getDiagramBounds("",{});this.diagram.scroller.zoom(1/a);var g=0,u=0;g=p.x,u=p.y,this.diagram.scroller.transform={tx:-g,ty:-u,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=-g,this.diagram.scroller.verticalOffset=-u,this.diagram.scroller.setSize(),this.diagram.setSize(p.width,p.height);var e=this.getContent(t);return this.diagram.setSize(d,l),this.diagram.scroller.zoom(a/this.diagram.scrollSettings.currentZoom),this.diagram.dataBind(),n||o?this.diagram.setOffset(n,o):(this.diagram.scroller.transform={tx:s/this.diagram.scroller.currentZoom,ty:h/this.diagram.scroller.currentZoom,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=s,this.diagram.scroller.verticalOffset=h),this.diagram.renderSelector(!1),i.i(c.K)()?e.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):e},t.prototype.exportImages=function(t,e){var r=this,n=e&&e.region?e.region:"Content",a=e.margin||{};a={top:isNaN(a.top)?0:a.top,bottom:isNaN(a.bottom)?0:a.bottom,left:isNaN(a.left)?0:a.left,right:isNaN(a.right)?0:a.right};var s=this.getDiagramBounds(n,{});e.bounds&&(s.x=isNaN(e.bounds.x)?s.x:e.bounds.x,s.y=isNaN(e.bounds.y)?s.y:e.bounds.y,s.width=e.bounds.width||s.width,s.height=e.bounds.height||s.height);var h=document.createElement("img"),l={src:t};i.i(d.b)(h,l);var c=this;h.onload=function(){var i=o.a.createCanvas(c.diagram.element.id+"innerImage",s.width+(a.left+a.right),s.height+(a.top+a.bottom)),n=i.getContext("2d");if(n.fillStyle=c.diagram.pageSettings.background.color,n.fillRect(0,0,s.width+(a.left+a.right),s.height+(a.top+a.bottom)),n.drawImage(h,0,0,s.width,s.height,a.left,a.top,s.width,s.height),t=i.toDataURL(),e.printOptions)return void c.printImages(t,e);n.restore();var d=e.fileName||"diagram";r.canvasMultiplePage(e,i,a,t,d)}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"PrintandExport"},t}()},function(t,e,i){"use strict";function r(t,e,i){var r,a="NoWrap";"Class"===e.shape.classifier?r=e.shape.classShape:"Enumeration"===e.shape.classifier?r=e.shape.enumerationShape:"Interface"===e.shape.classifier&&(r=e.shape.interfaceShape),e.container={type:"Stack",orientation:"Vertical"},e.constraints=(h.f.Default|h.f.HideThumbs)&~(h.f.Rotate|h.f.Resize),e.style={fill:e.style.fill,strokeColor:e.style.strokeColor,strokeWidth:1.5},e.children=[],e.maxWidth&&(a="Wrap");var s=new d.a(i,"nodes",{id:e.id+"_umlClass_header",annotations:[{id:"name",content:r.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:r.style.color,fill:r.style.fill,textWrapping:a}},{content:"<<"+e.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:r.style.fontSize,color:r.style.color,fill:r.style.fill,textWrapping:a},offset:{x:.5,y:.3},constraints:h.b.ReadOnly}],constraints:(h.f.Default|h.f.HideThumbs)&~(h.f.Rotate|h.f.Drag|h.f.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor}},!0);return i.initObject(s),i.nodes.push(s),i.UpdateBlazorDiagramModel(s,"Node"),e.children.push(s.id),n(e,i,r,a),o(e,i,r,a),e.offsetX=e.offsetX,e.offsetY=e.offsetY,e.style.fill=e.style.fill,e.borderColor=e.borderColor,i.initObject(e),t}function n(t,e,r,n){if("Enumeration"===t.shape.classifier){var o=r.members;if(o&&o.length){a(t,e);for(var c="",p=0;p<o.length;p++){var g=o[parseInt(p.toString(),10)];if(""!==g.name&&(c+=g.name),p!==o.length){var u=s(t,g),f=new d.a(e,"nodes",{id:i.i(l.g)()+"_umlMember",annotations:[{id:"name",content:c,offset:{x:0,y:.5},style:{bold:!0,fontSize:u.fontSize,color:u.color,fill:u.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor,textWrapping:n},constraints:(h.f.Default|h.f.HideThumbs)&~(h.f.Rotate|h.f.Drag|h.f.Resize),minHeight:25},!0);e.initObject(f),e.nodes.push(f),e.UpdateBlazorDiagramModel(f,"Node"),t.children.push(f.id),c="",g.isSeparator&&p!==o.length-1&&a(t,e)}}}}else{var m=r.attributes;if(m.length){var y="";a(t,e);for(var p=0;p<m.length;p++){var v=void 0,b=m[parseInt(p.toString(),10)];if(v=b.scope&&"Public"===b.scope?" +":b.scope&&"Private"===b.scope?"-":b.scope&&"Protected"===b.scope?"#":"~",""!==b.name&&v&&(y+=v+" "+b.name+" : "+b.type),p!==m.length){var u=s(t,b),f=new d.a(e,"nodes",{id:i.i(l.g)()+"_umlProperty",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},annotations:[{id:"name",content:y,offset:{x:0,y:.5},style:{bold:!0,fontSize:u.fontSize,color:u.color,fill:u.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(h.f.Default|h.f.HideThumbs)&~(h.f.Rotate|h.f.Drag|h.f.Resize),minHeight:25},!0);e.initObject(f),e.nodes.push(f),e.UpdateBlazorDiagramModel(f,"Node"),t.children.push(f.id),y="",b.isSeparator&&p!==m.length-1&&a(t,e)}}}}}function o(t,e,r,n){if(r.methods&&r.methods.length){var o=r.methods;a(t,e);for(var c="",p="",g=void 0,u=0;u<o.length;u++){var f=o[parseInt(u.toString(),10)];if(g=f.scope&&"Public"===f.scope?" +":f.scope&&"Private"===f.scope?"-":f.scope&&"Protected"===f.scope?"#":"~",f.parameters)for(var m=0;m<f.parameters.length;m++)f.parameters[parseInt(m.toString(),10)].type?c+=f.parameters[parseInt(m.toString(),10)].name+":"+f.parameters[parseInt(m.toString(),10)].type:c+=f.parameters[parseInt(m.toString(),10)].name,m!==f.parameters.length-1&&(c+=",");if(""!==f.name&&g&&(p+=g+" "+f.name+"("+c+") : "+f.type),u!==o.length){var y=s(t,f),v=new d.a(e,"nodes",{id:i.i(l.g)()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:p,offset:{x:0,y:.5},style:{bold:!0,fontSize:y.fontSize,color:y.color,fill:y.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},minHeight:25,constraints:(h.f.Default|h.f.HideThumbs)&~(h.f.Rotate|h.f.Drag|h.f.Resize)},!0);e.initObject(v),e.nodes.push(v),e.UpdateBlazorDiagramModel(v,"Node"),t.children.push(v.id),p="",f.isSeparator&&u!==o.length-1&&a(t,e)}}}}function a(t,e){var r=new d.a(e,"nodes",{id:i.i(l.g)()+"_path",height:1,constraints:h.f.Default&~h.f.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor}},!0);e.initObject(r),e.nodes.push(r),t.children.push(r.id)}function s(t,e){var i={},r=e.style;return i.fill="transparent"!==r.fill?r.fill:t.style.fill,i.color=r.color,i.fontSize=12!==r.fontSize?r.fontSize:t.style.fontSize,i.strokeColor="black"!==r.strokeColor?r.strokeColor:t.style.strokeColor,i.strokeWidth=1!==r.strokeWidth?r.strokeWidth:t.style.strokeWidth,i}e.a=r;var h=i(1),d=i(6),l=i(3)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(25);i.d(e,"Diagram",function(){return r.a}),i.d(e,"PrintAndExport",function(){return r.b}),i.d(e,"Size",function(){return r.c}),i.d(e,"Rect",function(){return r.d}),i.d(e,"MatrixTypes",function(){return r.e}),i.d(e,"Matrix",function(){return r.f}),i.d(e,"identityMatrix",function(){return r.g}),i.d(e,"transformPointByMatrix",function(){return r.h}),i.d(e,"transformPointsByMatrix",function(){return r.i}),i.d(e,"rotateMatrix",function(){return r.j}),i.d(e,"scaleMatrix",function(){return r.k}),i.d(e,"translateMatrix",function(){return r.l}),i.d(e,"multiplyMatrix",function(){return r.m}),i.d(e,"Point",function(){return r.n}),i.d(e,"BlazorAction",function(){return r.o}),i.d(e,"PortVisibility",function(){return r.p}),i.d(e,"SnapConstraints",function(){return r.q}),i.d(e,"SelectorConstraints",function(){return r.r}),i.d(e,"ConnectionPointOrigin",function(){return r.s}),i.d(e,"ChildArrangement",function(){return r.t}),i.d(e,"ConnectorConstraints",function(){return r.u}),i.d(e,"AnnotationConstraints",function(){return r.v}),i.d(e,"NodeConstraints",function(){return r.w}),i.d(e,"ElementAction",function(){return r.x}),i.d(e,"ThumbsConstraints",function(){return r.y}),i.d(e,"DiagramConstraints",function(){return r.z}),i.d(e,"DiagramTools",function(){return r.A}),i.d(e,"Transform",function(){return r.B}),i.d(e,"RenderMode",function(){return r.C}),i.d(e,"KeyModifiers",function(){return r.D}),i.d(e,"Keys",function(){return r.E}),i.d(e,"DiagramAction",function(){return r.F}),i.d(e,"RendererAction",function(){return r.G}),i.d(e,"RealAction",function(){return r.H}),i.d(e,"ScrollActions",function(){return r.I}),i.d(e,"NoOfSegments",function(){return r.J}),i.d(e,"DiagramEvent",function(){return r.K}),i.d(e,"PortConstraints",function(){return r.L}),i.d(e,"contextMenuClick",function(){return r.M}),i.d(e,"contextMenuOpen",function(){return r.N}),i.d(e,"contextMenuBeforeItemRender",function(){return r.O}),i.d(e,"ControlPointsVisibility",function(){return r.P}),i.d(e,"BezierSmoothness",function(){return r.Q}),i.d(e,"Thickness",function(){return r.R}),i.d(e,"Margin",function(){return r.S}),i.d(e,"Shadow",function(){return r.T}),i.d(e,"Stop",function(){return r.U}),i.d(e,"Gradient",function(){return r.V}),i.d(e,"DiagramGradient",function(){return r.W}),i.d(e,"LinearGradient",function(){return r.X}),i.d(e,"RadialGradient",function(){return r.Y}),i.d(e,"ShapeStyle",function(){return r.Z}),i.d(e,"StrokeStyle",function(){return r._0}),i.d(e,"TextStyle",function(){return r._1}),i.d(e,"DiagramShapeStyle",function(){return r._2}),i.d(e,"DiagramElement",function(){return r._3}),i.d(e,"PathElement",function(){return r._4}),i.d(e,"ImageElement",function(){return r._5}),i.d(e,"TextElement",function(){return r._6}),i.d(e,"Container",function(){return r._7}),i.d(e,"Canvas",function(){return r._8}),i.d(e,"GridPanel",function(){return r._9}),i.d(e,"RowDefinition",function(){return r._10}),i.d(e,"ColumnDefinition",function(){return r._11}),i.d(e,"GridRow",function(){return r._12}),i.d(e,"GridCell",function(){return r._13}),i.d(e,"StackPanel",function(){return r._14}),i.d(e,"findConnectorPoints",function(){return r._15}),i.d(e,"swapBounds",function(){return r._16}),i.d(e,"findMargin",function(){return r._17}),i.d(e,"findAngle",function(){return r._18}),i.d(e,"findPoint",function(){return r._19}),i.d(e,"getIntersection",function(){return r._20}),i.d(e,"getIntersectionPoints",function(){return r._21}),i.d(e,"orthoConnection2Segment",function(){return r._22}),i.d(e,"getPortDirection",function(){return r._23}),i.d(e,"getOuterBounds",function(){return r._24}),i.d(e,"getOppositeDirection",function(){return r._25}),i.d(e,"processPathData",function(){return r._26}),i.d(e,"parsePathData",function(){return r._27}),i.d(e,"getRectanglePath",function(){return r._28}),i.d(e,"getPolygonPath",function(){return r._29}),i.d(e,"getFreeHandPath",function(){return r._30}),i.d(e,"pathSegmentCollection",function(){return r._31}),i.d(e,"transformPath",function(){return r._32}),i.d(e,"updatedSegment",function(){return r._33}),i.d(e,"scalePathData",function(){return r._34}),i.d(e,"splitArrayCollection",function(){return r._35}),i.d(e,"getPathString",function(){return r._36}),i.d(e,"getString",function(){return r._37}),i.d(e,"randomId",function(){return r._38}),i.d(e,"getIndex",function(){return r._39}),i.d(e,"templateCompiler",function(){return r._40}),i.d(e,"cornersPointsBeforeRotation",function(){return r._41}),i.d(e,"getBounds",function(){return r._42}),i.d(e,"cloneObject",function(){return r._43}),i.d(e,"getInternalProperties",function(){return r._44}),i.d(e,"cloneArray",function(){return r._45}),i.d(e,"extendObject",function(){return r._46}),i.d(e,"extendArray",function(){return r._47}),i.d(e,"textAlignToString",function(){return r._48}),i.d(e,"wordBreakToString",function(){return r._49}),i.d(e,"bBoxText",function(){return r._50}),i.d(e,"middleElement",function(){return r._51}),i.d(e,"overFlow",function(){return r._52}),i.d(e,"whiteSpaceToString",function(){return r._53}),i.d(e,"rotateSize",function(){return r._54}),i.d(e,"rotatePoint",function(){return r._55}),i.d(e,"getOffset",function(){return r._56}),i.d(e,"getFunction",function(){return r._57}),i.d(e,"completeRegion",function(){return r._58}),i.d(e,"findNodeByName",function(){return r._59}),i.d(e,"findObjectType",function(){return r._60}),i.d(e,"setSwimLaneDefaults",function(){return r._61}),i.d(e,"getSpaceValue",function(){return r._62}),i.d(e,"getInterval",function(){return r._63}),i.d(e,"setPortsEdges",function(){return r._64}),i.d(e,"setUMLActivityDefaults",function(){return r._65}),i.d(e,"setConnectorDefaults",function(){return r._66}),i.d(e,"findNearestPoint",function(){return r._67}),i.d(e,"isDiagramChild",function(){return r._68}),i.d(e,"groupHasType",function(){return r._69}),i.d(e,"updateDefaultValues",function(){return r._70}),i.d(e,"updateLayoutValue",function(){return r._71}),i.d(e,"isPointOverConnector",function(){return r._72}),i.d(e,"intersect3",function(){return r._73}),i.d(e,"intersect2",function(){return r._74}),i.d(e,"getLineSegment",function(){return r._75}),i.d(e,"getPoints",function(){return r._76}),i.d(e,"getTooltipOffset",function(){return r._77}),i.d(e,"initfixedUserHandlesSymbol",function(){return r._78}),i.d(e,"sort",function(){return r._79}),i.d(e,"getAnnotationPosition",function(){return r._80}),i.d(e,"getOffsetOfConnector",function(){return r._81}),i.d(e,"getAlignedPosition",function(){return r._82}),i.d(e,"alignLabelOnSegments",function(){return r._83}),i.d(e,"getBezierDirection",function(){return r._84}),i.d(e,"removeChildNodes",function(){return r._85}),i.d(e,"getChild",function(){return r._86}),i.d(e,"serialize",function(){return r._87}),i.d(e,"deserialize",function(){return r._88}),i.d(e,"upgrade",function(){return r._89}),i.d(e,"updateStyle",function(){return r._90}),i.d(e,"updateHyperlink",function(){return r._91}),i.d(e,"updateShapeContent",function(){return r._92}),i.d(e,"updateShape",function(){return r._93}),i.d(e,"updateContent",function(){return r._94}),i.d(e,"updateUmlActivityNode",function(){return r._95}),i.d(e,"getUMLFinalNode",function(){return r._96}),i.d(e,"getUMLActivityShapes",function(){return r._97}),i.d(e,"removeGradient",function(){return r._98}),i.d(e,"removeItem",function(){return r._99}),i.d(e,"updateConnector",function(){return r._100}),i.d(e,"getUserHandlePosition",function(){return r._101}),i.d(e,"canResizeCorner",function(){return r._102}),i.d(e,"canShowCorner",function(){return r._103}),i.d(e,"canShowControlPoints",function(){return r._104}),i.d(e,"checkPortRestriction",function(){return r._105}),i.d(e,"findAnnotation",function(){return r._106}),i.d(e,"findPort",function(){return r._107}),i.d(e,"getInOutConnectPorts",function(){return r._108}),i.d(e,"findObjectIndex",function(){return r._109}),i.d(e,"getObjectFromCollection",function(){return r._110}),i.d(e,"scaleElement",function(){return r._111}),i.d(e,"arrangeChild",function(){return r._112}),i.d(e,"insertObject",function(){return r._113}),i.d(e,"getElement",function(){return r._114}),i.d(e,"getCollectionChangeEventArguements",function(){return r._115}),i.d(e,"getDropEventArguements",function(){return r._116}),i.d(e,"getPoint",function(){return r._117}),i.d(e,"getObjectType",function(){return r._118}),i.d(e,"flipConnector",function(){return r._119}),i.d(e,"updatePortEdges",function(){return r._120}),i.d(e,"alignElement",function(){return r._121}),i.d(e,"cloneSelectedObjects",function(){return r._122}),i.d(e,"updatePathElement",function(){return r._123}),i.d(e,"checkPort",function(){return r._124}),i.d(e,"findPath",function(){return r._125}),i.d(e,"getConnectorDirection",function(){return r._126}),i.d(e,"findDistance",function(){return r._127}),i.d(e,"cloneBlazorObject",function(){return r._128}),i.d(e,"checkBrowserInfo",function(){return r._129}),i.d(e,"canMeasureDecoratorPath",function(){return r._130}),i.d(e,"getPreviewSize",function(){return r._131}),i.d(e,"getSymbolSize",function(){return r._132}),i.d(e,"findParentInSwimlane",function(){return r._133}),i.d(e,"selectionHasConnector",function(){return r._134}),i.d(e,"CanvasRenderer",function(){return r._135}),i.d(e,"DiagramRenderer",function(){return r._136}),i.d(e,"DataBinding",function(){return r._137}),i.d(e,"getBasicShape",function(){return r._138}),i.d(e,"getPortShape",function(){return r._139}),i.d(e,"getDecoratorShape",function(){return r._140}),i.d(e,"getSegmentThumbShapeHorizontal",function(){return r._141}),i.d(e,"getSegmentThumbShapeVertical",function(){return r._142}),i.d(e,"getIconShape",function(){return r._143}),i.d(e,"getFlowShape",function(){return r._144}),i.d(e,"Hyperlink",function(){return r._145}),i.d(e,"Annotation",function(){return r._146}),i.d(e,"ShapeAnnotation",function(){return r._147});i.d(e,"PathAnnotation",function(){return r._148}),i.d(e,"Port",function(){return r._149}),i.d(e,"PointPort",function(){return r._150}),i.d(e,"menuClass",function(){return r._151}),i.d(e,"DiagramContextMenu",function(){return r._152}),i.d(e,"Shape",function(){return r._153}),i.d(e,"Path",function(){return r._154}),i.d(e,"Native",function(){return r._155}),i.d(e,"Html",function(){return r._156}),i.d(e,"Image",function(){return r._157}),i.d(e,"Text",function(){return r._158}),i.d(e,"BasicShape",function(){return r._159}),i.d(e,"FlowShape",function(){return r._160}),i.d(e,"BpmnGateway",function(){return r._161}),i.d(e,"BpmnDataObject",function(){return r._162}),i.d(e,"BpmnTask",function(){return r._163}),i.d(e,"BpmnEvent",function(){return r._164}),i.d(e,"BpmnSubEvent",function(){return r._165}),i.d(e,"BpmnTransactionSubProcess",function(){return r._166}),i.d(e,"BpmnSubProcess",function(){return r._167}),i.d(e,"BpmnActivity",function(){return r._168}),i.d(e,"BpmnAnnotation",function(){return r._169}),i.d(e,"BpmnShape",function(){return r._170}),i.d(e,"UmlActivityShape",function(){return r._171}),i.d(e,"MethodArguments",function(){return r._172}),i.d(e,"UmlClassAttribute",function(){return r._173}),i.d(e,"UmlClassMethod",function(){return r._174}),i.d(e,"UmlClass",function(){return r._175}),i.d(e,"UmlInterface",function(){return r._176}),i.d(e,"UmlEnumerationMember",function(){return r._177}),i.d(e,"UmlEnumeration",function(){return r._178}),i.d(e,"UmlClassifierShape",function(){return r._179}),i.d(e,"DiagramShape",function(){return r._180}),i.d(e,"Node",function(){return r._181}),i.d(e,"Header",function(){return r._182}),i.d(e,"Lane",function(){return r._183}),i.d(e,"Phase",function(){return r._184}),i.d(e,"SwimLane",function(){return r._185}),i.d(e,"ChildContainer",function(){return r._186}),i.d(e,"Selector",function(){return r._187}),i.d(e,"BpmnDiagrams",function(){return r._188}),i.d(e,"getBpmnShapePathData",function(){return r._189}),i.d(e,"getBpmnTriggerShapePathData",function(){return r._190}),i.d(e,"getBpmnGatewayShapePathData",function(){return r._191}),i.d(e,"getBpmnTaskShapePathData",function(){return r._192}),i.d(e,"getBpmnLoopShapePathData",function(){return r._193}),i.d(e,"Decorator",function(){return r._194}),i.d(e,"Vector",function(){return r._195}),i.d(e,"BezierSettings",function(){return r._196}),i.d(e,"ConnectorShape",function(){return r._197}),i.d(e,"ActivityFlow",function(){return r._198}),i.d(e,"BpmnFlow",function(){return r._199}),i.d(e,"ConnectorSegment",function(){return r._200}),i.d(e,"StraightSegment",function(){return r._201}),i.d(e,"BezierSegment",function(){return r._202}),i.d(e,"OrthogonalSegment",function(){return r._203}),i.d(e,"DiagramConnectorSegment",function(){return r._204}),i.d(e,"getDirection",function(){return r._205}),i.d(e,"isEmptyVector",function(){return r._206}),i.d(e,"getBezierPoints",function(){return r._207}),i.d(e,"getBezierBounds",function(){return r._208}),i.d(e,"bezierPoints",function(){return r._209}),i.d(e,"MultiplicityLabel",function(){return r._210}),i.d(e,"ClassifierMultiplicity",function(){return r._211}),i.d(e,"RelationShip",function(){return r._212}),i.d(e,"DiagramConnectorShape",function(){return r._213}),i.d(e,"Connector",function(){return r._214}),i.d(e,"ConnectorBridging",function(){return r._215}),i.d(e,"Snapping",function(){return r._216}),i.d(e,"UndoRedo",function(){return r._217}),i.d(e,"DiagramTooltip",function(){return r._218}),i.d(e,"initTooltip",function(){return r._219}),i.d(e,"updateTooltip",function(){return r._220}),i.d(e,"LayoutAnimation",function(){return r._221}),i.d(e,"SymbolSize",function(){return r._222}),i.d(e,"SymbolPaletteInfo",function(){return r._223}),i.d(e,"FixedUserHandle",function(){return r._224}),i.d(e,"NodeFixedUserHandle",function(){return r._225}),i.d(e,"ConnectorFixedUserHandle",function(){return r._226}),i.d(e,"UserHandle",function(){return r._227}),i.d(e,"ToolBase",function(){return r._228}),i.d(e,"SelectTool",function(){return r._229}),i.d(e,"FixedUserHandleTool",function(){return r._230}),i.d(e,"ConnectTool",function(){return r._231}),i.d(e,"MoveTool",function(){return r._232}),i.d(e,"RotateTool",function(){return r._233}),i.d(e,"ResizeTool",function(){return r._234}),i.d(e,"NodeDrawingTool",function(){return r._235}),i.d(e,"ConnectorDrawingTool",function(){return r._236}),i.d(e,"TextDrawingTool",function(){return r._237}),i.d(e,"ZoomPanTool",function(){return r._238}),i.d(e,"ExpandTool",function(){return r._239}),i.d(e,"LabelTool",function(){return r._240}),i.d(e,"PolygonDrawingTool",function(){return r._241}),i.d(e,"PolyLineDrawingTool",function(){return r._242}),i.d(e,"LabelDragTool",function(){return r._243}),i.d(e,"LabelResizeTool",function(){return r._244}),i.d(e,"LabelRotateTool",function(){return r._245}),i.d(e,"FreeHandTool",function(){return r._246}),i.d(e,"DiagramEventHandler",function(){return r._247}),i.d(e,"CommandHandler",function(){return r._248}),i.d(e,"findToolToActivate",function(){return r._249}),i.d(e,"findPortToolToActivate",function(){return r._250}),i.d(e,"contains",function(){return r._251}),i.d(e,"hasSelection",function(){return r._252}),i.d(e,"hasSingleConnection",function(){return r._253}),i.d(e,"isSelected",function(){return r._254}),i.d(e,"getCursor",function(){return r._255}),i.d(e,"ConnectorEditing",function(){return r._256}),i.d(e,"updateCanvasBounds",function(){return r._257}),i.d(e,"removeChildInContainer",function(){return r._258}),i.d(e,"findBounds",function(){return r._259}),i.d(e,"createHelper",function(){return r._260}),i.d(e,"renderContainerHelper",function(){return r._261}),i.d(e,"checkParentAsContainer",function(){return r._262}),i.d(e,"checkChildNodeInContainer",function(){return r._263}),i.d(e,"addChildToContainer",function(){return r._264}),i.d(e,"updateLaneBoundsAfterAddChild",function(){return r._265}),i.d(e,"renderStackHighlighter",function(){return r._266}),i.d(e,"moveChildInStack",function(){return r._267}),i.d(e,"LineRouting",function(){return r._268}),i.d(e,"LineDistribution",function(){return r._269}),i.d(e,"CrudAction",function(){return r._270}),i.d(e,"ConnectionDataSource",function(){return r._271}),i.d(e,"DataSource",function(){return r._272}),i.d(e,"Gridlines",function(){return r._273}),i.d(e,"SnapSettings",function(){return r._274}),i.d(e,"KeyGesture",function(){return r._275}),i.d(e,"Command",function(){return r._276}),i.d(e,"CommandManager",function(){return r._277}),i.d(e,"ContextMenuSettings",function(){return r._278}),i.d(e,"CustomCursorAction",function(){return r._279}),i.d(e,"DataMappingItems",function(){return r._280}),i.d(e,"BlazorAnimation",function(){return r._281}),i.d(e,"BlazorTooltip",function(){return r._282}),i.d(e,"Layout",function(){return r._283}),i.d(e,"MindMap",function(){return r._284}),i.d(e,"HierarchicalTree",function(){return r._285}),i.d(e,"RadialTree",function(){return r._286}),i.d(e,"GraphForceNode",function(){return r._287}),i.d(e,"SymmetricLayout",function(){return r._288}),i.d(e,"GraphLayoutManager",function(){return r._289}),i.d(e,"ComplexHierarchicalTree",function(){return r._290});var n=i(63);i.d(e,"Palette",function(){return n.a}),i.d(e,"SymbolDragSize",function(){return n.b}),i.d(e,"SymbolPreview",function(){return n.c}),i.d(e,"SymbolPalette",function(){return n.d});var o=i(45);i.d(e,"Ruler",function(){return o.a});var a=i(62);i.d(e,"Overview",function(){return a.a})},function(t,e,i){"use strict";i.d(e,"a",function(){return g});var r=i(1),n=i(38),o=i(28),a=i(0),s=(i.n(a),i(4)),h=i(5),d=i(7),l=i(39),c=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},g=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.mode="Canvas",r.id="overview",r.actionName="",r.startPoint=null,r.currentPoint=null,r.prevPoint=null,r.scale=null,r.inAction=!1,r.viewPortRatio=1,r.horizontalOffset=0,r.verticalOffset=0,r.model={},r.event=!0,r.overviewid=88123,r.model={width:r.width,height:r.height},r}return c(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,r=Object.keys(t);i<r.length;i++){switch(r[i]){case"sourceID":this.setParent(t.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}}},e.prototype.getPersistData=function(){var t=["loaded"];return this.addOnPersist(t)},e.prototype.preRender=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-overview").length;this.element.id="overview_"+this.overviewid+"_"+t}this.id=this.element.id?this.element.id:this.id,this.element.style.background="transparent",this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.diagramRenderer=new n.a(this.element.id,new l.a,!1),this.renderCanvas(),this.setParent(this.sourceID),this.renderComplete()},e.prototype.getSizeValue=function(t){return t.toString().indexOf("px")>0||t.toString().indexOf("%")>0?t.toString():t.toString()+"px"},e.prototype.renderCanvas=function(t){var e=document.getElementById(this.element.id+"_canvas");e||(e=i.i(s.a)("div",{}),this.element.appendChild(e));var r={id:this.element.id+"_canvas",class:"drawing",style:"position:relative; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"};i.i(s.b)(e,r),this.element.setAttribute("tabindex",String(0)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=e},e.prototype.setParent=function(t){var e=document.getElementById(t);if(this.parent){var i=this.parent;this.parent=null,i.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(e,"ej2_instances"),this.parent&&this.parent.setOverview(this)},e.prototype.getDiagram=function(t,e){for(var r,n=t[""+e].length,o=0;o<n;o++)if(i.i(s.c)(t[""+e][parseInt(o.toString(),10)].element,"e-diagram")){r=t[""+e][parseInt(o.toString(),10)];break}return r},e.prototype.unWireEvents=function(){var t=a.Browser.touchStartEvent,e=a.Browser.touchMoveEvent,i=a.Browser.isPointer?"pointerleave":"mouseleave",r=a.Browser.touchEndEvent;a.EventHandler.remove(this.element,t,this.mouseDown),a.EventHandler.remove(this.element,e,this.mouseMove),a.EventHandler.remove(this.element,r,this.mouseUp),a.EventHandler.remove(this.element,i,this.documentMouseUp),a.EventHandler.remove(window,"resize",this.windowResize);var n=document.getElementById(this.sourceID+"content");n&&a.EventHandler.remove(n,"scroll",this.scrolled)},e.prototype.wireEvents=function(){var t=a.Browser.touchStartEvent,e=a.Browser.touchEndEvent,i=a.Browser.touchMoveEvent,r=a.Browser.isPointer?"pointerleave":"mouseleave";a.EventHandler.add(this.element,t,this.mouseDown,this),a.EventHandler.add(this.element,i,this.mouseMove,this),a.EventHandler.add(this.element,e,this.mouseUp,this),a.EventHandler.add(this.element,r,this.documentMouseUp,this),a.EventHandler.add(window,"resize",this.windowResize,this);var n=document.getElementById(this.sourceID+"content");n&&a.EventHandler.add(n,"scroll",this.scrolled,this)},e.prototype.renderDocument=function(t){t.canvas=this.canvas;var e=document.getElementById(this.canvas.id+"_svg");e&&e.parentNode.removeChild(e);var r={id:this.canvas.id+"_svg",version:"1.1",class:"overview_svg"},n=i.i(s.d)("svg",r);this.svg=n,t.svg=n,t.canvas.appendChild(n);var a=document.getElementById(this.element.id),h=a,d=h.clientWidth,l=h.clientHeight,c=h.getBoundingClientRect(),p=window.screenX<0?-1*window.screenX:window.screenX,g=window.screenY<0?-1*window.screenY:window.screenY;if(0===d){var u=Math.floor(window.innerWidth-p-Math.floor(c.left));d=u>0?u:Math.floor(window.innerWidth)}if(0===l){var f=Math.floor(window.innerHeight-g-Math.floor(c.top));l=f>0?f:Math.floor(window.innerHeight)}d>0&&(n.setAttribute("width",String(d)),this.model.height=l),l>0&&(n.setAttribute("height",String(l)),this.model.width=d),t.diagramLayerDiv||(t.diagramLayerDiv=i.i(s.a)("div",{}),t.diagramLayer=o.a.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),t.diagramLayer.setAttribute("style","position:absolute; left:0px;  top:0px "),t.diagramLayerDiv.appendChild(t.diagramLayer),t.canvas.appendChild(t.diagramLayerDiv));var m={id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"};i.i(s.b)(t.diagramLayerDiv,m),this.renderHtmlLayer(t.canvas),this.renderNativeLayer(t.canvas,t),this.addOverviewRectPanel(t)},e.prototype.removeDocument=function(t){var e=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(e);var i=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(i);var r=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(r),t.diagramLayerDiv=null,t.diagramLayer=null;window.domTable[this.id+"html_layer"]=null},e.prototype.renderHtmlLayer=function(t){var e=i.i(s.a)("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),r={id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"},n=i.i(s.a)("div",r);return e.appendChild(n),t.appendChild(e),e},e.prototype.renderNativeLayer=function(t,e){if(!document.getElementById(this.element.id+"_nativeLayer_svg")){var r=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),n=i.i(s.d)("g",{id:this.element.id+"_nativeLayer"});r.appendChild(n),e.diagramLayerDiv.appendChild(r),i.i(s.e)(r,{class:"e-native-layer"})}},e.prototype.addOverviewRectPanel=function(t){var e=document.getElementById(this.canvas.id+"_overviewsvg");e&&e.parentNode.removeChild(e);var r={id:this.canvas.id+"_overviewsvg",class:"overviewsvg",version:"1.1",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height};e=i.i(s.d)("svg",r),t.canvas.appendChild(e);var n=i.i(s.d)("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});e.appendChild(n);var o=i.i(s.d)("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});o.setAttribute("style"," pointer-events: none; "),n.appendChild(o);var a=i.i(s.d)("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});n.appendChild(a);var h=i.i(s.d)("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});a.appendChild(h),this.renderOverviewCorner("left",a),this.renderOverviewCorner("right",a),this.renderOverviewCorner("top",a),this.renderOverviewCorner("bottom",a),this.renderOverviewCorner("topleft",a),this.renderOverviewCorner("topright",a),this.renderOverviewCorner("bottomleft",a),this.renderOverviewCorner("bottomright",a)},e.prototype.renderOverviewCorner=function(t,e){var r;this.svg;r="top"===t||"bottom"===t||"right"===t||"left"===t?"rect":"circle";var n=i.i(s.d)(r,{id:this.canvas.id+"visible"+t});e.appendChild(n);var o=i.i(s.d)(r,{id:this.canvas.id+t,class:"overviewresizer",fill:"transparent"});e.appendChild(o)},e.prototype.updateOverviewRectangle=function(){var t=this.currentPoint.x-this.prevPoint.x,e=this.currentPoint.y-this.prevPoint.y,i=new d.a;i.width=0,i.height=0;var r=0,n=0;switch(this.resizeDirection){case"left":i.width-=t,i.height-=t/this.viewPortRatio,r=t,n=t/this.viewPortRatio,n/=2;break;case"right":i.width+=t,i.height+=t/this.viewPortRatio,n=t/this.viewPortRatio,n/=-2;break;case"top":i.height-=e,i.width-=e*this.viewPortRatio,n=e,r=e*this.viewPortRatio,r/=2;break;case"bottom":i.height+=e,i.width+=e*this.viewPortRatio,r=e*this.viewPortRatio,r/=-2;break;case"topleft":Math.abs(e)>Math.abs(t)?t=e*this.viewPortRatio:e=t/this.viewPortRatio,i.width-=t,i.height-=e,r=t,n=e;break;case"topright":Math.abs(e)>Math.abs(t)?t=-e*this.viewPortRatio:e=-t/this.viewPortRatio,n=e,i.width+=t,i.height-=e;break;case"bottomleft":Math.abs(e)>Math.abs(t)?t=-e*this.viewPortRatio:e=-t/this.viewPortRatio,r=t,i.width-=t,i.height+=e;break;case"bottomright":Math.abs(e)>Math.abs(t)?t=e*this.viewPortRatio:e=t/this.viewPortRatio,i.width+=t,i.height+=e}this.updateHelper(r,n,i,void 0,void 0)},e.prototype.updateHelper=function(t,e,r,n,o){var a,h,d,l=this.element.getElementsByTagName("svg")[2],c=l.getElementById("helper");if(r)d=c.getBBox(),a=d.x+t,h=d.y+e,n=d.width+r.width,o=d.height+r.height;else{var p;p=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x;var g;g=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y;Math.abs(g)>Math.abs(p)?(p=this.viewPortRatio*g,!0,!1):(g=p/this.viewPortRatio,!0,!1),d=c.getBBox(),a=this.startPoint.x>this.currentPoint.x?d.x-p:d.x,h=this.startPoint.y>this.currentPoint.y?d.y-g:d.y,n=d.width+p,o=d.height+g}i.i(s.e)(this.helper,{id:this.helper.id,x:a,y:h,width:Math.max(0,n),height:Math.max(0,o)})},e.prototype.updateOverviewrect=function(t,e,r,n){var o=document.getElementById(this.canvas.id+"overviewrect"),a={x:t,y:e,width:Math.max(1,r),height:Math.max(1,n)};i.i(s.b)(o,a),this.updateOverviewCorner("top",t+8,e+1,Math.max(0,r-16),2),this.updateOverviewCorner("bottom",t+8,e+n+3,Math.max(0,r-16),2),this.updateOverviewCorner("left",t-2,e+11,2,Math.max(0,n-16)),this.updateOverviewCorner("right",t+r,e+11,2,Math.max(0,n-16)),this.updateOverviewCorner("topleft",t,e+3,5,5),this.updateOverviewCorner("topright",t+r,e+3,5,5),this.updateOverviewCorner("bottomleft",t,e+n+3,5,5),this.updateOverviewCorner("bottomright",t+r,e+n+3,5,5)},e.prototype.updateOverviewCorner=function(t,e,r,n,o){var a,h,d="visible"+t,l=document.getElementById(this.canvas.id+d);"top"===t||"bottom"===t||"right"===t||"left"===t?(a={x:e,y:r,width:n,height:o,fill:"#ED1C24"},h={x:e-2,y:r-2,width:2===n?4:n,height:2===o?4:o}):(a={cx:e,cy:r,r:4,fill:"#ED1C24"},h={cx:e,cy:r,r:6,fill:"transparent"}),i.i(s.b)(l,a);var c=document.getElementById(this.canvas.id+t);i.i(s.b)(c,h)},e.prototype.translateOverviewRectangle=function(){var t=(Number(this.model.width),Number(this.model.height),this.currentPoint.x-this.prevPoint.x),e=this.currentPoint.y-this.prevPoint.y,i=this.element.getElementsByClassName("overviewsvg")[0],r=i.getElementById(this.canvas.id+"overviewrect"),n=r.getBBox(),o=n.x+t,a=n.y+e,s=n.width,h=n.height;this.updateOverviewrect(o,a,s,h),this.updateParentView(this.parent.scroller.currentZoom,o,a,s,h,null)},e.prototype.renderOverviewRect=function(t,e,i,r){var n=Number(this.model.width),o=Number(this.model.height),a=i/n*this.contentWidth,s=r/o*this.contentHeight,h=Math.max(this.parent.scroller.viewPortWidth/a,this.parent.scroller.viewPortHeight/s);if(h>=.25&&h<=30){var d={x:0,y:0};this.updateParentView(h,t,e,i,r,d);var l=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var c=this.element.getElementsByTagName("rect")[10],p=c.getBBox();l.x=p.x,l.y=p.y}this.updateOverviewrect(l.x,l.y,l.width,l.height)}},e.prototype.scrollOverviewRect=function(t,e,i,r){if(!this.actionName||r){var n=Number(this.model.width),o=Number(this.model.height),a=Math.min(this.contentWidth/n,this.contentHeight/o),s=new h.a,d=s.x=t/i/a,l=s.y=e/i/a,c=s.width=this.parent.scroller.viewPortWidth/i/a,p=s.height=this.parent.scroller.viewPortHeight/i/a;if(r){var g=new h.a;return g.x=d,g.y=l,g.width=c,g.height=p,g}this.updateOverviewrect(-d,-l,c,p)}return null},e.prototype.updateParentView=function(t,e,n,o,s,h){var d,l,c=Number(this.model.width),p=Number(this.model.height),g=this.contentWidth/c,u=this.contentHeight/p,f=e*g*t,m=n*u*t;this.parent.scroller.getPageBounds();1===t&&"pan"!==this.actionName||(d=-f-this.parent.scroller.horizontalOffset,l=-m-this.parent.scroller.verticalOffset),this.parent.setBlazorDiagramProps(!0),this.parent.realActions|=r.a.OverViewAction;"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(t/this.parent.scroller.currentZoom,d,l,h):i.i(a.isBlazor)()?this.parent.scroller.zoom(1,d,l,h):this.parent.pan(d,l,h,!0)},e.prototype.updateHtmlLayer=function(t){var e=i.i(s.f)(t.element.id),r=this.parent.scroller.getPageBounds(!0),n=r.width,o=r.height,a=Math.max(n,this.parent.scroller.viewPortWidth),h=Math.max(o,this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom),d=Math.min(Number(this.model.width)/a,Number(this.model.height)/h);e.style.transform="scale("+d+") translate("+this.parent.scroller.transform.tx+"px,"+this.parent.scroller.transform.ty+"px)"},e.prototype.updateView=function(t){var e=this.parent.scroller.getPageBounds(),r=this.parent.scroller.viewPortWidth/this.parent.scroller.currentZoom,n=this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom,o=0,a=0;this.parent.scroller.currentZoom<1&&r>e.width&&n>e.height&&(o=(r-e.width)/2,a=(n-e.height)/2);var h=e.width,d=e.height,l=Number(this.model.width),c=Number(this.model.height),p=Math.max(h,this.parent.scroller.viewPortWidth),g=Math.max(d,this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom);this.contentWidth=p=Math.max(p,l/c*g),this.contentHeight=g=Math.max(g,c/l*p);var u=Math.min(l/p,c/g),f=document.getElementById(this.element.id+"_htmlLayer");f.style.webkitTransform="scale("+u+") translate("+-e.x+"px,"+-e.y+"px)",f.style.transform="scale("+u+") translate("+(-e.x+o)+"px,"+(-e.y+a)+"px)",document.getElementById(this.element.id+"_overviewlayer").setAttribute("transform","translate("+-e.x*u+","+-e.y*u+")"),this.horizontalOffset=e.x*u,this.verticalOffset=e.y*u;var m=document.getElementById(this.element.id+"_diagramLayer"),y=i.i(s.g)(this.element.id),v=m.getContext("2d"),b=Number(this.model.width)/this.contentWidth,S=Number(this.model.height)/this.contentHeight;b=Math.min(b,S);var w=this.parent.scroller.transform,x=w.tx,I=w.ty;y.setAttribute("transform","translate("+x*b+","+I*S+"),scale("+b+")"),v.setTransform(b,0,0,b,0,0),v.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},e.prototype.scrolled=function(t){if(this.event){var e=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-e.x,-e.y,e.width,e.height),this.updateView(this)}},e.prototype.updateCursor=function(t){if(i.i(s.c)(t.target,"overviewresizer"))switch(t.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},e.prototype.mouseMove=function(t){if(this.event=!1,this.updateCursor(t),this.currentPoint=this.mousePosition(t),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},e.prototype.documentMouseUp=function(t){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},e.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){var t=document.getElementById(e.element.id),i=t.getBoundingClientRect();e.model.width=i.width>0?i.width:e.model.width,e.model.height=i.height>0?i.height:e.model.height,e.renderCanvas(),e.setParent(e.sourceID)},10),!1},e.prototype.mouseDown=function(t){if(t.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),t.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),i.i(s.c)(t.target,"overviewresizer"))switch(this.actionName="scale",t.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(t),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},e.prototype.mouseUp=function(t){if(this.currentPoint=this.mousePosition(t),this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var e=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"";var i=e.x,r=e.y,n=e.width,o=e.height;"topleft"===this.resizeDirection||"topright"===this.resizeDirection||"bottomleft"===this.resizeDirection||this.resizeDirection;this.renderOverviewRect(i,r,n,o)}}else if(t.target.id===this.canvas.id+"_overviewsvg"||"helper"===t.target.id){var a=this.element.getElementsByTagName("svg")[2],s=a.getElementById(this.canvas.id+"overviewrect"),e=s.getBBox(),n=e.width,o=e.height;this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-n/2,this.currentPoint.y-o/2,n,o),this.inAction=!1}this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},e.prototype.initHelper=function(){var t=this.element.getElementsByTagName("svg")[2],e=this.startPoint.x,r=this.startPoint.y,n=1,o=1;if("scale"===this.actionName){var a=t.getElementById(this.canvas.id+"overviewrect"),h=a.getBBox();e=h.x,r=h.y,n=h.width,o=h.height}var d=i.i(s.d)("rect",{id:"helper",x:e,y:r,width:n,height:o,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});t.getElementById(this.element.id+"_overviewlayer").appendChild(d),this.helper=d},e.prototype.mousePosition=function(t){var e,i,r;if(-1!==t.type.indexOf("touch")){e=t;var n=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY;i=n-this.element.offsetLeft,r=o-this.element.offsetTop}else i=t.clientX,r=t.clientY;var a=this.element.getBoundingClientRect();return i-=a.left,r-=a.top,{x:i+this.horizontalOffset,y:r+this.verticalOffset}},e.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var e=document.getElementById(this.element.id+"_canvas");e&&this.element.removeChild(e)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},e.prototype.getModuleName=function(){return"Overview"},p([i.i(a.Property)("100%")],e.prototype,"width",void 0),p([i.i(a.Property)("100%")],e.prototype,"height",void 0),p([i.i(a.Property)("")],e.prototype,"sourceID",void 0),p([i.i(a.Event)()],e.prototype,"created",void 0),e}(a.Component)},function(t,e,i){"use strict";i.d(e,"a",function(){return d});var r=i(0),n=(i.n(r),i(4)),o=i(7),a=i(3),s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),h=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},d=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.offset=0,r.scale=1,r}return s(e,t),e.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},e.prototype.getModuleName=function(){return"Ruler"},e.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},e.prototype.getPersistData=function(){var t=["loaded"];return this.addOnPersist(t)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,r=Object.keys(t);i<r.length;i++){switch(r[i]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}}},e.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},e.prototype.renderRulerSpace=function(){var t=this.getRulerGeometry(),e=document.getElementById(this.element.id+"_ruler_space");return e||(e=i.i(n.a)("div",{id:this.element.id+"_ruler_space",style:"height:"+t.height+"px;width:"+t.width+"px;cssFloat:left;"}),this.element.appendChild(e)),e},e.prototype.updateRuler=function(){var t=this.getRulerSize(),e=this.getRulerGeometry(),i=0,r=0,n=new o.a,a=this.getRulerSVG(e);if(a&&(i=this.length,n.height=t,r=this.offset,i&&i!==1/0)){var s=i+this.segmentWidth,h=r;this.updateSegments(h,s+Math.abs(h),a,t)}},e.prototype.updateSegments=function(t,e,i,r){for(var n=t,o={trans:0};n<e;){var a=this.getNewSegment(n,i);a&&(i.appendChild(a.segment),n=this.updateSegment(t,e,a,n,o,r))}},e.prototype.updateSegment=function(t,e,i,r,n,o){var a=this.updateSegmentWidth(this.scale);r===t?(this.startValue=Math.floor(t/a)*a/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString(),this.defStartValue=r=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=t-r:this.vRulerOffset=t-r):(this.startValue=r/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString()),this.updateTickLabel(i,o);var s="Horizontal"===this.orientation?n.trans+.5+",0.5":"0.5,"+(n.trans+.5);return i.segment.setAttribute("transform","translate("+s+")"),n.trans+=a,r+=a},e.prototype.updateTickLabel=function(t,e){var r=t.segment.lastChild.getBBox(),o="Horizontal"===this.orientation,a="RightOrBottom"===this.tickAlignment,s=o?2:0,h=o?a?e/2+5.5-5.5:e/2+5.5:r.height,d=a?-(r.width+2)+","+(e/2-r.height):-(r.width+2)+","+(e/2-r.height/2),l=o?{x:s,y:h}:{x:s,y:h,transform:"rotate(270)translate("+d+")"};i.i(n.e)(t.segment.lastChild,l)},e.prototype.getNewSegment=function(t,e){var i=this.createNewTicks(t,e);return{segment:i,label:this.createTickLabel(e,i)}},e.prototype.createNewTicks=function(t,e){for(var r,o,a=this.updateSegmentWidth(this.scale),s={class:"e-ruler-segment"},h=i.i(n.d)("g",s),d=0;d<this.interval;d++)o=a/this.interval,r=this.createTick(e,o,d+1,t),h.appendChild(r);return h},e.prototype.getLinePoint=function(t,e,i){var r=this.updateSegmentWidth(this.scale),n=this.getRulerSize();return e*=i-1,i=e%r==0?n:.3*n},e.prototype.createTick=function(t,e,r,o){var s=this.getLinePoint(t,e,r),h=this.getRulerSize(),d="Horizontal"===this.orientation,l="RightOrBottom"===this.tickAlignment,c=i.i(a.h)(this.arrangeTick),p={ruler:void 0,tickLength:s,tickInterval:this.segmentWidth/this.interval*(r-1)};c&&c(p),s=p.tickLength;var g=e*(r-1),u=d?g:l?h:0,f=d?g:l?h-s:h-(h-s),m=d?l?h:h-(h-s):g,y=d?l?h-s:0:g,v={x1:u,y1:m,x2:f,y2:y,"stroke-width":"1",stroke:"black"},b=i.i(n.d)("line",v);return b.setAttribute("class","e-ruler-tick"),b},e.prototype.createTickLabel=function(t,e){var r;if(e){var o={class:"e-ruler-tick-label"};r=i.i(n.d)("text",o),e.appendChild(r)}return r},e.prototype.updateSegmentWidth=function(t){if(100!==this.segmentWidth)return this.segmentWidth;var e,i=1,r=Math.pow(2,Math.round(Math.log(t)/Math.log(2)));for(e=100,e=100/r;e>100;)i/=10,e/=10;for(;e<25;)i*=10,e*=10;return e>=25&&e%25!=0&&(e=25*Math.round(e/25)),e*t/i},e.prototype.createMarkerLine=function(t,e,r){var o;return e&&(o=t.getElementById(e.id+"_marker"),o&&o.parentNode.removeChild(o),o=i.i(n.d)("line",r)),o},e.prototype.drawRulerMarker=function(t,e,i){var r,n,o,a,s,h,d,l="Horizontal"===this.orientation,c=t.getElementsByTagName("svg");for(s=0;s<c.length;s++){c[parseInt(s.toString(),10)]&&(r=c[parseInt(s.toString(),10)]);break}if(r){n=this.getRulerSize(),h={id:t.id+"_marker",x1:0,y1:0,x2:l?0:n,y2:l?n:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"},d=this.createMarkerLine(r,t,h),o=this.scale,a=this.offset-this.defStartValue;var p=l?e.x:e.y,g=p*o+i+a;d.setAttribute("transform","translate("+(l?g+.5+" 0.5":"0.5 "+(g+.5))+")"),r.appendChild(d)}},e.prototype.getRulerGeometry=function(){return new o.a(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},e.prototype.getRulerSize=function(){return this.thickness},e.prototype.getRulerSVG=function(t){var e,r,o=this.getRulerSize();if(this.element&&(e=document.getElementById(this.element.id+"_ruler_space"))){var a={id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?t.width+200:o+"px",height:"Horizontal"===this.orientation?o:t.height+200+"px",style:"position:inherit;"};if(r=i.i(n.d)("svg",a),e.childNodes.length>0)for(var s=e.childNodes.length-1;s>=0;s--)e.childNodes[parseInt(s.toString(),10)].parentNode.removeChild(e.childNodes[parseInt(s.toString(),10)]);e.appendChild(r)}return r},e.prototype.wireEvents=function(){},e.prototype.unWireEvents=function(){},h([i.i(r.Property)(5)],e.prototype,"interval",void 0),h([i.i(r.Property)(100)],e.prototype,"segmentWidth",void 0),h([i.i(r.Property)("Horizontal")],e.prototype,"orientation",void 0),h([i.i(r.Property)("RightOrBottom")],e.prototype,"tickAlignment",void 0),h([i.i(r.Property)("red")],e.prototype,"markerColor",void 0),h([i.i(r.Property)(25)],e.prototype,"thickness",void 0),h([i.i(r.Property)(null)],e.prototype,"arrangeTick",void 0),h([i.i(r.Property)(400)],e.prototype,"length",void 0),e}(r.Component)},function(t,e,i){"use strict";i.d(e,"a",function(){return m}),i.d(e,"b",function(){return y}),i.d(e,"c",function(){return v}),i.d(e,"d",function(){return b});var r=i(0),n=(i.n(r),i(61)),o=(i.n(n),i(25)),a=i(39),s=i(4),h=i(2),d=i(3),l=i(18),c=i(8),p=i(28),g=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=this&&this.__decorate||function(t,e,i,r){var n,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},f=function(t){var e=t;return e.sourcePoint||e.targetPoint||e.sourceID||e.targetID||e.sourcePortID||e.targetPortID||e.sourceDecorator||e.targetDecorator?o._214:(t.shape&&(t.shape instanceof o._153||t.shape.type),o._181)},m=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return g(e,t),u([i.i(r.Property)("")],e.prototype,"id",void 0),u([i.i(r.Property)()],e.prototype,"height",void 0),u([i.i(r.Property)(!0)],e.prototype,"expanded",void 0),u([i.i(r.Property)("")],e.prototype,"iconCss",void 0),u([i.i(r.Property)("")],e.prototype,"title",void 0),u([i.i(r.CollectionFactory)(f)],e.prototype,"symbols",void 0),e}(r.ChildProperty),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),u([i.i(r.Property)()],e.prototype,"width",void 0),u([i.i(r.Property)()],e.prototype,"height",void 0),e}(r.ChildProperty),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),u([i.i(r.Property)()],e.prototype,"width",void 0),u([i.i(r.Property)()],e.prototype,"height",void 0),u([i.i(r.Complex)({},c.a)],e.prototype,"offset",void 0),e}(r.ChildProperty),b=function(t){function e(e,r){var n=t.call(this,e,r)||this;n.symbolTable={},n.childTable={},n.info="info",n.oldObject=null,n.laneTable={},n.isExpand=!1,n.isExpandMode=!1,n.isMethod=!1,n.paletteid=88123,n.checkOnRender=!1,n.helper=function(t){var e,i=n.selectedSymbol&&n.selectedSymbol.id||t.sender.target.id.split("_container")[0],r=n.symbolTable[""+i];return r&&n.selectedSymbol&&(n.selectedSymbols=n.selectedSymbol.id===r.id?r:n.selectedSymbol,e=n.getSymbolPreview(n.selectedSymbols,t.sender,n.element),e.setAttribute("paletteId",n.element.id)),e};for(var a,s,d=0;n&&n.palettes&&d<n.palettes.length;d++)for(var l=0;l<n.palettes[parseInt(d.toString(),10)].symbols.length;l++)a=n.palettes[parseInt(d.toString(),10)].symbols[parseInt(l.toString(),10)],s=e.palettes[parseInt(d.toString(),10)].symbols[parseInt(l.toString(),10)],a&&"UmlActivity"===a.shape.type&&i.i(h.c)(s,a),(n.nodeDefaults||n.connectorDefaults)&&i.i(h.B)(a,s,a instanceof o._181?n.nodeDefaults:n.connectorDefaults);return n}return g(e,t),e.prototype.onPropertyChanged=function(t,e){for(var n=!1,o=0,a=Object.keys(t);o<a.length;o++){switch(a[o]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":n=!this.isReact;break;case"enableSearch":if(t.enableSearch&&!i.i(r.isBlazor)())this.createTextbox();else{var s=document.getElementById(this.element.id+"_search");s&&s.parentNode.removeChild(s)}break;case"palettes":for(var h=0,d=Object.keys(t.palettes);h<d.length;h++){var l=d[h],c=Number(l);if(i.i(r.isBlazor)()||this.accordionElement.items[parseInt(c.toString(),10)]||(this.accordionElement.items[parseInt(c.toString(),10)]={header:t.palettes[parseInt(c.toString(),10)].title||"",expanded:t.palettes[parseInt(c.toString(),10)].expanded,iconCss:t.palettes[parseInt(c.toString(),10)].iconCss||""}),t.palettes[parseInt(c.toString(),10)].height){document.getElementById(this.palettes[parseInt(c.toString(),10)].id+"_content").style.height=t.palettes[parseInt(c.toString(),10)].height+"px"}void 0!==t.palettes[parseInt(c.toString(),10)].iconCss&&(i.i(r.isBlazor)()||(this.accordionElement.items[parseInt(c.toString(),10)].iconCss=t.palettes[parseInt(c.toString(),10)].iconCss||"",n=!0)),void 0===t.palettes[parseInt(c.toString(),10)].expanded||i.i(r.isBlazor)()||(this.palettes[parseInt(c.toString(),10)].isInteraction?this.palettes[parseInt(c.toString(),10)].isInteraction=!1:(this.accordionElement.items[parseInt(c.toString(),10)].expanded=t.palettes[parseInt(c.toString(),10)].expanded,this.isExpand=!0),this.isExpandMode||this.isMethod||this.isExpand||(this.isExpand=!0)),i.i(r.isBlazor)()&&null!==t.palettes[parseInt(c.toString(),10)].symbols&&(n=!0),i.i(r.isBlazor)()&&null===t.palettes[parseInt(c.toString(),10)].symbols&&this.updateBlazorProperties(t)}break;case"enableAnimation":i.i(r.isBlazor)()||(this.enableAnimation?this.accordionElement.animation={expand:{duration:400},collapse:{duration:400}}:this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}});break;case"expandMode":i.i(r.isBlazor)()||(this.accordionElement.expandMode=this.expandMode,n=!0,this.isExpandMode=!0);break;case"allowDrag":this.allowDrag=t.allowDrag,this.allowDrag?(this.initDraggable(),this.draggable.helper=this.helper):this.draggable.helper=function(){return null}}}if(n&&this.refreshPalettes(),this.isExpand&&!n){this.refresh(),this.isExpand=!1;for(var p=0;p<this.palettes.length;p++){var g=this.palettes[parseInt(p.toString(),10)].id;window[""+g]&&window[""+g].length>1&&(window[""+g][1].parentNode.removeChild(window[""+g][1]),window[""+g][1]=null)}}this.isMethod=!1},e.prototype.updateBlazorProperties=function(t){if(window&&window.Blazor){var e={palette:t.palettes},i={methodName:"UpdateBlazorProperties",paletteobj:e};window.sfBlazor.updateBlazorProperties(i,this)}},e.prototype.getPersistData=function(){var t=["loaded"];return this.addOnPersist(t)},e.prototype.preRender=function(){var t=this;if(this.l10n=new r.L10n(this.getModuleName(),this.defaultLocale(),this.locale),""===this.element.id){var e=document.getElementsByClassName("e-symbolpalette").length;this.element.id="symbolpalette_"+this.paletteid+"_"+e}if(this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&!i.i(r.isBlazor)()&&this.createTextbox(),!i.i(r.isBlazor)()){var o=i.i(s.a)("div",{id:this.element.id+"_container"});this.accordionElement=new n.Accordion({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.created=function(){t.checkOnRender=!0},this.accordionElement.expanded=function(e){var i=t.accordionElement.items.indexOf(e.item),r=t.allowServerDataBinding;t.allowServerDataBinding=!1,t.palettes[parseInt(i.toString(),10)].expanded=e.isExpanded,t.palettes[parseInt(i.toString(),10)].isInteraction=!0,t.allowServerDataBinding=r},this.accordionElement.expanding=function(e){if(t.checkOnRender){var i={element:e.element,content:e.content,index:e.index,cancel:!1,isExpanded:e.isExpanded,palette:t.palettes[e.index]};t.trigger("paletteExpanding",i),e.cancel=i.cancel}},this.element.appendChild(o)}window.measureElement&&(window.measureElement=null),i.i(s.t)(),this.unWireEvents(),this.wireEvents()},e.prototype.defaultLocale=function(){return{SearchShapes:"Search Shapes"}},e.prototype.render=function(){this.diagramRenderer=new o._136(this.element.id,new a.a,!1),this.svgRenderer=new o._136(this.element.id,new a.a,!0),this.updatePalettes(),i.i(r.isBlazor)()||this.accordionElement.appendTo("#"+this.element.id+"_container"),this.renderComplete(),i.i(r.isBlazor)()&&this.element.classList.remove("e-symbolpalette-hidden")},e.prototype.getModuleName=function(){return"SymbolPalette"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t},e.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this);var e=document.getElementById(this.element.id+"_container");if(e){this.element.removeChild(e);if(window.measureElement){window.measureElement.usageCount-=1;window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null)}}e=document.getElementById(this.element.id+"_search"),e&&e.parentNode.removeChild(e),this.element.classList.remove("e-symbolpalette")}},e.prototype.addPalettes=function(t){for(var e,n=0;n<t.length;n++){var o=this.allowServerDataBinding;this.isProtectedOnChange=!0,this.allowServerDataBinding=!1,e=new m(this,"palettes",t[parseInt(n.toString(),10)],!0),this.palettes.push(e),this.initSymbols(e),this.allowServerDataBinding=o,this.isProtectedOnChange=!1,this.renderPalette(e)}this.bulkChanges={},i.i(r.isBlazor)()||this.accordionElement.refresh()},e.prototype.removePalette=function(t){for(var e=0;e<this.palettes.length;e++)if(this.palettes[parseInt(e.toString(),10)].id===t){this.palettes.splice(e,1),i.i(r.isBlazor)()||this.accordionElement.items.splice(e,1);break}},e.prototype.removePalettes=function(t){var e=this.allowServerDataBinding;this.allowServerDataBinding=!1;for(var n=0;n<t.length;n++)this.removePalette(t[parseInt(n.toString(),10)]);i.i(r.isBlazor)()?this.updatePalettes():this.accordionElement.refresh(),this.allowServerDataBinding=e},e.prototype.initSymbols=function(t){for(var e=[],r=0,n=0,a=0,s=t.symbols;a<s.length;a++){var h=s[a];if("SwimLane"===h.shape.type){var l=h,c=h.shape,p="Horizontal"===c.orientation;if(c.isLane){r=p?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,n=p?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2,this.laneTable[h.id]={height:r,width:n};var g=c.lanes[0].header,u=c.lanes[0].style,f=g.style,m={id:"header"+i.i(d.g)(),shape:{type:"Basic",shape:"Rectangle"},width:p?g.width:l.width,height:p?l.height:g.height,style:f,annotations:[{content:g.annotation.content}]};m.offsetX=m.width/2,m.offsetY=m.height/2,this.addPaletteItem(t.id,m);var y={id:"lane"+i.i(d.g)(),shape:{type:"Basic",shape:"Rectangle"},width:p?l.width-g.width:l.width,height:p?l.height:l.height-g.height,style:u};y.offsetX=p?m.width+y.width/2:y.width/2,y.offsetY=p?y.height/2:m.height+y.height/2,this.addPaletteItem(t.id,y),l.children=[m.id,y.id]}else c.isPhase&&(r=l.height?l.height:this.symbolHeight,n=l.width?l.width:this.symbolWidth,h.shape.type="Path",h.shape.data=p?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if(h instanceof o._181){var v=i.i(d.h)(this.getNodeDefaults);v&&v(h,this)}else if(h instanceof o._214){var b=i.i(d.h)(this.getConnectorDefaults);b&&b(h,this)}this.symbolTable[h.id]=h,h instanceof o._181&&h.children&&e.push(h)}for(var S=0;S<e.length;S++)for(var w=void 0,x=0;x<e[parseInt(S.toString(),10)].children.length;x++)(w=this.symbolTable[e[parseInt(S.toString(),10)].children[parseInt(x.toString(),10)]])&&(this.childTable[w.id]=w,w.parentId=e[parseInt(S.toString(),10)].id);for(var I=0,P=t.symbols;I<P.length;I++){var h=P[I];h instanceof o._181&&h.children||this.prepareSymbol(h)}for(var C=0,z=e;C<z.length;C++){var h=z[C];this.prepareSymbol(h)}},e.prototype.renderPalette=function(t){var e=i.i(r.isBlazor)()?"overflow:auto;":"display:none;overflow:auto;";t.height&&(e+="height:"+t.height+"px");var n,o=document.getElementById(t.id);if(i.i(r.isBlazor)()&&null!=o?(n=i.i(s.a)("div",{id:t.id+"_content",style:e,class:"e-remove-palette"}),o.appendChild(n)):(n=i.i(s.a)("div",{id:t.id,style:e,class:"e-remove-palette"}),this.element.appendChild(n)),!i.i(r.isBlazor)()){var a={header:t.title,expanded:t.expanded,content:"#"+t.id,iconCss:t.iconCss};this.accordionElement.items.push(a)}this.renderSymbols(t,n)},e.prototype.addPaletteItem=function(t,e,n){e=i.i(d.e)(e);for(var a=0;a<this.palettes.length;a++){var s=this.palettes[parseInt(a.toString(),10)];if(-1!==s.id.indexOf(t)){for(var l=[void 0,s,"symbols",{},!0],c=new(Function.prototype.bind.apply(f(e),l)),p=0;p<Object.keys(e).length;p++){var g=this.allowServerDataBinding;this.allowServerDataBinding=!1,c[Object.keys(e)[parseInt(p.toString(),10)]]=e[Object.keys(e)[parseInt(p.toString(),10)]],this.allowServerDataBinding=g}i.i(h.B)(c,e,c instanceof o._181?this.nodeDefaults:this.connectorDefaults),s.symbols.push(c);var u=this.allowServerDataBinding;if(this.allowServerDataBinding=!1,this.prepareSymbol(c),this.allowServerDataBinding=u,this.symbolTable[c.id]=c,n)this.childTable[c.id]=c;else{var m=void 0;m=i.i(r.isBlazor)()?document.getElementById(s.id+"_content"):document.getElementById(s.id),m&&m.appendChild(this.getSymbolContainer(c,m))}break}}},e.prototype.removePaletteItem=function(t,e){for(var i,r=0;r<this.palettes.length;r++){var n=this.palettes[parseInt(r.toString(),10)];if(-1!==n.id.indexOf(t))for(var o=0,a=n.symbols;o<a.length;o++){var s=a[o];if(-1!==s.id.indexOf(e)){var h=n.symbols.indexOf(s);if(n.symbols.splice(h,1),s.children)for(var d=s.children,l=0;l<d.length;l++)delete this.symbolTable[d[parseInt(l.toString(),10)]];delete this.symbolTable[s.id];var c=document.getElementById(s.id+"_container");c.parentNode.removeChild(c),i=!0;break}}if(i)break}},e.prototype.prepareSymbol=function(t){var e,n,a,s,h,c=new o._14,p=t,g=new o._8,u=t instanceof o._181?t.initContainer():null;u&&!u.children&&(u.children=[]);var f=i.i(d.h)(this.getSymbolTemplate);if(f&&(h=f(t)),h||(p.children?h=this.getContainer(p,u):(h=t.init(this),t instanceof o._181&&t.parentId&&u.children.push(h))),!t.parentId){var m={width:this.symbolWidth,height:this.symbolHeight},y=i.i(d.h)(this.getSymbolInfo);if(y?m=y(t):i.i(r.isBlazor)()&&(m=this.getBlazorSymbolInfo(t,m)),m=m||this.symbolInfo||{},t.shape&&t.shape.isPhase&&(m.width=m.width||this.symbolWidth,m.height=m.height||this.symbolHeight),h.relativeMode="Object",h.horizontalAlignment=h.verticalAlignment="Center",g.style.strokeColor=g.style.fill="none",g.children=[h],h.measure(new o.c),h.arrange(h.desiredSize),e=m.width=m.width||(void 0!==p.width?h.actualSize.width:void 0)||this.symbolWidth,a=m.height=m.height||(void 0!==p.height?h.actualSize.height:void 0)||this.symbolHeight,void 0!==e&&void 0!==a){var v=e,b=a,S=!!t.shape.isPhase;void 0!==this.symbolWidth?v=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:e+=p.style.strokeWidth,void 0!==this.symbolHeight?b=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:a+=p.style.strokeWidth,m.description&&""!==m.description.text&&(b-=20),n=v/(!S&&h.width||e),s=b/(!S&&h.height||a),m.fit&&(n=v/m.width,s=b/m.height),e=v,a=b,n=s=Math.min(n,s),g.width=e,g.height=a,h.width=m.width,h.height=m.height,this.scaleSymbol(t,g,n,s,e,a)}else{var w=void 0;t instanceof o._214&&(w=i.i(l.c)(t)),h.width=t.width||w?w.width:h.actualSize.width,h.height=t.height||w?w.height:h.actualSize.height}t.wrapper=c,c.children=[g],h.pivot=c.pivot={x:0,y:0},c.id=h.id+"_symbol",c.style.fill=c.style.strokeColor="transparent",t instanceof o._181?(c.offsetX=t.style.strokeWidth/2,c.offsetY=t.style.strokeWidth/2):(c.offsetX=.5,c.offsetY=.5),this.getSymbolDescription(m,e,c),c.measure(new o.c),c.arrange(c.desiredSize),m.width=m.width||h.actualSize.width,m.height=m.height||h.actualSize.height,t[this.info]=m}t.parentId&&(u.measure(new o.c(p.width,p.height)),u.arrange(u.desiredSize))},e.prototype.getBlazorSymbolInfo=function(t,e){var i=t,r=i.symbolInfo;return r&&(e.description=r.description||this.symbolInfo.description,e.fit=r.fit||this.symbolInfo.fit,e.height=r.height||this.symbolInfo.height,e.width=r.width||this.symbolInfo.width,e.tooltip=r.tooltip||this.symbolInfo.tooltip,e.template=r.template||this.symbolInfo.template),e},e.prototype.getContainer=function(t,e){e.measureChildren=!1;var r,n=t.children;e.children=[];for(var a=0;a<n.length;a++)this.symbolTable[n[parseInt(a.toString(),10)]]&&e.children.push(this.symbolTable[n[parseInt(a.toString(),10)]].wrapper);return e.measure(new o.c(t.width,t.height)),e.arrange(e.desiredSize),0===e.bounds.x&&0===e.bounds.y||(r=e.bounds,i.i(h.U)(t,r.x,r.y,this.symbolTable,!1,this),e=this.getContainer(t,e)),e},e.prototype.getSymbolDescription=function(t,e,i){if(t&&t.description&&t.description.text){var r=new o._6;t.description.overflow=t.description.overflow||"Ellipsis",t.description.wrap=t.description.wrap||"WrapWithOverflow",r.id=i.id+"_text",r.content=t.description.text,r.width=e,r.height=20,r.style.strokeColor="transparent",r.style.color=t.description.color||"black",r.style.fill=t.description.fill||"transparent",r.style.fontFamily=t.description.fontFamily||"Arial",r.style.fontSize=t.description.fontSize||12,r.style.bold=t.description.bold||!1,r.style.italic=t.description.italic||!1,r.style.textDecoration=t.description.textDecoration||"None",r.style.strokeWidth=0,r.style.textWrapping=t.description.wrap,r.style.textOverflow=t.description.overflow,r.margin={left:0,right:0,top:t.description.margin?t.description.margin.top:0,bottom:t.description.margin?t.description.margin.bottom:5},i.children.push(r)}},e.prototype.renderSymbols=function(t,e){for(var i=0,r=t.symbols;i<r.length;i++){var n=r[i];n.parentId||this.getSymbolContainer(n,e)}},e.prototype.getSymbolPreview=function(t,e,r){this.allowServerDataBinding=!1;var n,a,d,l=t.wrapper.children[0].desiredSize.width+t.style.strokeWidth,c=t.wrapper.children[0].desiredSize.height+t.style.strokeWidth,g=t.wrapper.children[0].children[0],u=t.previewSize;if(t&&(u.width||u.height)||void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){l=(u.width||this.symbolPreview.width||l)-t.style.strokeWidth,c=(u.height||this.symbolPreview.height||c)-t.style.strokeWidth,t instanceof o._214&&(g.actualSize.width<=t.style.strokeWidth&&(g.actualSize.width=this.symbolWidth),g.actualSize.height<=t.style.strokeWidth&&(g.actualSize.height=this.symbolHeight)),a=l/g.actualSize.width,d=c/g.actualSize.height,a=d=Math.min(a,d);var f=g.actualSize.width*a,m=g.actualSize.height*d;t.wrapper.children[0].width=l,t.wrapper.children[0].height=c,this.measureAndArrangeSymbol(g,t instanceof o._181),this.scaleSymbol(t,t.wrapper.children[0],a,d,f,m,!0),l=f,c=m}var y={x:g.offsetX,y:g.offsetY};g.offsetX=g.offsetY=t.style.strokeWidth/2,g.pivot={x:0,y:0},this.measureAndArrangeSymbol(g,t instanceof o._181);var v,b=i.i(s.a)("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(b);var S="margin:5px;";if("Native"===t.shape.type){n=i.i(s.d)("svg",{id:t.id+"_preview",width:Math.ceil(l)+1,height:Math.ceil(c)+1});var w=i.i(s.d)("g",{id:t.id+"_g"});n.appendChild(w),b.appendChild(n),this.svgRenderer.renderElement(g,w,void 0,void 0,n)}else if("HTML"===t.shape.type)v=this.getHtmlSymbol(t,n,b,c,l,!0);else if(t.children&&t.children.length>0&&i.i(h._10)(t,"HTML",this.childTable))v=this.getGroupParent(t,n,b,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!0);else{n=p.a.createCanvas(t.id+"_preview",2*(Math.ceil(l)+t.style.strokeWidth+1),2*(Math.ceil(c)+t.style.strokeWidth+1)),b.appendChild(n),"Basic"===t.shape.type||"Flow"===t.shape.type?S+="transform: scale(0.5) translate(-"+n.width/2+"px, -"+n.height/2+"px);":S+="transform:scale(0.5);",n.setAttribute("transform-origin","0 0");var x=2;t instanceof o._214&&(x=1.9),n.getContext("2d").setTransform(x,0,0,x,0,0),this.diagramRenderer.renderElement(g,n,void 0)}return i.i(s.i)(v&&("HTML"===t.shape.type||t.children&&t.children.length>0)?v:n,S),g.offsetX=y.x,g.offsetY=y.y,this.allowServerDataBinding=!0,b},e.prototype.measureAndArrangeSymbol=function(t,e){t.children&&!e&&(t.children[0].transform=o.B.Self),t.measure(new o.c),t.arrange(t.desiredSize),t.children&&(t.children[0].transform=o.B.Parent)},e.prototype.updateSymbolSize=function(t,e,i){var r=t.wrapper.children[0].children[0],n=t.style.strokeWidth;r.width=(e||r.width)-(n+1),r.height=(i||r.height)-(n+1),t.wrapper.measure(new o.c),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.getSymbolContainer=function(t,e,r){var n=this.symbolTable[t.id][this.info],a=this.getSymbolSize(t,n),d=a.width+1,l=a.height+1,c=i.i(s.a)("div",{id:t.id+"_container",style:"width:"+d+"px;height:"+l+"px;float:left;overflow:hidden",title:n.tooltip?n.tooltip:t.id});e.appendChild(c);var g,u,f;if("Native"===t.shape.type)g=i.i(s.d)("svg",{id:t.id,width:Math.ceil(t.wrapper.actualSize.width)+1,height:Math.ceil(t.wrapper.actualSize.height)+1}),u=i.i(s.d)("g",{id:t.id+"_g"}),g.appendChild(u),c.appendChild(g),this.updateSymbolSize(t),this.svgRenderer.renderElement(t.wrapper,u,void 0,void 0,g);else if("HTML"===t.shape.type)f=this.getHtmlSymbol(t,g,c,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1);else if(t.children&&t.children.length>0&&i.i(h._10)(t,"HTML",this.childTable))f=this.getGroupParent(t,g,c,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1);else{g=p.a.createCanvas(t.id,Math.ceil(2*(t.wrapper.actualSize.width+t.style.strokeWidth))+1,Math.ceil(2*(t.wrapper.actualSize.height+t.style.strokeWidth))+1),c.appendChild(g);var m=2;t instanceof o._214&&(m=1.9),g.getContext("2d").setTransform(m,0,0,m,0,0),this.diagramRenderer.renderElement(t.wrapper,u||g,void 0,void 0,void 0,void 0,!0,void 0,!0)}if(!r){var y=t.wrapper.actualSize.width+t.style.strokeWidth,v=t.wrapper.actualSize.height+t.style.strokeWidth,b="pointer-events:none;transform-origin:0 0;overflow:hidden;";return t.shape.isPhase?"Horizontal"===t.shape.orientation?b+="margin-left:"+Math.max(this.symbolMargin.left,(d-y)/2)+"px;margin-top:"+a.height/2+"px;":b+="margin-left:"+a.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(l-v)/2)+"px;":b+="margin-left:"+Math.max(this.symbolMargin.left,(d-y)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(l-v)/2)+"px;",g instanceof HTMLCanvasElement&&(b+="transform:scale(.5,.5);"),"HTML"===t.shape.type&&(b+="transform:scale(.5,.5);"),i.i(s.i)(f&&("HTML"===t.shape.type||t.children&&t.children.length>0)?f:g,b),c.classList.add("e-symbol-draggable"),c}return g},e.prototype.getGroupParent=function(t,e,r,n,o,a){var h=i.i(s.a)("div",{id:t.id+(a?"_html_div_preview":"_html_div")}),d=i.i(s.a)("div",{id:t.id+(a?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(o+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=i.i(s.a)("div",{id:t.id+(a?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(o+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return d.appendChild(l),h.appendChild(d),e=p.a.createCanvas(a?t.id+"_preview":t.id,Math.ceil(o)+1,Math.ceil(n)+1),h.appendChild(e),r.appendChild(h),this.diagramRenderer.renderElement(t.wrapper.children[0].children[0],e,d),h},e.prototype.getHtmlSymbol=function(t,e,r,n,o,a){var h=i.i(s.a)("div",{id:t.id+(a?"_html_div_preview":"_html_div")}),d=i.i(s.a)("div",{id:t.id+(a?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(o+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=i.i(s.a)("div",{id:t.id+(a?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(o+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return d.appendChild(l),h.appendChild(d),e=p.a.createCanvas(t.id,Math.ceil(2*(t.wrapper.actualSize.width+t.style.strokeWidth))+1,Math.ceil(2*(t.wrapper.actualSize.height+t.style.strokeWidth))+1),r.appendChild(e),e.getContext("2d").setTransform(2,0,0,2,0,0),h.appendChild(e),r.appendChild(h),a?this.diagramRenderer.renderElement(t.wrapper.children[0].children[0],e,d):this.diagramRenderer.renderElement(t.wrapper,e,d),h},e.prototype.getSymbolSize=function(t,e){var i=t.wrapper.actualSize.width,r=t.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(i=this.symbolWidth,r=Math.max(this.symbolHeight,r)):(i+=this.symbolMargin.left+this.symbolMargin.right+t.style.strokeWidth,r+=this.symbolMargin.top+this.symbolMargin.bottom+t.style.strokeWidth),new o.c(i,r)},e.prototype.getMousePosition=function(t){var e,i,r;if(-1!==t.type.indexOf("touch")){r=t;var n=r.changedTouches[0].clientY,o=r.changedTouches[0].clientX;e=n-this.element.offsetTop,i=o-this.element.offsetLeft}else e=t.clientY-this.element.offsetTop,i=t.clientX-this.element.offsetLeft;return{x:i,y:e}},e.prototype.mouseMove=function(t,e){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var i=t.target.id.split("_container")[0];if(this.symbolTable[""+i]){var r=document.getElementById(i+"_container");r.classList.add("e-symbol-hover"),this.highlightedSymbol=r}t.preventDefault()},e.prototype.mouseUp=function(t){if(this.isMethod=!0,t&&t.target)if("iconSearch"===t.srcElement.id){var e=document.getElementById("iconSearch");e.classList.contains("e-clear-searchtext")&&(e.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",i.i(r.isBlazor)()&&document.getElementById(this.element.id+"_search_content").classList.add("e-symbolpalette-search-hidden"),this.searchPalette(""))}else{var n=t.target.id.split("_container")[0];if(n&&this.selectedSymbol){var o={oldValue:this.oldObject,newValue:n};this.trigger("paletteSelectionChange",o),this.oldObject=n,t.preventDefault()}else""!==this.oldObject&&(this.oldObject="")}},e.prototype.keyUp=function(t){var e=this;if(this.enableSearch){var n=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",i.i(r.isBlazor)()&&t.target instanceof HTMLInputElement&&(""===t.target.value?document.getElementById(this.element.id+"_search_content").classList.add("e-symbolpalette-search-hidden"):document.getElementById(this.element.id+"_search_content").classList.remove("e-symbolpalette-search-hidden")),!t||"Enter"!==t.key&&13!==t.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.target instanceof HTMLInputElement&&(n.searchPalette(t.target.value),e.timer=null)},500)):t.target instanceof HTMLInputElement&&this.searchPalette(t.target.value)}},e.prototype.mouseDown=function(t){var e=t.target.id.split("_container")[0];if(this.selectedSymbol){var i=document.getElementById(this.selectedSymbol.id+"_container");e!==this.selectedSymbol.id&&i&&i.classList.remove("e-symbol-selected");var r=document.getElementById(this.selectedSymbol.id+"_container");r&&(r.style.backgroundColor=""),this.selectedSymbol=null}if(this.symbolTable[""+e]){var r=document.getElementById(e+"_container");r.classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[""+e],t.preventDefault()}},e.prototype.keyDown=function(t){var e=this;if(t&&"Escape"===t.key){var i=e.draggable.helperElement;i&&i.parentNode&&(i.parentNode.removeChild(i),e.draggable.intDestroy())}},e.prototype.initDraggable=function(){this.allowDrag&&(this.draggable=new r.Draggable(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(t){var e=i.i(s.O)(t.target,"e-droppable");if(e&&e.classList.contains("e-diagram")){e.ej2_instances[0].droppable.over(t)}},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}}))},e.prototype.dragStart=function(t){var e=this.helper[0];e&&e.setAttribute("paletteId",this.element.id),i.i(r.isBlazor)()&&t.bindEvents(t.dragElement)},e.prototype.dragStop=function(t){i.i(s.O)(t.target,"e-diagram")||i.i(r.remove)(t.helper)},e.prototype.scaleSymbol=function(t,e,r,n,a,s,d){if(t instanceof o._214){var l=t.wrapper;t.wrapper=e.children[0];for(var c=t.scale(r,n,a,s,e.children[0]),p=a/2-e.children[0].children[0].offsetX+c.x/2,g=s/2-e.children[0].children[0].offsetY+c.y/2,u=0,f=e.children[0].children;u<f.length;u++){var m=f[u];m.offsetX+=p,m.offsetY+=g,m.staticSize=!1}t.wrapper=l}else if("Bpmn"===t.shape.type&&this.bpmnModule){var l=t.wrapper;t.wrapper=e,e.children[0].width=a,e.children[0].height=s,this.bpmnModule.updateBPMN({width:a,height:s},t,t,null),t.wrapper=l}else if(t.children){var y=t.children,v=0,b=0;if(!d)for(var S=void 0,w=void 0,x=0;x<y.length;x++)(w=e.children[0].children[parseInt(x.toString(),10)])&&(w.children[0].children&&this.measureChild(w),S=this.symbolTable[w.id],w.width=S.width,w.height=S.height,w.measure(new o.c),w.arrange(w.children[0].desiredSize));if(v=a/e.children[0].desiredSize.width,b=s/e.children[0].desiredSize.height,e.children[0].measure(new o.c),e.children[0].arrange(e.children[0].desiredSize),!d)for(var I=void 0,x=0;x<y.length;x++)(I=e.children[0].children[parseInt(x.toString(),10)])&&(I.children[0].children&&this.scaleChildren(I,v,b,t),this.scaleGroup(I,v,b,t));if(d){for(var P=void 0,C=void 0,I=void 0,x=0;x<y.length;x++)P=a/t.wrapper.children[0].desiredSize.width,C=s/t.wrapper.children[0].desiredSize.height,(I=e.children[0].children[parseInt(x.toString(),10)])&&(I.children[0].children&&this.scaleChildren(I,P,C,t,!0),this.scaleGroup(I,P,C,t,!0));t.wrapper.children[0].measure(new o.c),t.wrapper.children[0].arrange(t.wrapper.children[0].desiredSize)}}else i.i(h._11)(e.children[0],r,n,e)},e.prototype.scaleChildren=function(t,e,i,r,n){for(var o,a=0;a<t.children.length;a++)o=t.children[parseInt(a.toString(),10)],o.children[0].children?this.scaleChildren(o,e,i,r,n):this.scaleGroup(o,e,i,r,n)},e.prototype.measureChild=function(t){for(var e,i,r=0;r<t.children.length;r++)e=t.children[parseInt(r.toString(),10)],e.children[0].children?this.measureChild(e):(i=this.symbolTable[e.id],e.width=i.width,e.height=i.height,e.measure(new o.c),e.arrange(e.children[0].desiredSize))},e.prototype.scaleGroup=function(t,e,i,r,n){t.width=t.width*e,t.height=t.height*i,t.offsetX=n?t.offsetX*e-r.style.strokeWidth:t.offsetX*e+r.style.strokeWidth/2,t.offsetY=n?t.offsetY*i-r.style.strokeWidth:t.offsetY*i+r.style.strokeWidth/2,t.measure(new o.c),t.arrange(t.children[0].desiredSize)},e.prototype.refreshPalettes=function(){i.i(r.isBlazor)()||(this.accordionElement.items=[]),i.i(s.P)("e-remove-palette",this.element.id),this.updatePalettes(),i.i(r.isBlazor)()||this.accordionElement.dataBind()},e.prototype.updatePalettes=function(){for(var t=0;t<this.palettes.length;t++){var e=this.palettes[parseInt(t.toString(),10)];this.initSymbols(e),this.renderPalette(e)}},e.prototype.createTextbox=function(){var t=i.i(s.a)("div",{id:this.element.id+"_search"});i.i(s.i)(t,"backgroundColor:white;height:30px"),t.className="e-input-group",this.element.appendChild(t);var e=i.i(s.a)("input",{});e.placeholder=this.l10n.getConstant("SearchShapes"),e.id="textEnter",i.i(s.i)(e,"width:100%;height:auto"),e.className="e-input",t.appendChild(e);var r=i.i(s.a)("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});t.appendChild(r)},e.prototype.getFilterSymbol=function(t){for(var e=[],i=0;i<t.length;i++)for(var r=0;r<this.ignoreSymbolsOnSearch.length;r++)this.ignoreSymbolsOnSearch[parseInt(r.toString(),10)]!==t[parseInt(i.toString(),10)].id&&e.push(t[0]);return e},e.prototype.searchPalette=function(t){var e,n=[],o=document.getElementById("SearchPalette");if(o)for(var a=o.children.length-1;a>=0;a--)o.removeChild(o.children[parseInt(a.toString(),10)]);for(var h=0;h<this.palettes.length;h++)for(var l=this.palettes[parseInt(h.toString(),10)],c=0;c<l.symbols.length;c++){var p=l.symbols[parseInt(c.toString(),10)];""!==t&&-1!==p.id.toLowerCase().indexOf(t.toLowerCase())&&n.push(p)}var g=i.i(d.h)(this.filterSymbols);if(g&&(n=g(n)||[]),this.ignoreSymbolsOnSearch&&this.ignoreSymbolsOnSearch.length>0&&(n=this.getFilterSymbol(n)),o||i.i(r.isBlazor)()||(e=this.createSearchPalette(e),o=e),n.length>0)for(var u=0,f=n;u<f.length;u++){var m=f[u];""===m.parentId&&this.getSymbolContainer(m,o)}else if(""!==t){var y=i.i(s.a)("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});y.innerHTML="No Items To Display",o.appendChild(y)}else{var v=document.getElementById("iconSearch");if(v.className="e-input-group-icon e-search e-icons",!i.i(r.isBlazor)()){this.accordionElement.removeItem(0);var b=document.getElementById("SearchPalette");b&&b.remove()}}},e.prototype.createSearchPalette=function(t){t=i.i(s.a)("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(t);var e={header:"Search Results",expanded:!0,content:"#SearchPalette"};return this.accordionElement.addItem(e,0),t},e.prototype.wireEvents=function(){var t=r.Browser.touchStartEvent,e=r.Browser.touchEndEvent,i=r.Browser.touchMoveEvent;r.EventHandler.add(this.element,t,this.mouseDown,this),r.EventHandler.add(this.element,i,this.mouseMove,this),r.EventHandler.add(this.element,e,this.mouseUp,this),r.EventHandler.add(this.element,"keyup",this.keyUp,this),r.EventHandler.add(document,"keydown",this.keyDown,this),this.initDraggable()},e.prototype.unWireEvents=function(){var t=r.Browser.touchStartEvent,e=r.Browser.touchEndEvent,i=r.Browser.touchMoveEvent;r.EventHandler.remove(this.element,t,this.mouseDown),r.EventHandler.remove(this.element,i,this.mouseMove),r.EventHandler.remove(this.element,e,this.mouseUp),r.EventHandler.remove(this.element,"keyup",this.keyUp),r.EventHandler.remove(document,"keydown",this.keyDown)},u([i.i(r.Property)("S")],e.prototype,"accessKey",void 0),u([i.i(r.Property)("100%")],e.prototype,"width",void 0),u([i.i(r.Property)("100%")],e.prototype,"height",void 0),u([i.i(r.Collection)([],m)],e.prototype,"palettes",void 0),u([i.i(r.Property)()],e.prototype,"getSymbolInfo",void 0),u([i.i(r.Property)({fit:!0})],e.prototype,"symbolInfo",void 0),u([i.i(r.Property)()],e.prototype,"filterSymbols",void 0),u([i.i(r.Property)()],e.prototype,"ignoreSymbolsOnSearch",void 0),u([i.i(r.Property)()],e.prototype,"getSymbolTemplate",void 0),u([i.i(r.Property)()],e.prototype,"symbolWidth",void 0),u([i.i(r.Property)()],e.prototype,"symbolHeight",void 0),u([i.i(r.Complex)({left:10,right:10,top:10,bottom:10},o.S)],e.prototype,"symbolMargin",void 0),u([i.i(r.Property)(!0)],e.prototype,"allowDrag",void 0),u([i.i(r.Complex)({},v)],e.prototype,"symbolPreview",void 0),u([i.i(r.Complex)({},y)],e.prototype,"symbolDragSize",void 0),u([i.i(r.Property)(!1)],e.prototype,"enableSearch",void 0),u([i.i(r.Property)(!0)],e.prototype,"enableAnimation",void 0),u([i.i(r.Property)("Multiple")],e.prototype,"expandMode",void 0),u([i.i(r.Event)()],e.prototype,"paletteSelectionChange",void 0),u([i.i(r.Event)()],e.prototype,"paletteExpanding",void 0),u([i.i(r.Property)()],e.prototype,"getNodeDefaults",void 0),u([i.i(r.Property)()],e.prototype,"nodeDefaults",void 0),u([i.i(r.Property)()],e.prototype,"getConnectorDefaults",void 0),u([i.i(r.Property)()],e.prototype,"connectorDefaults",void 0),e}(r.Component)},function(t,e){t.exports=i},function(t,e){t.exports=r}])});